{"title":"19+ JavaScript Shorthand Coding Techniques","sourceUrl":"https://www.sitepoint.com/shorthand-javascript-techniques/","path":"JavaScript/JavaScript/JavaScript/JavaScript/JavaScript/JavaScript/JavaScript/","category":"JavaScript","tags":["JavaScript"," Tips & Tricks"],"excerpt":"This really is a must read for any JavaScript-based developer. I have written this article as a vital source of reference for learning shorthand JavaScript coding techniques that I have picked up over the years. To help you understand what is going on I have included the longhand versions to give some coding perspective.","date":{"$$date":1540828894828},"coverImage":"","type":"Post","frontmatter":"---\npath: \"JavaScript/\"\ndate: \"2018-10-12\"\ntitle: \"19+ JavaScript Shorthand Coding Techniques\"\ntags: [\"JavaScript\",\"Tips & Tricks\"]\ncategory: \"JavaScript\"\ncategoryColor: \"#F3C610\"\nexcerpt: \"This really is a must read for any JavaScript-based developer. I have written this article as a vital source of reference for learning shorthand JavaScript coding techniques that I have picked up over the years. To help you understand what is going on I have included the longhand versions to give some coding perspective.\"\ncoverImage: \"\"\nsourceUrl: \"https://www.sitepoint.com/shorthand-javascript-techniques/\"\ntype: \"Post\"\n---\n    ","filePath":"pages/JavaScript/.md","_id":"2DKvxBjoYH9lL4Vq","htmlCode":"<div><div><div>\n      <p><img src=\"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/jquery4u/2013/02/improve-your-javascript.jpg\" alt=\"improve-your-javascript\" width=\"820\" height=\"150\"></p>\n<p><strong>This really is a must read for any JavaScript-based developer</strong>. I have written this article as a vital source of reference for learning shorthand JavaScript coding techniques that I have picked up over the years. To help you understand what is going on I have included the longhand versions to give some coding perspective.</p>\n<blockquote>\n<p><strong>June 14th, 2017</strong>: This article was updated to add new shorthand tips based on ES6. If you want to learn more about the changes in ES6, sign up for SitePoint Premium and check out our screencast <a href=\"https://www.sitepoint.com/premium/screencasts/a-look-into-es2016\">A Look into ES6</a></p>\n</blockquote>\n<h2>1. The Ternary Operator</h2>\n<div><div><span>--ADVERTISEMENT--</span></div>\n\n\n<script src=\"https://play.aniview.com/5858ed930b8ee8851941a7bb/59627b0528a0616e231692a2/SitepointPMP.js\"></script><script>\nvar el = document.getElementById('aniBox');\nvar adBox = document.getElementById('adBox');\n// create an observer instance\nvar observer = new MutationObserver(function(mutations) {\n  mutations.forEach(function(mutation) {\n    if(mutation.attributeName == 'style'){\n      var s = el.getAttribute('style');\n      if(s.search('height: 360px') !=  -1) {\n        adBox.style = 'display: block';\n      }\n      else {\n        adBox.style = 'display: none';\n      }\n}\n  });    \n});\n\n// configuration of the observer:\nvar config = { attributes: true, attributeFilter: ['style']};\n \n// pass in the target node, as well as the observer options\nobserver.observe(el, config);\n</script></div><p>This is a great code saver when you want to write an if..else statement in just one line.</p>\n<p>Longhand:</p>\n<pre><code><span>const</span> x <span>=</span> <span>20</span><span>;</span>\n<span>let</span> answer<span>;</span>\n<span>if</span> <span>(</span>x <span>&gt;</span> <span>10</span><span>)</span> <span>{</span>\n    answer <span>=</span> <span>'greater than 10'</span><span>;</span>\n<span>}</span> <span>else</span> <span>{</span>\n    answer <span>=</span> <span>'less than 10'</span><span>;</span>\n<span>}</span>\n</code></pre>\n<p>Shorthand:</p>\n<pre><code><span>const</span> answer <span>=</span> x <span>&gt;</span> <span>10</span> <span>?</span> <span>'greater than 10'</span> <span>:</span> <span>'less than 10'</span><span>;</span>\n</code></pre>\n<p>You can also nest your if statement like this:</p>\n<pre><code><span>const</span> answer <span>=</span> x <span>&gt;</span> <span>10</span> <span>?</span> <span>\" greater than 10\"</span> <span>:</span> x </code></pre>\n<h2>2. Short-circuit Evaluation Shorthand</h2>\n<p>When assigning a variable value to another variable, you may want to ensure that the source variable is not null, undefined or empty. You can either write a long if statement with multiple conditionals, or use a short-circuit evaluation.</p>\n<p>Longhand:</p>\n<pre><code><span>if</span> <span>(</span>variable1 <span>!==</span> <span>null</span> <span>||</span> variable1 <span>!==</span> undefined <span>||</span> variable1 <span>!==</span> <span>''</span><span>)</span> <span>{</span>\n     <span>let</span> variable2 <span>=</span> variable1<span>;</span>\n<span>}</span>\n</code></pre>\n<p>Shorthand:</p>\n<pre><code><span>const</span> variable2 <span>=</span> variable1  <span>||</span> <span>'new'</span><span>;</span>\n</code></pre>\n<p>Don’t believe me? Test it yourself (paste the following code in <a href=\"https://es6console.com/\">es6console</a>):</p>\n<pre><code><span>let</span> variable1<span>;</span>\n<span>let</span> variable2 <span>=</span> variable1  <span>||</span> <span>''</span><span>;</span>\nconsole<span>.</span><span>log</span><span>(</span>variable2 <span>===</span> <span>''</span><span>)</span><span>;</span> <span spellcheck=\"true\">// prints true</span>\n\nvariable1 <span>=</span> <span>'foo'</span><span>;</span>\nvariable2 <span>=</span> variable1  <span>||</span> <span>''</span><span>;</span>\nconsole<span>.</span><span>log</span><span>(</span>variable2<span>)</span><span>;</span> <span spellcheck=\"true\">// prints foo</span>\n</code></pre>\n<h2>3. Declaring Variables Shorthand</h2>\n<p>It is good practice to declare your variable assignments at the beginning of your functions. This shorthand method can save you lots of time and space when declaring multiple variables at the same time.</p>\n<p>Longhand:</p>\n<pre><code><span>let</span> x<span>;</span>\n<span>let</span> y<span>;</span>\n<span>let</span> z <span>=</span> <span>3</span><span>;</span>\n</code></pre>\n<p>Shorthand:</p>\n<pre><code><span>let</span> x<span>,</span> y<span>,</span> z<span>=</span><span>3</span><span>;</span>\n</code></pre>\n<h2>4. If Presence Shorthand</h2>\n<p>This might be trivial, but worth a mention. When doing “if checks”, assignment operators can sometimes be omitted.</p>\n<p>Longhand:</p>\n<pre><code><span>if</span> <span>(</span>likeJavaScript <span>===</span> <span>true</span><span>)</span>\n</code></pre>\n<p>Shorthand:</p>\n<pre><code><span>if</span> <span>(</span>likeJavaScript<span>)</span>\n</code></pre>\n<blockquote>\n<p><strong>Note:</strong> these two examples are not exactly equal, as the shorthand check will pass as long as <code>likeJavaScript</code> is a <a href=\"https://developer.mozilla.org/en-US/docs/Glossary/Truthy\">truthy value</a>.</p>\n</blockquote>\n<p>Here is another example. If “a” is NOT equal to true, then do something.</p>\n<p>Longhand:</p>\n<pre><code><span>let</span> a<span>;</span>\n<span>if</span> <span>(</span> a <span>!==</span> <span>true</span> <span>)</span> <span>{</span>\n<span spellcheck=\"true\">// do something...</span>\n<span>}</span>\n</code></pre>\n<p>Shorthand:</p>\n<pre><code><span>let</span> a<span>;</span>\n<span>if</span> <span>(</span> <span>!</span>a <span>)</span> <span>{</span>\n<span spellcheck=\"true\">// do something...</span>\n<span>}</span>\n</code></pre>\n<h2>5. JavaScript for Loop Shorthand</h2>\n<p>This little tip is really useful if you want plain JavaScript and not rely on external libraries such as jQuery or lodash.</p>\n<p>Longhand:</p>\n<pre><code><span>for</span> <span>(</span><span>let</span> i <span>=</span> <span>0</span><span>;</span> i <span>&lt;</span> allImgs<span>.</span>length<span>;</span> i<span>++</span><span>)</span>\n</code></pre>\n<p>Shorthand:</p>\n<pre><code><span>for</span> <span>(</span><span>let</span> index <span>of</span> allImgs<span>)</span>\n</code></pre>\n<p>Shorthand for Array.forEach:</p>\n<pre><code><span>function</span> <span>logArrayElements</span><span>(</span>element<span>,</span> index<span>,</span> array<span>)</span> <span>{</span>\n  console<span>.</span><span>log</span><span>(</span><span>\"a[\"</span> <span>+</span> index <span>+</span> <span>\"] = \"</span> <span>+</span> element<span>)</span><span>;</span>\n<span>}</span>\n<span>[</span><span>2</span><span>,</span> <span>5</span><span>,</span> <span>9</span><span>]</span><span>.</span><span>forEach</span><span>(</span>logArrayElements<span>)</span><span>;</span>\n<span spellcheck=\"true\">// logs:</span>\n<span spellcheck=\"true\">// a[0] = 2</span>\n<span spellcheck=\"true\">// a[1] = 5</span>\n<span spellcheck=\"true\">// a[2] = 9</span>\n</code></pre>\n<h2>6. Short-circuit Evaluation</h2>\n<p>Instead of writing six lines of code to assign a default value if the intended parameter is null or undefined, we can simply use a short-circuit logical operator and accomplish the same thing with just one line of code.</p>\n<p>Longhand:</p>\n<pre><code><span>let</span> dbHost<span>;</span>\n<span>if</span> <span>(</span>process<span>.</span>env<span>.</span>DB_HOST<span>)</span> <span>{</span>\n  dbHost <span>=</span> process<span>.</span>env<span>.</span>DB_HOST<span>;</span>\n<span>}</span> <span>else</span> <span>{</span>\n  dbHost <span>=</span> <span>'localhost'</span><span>;</span>\n<span>}</span>\n</code></pre>\n<p>Shorthand:</p>\n<pre><code><span>const</span> dbHost <span>=</span> process<span>.</span>env<span>.</span>DB_HOST <span>||</span> <span>'localhost'</span><span>;</span>\n</code></pre>\n<h2>7. Decimal base exponents</h2>\n<p>You may have seen this one around. It’s essentially a fancy way to write numbers without the trailing zeros. For example, 1e7 essentially means 1 followed by 7 zeros. It represents a decimal base (which JavaScript interprets as a float type) equal to 10,000,000.</p>\n<p>Longhand:</p>\n<pre><code><span>for</span> <span>(</span><span>let</span> i <span>=</span> <span>0</span><span>;</span> i <span>&lt;</span> <span>10000</span><span>;</span> i<span>++</span><span>)</span> <span>{</span><span>}</span>\n</code></pre>\n<p>Shorthand:</p>\n<pre><code><span>for</span> <span>(</span><span>let</span> i <span>=</span> <span>0</span><span>;</span> i <span>&lt;</span> <span>1e7</span><span>;</span> i<span>++</span><span>)</span> <span>{</span><span>}</span>\n\n<span spellcheck=\"true\">// All the below will evaluate to true</span>\n<span>1e0</span> <span>===</span> <span>1</span><span>;</span>\n<span>1e1</span> <span>===</span> <span>10</span><span>;</span>\n<span>1e2</span> <span>===</span> <span>100</span><span>;</span>\n<span>1e3</span> <span>===</span> <span>1000</span><span>;</span>\n<span>1e4</span> <span>===</span> <span>10000</span><span>;</span>\n<span>1e5</span> <span>===</span> <span>100000</span><span>;</span>\n</code></pre>\n<h2>8. Object Property Shorthand</h2>\n<p>Defining object literals in JavaScript makes life much easier. ES6 provides an even easier way of assigning properties to objects. If the property name is the same as the key name, you can take advantage of the shorthand notation.</p>\n<p>Longhand:</p>\n<pre><code><span>const</span> obj <span>=</span> <span>{</span> x<span>:</span>x<span>,</span> y<span>:</span>y <span>}</span><span>;</span>\n</code></pre>\n<p>Shorthand:</p>\n<pre><code><span>const</span> obj <span>=</span> <span>{</span> x<span>,</span> y <span>}</span><span>;</span>\n</code></pre>\n<h2>9. Arrow Functions Shorthand</h2>\n<p>Classical functions are easy to read and write in their plain form, but they do tend to become a bit verbose and confusing once you start nesting them in other function calls.</p>\n<p>Longhand:</p>\n<pre><code><span>function</span> <span>sayHello</span><span>(</span>name<span>)</span> <span>{</span>\n  console<span>.</span><span>log</span><span>(</span><span>'Hello'</span><span>,</span> name<span>)</span><span>;</span>\n<span>}</span>\n\n<span>setTimeout</span><span>(</span><span>function</span><span>(</span><span>)</span> <span>{</span>\n  console<span>.</span><span>log</span><span>(</span><span>'Loaded'</span><span>)</span>\n<span>}</span><span>,</span> <span>2000</span><span>)</span><span>;</span>\n\nlist<span>.</span><span>forEach</span><span>(</span><span>function</span><span>(</span>item<span>)</span> <span>{</span>\n  console<span>.</span><span>log</span><span>(</span>item<span>)</span><span>;</span>\n<span>}</span><span>)</span><span>;</span>\n</code></pre>\n<p>Shorthand:</p>\n<pre><code>sayHello <span>=</span> name <span>=</span><span>&gt;</span> console<span>.</span><span>log</span><span>(</span><span>'Hello'</span><span>,</span> name<span>)</span><span>;</span>\n\n<span>setTimeout</span><span>(</span><span>(</span><span>)</span> <span>=</span><span>&gt;</span> console<span>.</span><span>log</span><span>(</span><span>'Loaded'</span><span>)</span><span>,</span> <span>2000</span><span>)</span><span>;</span>\n\nlist<span>.</span><span>forEach</span><span>(</span>item <span>=</span><span>&gt;</span> console<span>.</span><span>log</span><span>(</span>item<span>)</span><span>)</span><span>;</span>\n</code></pre>\n<p>It’s important to note that the value of <code><span>this</span></code> inside an arrow function is determined differently than for longhand functions, so the two examples are not strictly equivalent. See <a href=\"https://www.sitepoint.com/es6-arrow-functions-new-fat-concise-syntax-javascript/\">this article on arrow function syntax</a> for more details.</p>\n<h2>10. Implicit Return Shorthand</h2>\n<p>Return is a keyword we use often to return the final result of a function. An arrow functions with a single statement will implicitly return the result its evaluation (the function must omit the braces (<code><span>{</span><span>}</span></code>) in order to omit the return keyword). </p>\n<p>To return a multi-line statement (such as an object literal), it’s necessary to use <code><span>(</span><span>)</span></code> instead of <code><span>{</span><span>}</span></code> to wrap your function body. This ensures the code is evaluated as a single statement.</p>\n<p>Longhand:</p>\n<pre><code><span>function</span> <span>calcCircumference</span><span>(</span>diameter<span>)</span> <span>{</span>\n  <span>return</span> Math<span>.</span>PI <span>*</span> diameter\n<span>}</span>\n</code></pre>\n<p>Shorthand:</p>\n<pre><code>calcCircumference <span>=</span> diameter <span>=</span><span>&gt;</span> <span>(</span>\n  Math<span>.</span>PI <span>*</span> diameter<span>;</span>\n<span>)</span>\n</code></pre>\n<h2>11. Default Parameter Values</h2>\n<p>You can use the if statement to define default values for function parameters. In ES6, you can define the default values in the function declaration itself.</p>\n<p>Longhand:</p>\n<pre><code><span>function</span> <span>volume</span><span>(</span>l<span>,</span> w<span>,</span> h<span>)</span> <span>{</span>\n  <span>if</span> <span>(</span>w <span>===</span> undefined<span>)</span>\n    w <span>=</span> <span>3</span><span>;</span>\n  <span>if</span> <span>(</span>h <span>===</span> undefined<span>)</span>\n    h <span>=</span> <span>4</span><span>;</span>\n  <span>return</span> l <span>*</span> w <span>*</span> h<span>;</span>\n<span>}</span>\n</code></pre>\n<p>Shorthand:</p>\n<pre><code>volume <span>=</span> <span>(</span>l<span>,</span> w <span>=</span> <span>3</span><span>,</span> h <span>=</span> <span>4</span> <span>)</span> <span>=</span><span>&gt;</span> <span>(</span>l <span>*</span> w <span>*</span> h<span>)</span><span>;</span>\n\n<span>volume</span><span>(</span><span>2</span><span>)</span> <span spellcheck=\"true\">//output: 24</span>\n</code></pre>\n<h2>12. Template Literals</h2>\n<p>Aren’t you tired of using <code><span>' + '</span></code> to concatenate multiple variables into a string? Isn’t there a much easier way of doing this? If you are able to use ES6, then you are in luck. All you need to do is use is the backtick, and <code>$<span>{</span><span>}</span></code> to enclose your variables.</p>\n<p>Longhand:</p>\n<pre><code><span>const</span> welcome <span>=</span> <span>'You have logged in as '</span> <span>+</span> first <span>+</span> <span>' '</span> <span>+</span> last <span>+</span> <span>'.'</span>\n\n<span>const</span> db <span>=</span> <span>'http://'</span> <span>+</span> host <span>+</span> <span>':'</span> <span>+</span> port <span>+</span> <span>'/'</span> <span>+</span> database<span>;</span>\n</code></pre>\n<p>Shorthand:</p>\n<pre><code><span>const</span> welcome <span>=</span> <span><span>`You have logged in as </span><span><span>${</span>first<span>}</span></span><span> </span><span><span>${</span>last<span>}</span></span><span>`</span></span><span>;</span>\n\n<span>const</span> db <span>=</span> <span><span>`http://</span><span><span>${</span>host<span>}</span></span><span>:</span><span><span>${</span>port<span>}</span></span><span>/</span><span><span>${</span>database<span>}</span></span><span>`</span></span><span>;</span>\n</code></pre>\n<h2>13. Destructuring Assignment Shorthand</h2>\n<p>If you are working with any popular web framework, there are high chances you will be using arrays or data in the form of object literals to pass information between components and APIs. Once the data object reaches a component, you’ll need to unpack it.</p>\n<p>Longhand:</p>\n<pre><code><span>const</span> observable <span>=</span> <span>require</span><span>(</span><span>'mobx/observable'</span><span>)</span><span>;</span>\n<span>const</span> action <span>=</span> <span>require</span><span>(</span><span>'mobx/action'</span><span>)</span><span>;</span>\n<span>const</span> runInAction <span>=</span> <span>require</span><span>(</span><span>'mobx/runInAction'</span><span>)</span><span>;</span>\n\n<span>const</span> store <span>=</span> <span>this</span><span>.</span>props<span>.</span>store<span>;</span>\n<span>const</span> form <span>=</span> <span>this</span><span>.</span>props<span>.</span>form<span>;</span>\n<span>const</span> loading <span>=</span> <span>this</span><span>.</span>props<span>.</span>loading<span>;</span>\n<span>const</span> errors <span>=</span> <span>this</span><span>.</span>props<span>.</span>errors<span>;</span>\n<span>const</span> entity <span>=</span> <span>this</span><span>.</span>props<span>.</span>entity<span>;</span>\n</code></pre>\n<p>Shorthand:</p>\n<pre><code><span>import</span> <span>{</span> observable<span>,</span> action<span>,</span> runInAction <span>}</span> <span>from</span> <span>'mobx'</span><span>;</span>\n\n<span>const</span> <span>{</span> store<span>,</span> form<span>,</span> loading<span>,</span> errors<span>,</span> entity <span>}</span> <span>=</span> <span>this</span><span>.</span>props<span>;</span>\n</code></pre>\n<p>You can even assign your own variable names:</p>\n<pre><code><span>const</span> <span>{</span> store<span>,</span> form<span>,</span> loading<span>,</span> errors<span>,</span> entity<span>:</span>contact <span>}</span> <span>=</span> <span>this</span><span>.</span>props<span>;</span>\n</code></pre>\n<h2>14. Multi-line String Shorthand</h2>\n<p>If you have ever found yourself in need of writing multi-line strings in code, this is how you would write it:</p>\n<p>Longhand:</p>\n<pre><code><span>const</span> lorem <span>=</span> <span>'Lorem ipsum dolor sit amet, consectetur\\n\\t'</span>\n    <span>+</span> <span>'adipisicing elit, sed do eiusmod tempor incididunt\\n\\t'</span>\n    <span>+</span> <span>'ut labore et dolore magna aliqua. Ut enim ad minim\\n\\t'</span>\n    <span>+</span> <span>'veniam, quis nostrud exercitation ullamco laboris\\n\\t'</span>\n    <span>+</span> <span>'nisi ut aliquip ex ea commodo consequat. Duis aute\\n\\t'</span>\n    <span>+</span> <span>'irure dolor in reprehenderit in voluptate velit esse.\\n\\t'</span>\n</code></pre>\n<p>But there is an easier way. Just use backticks.</p>\n<p>Shorthand:</p>\n<pre><code><span>const</span> lorem <span>=</span> <span><span>`Lorem ipsum dolor sit amet, consectetur\n    adipisicing elit, sed do eiusmod tempor incididunt\n    ut labore et dolore magna aliqua. Ut enim ad minim\n    veniam, quis nostrud exercitation ullamco laboris\n    nisi ut aliquip ex ea commodo consequat. Duis aute\n    irure dolor in reprehenderit in voluptate velit esse.`</span></span>\n</code></pre>\n<h2>15. Spread Operator Shorthand</h2>\n<p>The <strong>spread operator</strong>, introduced in ES6, has several use cases that make JavaScript code more efficient and fun to use. It can be used to replace certain array functions. The spread operator is simply a series of three dots.</p>\n<p>Longhand</p>\n<pre><code><span spellcheck=\"true\">// joining arrays</span>\n<span>const</span> odd <span>=</span> <span>[</span><span>1</span><span>,</span> <span>3</span><span>,</span> <span>5</span><span>]</span><span>;</span>\n<span>const</span> nums <span>=</span> <span>[</span><span>2</span> <span>,</span><span>4</span> <span>,</span> <span>6</span><span>]</span><span>.</span><span>concat</span><span>(</span>odd<span>)</span><span>;</span>\n\n<span spellcheck=\"true\">// cloning arrays</span>\n<span>const</span> arr <span>=</span> <span>[</span><span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>,</span> <span>4</span><span>]</span><span>;</span>\n<span>const</span> arr2 <span>=</span> arr<span>.</span><span>slice</span><span>(</span><span>)</span>\n</code></pre>\n<p>Shorthand:</p>\n<pre><code><span spellcheck=\"true\">// joining arrays</span>\n<span>const</span> odd <span>=</span> <span>[</span><span>1</span><span>,</span> <span>3</span><span>,</span> <span>5</span> <span>]</span><span>;</span>\n<span>const</span> nums <span>=</span> <span>[</span><span>2</span> <span>,</span><span>4</span> <span>,</span> <span>6</span><span>,</span> <span>...</span>odd<span>]</span><span>;</span>\nconsole<span>.</span><span>log</span><span>(</span>nums<span>)</span><span>;</span> <span spellcheck=\"true\">// [ 2, 4, 6, 1, 3, 5 ]</span>\n\n<span spellcheck=\"true\">// cloning arrays</span>\n<span>const</span> arr <span>=</span> <span>[</span><span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>,</span> <span>4</span><span>]</span><span>;</span>\n<span>const</span> arr2 <span>=</span> <span>[</span><span>...</span>arr<span>]</span><span>;</span>\n</code></pre>\n<p>Unlike the <code><span>concat</span><span>(</span><span>)</span></code> function, you can use the spread operator to insert an array anywhere inside another array.</p>\n<pre><code><span>const</span> odd <span>=</span> <span>[</span><span>1</span><span>,</span> <span>3</span><span>,</span> <span>5</span> <span>]</span><span>;</span>\n<span>const</span> nums <span>=</span> <span>[</span><span>2</span><span>,</span> <span>...</span>odd<span>,</span> <span>4</span> <span>,</span> <span>6</span><span>]</span><span>;</span>\n</code></pre>\n<p>You can also combine the spread operator with ES6 destructuring notation:</p>\n<pre><code><span>const</span> <span>{</span> a<span>,</span> b<span>,</span> <span>...</span>z <span>}</span> <span>=</span> <span>{</span> a<span>:</span> <span>1</span><span>,</span> b<span>:</span> <span>2</span><span>,</span> c<span>:</span> <span>3</span><span>,</span> d<span>:</span> <span>4</span> <span>}</span><span>;</span>\nconsole<span>.</span><span>log</span><span>(</span>a<span>)</span> <span spellcheck=\"true\">// 1</span>\nconsole<span>.</span><span>log</span><span>(</span>b<span>)</span> <span spellcheck=\"true\">// 2</span>\nconsole<span>.</span><span>log</span><span>(</span>z<span>)</span> <span spellcheck=\"true\">// { c: 3, d: 4 }</span>\n</code></pre>\n<h2>16. Mandatory Parameter Shorthand</h2>\n<p>By default, JavaScript will set function parameters to <code>undefined</code> if they are not passed a value. Some other languages will throw a warning or error. To enforce parameter assignment, you can use an <code><span>if</span></code> statement to throw an error if <code>undefined</code>, or you can take advantage of the ‘Mandatory parameter shorthand’.</p>\n<p>Longhand:</p>\n<pre><code><span>function</span> <span>foo</span><span>(</span>bar<span>)</span> <span>{</span>\n  <span>if</span><span>(</span>bar <span>===</span> undefined<span>)</span> <span>{</span>\n    <span>throw</span> <span>new</span> <span>Error</span><span>(</span><span>'Missing parameter!'</span><span>)</span><span>;</span>\n  <span>}</span>\n  <span>return</span> bar<span>;</span>\n<span>}</span>\n</code></pre>\n<p>Shorthand:</p>\n<pre><code>mandatory <span>=</span> <span>(</span><span>)</span> <span>=</span><span>&gt;</span> <span>{</span>\n  <span>throw</span> <span>new</span> <span>Error</span><span>(</span><span>'Missing parameter!'</span><span>)</span><span>;</span>\n<span>}</span>\n\nfoo <span>=</span> <span>(</span>bar <span>=</span> <span>mandatory</span><span>(</span><span>)</span><span>)</span> <span>=</span><span>&gt;</span> <span>{</span>\n  <span>return</span> bar<span>;</span>\n<span>}</span>\n</code></pre>\n<h2>17. Array.find Shorthand</h2>\n<p>If you have ever been tasked with writing a find function in plain JavaScript, you would probably have used a for loop. In ES6, a new array function named <code><span>find</span><span>(</span><span>)</span></code> was introduced.</p>\n<p>Longhand:</p>\n<pre><code><span>const</span> pets <span>=</span> <span>[</span>\n  <span>{</span> type<span>:</span> <span>'Dog'</span><span>,</span> name<span>:</span> <span>'Max'</span><span>}</span><span>,</span>\n  <span>{</span> type<span>:</span> <span>'Cat'</span><span>,</span> name<span>:</span> <span>'Karl'</span><span>}</span><span>,</span>\n  <span>{</span> type<span>:</span> <span>'Dog'</span><span>,</span> name<span>:</span> <span>'Tommy'</span><span>}</span><span>,</span>\n<span>]</span>\n\n<span>function</span> <span>findDog</span><span>(</span>name<span>)</span> <span>{</span>\n  <span>for</span><span>(</span><span>let</span> i <span>=</span> <span>0</span><span>;</span> i<span>&lt;</span>pets<span>.</span>length<span>;</span> <span>++</span>i<span>)</span> <span>{</span>\n    <span>if</span><span>(</span>pets<span>[</span>i<span>]</span><span>.</span>type <span>===</span> <span>'Dog'</span> <span>&amp;&amp;</span> pets<span>[</span>i<span>]</span><span>.</span>name <span>===</span> name<span>)</span> <span>{</span>\n      <span>return</span> pets<span>[</span>i<span>]</span><span>;</span>\n    <span>}</span>\n  <span>}</span>\n<span>}</span>\n</code></pre>\n<p>Shorthand:</p>\n<pre><code>pet <span>=</span> pets<span>.</span><span>find</span><span>(</span>pet <span>=</span><span>&gt;</span> pet<span>.</span>type <span>===</span><span>'Dog'</span> <span>&amp;&amp;</span> pet<span>.</span>name <span>===</span> <span>'Tommy'</span><span>)</span><span>;</span>\nconsole<span>.</span><span>log</span><span>(</span>pet<span>)</span><span>;</span> <span spellcheck=\"true\">// { type: 'Dog', name: 'Tommy' }</span>\n</code></pre>\n<h2>18. Object [key] Shorthand</h2>\n<p>Did you know that <code>Foo<span>.</span>bar</code> can also be written as <code>Foo<span>[</span><span>'bar'</span><span>]</span></code>? At first, there doesn’t seem to be a reason why you should write it like that. However, this notation gives you the building block for writing re-usable code. </p>\n<p>Consider this simplified example of a validation function:</p>\n<pre><code><span>function</span> <span>validate</span><span>(</span>values<span>)</span> <span>{</span>\n  <span>if</span><span>(</span><span>!</span>values<span>.</span>first<span>)</span>\n    <span>return</span> <span>false</span><span>;</span>\n  <span>if</span><span>(</span><span>!</span>values<span>.</span>last<span>)</span>\n    <span>return</span> <span>false</span><span>;</span>\n  <span>return</span> <span>true</span><span>;</span>\n<span>}</span>\n\nconsole<span>.</span><span>log</span><span>(</span><span>validate</span><span>(</span><span>{</span>first<span>:</span><span>'Bruce'</span><span>,</span>last<span>:</span><span>'Wayne'</span><span>}</span><span>)</span><span>)</span><span>;</span> <span spellcheck=\"true\">// true</span>\n</code></pre>\n<p>This function does its job perfectly. However, consider a scenario where you have very many forms where you need to apply the validation but with different fields and rules. Wouldn’t it be nice to build a generic validation function that can be configured at runtime?</p>\n<p>Shorthand:</p>\n<pre><code><span spellcheck=\"true\">// object validation rules</span>\n<span>const</span> schema <span>=</span> <span>{</span>\n  first<span>:</span> <span>{</span>\n    required<span>:</span><span>true</span>\n  <span>}</span><span>,</span>\n  last<span>:</span> <span>{</span>\n    required<span>:</span><span>true</span>\n  <span>}</span>\n<span>}</span>\n\n<span spellcheck=\"true\">// universal validation function</span>\n<span>const</span> validate <span>=</span> <span>(</span>schema<span>,</span> values<span>)</span> <span>=</span><span>&gt;</span> <span>{</span>\n  <span>for</span><span>(</span>field <span>in</span> schema<span>)</span> <span>{</span>\n    <span>if</span><span>(</span>schema<span>[</span>field<span>]</span><span>.</span>required<span>)</span> <span>{</span>\n      <span>if</span><span>(</span><span>!</span>values<span>[</span>field<span>]</span><span>)</span> <span>{</span>\n        <span>return</span> <span>false</span><span>;</span>\n      <span>}</span>\n    <span>}</span>\n  <span>}</span>\n  <span>return</span> <span>true</span><span>;</span>\n<span>}</span>\n\n\nconsole<span>.</span><span>log</span><span>(</span><span>validate</span><span>(</span>schema<span>,</span> <span>{</span>first<span>:</span><span>'Bruce'</span><span>}</span><span>)</span><span>)</span><span>;</span> <span spellcheck=\"true\">// false</span>\nconsole<span>.</span><span>log</span><span>(</span><span>validate</span><span>(</span>schema<span>,</span> <span>{</span>first<span>:</span><span>'Bruce'</span><span>,</span>last<span>:</span><span>'Wayne'</span><span>}</span><span>)</span><span>)</span><span>;</span> <span spellcheck=\"true\">// true</span>\n</code></pre>\n<p>Now we have a validate function we can reuse in all forms without needing to write a custom validation function for each.</p>\n<h2>19. Double Bitwise NOT Shorthand</h2>\n<p>Bitwise operators are one of those features you learn about in beginner JavaScript tutorials and you never get to implement them anywhere. Besides, who wants to work with ones and zeroes if you are not dealing with binary?</p>\n<p>There is, however, a very practical use case for the Double Bitwise NOT operator. You can use it as a replacement for <code>Math<span>.</span><span>floor</span><span>(</span><span>)</span></code>. The advantage of the Double Bitwise NOT operator is that it performs the same operation much faster. You can read more about Bitwise operators <a href=\"https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators\">here</a>.</p>\n<p>Longhand:</p>\n<pre><code>Math<span>.</span><span>floor</span><span>(</span><span>4.9</span><span>)</span> <span>===</span> <span>4</span>  <span spellcheck=\"true\">//true</span>\n</code></pre>\n<p>Shorthand:</p>\n<pre><code><span>~</span><span>~</span><span>4.9</span> <span>===</span> <span>4</span>  <span spellcheck=\"true\">//true</span>\n</code></pre>\n<h2>20. Suggest One?</h2>\n<p><br></p><div>\n      </div>\n      \n      </div></div></div>","dateUpdated":1540828894828,"author":"Michael Wanyoike & Sam Deering"}
{"date":"2018-11-14T15:39:07.911Z","title":"Angular Pipes: Isolated Unit Testing","sourceUrl":"https://www.amadousall.com/angular-pipes-unit-testing-angular-pipes/","path":"Angular/","category":"Angular","tags":["Angular"," Unit Testing"," TDD"],"author":"Amadou Sall","excerpt":"In Angular, pipes allow us to transform data before displaying it. Angular comes with a range of built-in pipes, but sometimes we need to write our own custom pipes. Well, in this case, we also have to write unit tests for them.","dateCreated":1542208960878,"coverImage":"","type":"Post","frontmatter":"---\npath: 'Angular/'\ndate: 'Wed Nov 14 2018 21:09:07 GMT+0530 (India Standard Time)'\ntitle: 'Angular Pipes: Isolated Unit Testing'\ntags: ['Angular','Unit Testing','TDD']\ncategory: 'Angular'\ncategoryColor: '#F3C610'\nexcerpt: 'In Angular, pipes allow us to transform data before displaying it. Angular comes with a range of built-in pipes, but sometimes we need to write our own custom pipes. Well, in this case, we also have to write unit tests for them.'\ncoverImage: ''\nsourceUrl: 'https://www.amadousall.com/angular-pipes-unit-testing-angular-pipes/'\ntype: 'Post'\n---\n    ","htmlCode":"<p>A pipe is one of the most simple Angular concepts.It's a class annotated with the&nbsp;<code>@Pipe</code>decorator that implements the&nbsp;<code>PipeTransform</code>&nbsp;interface. Concretely, a pipe class has one method, the transform method:</p><p><img src=\"https://www.amadousall.com/content/images/2018/02/pipe-transform-interface.png\" alt=\"The PipeTransform interface\"></p><p>Because pipes rarely interact with DOM elements, they are very easy to test. Technically, we can test them without using the Angular testing utilities, or TestBed. But it is best to write some Angular tests for pipes because we will want to detect potential runtime bugs when pipes are used in conjunction with Angular components.</p><p>Therefore, we should write two types of unit tests:</p><ul><li>Isolated tests (without TestBed)</li><li>Integrated tests (with TestBed)</li></ul><p>In this article, we will learn how to write isolated unit tests for our pipes.<br>In a&nbsp;<a href=\"https://www.amadousall.com/angular-pipes-integrated-unit-testing/\">next blog post</a>, we will see how to test pipes using&nbsp;<code>TestBed</code>&nbsp;aka Angular tests.</p><p>We talk about isolated unit testing when we are testing the pipe as a standalone TypeScript class.</p><h2>The Code for the Pipe (mean.pipe.ts)</h2><p>To begin, let's write a pipe that transforms an array to its mean.</p><p><img src=\"https://www.amadousall.com/content/images/2018/02/mean.pipe.ts-1.png\" alt=\"The Mean Pipe\"></p><ol><li>Implement the&nbsp;<code>PipeTransform</code>&nbsp;interface.</li><li>Return the mean of the array of numbers.</li></ol><p>The full source code of this pipe can be found&nbsp;<a href=\"https://gist.github.com/amadousalldotcom/9bcbbc5ee1745bf10c890a5c423bd477\">here</a>.</p><h2>Testing the Pipe in Isolation (mean.pipe.spec.ts)</h2><p><img src=\"https://www.amadousall.com/content/images/2018/02/mean.pipe.spec.ts-1.png\" alt=\"The Mean Pipe - First test\"></p><ol><li>Declare a variable that will hold an instance of the pipe.</li><li>Check that the pipe is correctly instantiated.</li></ol><p>Note that we don't need a&nbsp;<code>BeforeEach</code>&nbsp;block because this pipe's transform method is a pure and stateless function.</p><p>Once we know that our pipe can be instantiated properly, we can start to write test suites.</p><p><img src=\"https://www.amadousall.com/content/images/2018/02/mean.pipe.spec.ts-2-2.png\" alt=\"The Mean Pipe Specs\"></p><ol><li>The 'Bad Inputs' test suite checks the behavior of our pipe when unexpected values are passed to its transform method.</li><li>The 'Calculations' test suite checks if the pipe transforms the data correctly when correct inputs are passed to it.</li></ol><p>The full source code of these test suites can be found&nbsp;<a href=\"https://gist.github.com/amadousalldotcom/34ba2a29df55ff57646efd9a413d170b\">here</a></p><h2>Summary</h2><p>In this article, we learned that there were two ways to unit test Angular pipes: isolated tests and integrated tests. But we put the focus on isolated tests and saw how easy it is to write isolated tests for our pipes.<br>In my&nbsp;<a href=\"https://www.amadousall.com/angular-pipes-integrated-unit-testing/\">next blog post</a>, we will learn how to write integrated tests for our Angular pipes.<br>Thank you very much for reading!</p>","filePath":"pages/Angular/.md","_id":"4v8d1kcnJRsLWBlN"}
{"date":"2018-11-06T14:49:46.100Z","title":"Making Websites Better through Accessibility","sourceUrl":"https://nystudio107.com/blog/making-websites-accessible-americans-with-disabilities-act-ada","path":"Accessibility/","category":"Accessibility","tags":["Accessibility"],"author":"Andrew Welch","excerpt":"Mak­ing your web­site acces­si­ble isn’t just about legal com­pli­ance, it also means not turn­ing away cus­tomers. Because who wants to do that?","dateCreated":1541515684032,"coverImage":"","type":"Post","frontmatter":"---\npath: 'Accessibility/'\ndate: 'Tue Nov 06 2018 20:19:46 GMT+0530 (India Standard Time)'\ntitle: 'Making Websites Better through Accessibility'\ntags: ['Accessibility']\ncategory: 'Accessibility'\ncategoryColor: '#F3C610'\nexcerpt: 'Mak­ing your web­site acces­si­ble isn’t just about legal com­pli­ance, it also means not turn­ing away cus­tomers. Because who wants to do that?'\ncoverImage: ''\nsourceUrl: 'https://nystudio107.com/blog/making-websites-accessible-americans-with-disabilities-act-ada'\ntype: 'Post'\n---\n    ","htmlCode":"<div><div><p>Mak­ing your web­site acces­si­ble means mak­ing it avail­able to the largest num­ber of peo­ple pos­si­ble. It’s already a&nbsp;Her­culean task to get peo­ple to your web­site to begin with, so we cer­tain­ly don’t want to turn a % of peo­ple away due to acces­si­bil­i­ty issues.</p><p>I find that many devel­op­ers don’t real­ly under­stand acces­si­bil­i­ty, or shuf­fle it off to the&nbsp;<span></span>​<span>“</span>it’d be nice” list on their tasks. With a&nbsp;lit­tle edu­ca­tion and prop­er tool­ing, it doesn’t have to be that&nbsp;way.</p></div></div><div><div><blockquote>I view website accessibility as customer acquisition, as well as building an inclusive website that serves the most number of people as possible</blockquote></div></div><div><div><p>In many coun­tries, web­site acces­si­bil­i­ty is also man­dat­ed by the law. In the&nbsp;<span>USA</span>, for instance, there is the&nbsp;<a href=\"https://www.ada.gov/\" target=\"_blank\" rel=\"noreferrer noopener\">Amer­i­cans with Dis­abil­i­ties Act</a>&nbsp;(<span>ADA</span>), which the&nbsp;<span>DOJ</span>&nbsp;has made clear extends to the Internet.</p><p>Com­pa­nies such as Tar­get (see&nbsp;<a href=\"https://www.w3.org/WAI/bcase/target-case-study\" target=\"_blank\" rel=\"noreferrer noopener\"><span>NFB</span>&nbsp;V. Tar­get</a>) and Net­flix (see&nbsp;<a href=\"http://www.3playmedia.com/2015/07/23/nad-v-netflix-ada-lawsuit-requires-closed-captioning-on-streaming-video/\" target=\"_blank\" rel=\"noreferrer noopener\"><span>NAD</span>&nbsp;V. Net­flix</a>)&nbsp;have been the sub­ject of law­suits&nbsp;based on this; but it’s also just good busi­ness to allow as many peo­ple as pos­si­ble access to your company’s prod­uct or service.</p><p>If you plan on work­ing on a&nbsp;web­site for&nbsp;<span>US</span>&nbsp;Fed­er­al or State gov­ern­ments (which includes edu­ca­tion­al insti­tu­tions), the&nbsp;<a href=\"https://www.ada.gov/pcatoolkit/chap5toolkit.htm\" target=\"_blank\" rel=\"noreferrer noopener\">Web­site Acces­si­bil­i­ty Under Title&nbsp;<span>II</span>&nbsp;of the&nbsp;<span>ADA</span></a>&nbsp;doc­u­ment out­lines the acces­si­bil­i­ty man­dates for web­sites. Even pub­lic com­pa­nies may very well need to com­ply with the&nbsp;<span>ADA</span>; check out the&nbsp;<a href=\"http://www.logicsolutions.com/does-website-need-ada-compliance/\" target=\"_blank\" rel=\"noreferrer noopener\">Does your web­site need to be&nbsp;<span>ADA</span>&nbsp;com­pli­ant?</a>&nbsp;arti­cle for details.</p><p>I’m just going to assume that you want to make your web­site acces­si­ble for the prac­ti­cal rea­sons men­tioned above that go beyond legal com­pli­ance. Like many of the top­ics that I’ve dis­cussed before, this is all about&nbsp;<em>mak­ing the web bet­ter</em>.</p></div></div><div><div><blockquote>Both performance &amp; accessibility are not about padding proposals; they are about making websites that are more effective for both our clients, and their customers.</blockquote></div></div><div><div><p>This is also how we should sell acces­si­bil­i­ty to our clients, sim­i­lar to how we talked about sell­ing per­for­mance in the&nbsp;<a href=\"https://nystudio107.com/blog/a-pretty-website-isnt-enough\">A&nbsp;Pret­ty Web­site Isn’t Enough</a>&nbsp;arti­cle. We should build acces­si­bil­i­ty into our pro­pos­als, and inte­grate it into our design&nbsp;<span>&amp;</span>&nbsp;devel­op­ment work­flow. Edu­cate clients on why it is impor­tant, and they’ll quick­ly get on&nbsp;board.</p></div></div><div><div><section><div><figure><div><div data-expand=\"-1\"><picture><source data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/velvet-rope-let-people-in-accessibility.jpg.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/velvet-rope-let-people-in-accessibility.jpg.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/velvet-rope-let-people-in-accessibility.jpg.webp 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/velvet-rope-let-people-in-accessibility.jpg.webp 368w\" type=\"image/webp\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/velvet-rope-let-people-in-accessibility.jpg.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/velvet-rope-let-people-in-accessibility.jpg.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/velvet-rope-let-people-in-accessibility.jpg.webp 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/velvet-rope-let-people-in-accessibility.jpg.webp 368w\"><img src=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQEASABIAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADASIAAhEBAxEB%2F8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL%2F8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4%2BTl5ufo6erx8vP09fb3%2BPn6%2F8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL%2F8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3%2BPn6%2F9oADAMBAAIRAxEAPwDh2gMYDN82DyKtRXQ8idEijTccqACSv0Jon%2F1R%2FwB81DbfeH1qE7nRKmon%2F9k%3D\" data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/velvet-rope-let-people-in-accessibility.jpg 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/velvet-rope-let-people-in-accessibility.jpg 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/velvet-rope-let-people-in-accessibility.jpg 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/velvet-rope-let-people-in-accessibility.jpg 368w\" data-lowsrc=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQEASABIAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADASIAAhEBAxEB%2F8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL%2F8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4%2BTl5ufo6erx8vP09fb3%2BPn6%2F8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL%2F8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3%2BPn6%2F9oADAMBAAIRAxEAPwDh2gMYDN82DyKtRXQ8idEijTccqACSv0Jon%2F1R%2FwB81DbfeH1qE7nRKmon%2F9k%3D\" alt=\"Velvet Rope Let People In Accessibility\" height=\"auto\" width=\"100%\" sizes=\"100vw\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/velvet-rope-let-people-in-accessibility.jpg 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/velvet-rope-let-people-in-accessibility.jpg 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/velvet-rope-let-people-in-accessibility.jpg 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/velvet-rope-let-people-in-accessibility.jpg 368w\"></picture></div></div></figure></div></section></div></div><div><div><p>The&nbsp;<a href=\"http://rosenfeldmedia.com/a-web-for-everyone/personas-for-accessible-ux/\" target=\"_blank\" rel=\"noreferrer noopener\">Per­sonas for Acces­si­ble&nbsp;<span>UX</span></a>&nbsp;arti­cle is a&nbsp;super-use­ful resource for under­stand­ing the type of dis­abil­i­ties peo­ple may have, and how that impacts their abil­i­ty to access your web­site. Take the time to read through the per­sonas list­ed there, and come back when you’re done.</p><p>Real­ly, it’s worth it. I’ll&nbsp;wait.</p></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/making-websites-accessible-americans-with-disabilities-act-ada#major-use-cases\"><i></i><span>LINK</span></a></span>MAJOR USE CASES</h3><p>So here’s a&nbsp;non-exhaus­tive syn­op­sis of the dis­abil­i­ties that peo­ple may encounter with your web­site (cribbed from&nbsp;<a href=\"https://github.com/dpersing/ada-a11y-intro/blob/master/a11y-presentation.md\" target=\"_blank\" rel=\"noreferrer noopener\">here</a>):</p><ul><li>Vision&nbsp;(blind­ness, low vision, col­or blindness)<ul><li>Over&nbsp;<span>6</span>,<span>500</span>,<span>000</span>&nbsp;adults, most of them between&nbsp;<span>18</span>&nbsp;and&nbsp;<span>64</span>, and over&nbsp;<span>650</span>,<span>000</span>&nbsp;chil­dren in the&nbsp;<span>US</span>&nbsp;report­ed issues relat­ed to low vision or blind­ness in&nbsp;<span>2011</span>.</li><li>About&nbsp;<span>1</span>&nbsp;in&nbsp;<span>10</span>&nbsp;men are col­or&nbsp;blind.</li></ul></li><li>Hear­ing&nbsp;(deaf­ness)<ul><li>About&nbsp;<span>36</span>&nbsp;mil­lion adults in the&nbsp;<span>US</span>&nbsp;have some form of hear­ing&nbsp;loss.</li><li>About&nbsp;<span>2</span>&nbsp;in&nbsp;<span>1000</span>&nbsp;chil­dren in the&nbsp;<span>US</span>&nbsp;are born&nbsp;deaf.</li></ul></li><li>Motor skills&nbsp;(trou­ble with using a&nbsp;mouse)</li><li>Cog­ni­tive and learn­ing issues&nbsp;(autism, dyslex­ia,&nbsp;<span>ADD</span>,&nbsp;etc.)<ul><li>About&nbsp;<span>1</span>&nbsp;in&nbsp;<span>88</span>&nbsp;chil­dren in the&nbsp;<span>US</span>&nbsp;are on the autism spectrum.</li><li>Prob­a­bly about&nbsp;<span>20</span>% of peo­ple have some form of dyslexia.</li><li><span>11</span>% of chil­dren&nbsp;<span>4</span> – <span>17</span>&nbsp;years of age, and about&nbsp;<span>4</span>% of adults, in the&nbsp;<span>US</span>&nbsp;have been diag­nosed with&nbsp;<span>ADD</span>.</li></ul></li></ul><p>In gen­er­al, it’s esti­mat­ed that&nbsp;<span>12</span> – <span>20</span>% of peo­ple have a&nbsp;dis­abil­i­ty of some&nbsp;kind.</p><p>So let’s do some­thing about&nbsp;it!</p></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/making-websites-accessible-americans-with-disabilities-act-ada#pa11y-as-tooling-for-accessibility\"><i></i><span>LINK</span></a></span>PA11Y AS TOOLING FOR ACCESSIBILITY</h3><p>Actu­al­ly mak­ing web­sites acces­si­ble isn’t that hard; the hard part is know­ing&nbsp;<em>what</em>&nbsp;you should be doing. While there are some web-based tools out there, I’ve found that the&nbsp;<kbd>npm</kbd>&nbsp;pack­age&nbsp;<a href=\"https://www.npmjs.com/package/pa11y\" target=\"_blank\" rel=\"noreferrer noopener\">Pa<span>11</span>y</a>&nbsp;to be the most up to date and effec­tive tool for&nbsp;me.</p><p>Pa<span>11</span>y is just a&nbsp;<span>CLI</span>&nbsp;lay­er on top of&nbsp;<a href=\"http://squizlabs.github.io/HTML_CodeSniffer/\" target=\"_blank\" rel=\"noreferrer noopener\">HTML_​CodeSniffer</a>, which enforces the three con­for­mance lev­els of the&nbsp;<a href=\"http://www.w3.org/TR/WCAG/\" target=\"_blank\" rel=\"noreferrer noopener\">Web Con­tent Acces­si­bil­i­ty Guide­lines (<span>WCAG</span>)&nbsp;<span>2</span>.<span>0</span></a>, and the web-relat­ed com­po­nents of the&nbsp;<a href=\"https://www.section508.gov/\" target=\"_blank\" rel=\"noreferrer noopener\">U.S.&nbsp;<span></span>​<span>“</span>Sec­tion&nbsp;<span>508</span>” leg­is­la­tion</a>.</p><p>So let’s talk about how to use&nbsp;it.</p></div></div><div><div><blockquote>The abbreviation #a11y is often used for “accessibility”, where the number 11 refers to the number of letters omitted from “accessibility”</blockquote></div></div><div><div><p>I’ll state right upfront that I’m no expert on acces­si­bil­i­ty; if you want to do a&nbsp;deep-dive on acces­si­bil­i­ty, check out the&nbsp;<a href=\"https://www.w3.org/WAI/gettingstarted/\" target=\"_blank\" rel=\"noreferrer noopener\">Get­ting Start­ed with Web Acces­si­bil­i­ty</a>&nbsp;<span>&amp;</span>&nbsp;<a href=\"https://w3c.github.io/using-aria/\" target=\"_blank\" rel=\"noreferrer noopener\">Using Aria</a>&nbsp;resources. But if you use&nbsp;<a href=\"https://www.w3schools.com/html/html5_semantic_elements.asp\" target=\"_blank\" rel=\"noreferrer noopener\">seman­tic&nbsp;<span>HTML<span>5</span></span>&nbsp;ele­ments</a>, use a&nbsp;prop­er head­ing hier­ar­chy, and use&nbsp;<kbd>alt</kbd>&nbsp;attrib­ut­es for images, you’re halfway home.</p><p>For the rest of it,&nbsp;<kbd>pa11y</kbd>&nbsp;gives you a&nbsp;very easy to under­stand list of what’s bro­ken, and how to fix it. It’s very sim­i­lar to using the&nbsp;<a href=\"https://validator.w3.org/\" target=\"_blank\" rel=\"noreferrer noopener\"><span>WC<span>3</span></span>&nbsp;Val­ida­tor</a>&nbsp;to check your&nbsp;<span>HTML</span>&nbsp;for cor­rect­ness, so it’s not hard to get going on a&nbsp;bul­let-point­ed list of things to&nbsp;fix.</p></div></div><div><div><section><div><figure><div><div data-expand=\"-1\"><picture><source data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/kintsugi-fix-whats-broken.jpg.webp 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/kintsugi-fix-whats-broken.jpg.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/kintsugi-fix-whats-broken.jpg.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/kintsugi-fix-whats-broken.jpg.webp 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/kintsugi-fix-whats-broken.jpg.webp 368w\" type=\"image/webp\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/kintsugi-fix-whats-broken.jpg.webp 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/kintsugi-fix-whats-broken.jpg.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/kintsugi-fix-whats-broken.jpg.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/kintsugi-fix-whats-broken.jpg.webp 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/kintsugi-fix-whats-broken.jpg.webp 368w\"><img src=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQEASABIAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADAREAAhEBAxEB%2F8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL%2F8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4%2BTl5ufo6erx8vP09fb3%2BPn6%2F8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL%2F8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3%2BPn6%2F9oADAMBAAIRAxEAPwDodUhdXM32mVVx90NwKAG6VM80m8z5jUYxnqaALGs%2F8ecn0oAqaB%2Fx6J%2BNAH%2F%2F2Q%3D%3D\" data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/kintsugi-fix-whats-broken.jpg 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/kintsugi-fix-whats-broken.jpg 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/kintsugi-fix-whats-broken.jpg 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/kintsugi-fix-whats-broken.jpg 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/kintsugi-fix-whats-broken.jpg 368w\" data-lowsrc=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQEASABIAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADAREAAhEBAxEB%2F8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL%2F8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4%2BTl5ufo6erx8vP09fb3%2BPn6%2F8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL%2F8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3%2BPn6%2F9oADAMBAAIRAxEAPwDodUhdXM32mVVx90NwKAG6VM80m8z5jUYxnqaALGs%2F8ecn0oAqaB%2Fx6J%2BNAH%2F%2F2Q%3D%3D\" alt=\"Kintsugi Fix Whats Broken\" height=\"auto\" width=\"100%\" sizes=\"100vw\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/kintsugi-fix-whats-broken.jpg 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/kintsugi-fix-whats-broken.jpg 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/kintsugi-fix-whats-broken.jpg 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/kintsugi-fix-whats-broken.jpg 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/kintsugi-fix-whats-broken.jpg 368w\"></picture></div></div></figure></div></section></div></div><div><div><p>You will need to have&nbsp;<a href=\"https://nodejs.org/\" target=\"_blank\" rel=\"noreferrer noopener\">Node</a>&nbsp;<span>&amp;</span>&nbsp;<a href=\"https://www.npmjs.com/\" target=\"_blank\" rel=\"noreferrer noopener\"><span>NPM</span></a>&nbsp;(or&nbsp;<a href=\"https://yarnpkg.com/en/\" target=\"_blank\" rel=\"noreferrer noopener\">Yarn</a>) installed in order to take advan­tage of it, but hope­ful­ly you’re already up to speed using these tools. If you’re not, def­i­nite­ly con­sid­er get­ting on the band­wag­on, because fron­tend devel­op­ment is mov­ing inex­orably towards them.</p><p>So the first thing we’ll do is install a&nbsp;pack­age called&nbsp;<a href=\"https://www.npmjs.com/package/npx\" target=\"_blank\" rel=\"noreferrer noopener\">npx</a>; this lets you run node mod­ules with­out hav­ing to install them (either glob­al­ly or as part of a&nbsp;pack­age), either via&nbsp;<kbd>npm</kbd>&nbsp;or&nbsp;<kbd>yarn</kbd>:</p></div></div><div><div><section><div><pre><code><span>sudo</span> <span>npm</span> <span>install</span> -g npx</code></pre><aside><h5><i></i>&nbsp;npm</h5></aside></div></section></div></div><div><div><section><div><pre><code><span>sudo</span> yarn global add npx</code></pre><aside><h5><i></i>&nbsp;yarn</h5></aside></div></section></div></div><div><div><p>We’re installing the&nbsp;<kbd>npx</kbd>&nbsp;pack­age glob­al­ly, so we’re using&nbsp;<kbd>sudo</kbd>&nbsp;to make it hap­pen; but you can also con­sid­er check­ing out how to&nbsp;<a href=\"https://github.com/sindresorhus/guides/blob/master/npm-global-without-sudo.md\" target=\"_blank\" rel=\"noreferrer noopener\">install pack­ages glob­al­ly with­out sudo</a>&nbsp;if you choose to, or per­haps don’t have&nbsp;<kbd>sudo</kbd>&nbsp;access.</p><p>Of course, if you like you can add&nbsp;<kbd>pa11y</kbd>&nbsp;as a&nbsp;depen­den­cy in your project as well, if you pre­fer to do it that way. You could even install&nbsp;<kbd>pa11y</kbd>&nbsp;glob­al­ly, the same way we did with&nbsp;<kbd>npx</kbd>. But I&nbsp;want­ed to intro­duce using&nbsp;<kbd>npx</kbd>&nbsp;as a&nbsp;gen­er­al way to exe­cute Node mod­ules with­out hav­ing to install them.</p><p><kbd>npx</kbd>&nbsp;also has a&nbsp;spe­cif­ic ben­e­fit in this case: it’ll make sure we’re always run­ning the lat­est&nbsp;<kbd>pa11y</kbd>&nbsp;with the lat­est rule­sets, with­out hav­ing to keep it up to&nbsp;date.<br></p></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/making-websites-accessible-americans-with-disabilities-act-ada#fixing-accessibility-problems\"><i></i><span>LINK</span></a></span>FIXING ACCESSIBILITY PROBLEMS</h3><p>So now that we have&nbsp;<kbd>npx</kbd>&nbsp;installed, we can run&nbsp;<kbd>pa11y</kbd>&nbsp;and gets its eval­u­a­tion of the acces­si­bil­i­ty of our web­site!&nbsp;We’ll use the&nbsp;<a href=\"https://nystudio107.com/blog\" target=\"_blank\" rel=\"noreferrer noopener\">blog page</a>&nbsp;of this very web­site as our guinea pig for acces­si­bil­i­ty issues:</p></div></div><div><div><section><div><figure><div><div data-expand=\"-1\"><picture><source data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/guinea-pig-test.jpg.webp 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/guinea-pig-test.jpg.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/guinea-pig-test.jpg.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/guinea-pig-test.jpg.webp 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/guinea-pig-test.jpg.webp 368w\" type=\"image/webp\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/guinea-pig-test.jpg.webp 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/guinea-pig-test.jpg.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/guinea-pig-test.jpg.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/guinea-pig-test.jpg.webp 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/guinea-pig-test.jpg.webp 368w\"><img src=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQEASABIAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADASIAAhEBAxEB%2F8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL%2F8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4%2BTl5ufo6erx8vP09fb3%2BPn6%2F8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL%2F8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3%2BPn6%2F9oADAMBAAIRAxEAPwCrDBN9ni8qMMS26RmXORnoSenFPtCG1GO9Esa7MYXB5xV2z%2F5AE%2F1H86xtP6p%2BFZKTuacqZ%2F%2FZ\" data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/guinea-pig-test.jpg 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/guinea-pig-test.jpg 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/guinea-pig-test.jpg 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/guinea-pig-test.jpg 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/guinea-pig-test.jpg 368w\" data-lowsrc=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQEASABIAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADASIAAhEBAxEB%2F8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL%2F8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4%2BTl5ufo6erx8vP09fb3%2BPn6%2F8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL%2F8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3%2BPn6%2F9oADAMBAAIRAxEAPwCrDBN9ni8qMMS26RmXORnoSenFPtCG1GO9Esa7MYXB5xV2z%2F5AE%2F1H86xtP6p%2BFZKTuacqZ%2F%2FZ\" alt=\"Guinea Pig Test\" height=\"auto\" width=\"100%\" sizes=\"100vw\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/guinea-pig-test.jpg 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/guinea-pig-test.jpg 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/guinea-pig-test.jpg 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/guinea-pig-test.jpg 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/guinea-pig-test.jpg 368w\"></picture><img src=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQEASABIAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADASIAAhEBAxEB%2F8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL%2F8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4%2BTl5ufo6erx8vP09fb3%2BPn6%2F8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL%2F8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3%2BPn6%2F9oADAMBAAIRAxEAPwCrDBN9ni8qMMS26RmXORnoSenFPtCG1GO9Esa7MYXB5xV2z%2F5AE%2F1H86xtP6p%2BFZKTuacqZ%2F%2FZ\"></div></div></figure></div></section></div></div><div><div><p>To run&nbsp;<kbd>pa11y</kbd>, we can just&nbsp;do:</p></div></div><div><div><section><div><pre><code>npx pa11y --standard <span>\"WCAG2AA\"</span> --ignore <span>\"notice;warning\"</span> https://nystudio107.com/blog</code></pre><aside><h5><i></i>&nbsp;Running pa11y</h5></aside></div></section></div></div><div><div><p>We’re telling it that we don’t want to see any&nbsp;<kbd>notice</kbd>s or&nbsp;<kbd>warning</kbd>s, but rather just errors. If you want to do a&nbsp;more com­pre­hen­sive check, you can show the&nbsp;<kbd>warning</kbd>s too, by omit­ting it from the command.</p><p>Out of the box,&nbsp;<kbd>pa11y</kbd>&nbsp;sup­ports&nbsp;<span>4</span>&nbsp;acces­si­bil­i­ty stan­dards:&nbsp;<kbd>Section508</kbd>,&nbsp;<kbd>WCAG2A</kbd>,&nbsp;<kbd>WCAG2AA</kbd>,&nbsp;<kbd>WCAG2AAA</kbd>. The default is&nbsp;<kbd>WCAG2AA</kbd>, but you can spec­i­fy any stan­dard you want via the&nbsp;<kbd>--standard</kbd>&nbsp;com­mand line argument.</p><p>All of the&nbsp;<kbd>WCAG2*</kbd>&nbsp;stan­dards are the same inter­na­tion­al stan­dard, but with dif­fer­ent lev­els of strict­ness (<kbd>A</kbd>&nbsp;being the least strict,&nbsp;<kbd>AAA</kbd>&nbsp;being the most strict).&nbsp;Addi­tion­al infor­ma­tion on&nbsp;<span>WCAG</span>&nbsp;lev­els can be found in&nbsp;<a href=\"https://www.w3.org/TR/UNDERSTANDING-WCAG20/conformance.html#uc-levels-head\" target=\"_blank\" rel=\"noreferrer noopener\">Under­stand­ing Lev­els of Con­for­mance</a>.</p><p>The&nbsp;<kbd>Section508</kbd>&nbsp;stan­dard is for&nbsp;<span>US</span>&nbsp;Fed­er­al&nbsp;<span>&amp;</span>&nbsp;State gov­ern­ment insti­tu­tions, should you be work­ing on web­sites for&nbsp;them.</p><p>But we’re just going to use the default&nbsp;<kbd>WCAG2AA</kbd>&nbsp;stan­dard, which is mid­dle of the road in terms of strict­ness (and indeed is the stan­dard that&nbsp;<span>WCAG</span>&nbsp;sug­gests to use), and is used by default if we don’t spec­i­fy a&nbsp;<kbd>--standard</kbd>.</p><p>Here’s what the out­put looks&nbsp;like:</p></div></div><div><div><section><div><pre><code>vagrant@homestead:~$ npx pa11y --ignore \"notice;warning\" https://nystudio107.com/blog\nWelcome to Pa11y\n\n &gt; PhantomJS browser created\n &gt; Testing the page \"https://nystudio107.com/blog\"\n\nResults for https://nystudio107.com/blog:\n\n • Error: Anchor element found with a valid href attribute, but no link content has been supplied.\n   ├── WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.A.NoContent\n   ├── #nav-menu &gt; div &gt; div:nth-child(1) &gt; div &gt; div &gt; a\n   └── &lt;a href=\"/\"&gt;&lt;svg xmlns=\"http://www.w3.org/2...&lt;/a&gt;\n\n • Error: This element has insufficient contrast at this conformance level. Expected a contrast ratio of at least 4.5:1, but text in this element has a contrast ratio of 2.93:1. Recommendation: change background to #3c3d3f.\n   ├── WCAG2AA.Principle1.Guideline1_4.1_4_3.G18.Fail\n   ├── #nav-menu &gt; div &gt; div:nth-child(3) &gt; ul &gt; li:nth-child(2) &gt; a\n   └── &lt;a href=\"/blog\" class=\"nav-link\"&gt;Blog&lt;/a&gt;\n\n • Error: This text input element does not have a name available to an accessibility API. Valid names are: label element, title attribute.\n   ├── WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.InputText.Name\n   ├── #searchbox\n   └── &lt;input type=\"text\" id=\"searchbox\" placeholder=\"search\" autocomplete=\"off\" class=\"autocomplete-input\"&gt;\n\n • Error: This form field should be labelled in some way. Use the label element (either with a \"for\" attribute or wrapped around the form field), or \"title\", \"aria-label\" or \"aria-labelledby\" attributes as appropriate.\n   ├── WCAG2AA.Principle1.Guideline1_3.1_3_1.F68\n   ├── #searchbox\n   └── &lt;input type=\"text\" id=\"searchbox\" placeholder=\"search\" autocomplete=\"off\" class=\"autocomplete-input\"&gt;\n\n • Error: Anchor element found with a valid href attribute, but no link content has been supplied.\n   ├── WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.A.NoContent\n   ├── #nys-footer &gt; div &gt; div &gt; div &gt; div:nth-child(1) &gt; div &gt; a\n   └── &lt;a href=\"/\"&gt; &lt;svg class=\"scaling-svg sub-lo...&lt;/a&gt;\n\n • Error: Anchor element found with a valid href attribute, but no link content has been supplied.\n   ├── WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.A.NoContent\n   ├── #nys-footer &gt; div &gt; div &gt; div &gt; div:nth-child(2) &gt; a:nth-child(1)\n   └── &lt;a class=\"social\" href=\"mailto:info@nystudio107.com\"&gt;&lt;i class=\"icon-mail-alt\"&gt;&lt;/i&gt;&lt;/a&gt;\n\n • Error: Anchor element found with a valid href attribute, but no link content has been supplied.\n   ├── WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.A.NoContent\n   ├── #nys-footer &gt; div &gt; div &gt; div &gt; div:nth-child(2) &gt; a:nth-child(2)\n   └── &lt;a rel=\"nofollow\" class=\"social\" href=\"https://www.facebook.com/newyorkstudio107\"&gt;&lt;i class=\"icon-facebook\"&gt;&lt;/i&gt;&lt;/a&gt;\n\n • Error: Anchor element found with a valid href attribute, but no link content has been supplied.\n   ├── WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.A.NoContent\n   ├── #nys-footer &gt; div &gt; div &gt; div &gt; div:nth-child(2) &gt; a:nth-child(3)\n   └── &lt;a rel=\"nofollow\" class=\"social\" href=\"https://twitter.com/nystudio107\"&gt;&lt;i class=\"icon-twitter\"&gt;&lt;/i&gt;&lt;/a&gt;\n\n • Error: Anchor element found with a valid href attribute, but no link content has been supplied.\n   ├── WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.A.NoContent\n   ├── #nys-footer &gt; div &gt; div &gt; div &gt; div:nth-child(2) &gt; a:nth-child(4)\n   └── &lt;a rel=\"nofollow\" class=\"social\" href=\"https://github.com/nystudio107\"&gt;&lt;i class=\"icon-github-circled\"&gt;...&lt;/a&gt;\n\n • Error: Iframe element requires a non-empty title attribute that identifies the frame.\n   ├── WCAG2AA.Principle2.Guideline2_4.2_4_1.H64.1\n   ├── #Smallchat &gt; iframe\n   └── &lt;iframe data-reactroot=\"\" style=\"z-index: 999999999; position: fixed; right: 0px; bottom: 0px; border: 0px; background-image: none; transition: width 200ms cubic-bezier(0.25, 0.25, 0.5, 1), height 200ms cubic-bezier(0.25, 0.25, 0.5, 1); -webkit-trans...\n\n10 Errors\n0 Warnings\n0 Notices</code></pre><aside><h5><i></i>&nbsp;pa11y accessibility errors</h5></aside></div></section></div></div><div><div><p>What it actu­al­ly does is pret­ty nifty: it fires up a&nbsp;<span></span>​<span>“</span>head­less” brows­er, ren­ders your web­page in it cour­tesy of&nbsp;<a href=\"http://phantomjs.org/\" target=\"_blank\" rel=\"noreferrer noopener\">Phan­tomJS</a>, and then ana­lyzes it for acces­si­bil­i­ty issues. This is pret­ty sim­i­lar to how Crit­i­cal&nbsp;<span>CSS</span>&nbsp;is gen­er­at­ed, as per the&nbsp;<a href=\"https://nystudio107.com/blog/implementing-critical-css\">Imple­ment­ing Crit­i­cal&nbsp;<span>CSS</span>&nbsp;on your web­site</a>&nbsp;article.</p><p>In any event, that’s quite a&nbsp;num­ber of errors, so let’s take them one by&nbsp;one!</p></div></div><div><div><section><div><pre><code>• Error: Anchor element found with a valid href attribute, but no link content has been supplied.\n   ├── WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.A.NoContent\n   ├── #nav-menu &gt; div &gt; div:nth-child(1) &gt; div &gt; div &gt; a\n   └── &lt;a href=\"/\"&gt;&lt;svg xmlns=\"http://www.w3.org/2...&lt;/a&gt;</code></pre></div></section></div></div><div><div><p>This can be fixed by adding a&nbsp;<kbd>&lt;title&gt;homepage&lt;/title&gt;</kbd>&nbsp;as a&nbsp;child of the&nbsp;<kbd>&lt;svg&gt;</kbd>&nbsp;that is dis­played inline in the glob­al site head­er, so there’s some text for screen read­ers to parse. Link tar­gets for screen read­ers should say&nbsp;<em>where</em>&nbsp;the link will take them, or&nbsp;<em>what</em>&nbsp;click­ing on the link will do, not describe what the thing inside the link is (a logo, in this&nbsp;case).</p><p>Just imag­ine some­one read­ing the web­page aloud to you, if they said&nbsp;<span></span>​<span>“</span>link nystudio<span>107</span>&nbsp;logo” you’d have no idea what click­ing on it does. If instead they said&nbsp;<span></span>​<span>“</span>link home­page” then you’d get&nbsp;it.</p><p>Anoth­er way that this issue can also be resolved is by putting text inside of the&nbsp;<kbd>&lt;a&gt;</kbd>&nbsp;tag that is invis­i­ble to the eye, but screen read­ers will pick up.&nbsp;We can do this with a&nbsp;<kbd>&lt;span class=\"sr-only\"&gt;</kbd>&nbsp;using the&nbsp;<span>CSS</span>&nbsp;from Twit­ter Bootstrap:</p></div></div><div><div><section><div><pre><code><span>.sr-only</span> <span>{</span>\n    <span>position</span><span>:</span> absolute<span>;</span>\n    <span>width</span><span>:</span> 1px<span>;</span>\n    <span>height</span><span>:</span> 1px<span>;</span>\n    <span>padding</span><span>:</span> 0<span>;</span>\n    <span>margin</span><span>:</span> -1px<span>;</span>\n    <span>overflow</span><span>:</span> hidden<span>;</span>\n    <span>clip</span><span>:</span> <span>rect</span><span>(</span>0,0,0,0<span>)</span><span>;</span>\n    <span>border</span><span>:</span> 0<span>;</span>\n<span>}</span></code></pre><aside><h5><i></i>&nbsp;Screen reader only CSS</h5></aside></div></section></div></div><div><div><p>That way, screen read­ers will have some­thing to&nbsp;read!</p></div></div><div><div><section><div><pre><code>• Error: This element has insufficient contrast at this conformance level. Expected a contrast ratio of at least 4.5:1, but text in this element has a contrast ratio of 2.93:1. Recommendation: change background to #3c3d3f.\n   ├── WCAG2AA.Principle1.Guideline1_4.1_4_3.G18.Fail\n   ├── #nav-menu &gt; div &gt; div:nth-child(3) &gt; ul &gt; li:nth-child(2) &gt; a\n   └── &lt;a href=\"/blog\" class=\"nav-link\"&gt;Blog&lt;/a&gt;</code></pre></div></section></div></div><div><div><p>This is say­ing that the con­trast ratio between our menu links and the head­er back­ground col­or isn’t high enough. It sug­gests chang­ing it from&nbsp;<kbd>#58595b</kbd>&nbsp;to&nbsp;<kbd>#3C3D3F</kbd>&nbsp;to increase the con­trast ratio. This is to assist with read­abilty for peo­ple who have vision problems.</p><p>Since these are the nystudio<span>107</span>&nbsp;brand­ing col­ors, the prob­lem could have been mit­i­gat­ed by apply­ing the tips from the arti­cle&nbsp;<a href=\"https://www.w3.org/WAI/gettingstarted/tips/designing\" target=\"_blank\" rel=\"noreferrer noopener\">Tips on Design­ing for Web Acces­si­bil­i­ty</a>&nbsp;dur­ing the design process.</p></div></div><div><div><section><div><pre><code>• Error: This text input element does not have a name available to an accessibility API. Valid names are: label element, title attribute.\n   ├── WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.InputText.Name\n   ├── #searchbox\n   └── &lt;input type=\"text\" id=\"searchbox\" placeholder=\"search\" autocomplete=\"off\" class=\"autocomplete-input\"&gt;\n\n • Error: This form field should be labelled in some way. Use the label element (either with a \"for\" attribute or wrapped around the form field), or \"title\", \"aria-label\" or \"aria-labelledby\" attributes as appropriate.\n   ├── WCAG2AA.Principle1.Guideline1_3.1_3_1.F68\n   ├── #searchbox\n   └── &lt;input type=\"text\" id=\"searchbox\" placeholder=\"search\" autocomplete=\"off\" class=\"autocomplete-input\"&gt;</code></pre></div></section></div></div><div><div><p>This is say­ing that our&nbsp;<kbd>&lt;input&gt;</kbd>&nbsp;ele­ment used for site search lacks a&nbsp;<kbd>aria-label</kbd>&nbsp;attribute for screen read­ers. This can be fixed by adding them to our&nbsp;<a href=\"https://github.com/nystudio107/vue2-autocomplete\" target=\"_blank\" rel=\"noreferrer noopener\">vue<span>2</span>-auto­com­plete</a>&nbsp;Vue component.</p></div></div><div><div><section><div><pre><code>• Error: Anchor element found with a valid href attribute, but no link content has been supplied.\n   ├── WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.A.NoContent\n   ├── #nys-footer &gt; div &gt; div &gt; div &gt; div:nth-child(2) &gt; a:nth-child(1)\n   └── &lt;a class=\"social\" href=\"mailto:info@nystudio107.com\"&gt;&lt;i class=\"icon-mail-alt\"&gt;&lt;/i&gt;&lt;/a&gt;\n\n • Error: Anchor element found with a valid href attribute, but no link content has been supplied.\n   ├── WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.A.NoContent\n   ├── #nys-footer &gt; div &gt; div &gt; div &gt; div:nth-child(2) &gt; a:nth-child(2)\n   └── &lt;a rel=\"nofollow\" class=\"social\" href=\"https://www.facebook.com/newyorkstudio107\"&gt;&lt;i class=\"icon-facebook\"&gt;&lt;/i&gt;&lt;/a&gt;\n\n • Error: Anchor element found with a valid href attribute, but no link content has been supplied.\n   ├── WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.A.NoContent\n   ├── #nys-footer &gt; div &gt; div &gt; div &gt; div:nth-child(2) &gt; a:nth-child(3)\n   └── &lt;a rel=\"nofollow\" class=\"social\" href=\"https://twitter.com/nystudio107\"&gt;&lt;i class=\"icon-twitter\"&gt;&lt;/i&gt;&lt;/a&gt;\n\n • Error: Anchor element found with a valid href attribute, but no link content has been supplied.\n   ├── WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.A.NoContent\n   ├── #nys-footer &gt; div &gt; div &gt; div &gt; div:nth-child(2) &gt; a:nth-child(4)\n   └── &lt;a rel=\"nofollow\" class=\"social\" href=\"https://github.com/nystudio107\"&gt;&lt;i class=\"icon-github-circled\"&gt;...&lt;/a&gt;</code></pre></div></section></div></div><div><div><p>These all refer to the social icons at the bot­tom of the screen, which are a&nbsp;cus­tom icon font cour­tesy of&nbsp;<a href=\"http://fontello.com/\" target=\"_blank\" rel=\"noreferrer noopener\">Fontel­lo</a>&nbsp;(gen­er­at­ed via our&nbsp;<a href=\"https://www.npmjs.com/package/gulp-fontello\" target=\"_blank\" rel=\"noreferrer noopener\">Gulp</a>&nbsp;task). Con­trary to pop­u­lar belief, icon fonts can work with accessibility.</p><p>We just need to change the links to be like&nbsp;this:</p></div></div><div><div><section><div><pre><code><span><span><span>&lt;</span>a</span> <span>rel</span><span><span>=</span><span>\"</span>nofollow<span>\"</span></span> <span>class</span><span><span>=</span><span>\"</span>social<span>\"</span></span> <span>href</span><span><span>=</span><span>\"</span>https://www.facebook.com/newyorkstudio107<span>\"</span></span><span>&gt;</span></span>\n    <span><span><span>&lt;</span>i</span> <span>class</span><span><span>=</span><span>\"</span>icon-facebook<span>\"</span></span> <span>aria-hidden</span><span><span>=</span><span>\"</span>true<span>\"</span></span> <span>title</span><span><span>=</span><span>\"</span>Facebook<span>\"</span></span><span>&gt;</span></span><span><span><span>&lt;/</span>i</span><span>&gt;</span></span>\n    <span><span><span>&lt;</span>span</span> <span>class</span><span><span>=</span><span>\"</span>sr-only<span>\"</span></span><span>&gt;</span></span>Facebook<span><span><span>&lt;/</span>span</span><span>&gt;</span></span>\n<span><span><span>&lt;/</span>a</span><span>&gt;</span></span></code></pre></div></section></div></div><div><div><p>The&nbsp;<kbd>aria-hidden</kbd>&nbsp;attribute caus­es screen read­ers to skip the ele­ment, and the&nbsp;<kbd>title</kbd>&nbsp;attribute gives sight­ed peo­ple a&nbsp;mouseover tooltip. Then the&nbsp;<kbd>&lt;span class=\"sr-only\"&gt;</kbd>&nbsp;pro­vides the text for screen read­ers to parse, using the&nbsp;<span>CSS</span>&nbsp;from Twit­ter Bootstrap:</p></div></div><div><div><section><div><pre><code><span>.sr-only</span> <span>{</span>\n    <span>position</span><span>:</span> absolute<span>;</span>\n    <span>width</span><span>:</span> 1px<span>;</span>\n    <span>height</span><span>:</span> 1px<span>;</span>\n    <span>padding</span><span>:</span> 0<span>;</span>\n    <span>margin</span><span>:</span> -1px<span>;</span>\n    <span>overflow</span><span>:</span> hidden<span>;</span>\n    <span>clip</span><span>:</span> <span>rect</span><span>(</span>0,0,0,0<span>)</span><span>;</span>\n    <span>border</span><span>:</span> 0<span>;</span>\n<span>}</span></code></pre><aside><h5><i></i>&nbsp;Screen reader only CSS</h5></aside></div></section></div></div><div><div><p>That’s all there is to it, we now have nice acces­si­ble social icons.</p></div></div><div><div><section><div><pre><code>• Error: Iframe element requires a non-empty title attribute that identifies the frame.\n   ├── WCAG2AA.Principle2.Guideline2_4.2_4_1.H64.1\n   ├── #Smallchat &gt; iframe\n   └── &lt;iframe data-reactroot=\"\" style=\"z-index: 999999999; position: fixed; right: 0px; bottom: 0px; border: 0px; background-image: none; transition: width 200ms cubic-bezier(0.25, 0.25, 0.5, 1), height 200ms cubic-bezier(0.25, 0.25, 0.5, 1); -webkit-trans...</code></pre></div></section></div></div><div><div><p>This one, unfor­tu­nate­ly, we can’t fix… because it’s com­ing from the&nbsp;<a href=\"https://small.chat/\" target=\"_blank\" rel=\"noreferrer noopener\">Small­chat</a>&nbsp;library we use to allow site vis­i­tors to con­tact us via&nbsp;<a href=\"https://slack.com/\" target=\"_blank\" rel=\"noreferrer noopener\">Slack</a>. How­ev­er what we&nbsp;<em>can</em>&nbsp;do is con­tact the authors of Small­chat, and point out the acces­si­bil­i­ty issues, so that they can fix them. Then&nbsp;<em>every­one</em>&nbsp;benefits.</p></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/making-websites-accessible-americans-with-disabilities-act-ada#automating-accessibility-testing\"><i></i><span>LINK</span></a></span>AUTOMATING ACCESSIBILITY TESTING</h3><p>The cool thing about&nbsp;<kbd>pa11y</kbd>&nbsp;being a&nbsp;Node mod­ule is that we can inte­grate it into our fron­tend work­flow, and auto­mate test­ing. Take for exam­ple this&nbsp;<kbd>a11y</kbd>&nbsp;Gulp&nbsp;task:</p></div></div><div><div><section><div><pre><code><span>// Process data in an array synchronously, moving onto the n+1 item only after the nth item callback</span>\n<span>function</span> <span>doSynchronousLoop</span><span>(</span>data<span>,</span> processData<span>,</span> done<span>)</span> <span>{</span>\n    <span>if</span> <span>(</span>data<span>.</span>length <span>&gt;</span> <span>0</span><span>)</span> <span>{</span>\n        <span>const</span> <span>loop</span> <span>=</span> <span>(</span>data<span>,</span> i<span>,</span> processData<span>,</span> done<span>)</span> <span>=&gt;</span> <span>{</span>\n            <span>processData</span><span>(</span>data<span>[</span>i<span>]</span><span>,</span> i<span>,</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n                <span>if</span> <span>(</span><span>++</span>i <span>&lt;</span> data<span>.</span>length<span>)</span> <span>{</span>\n                    <span>loop</span><span>(</span>data<span>,</span> i<span>,</span> processData<span>,</span> done<span>)</span><span>;</span>\n                <span>}</span> <span>else</span> <span>{</span>\n                    <span>done</span><span>(</span><span>)</span><span>;</span>\n                <span>}</span>\n            <span>}</span><span>)</span><span>;</span>\n        <span>}</span><span>;</span>\n        <span>loop</span><span>(</span>data<span>,</span> <span>0</span><span>,</span> processData<span>,</span> done<span>)</span><span>;</span>\n    <span>}</span> <span>else</span> <span>{</span>\n        <span>done</span><span>(</span><span>)</span><span>;</span>\n    <span>}</span>\n<span>}</span>\n\n<span>// Run pa11y accessibility tests on each template</span>\n<span>function</span> <span>processAccessibility</span><span>(</span>element<span>,</span> i<span>,</span> callback<span>)</span> <span>{</span>\n    <span>const</span> accessibilitySrc <span>=</span> pkg<span>.</span>urls<span>.</span>critical <span>+</span> element<span>.</span>url<span>;</span>\n    <span>const</span> cliReporter <span>=</span> <span>require</span><span>(</span><span>'./node_modules/pa11y/reporter/cli.js'</span><span>)</span><span>;</span>\n    <span>const</span> options <span>=</span> <span>{</span>\n        log<span>:</span> cliReporter<span>,</span>\n        ignore<span>:</span>\n                <span>[</span>\n                    <span>'notice'</span><span>,</span>\n                    <span>'warning'</span>\n                <span>]</span><span>,</span>\n        <span>}</span><span>;</span>\n    <span>const</span> test <span>=</span> $<span>.</span><span>pa11y</span><span>(</span>options<span>)</span><span>;</span>\n\n    $<span>.</span><span>fancyLog</span><span>(</span><span>\"-&gt; Checking Accessibility for URL: \"</span> <span>+</span> $<span>.</span>chalk<span>.</span><span>cyan</span><span>(</span>accessibilitySrc<span>)</span><span>)</span><span>;</span>\n    test<span>.</span><span>run</span><span>(</span>accessibilitySrc<span>,</span> <span>(</span>error<span>,</span> results<span>)</span> <span>=&gt;</span> <span>{</span>\n        cliReporter<span>.</span><span>results</span><span>(</span>results<span>,</span> accessibilitySrc<span>)</span><span>;</span>\n        <span>callback</span><span>(</span><span>)</span><span>;</span>\n    <span>}</span><span>)</span><span>;</span>\n<span>}</span>\n\n<span>// accessibility task</span>\ngulp<span>.</span><span>task</span><span>(</span><span>\"a11y\"</span><span>,</span> <span>(</span>callback<span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>doSynchronousLoop</span><span>(</span>pkg<span>.</span>globs<span>.</span>critical<span>,</span> processAccessibility<span>,</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n        <span>// all done</span>\n        <span>callback</span><span>(</span><span>)</span><span>;</span>\n    <span>}</span><span>)</span><span>;</span>\n<span>}</span><span>)</span><span>;</span></code></pre></div></section></div></div><div><div><p>This pig­gy­backs off of the&nbsp;<kbd>package.json</kbd>&nbsp;set­up we out­lined in the&nbsp;<a href=\"https://nystudio107.com/blog/a-better-package-json-for-the-frontend\">A&nbsp;Bet­ter package.json for the Fron­tend</a>&nbsp;arti­cle, and uses the urls we already have in the&nbsp;<kbd>pkg.globs.critical</kbd>&nbsp;object from the&nbsp;<a href=\"https://nystudio107.com/blog/implementing-critical-css\">Imple­ment­ing Crit­i­cal&nbsp;<span>CSS</span>&nbsp;on your web­site</a>&nbsp;article.</p><p>We already have a&nbsp;<span>URL</span>&nbsp;to each major tem­plate our site uses for our Crit­i­cal&nbsp;<span>CSS</span>&nbsp;gen­er­a­tion, we can use them again to run our&nbsp;<kbd>pa11y</kbd>&nbsp;checks on every tem­plate on our website!</p><p>For this to work, you’ll need to do&nbsp;<kbd>npm install pa11y -D</kbd>&nbsp;or&nbsp;<kbd>yarn add pa11y -D</kbd>&nbsp;to add&nbsp;<kbd>pa11y</kbd>&nbsp;to our project’s&nbsp;<kbd>package.json</kbd>, but then we’re good to&nbsp;go!</p><p>So now we can just do&nbsp;<kbd>gulp a11y</kbd>&nbsp;and it’ll test our entire web­site for acces­si­bil­i­ty issues. Nice!</p></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/making-websites-accessible-americans-with-disabilities-act-ada#wrapping-up\"><i></i><span>LINK</span></a></span>WRAPPING UP</h3><p>Just use&nbsp;<kbd>pa11y</kbd>&nbsp;the way you use any oth­er audit­ing tool: you get a&nbsp;list of things to fix, you address them, and then you re-run the test. Lath­er, rinse, repeat until all of the issues you plan to address are tak­en care&nbsp;of.</p><p>One real­ly nice thing from a&nbsp;best prac­tices point of view is that if we’ve addressed&nbsp;<span>SEO</span>&nbsp;best prac­tices as per the&nbsp;<a href=\"https://nystudio107.com/blog/modern-seo-snake-oil-vs-substance\">Mod­ern&nbsp;<span>SEO</span>: Snake Oil vs. Sub­stance</a>&nbsp;arti­cle, we’ve already tak­en care of a&nbsp;num­ber of acces­si­bil­i­ty issues. Both&nbsp;<span>SEO</span>&nbsp;and acces­si­bil­i­ty want&nbsp;<kbd>alt</kbd>&nbsp;tags for images, for instance. Nice.</p><p>It makes sense if you think about it; search engines are essen­tial­ly screen read­ers. But it’s great to see the con­ver­gence of tech­niques that fall under the best prac­tices umbrella.</p><p>That’s it! It wasn’t so bad at all to address these things, and we prob­a­bly made a&nbsp;big dif­fer­ence to some peo­ple vis­it­ing our&nbsp;site.</p></div></div><div><div><section><div><figure><div><div data-expand=\"-1\"><picture><source data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/freedom-through-web-accessibility.jpg.webp 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/freedom-through-web-accessibility.jpg.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/freedom-through-web-accessibility.jpg.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/freedom-through-web-accessibility.jpg.webp 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/freedom-through-web-accessibility.jpg.webp 368w\" type=\"image/webp\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/freedom-through-web-accessibility.jpg.webp 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/freedom-through-web-accessibility.jpg.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/freedom-through-web-accessibility.jpg.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/freedom-through-web-accessibility.jpg.webp 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/freedom-through-web-accessibility.jpg.webp 368w\"><img src=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQEASABIAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADASIAAhEBAxEB%2F8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL%2F8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4%2BTl5ufo6erx8vP09fb3%2BPn6%2F8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL%2F8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3%2BPn6%2F9oADAMBAAIRAxEAPwDdk09IbtrkOzDZgjrjFWbR1VEcKcuoJwMZ98U1v9X%2BFV4ui%2FQV57m3ubKmlsf%2F2Q%3D%3D\" data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/freedom-through-web-accessibility.jpg 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/freedom-through-web-accessibility.jpg 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/freedom-through-web-accessibility.jpg 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/freedom-through-web-accessibility.jpg 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/freedom-through-web-accessibility.jpg 368w\" data-lowsrc=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQEASABIAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADASIAAhEBAxEB%2F8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL%2F8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4%2BTl5ufo6erx8vP09fb3%2BPn6%2F8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL%2F8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3%2BPn6%2F9oADAMBAAIRAxEAPwDdk09IbtrkOzDZgjrjFWbR1VEcKcuoJwMZ98U1v9X%2BFV4ui%2FQV57m3ubKmlsf%2F2Q%3D%3D\" alt=\"Freedom Through Web Accessibility\" height=\"auto\" width=\"100%\" sizes=\"100vw\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/freedom-through-web-accessibility.jpg 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/freedom-through-web-accessibility.jpg 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/freedom-through-web-accessibility.jpg 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/freedom-through-web-accessibility.jpg 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/freedom-through-web-accessibility.jpg 368w\"></picture></div></div></figure></div></section></div></div><div><div><p>Acces­si­bil­i­ty isn’t some­thing that’s ter­ri­bly dif­fi­cult to address, espe­cial­ly if you inte­grate it as part of your design&nbsp;<span>&amp;</span>&nbsp;devel­op­ment process, and use tools like&nbsp;<kbd>pa11y</kbd>&nbsp;to help you along the&nbsp;way.</p><p>As with any­thing, it’s much eas­i­er to build projects with acces­si­bil­i­ty in mind than it is to retroac­tive­ly add it. So make it part of your design&nbsp;<span>&amp;</span>&nbsp;devel­op­ment process.</p><p>It’s also worth not­ing that&nbsp;<a href=\"https://github.com/pa11y\" target=\"_blank\" rel=\"noreferrer noopener\">Pa<span>11</span>y</a>&nbsp;also has some oth­er cool projects based on it, such as&nbsp;<a href=\"https://github.com/pa11y/dashboard\" target=\"_blank\" rel=\"noreferrer noopener\">Pa<span>11</span>y Dash­board</a>&nbsp;and&nbsp;<a href=\"https://github.com/pa11y/webservice\" target=\"_blank\" rel=\"noreferrer noopener\">Pa<span>11</span>y Web­ser­vice</a>&nbsp;for more auto­mat­ed mon­i­tor­ing of your website’s acces­si­bil­i­ty. If you pre­fer&nbsp;<span>GUI</span>&nbsp;tools, check out&nbsp;<a href=\"https://chrome.google.com/webstore/detail/accessibility-developer-t/fpkknkljclfencbdbgkenhalefipecmb?hl=en\">Chrome Acces­si­bil­i­ty Devel­op­er Tools</a>&nbsp;and&nbsp;<a href=\"http://squizlabs.github.io/HTML_CodeSniffer/\">HTML_​Codesniffer</a>.</p><p>Go make some inclu­sive websites!</p></div></div><aside><div><div><h3>FURTHER READING</h3><ul><li><a href=\"https://nystudio107.com/blog/frontend-dev-best-practices-for-2017\">Frontend Dev Best Practices for 2017</a></li><li><a href=\"https://nystudio107.com/blog/image-optimization-project-results\">Post-Mortem: Applied Image Optimization</a></li><li><a href=\"https://nystudio107.com/blog/an-annotated-webpack-4-config-for-frontend-web-development\">An Annotated webpack 4 Config for Frontend Web Development</a></li></ul></div></div></aside>","filePath":"pages/Accessibility/.md","_id":"5RoCoFBioNLJowWN"}
{"date":{"$$date":1541516013550},"title":"How to Sort an Array of Dates with JavaScript","sourceUrl":"https://gist.github.com/onpubcom/1772996","path":"JavaScript/JavaScript/JavaScript/","category":"JavaScript","tags":["JavaScript"," Date"],"author":"onpubcom","excerpt":"","dateCreated":1541515832495,"coverImage":"","type":"Snippet","frontmatter":"---\npath: 'JavaScript/'\ndate: 'Tue Nov 06 2018 20:22:19 GMT+0530 (India Standard Time)'\ntitle: 'How to Sort an Array of Dates with JavaScript'\ntags: ['JavaScript','Date']\ncategory: 'JavaScript'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://gist.github.com/onpubcom/1772996'\ntype: 'Snippet'\n---\n    ","htmlCode":"<pre><code>&lt;script type=\"text/javascript\"&gt;\n\n// First let's create an array of JavaScript Date\n// objects.\n// More info about the Date class:\n// http://w3schools.com/js/js_obj_date.asp\nvar dates = [\nnew Date(2010, 4, 10, 10, 07, 16),\nnew Date(2010, 4, 8, 9, 16, 09),\nnew Date(2010, 3, 30, 0, 15, 49),\nnew Date(2010, 3, 8, 10, 08, 35)];\n\n// Now we will define our date comparison functions. These are callbacks\n// that we will be providing to the array sort method below.\nvar date_sort_asc = function (date1, date2) {\n  // This is a comparison function that will result in dates being sorted in\n  // ASCENDING order. As you can see, JavaScript's native comparison operators\n  // can be used to compare dates. This was news to me.\n  if (date1 &gt; date2) return 1;\n  if (date1 &lt; date2) return -1;\n  return 0;\n};\n\nvar date_sort_desc = function (date1, date2) {\n  // This is a comparison function that will result in dates being sorted in\n  // DESCENDING order.\n  if (date1 &gt; date2) return -1;\n  if (date1 &lt; date2) return 1;\n  return 0;\n};\n\n// Finally, we are now able to call the sort method on our array of dates.\n// More info about array sorting: http://w3schools.com/jsref/jsref_sort.asp\n\n// First let's sort the array in ascending order.\ndates.sort(date_sort_asc);\n\n// Now let's output the results to the page to show that the dates are now\n// sorted in ascending order.\ndocument.write('&lt;p&gt;Dates sorted in ascending order (oldest to newest):&lt;/p&gt;');\nfor (var i = 0; i &lt; dates.length; i++) {\n  document.write(i + ': ' + dates[i] + '&lt;br&gt;');\n}\n\n// Now let's sort the dates in descending order and output the results.\ndates.sort(date_sort_desc);\n\ndocument.write('&lt;p&gt;Dates sorted in descending order (newest to oldest):&lt;/p&gt;');\nfor (var i = 0; i &lt; dates.length; i++) {\n  document.write(i + ': ' + dates[i] + '&lt;br&gt;');\n}\n\n// That's all there is to it!\n// From: http://onpub.com/index.php?s=7&amp;a=109\n\n&lt;/script&gt;\n</code></pre>","filePath":"pages/JavaScript/.md","_id":"6RYLnNdi0TGijeMV","dateUpdated":1541516013551}
{"date":"2018-11-12T16:55:32.626Z","title":"Build a Simple Web App with Express, React and GraphQL","sourceUrl":"https://www.sitepoint.com/build-a-simple-api-service-with-express-and-graphql/","path":"React/","category":"React","tags":["React"," GraphQL"," Express"],"author":"Braden Kelley","excerpt":"","dateCreated":1542041609805,"coverImage":"","type":"Post","frontmatter":"---\npath: 'React/'\ndate: 'Mon Nov 12 2018 22:25:32 GMT+0530 (India Standard Time)'\ntitle: 'Build a Simple Web App with Express, React and GraphQL'\ntags: ['React','GraphQL','Express']\ncategory: 'React'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://www.sitepoint.com/build-a-simple-api-service-with-express-and-graphql/'\ntype: 'Post'\n---\n    ","htmlCode":"<p><em>This article was originally published on <a href=\"https://developer.okta.com/blog/2018/10/11/build-simple-web-app-with-express-react-graphql\" rel=\"nofollow\">the Okta developer blog</a>. Thank you for supporting the partners who make SitePoint possible.</em></p>\n<p>GraphQL and React have both become quite popular in the last few years, and it’s safe to say they go together like avocado and toast. A GraphQL server can be written in Node and lets you easily create a flexible API using JavaScript classes and functions. When a frontend developer queries the server, only the information asked for gets processed. This means you can make the backend as robust as you want while keeping the frontend light by only requesting information needed for the page you’re viewing.</p>\n<p>GraphQL is a relatively new standard for defining types and querying data, and there are quite a few different implementations of it, both server-side and client-side. Today I’ll show you how to use Express to create a GraphQL server, as well as how to create a single-page app in React that uses Apollo’s client to query the server.</p>\n<h2>Create the React App</h2>\n<div><div><span>--ADVERTISEMENT--</span></div>\n\n\n<script src=\"https://play.aniview.com/5858ed930b8ee8851941a7bb/59627b0528a0616e231692a2/SitepointPMP.js\"></script><script>\nvar el = document.getElementById('aniBox');\nvar adBox = document.getElementById('adBox');\n// create an observer instance\nvar observer = new MutationObserver(function(mutations) {\n  mutations.forEach(function(mutation) {\n    if(mutation.attributeName == 'style'){\n      var s = el.getAttribute('style');\n      if(s.search('height: 360px') !=  -1) {\n        adBox.style = 'display: block';\n      }\n      else {\n        adBox.style = 'display: none';\n      }\n}\n  });    \n});\n\n// configuration of the observer:\nvar config = { attributes: true, attributeFilter: ['style']};\n \n// pass in the target node, as well as the observer options\nobserver.observe(el, config);\n</script></div><p>The quickest way to get started with a React app is to use <a href=\"https://github.com/facebook/create-react-app\">Create React App</a>. If you don’t already have Node, Yarn, and Create React App installed, you can run the following commands:</p>\n<pre><code>curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.11/install.sh | bash\nnpm install --global yarn create-react-app\n</code></pre>\n<p>Next, create and start a new app:</p>\n<pre><code>create-react-app graphql-express-react\ncd graphql-express-react\nyarn start\n</code></pre>\n<p>When you run <code>create-react-app</code>, you’ll get a new folder with everything you need to get started, and all the dependencies you need will be installed locally using <code>yarn</code>. When you type <code>yarn start</code> from within the folder, you’re starting the frontend development server that will automatically update whenever you edit any files.</p>\n<p><img src=\"https://developer.okta.com/assets/blog/graphql-express-react/create-react-app-f1bc3c3d59d01040f1ce6ae716e14f647788afd5451d5d87c4b63bfa2f43985a.png\" alt=\"create-react-app bootstrapped app\"></p>\n<h2>Create the GraphQL Server</h2>\n<p>Before we continue writing the frontend, you’ll need a server to connect to. Run the following commands to install the dependencies you’ll need to get up and running:</p>\n<pre><code>yarn add express@4.16.3 cors@2.8.4 graphql@14.0.2 express-graphql@0.6.12 graphql-tag@2.9.2\n</code></pre>\n<p>Create a new directory in your project’s <code>src</code> folder, named <code>server</code>:</p>\n<pre><code>mkdir src/server\n</code></pre>\n<p>In there, create a new file named <code>index.js</code>, with the following code:</p>\n<pre><code>const express = require('express');\nconst cors = require('cors');\nconst graphqlHTTP = require('express-graphql');\nconst gql = require('graphql-tag');\nconst { buildASTSchema } = require('graphql');\n\nconst POSTS = [\n  { author: \"John Doe\", body: \"Hello world\" },\n  { author: \"Jane Doe\", body: \"Hi, planet!\" },\n];\n\nconst schema = buildASTSchema(gql`\n  type Query {\n    posts: [Post]\n    post(id: ID!): Post\n  }\n\n  type Post {\n    id: ID\n    author: String\n    body: String\n  }\n`);\n\nconst mapPost = (post, id) =&gt; post &amp;&amp; ({ id, ...post });\n\nconst root = {\n  posts: () =&gt; POSTS.map(mapPost),\n  post: ({ id }) =&gt; mapPost(POSTS[id], id),\n};\n\nconst app = express();\napp.use(cors());\napp.use('/graphql', graphqlHTTP({\n  schema,\n  rootValue: root,\n  graphiql: true,\n}));\n\nconst port = process.env.PORT || 4000\napp.listen(port);\nconsole.log(`Running a GraphQL API server at localhost:${port}/graphql`);\n</code></pre>\n<p>Let me explain the different parts of this code.</p>\n<p>At the top of the file, you use the <code>require</code> tag to import your dependencies. Native Node doesn’t support the <code>import</code> tag yet, but you can use <code>require</code> instead. A future version of Node will likely support <code>import</code>. Create React App uses <code>babel</code> to transpile the code before running it, which allows you to use the <code>import</code> syntax in the React code, so you’ll see that when we get to the frontend code.</p>\n<p>For now, this is just using some mock data, which is what the <code>const POSTS</code> contains. Each item contains an <code>author</code> and a <code>body</code>.</p>\n<p>The <code>gql</code> tag allows your favorite code editor to realize that you’re writing GraphQL code so that it can stylize it appropriately. It also parses the string and converts it to GraphQL AST <a href=\"https://blog.buildo.io/a-tour-of-abstract-syntax-trees-906c0574a067\">Abstract Syntax Tree</a>. You then need to build a schema using <code>buildASTSchema</code>.</p>\n<p>The GraphQL schema might be the most interesting part of this code. This is what defines the different types and allows you to say what the client can query. This will also automatically generate some very useful documentation so that you can just focus on coding.</p>\n<pre><code>type Query {\n  posts: [Post]\n  post(id: ID!): Post\n}\n\ntype Post {\n  id: ID\n  author: String\n  body: String\n}\n</code></pre>\n<p>Here, you’ve defined a <code>Post</code> type, which contains an <code>id</code>, and <code>author</code>, and a <code>body</code>. You need to say what the types are for each element. Here, <code>author</code> and <code>body</code> both use the primitive <code>String</code> type, and <code>id</code> is an <code>ID</code>.</p>\n<p>The <code>Query</code> type is a special type that lets you query the data. Here, you’re saying that <code>posts</code> will give you an array of <code>Post</code>s, but if you want a single <code>Post</code> you can query it by calling <code>post</code> and passing in the ID.</p>\n<pre><code>const mapPost = (post, id) =&gt; post &amp;&amp; ({ id, ...post });\n\nconst root = {\n  posts: () =&gt; POSTS.map(mapPost),\n  post: ({ id }) =&gt; mapPost(POSTS[id], id),\n};\n</code></pre>\n<p>You need to provide a set of resolvers to tell GraphQL how to handle the queries. When someone queries <code>posts</code>, it will run this function, providing an array of all the <code>POSTS</code>, using their index as an ID.</p>\n<p>When you query <code>post</code>, it expects an <code>id</code> and will return the post at the given index.</p>\n<pre><code>const app = express();\napp.use(cors());\napp.use('/graphql', graphqlHTTP({\n  schema,\n  rootValue: root,\n  graphiql: true,\n}));\n\nconst port = process.env.PORT || 4000\napp.listen(port);\nconsole.log(`Running a GraphQL API server at localhost:${port}/graphql`);\n</code></pre>\n<p>Now you are able to create the server. The <code>graphqlHTTP</code> function creates an Express server running GraphQL, which expects the resolvers as <code>rootValue</code>, and the schema. The <code>graphiql</code> flag is optional and will run a server for you allowing you to more easily visualize the data and see the auto-generated documentation. When you run <code>app.listen</code>, you’re starting the GraphQL server.</p>\n<p>To make sure we can easily run both the server and client at the same time, add the following dev dependencies:</p>\n<pre><code>yarn add -D nodemon@1.18.4 npm-run-all@4.1.3\n</code></pre>\n<p>Next, edit your <code>package.json</code> file so that the <code>scripts</code> section looks like this:</p>\n<pre><code>{\n  \"start\": \"npm-run-all --parallel watch:server start:web\",\n  \"start:web\": \"react-scripts start\",\n  \"start:server\": \"node src/server\",\n  \"watch:server\": \"nodemon --watch src/server src/server\",\n  \"build\": \"react-scripts build\",\n  \"test\": \"react-scripts test --env=jsdom\",\n  \"eject\": \"react-scripts eject\"\n},\n</code></pre>\n<p>Close your existing web server, then simply type <code>yarn start</code> again to run both the server and client at the same time. Whenever you make changes to the server, just the server will restart. Whenever you make changes to the frontend code, the page should automatically refresh with the latest changes.</p>\n<p>Point your browser to <code>http://localhost:4000/graphql</code> to get the GraphiQL server. You can always come back here and refresh after changing some code around in the server to see the latest Schema and test your queries.</p>\n<p><img src=\"https://developer.okta.com/assets/blog/graphql-express-react/graphiql-743319c6b059cfd1ed5bc28394749854af242b7f56d5c8521d43e106d548e9f0.png\" alt=\"GraphiQL\"></p>\n<h2>Connect React to GraphQL</h2>\n<p>Next, you need to connect the frontend to GraphQL. I’ll use Bootstrap for some decent styling with minimal effort. <a href=\"https://www.apollographql.com/docs/react/\">Apollo</a> makes a great React client that can link up to any GraphQL server. To install the dependencies you need for the frontend, run the following:</p>\n<pre><code>yarn add bootstrap@4.1.3 reactstrap@6.4.0 apollo-boost@0.1.16 react-apollo@2.1.11\n</code></pre>\n<p>You’ll need to configure the Apollo client to know where to connect to the backend. Create a new file <code>src/apollo.js</code> with the following code:</p>\n<pre><code>import ApolloClient from 'apollo-boost';\n\nexport default new ApolloClient({\n  uri: \"http://localhost:4000/graphql\",\n});\n</code></pre>\n<p>In order for Apollo’s <code>Query</code> React component to be able to connect using the client, the entire app needs to be wrapped in an <code>ApolloProvider</code> component. You’ll also want to include the styling for Bootstrap, and you can get rid of the <code>index.css</code> file that came with Create React App now. Make the following changes to your <code>src/index.js</code> file:</p>\n<pre><code>@@ -1,8 +1,17 @@\n import React from 'react';\n import ReactDOM from 'react-dom';\n-import './index.css';\n+import { ApolloProvider } from 'react-apollo';\n+\n+import 'bootstrap/dist/css/bootstrap.min.css';\n import App from './App';\n import registerServiceWorker from './registerServiceWorker';\n+import client from './apollo';\n\n-ReactDOM.render(&lt;App /&gt;, document.getElementById('root'));\n+ReactDOM.render(\n+  &lt;ApolloProvider client={client}&gt;\n+    &lt;App /&gt;\n+  &lt;/ApolloProvider&gt;,\n+  document.getElementById('root')\n+);\n serviceWorker.unregister();\n+if (module.hot) module.hot.accept();\n</code></pre>\n<p>The <code>module.hot.accept()</code> isn’t really necessary, but makes it so that just the components changing within the app will refresh as you update them, rather than refreshing the entire page. Every once in a while you may need to refresh just to reset the state of the app, but generally, this leads to a quicker turnaround time.</p>\n<p>Create a new file <code>src/PostViewer.js</code> that will fetch the data and render it in a table:</p>\n<pre><code>import React from 'react';\nimport gql from 'graphql-tag';\nimport { Query } from 'react-apollo';\nimport { Table } from 'reactstrap';\n\nexport const GET_POSTS = gql`\n  query GetPosts {\n    posts {\n      id\n      author\n      body\n    }\n  }\n`;\n\nexport default () =&gt; (\n  &lt;Query query={GET_POSTS}&gt;\n    {({ loading, data }) =&gt; !loading &amp;&amp; (\n      &lt;Table&gt;\n        &lt;thead&gt;\n          &lt;tr&gt;\n            &lt;th&gt;Author&lt;/th&gt;\n            &lt;th&gt;Body&lt;/th&gt;\n          &lt;/tr&gt;\n        &lt;/thead&gt;\n        &lt;tbody&gt;\n          {data.posts.map(post =&gt; (\n            &lt;tr key={post.id}&gt;\n              &lt;td&gt;{post.author}&lt;/td&gt;\n              &lt;td&gt;{post.body}&lt;/td&gt;\n            &lt;/tr&gt;\n          ))}\n        &lt;/tbody&gt;\n      &lt;/Table&gt;\n    )}\n  &lt;/Query&gt;\n);\n</code></pre>\n<p>The <code>Query</code> component requires a GraphQL query. In this case, you’re just getting all of the posts with their ID and the <code>author</code> and <code>body</code>. The <code>Query</code> component also requires a render function as its only child. It provides a <code>loading</code> state, but in our case, we just won’t show anything while it’s loading, since it will be really quick to fetch the data locally. Once it’s done loading, the <code>data</code> variable will be an object including the data you requested.</p>\n<p>The above code renders a table (<code>Table</code> is a component that includes all the Bootstrap classes you need to make it look pretty) with all of the posts.</p>\n<p>You should now change your <code>src/App.js</code> file to include the <code>PostViewer</code> component you just made. It should look like this:</p>\n<pre><code>import React, { Component } from 'react';\n\nimport PostViewer from './PostViewer';\n\nclass App extends Component {\n  render() {\n    return (\n      &lt;main&gt;\n        &lt;PostViewer /&gt;\n      &lt;/main&gt;\n    );\n  }\n}\n\nexport default App;\n</code></pre>\n<p>Now if you go to <code>http://localhost:3000</code> you should see this:</p>\n<p><img src=\"https://developer.okta.com/assets/blog/graphql-express-react/plain-table-596b8d563739fbc4032de03fe94e3501bbfd156cdd7193bc49a053d2d5ea16b5.png\" alt=\"plain table\"></p>\n<h2>Add the Ability to Edit Posts in GraphQL</h2>\n<p>In GraphQL, a query is typically read-only. If you want to modify data, you should use what’s known as a <em>mutation</em> instead.</p>\n<p>Create a new <code>Mutation</code> type in your <code>const schema</code> in <code>src/server/index.js</code> to submit a post. You can create an <code>input</code> type to simplify your input variables. The new mutation should return the new <code>Post</code> on success:</p>\n<pre><code>type Mutation {\n  submitPost(input: PostInput!): Post\n}\n\ninput PostInput {\n  id: ID\n  author: String!\n  body: String!\n}\n</code></pre>\n<p>You’ll need to update your <code>root</code> variable to create a new resolver for <code>submitPost</code> as well. Add the following resolver:</p>\n<pre><code>submitPost: ({ input: { id, author, body } }) =&gt; {\n  const post = { author, body };\n  let index = POSTS.length;\n\n  if (id != null &amp;&amp; id &gt;= 0 &amp;&amp; id &lt; POSTS.length) {\n    if (POSTS[id].authorId !== authorId) return null;\n\n    POSTS.splice(id, 1, post);\n    index = id;\n  } else {\n    POSTS.push(post);\n  }\n\n  return mapPost(post, index);\n},\n</code></pre>\n<p>If you provide an <code>id</code>, it will try to find the post at that index and replace the data with the <code>author</code> and <code>body</code> that was provided. Otherwise, it will add a new post. Then it returns the post you provided along with the new <code>id</code> for it. When you send a mutation request to GraphQL, you can define which pieces you want back:</p>\n<p><img src=\"https://developer.okta.com/assets/blog/graphql-express-react/submit-post-d2e4223335b436d4e6a5110e2f64b9d8ddfda355f2ea54477d8815bcefbc7aee.png\" alt=\"submit post\"></p>\n<p>For the frontend, you’ll need to create a new component for editing posts. Forms in React can be made easier by a library called <a href=\"https://github.com/final-form/react-final-form\">Final Form</a>. Install it with <code>yarn</code>:</p>\n<pre><code>yarn add final-form@4.10.0 react-final-form@3.6.5\n</code></pre>\n<p>Now, make a new file <code>src/PostEditor.js</code> and fill it with the following (I’ll explain it in more detail just below):</p>\n<pre><code>import React from 'react';\nimport gql from 'graphql-tag';\nimport {\n  Button,\n  Form,\n  FormGroup,\n  Label,\n  Modal,\n  ModalHeader,\n  ModalBody,\n  ModalFooter,\n} from 'reactstrap';\nimport { Form as FinalForm, Field } from 'react-final-form';\n\nimport client from './apollo';\nimport { GET_POSTS } from './PostViewer';\n\nconst SUBMIT_POST = gql`\n  mutation SubmitPost($input: PostInput!) {\n    submitPost(input: $input) {\n      id\n    }\n  }\n`;\n\nconst PostEditor = ({ post, onClose }) =&gt; (\n  &lt;FinalForm\n    onSubmit={async ({ id, author, body }) =&gt; {\n      const input = { id, author, body };\n\n      await client.mutate({\n        variables: { input },\n        mutation: SUBMIT_POST,\n        refetchQueries: () =&gt; [{ query: GET_POSTS }],\n      });\n\n      onClose();\n    }}\n    initialValues={post}\n    render={({ handleSubmit, pristine, invalid }) =&gt; (\n      &lt;Modal isOpen toggle={onClose}&gt;\n        &lt;Form onSubmit={handleSubmit}&gt;\n          &lt;ModalHeader toggle={onClose}&gt;\n            {post.id ? 'Edit Post' : 'New Post'}\n          &lt;/ModalHeader&gt;\n          &lt;ModalBody&gt;\n            &lt;FormGroup&gt;\n              &lt;Label&gt;Author&lt;/Label&gt;\n              &lt;Field\n                required\n                name=\"author\"\n                className=\"form-control\"\n                component=\"input\"\n              /&gt;\n            &lt;/FormGroup&gt;\n            &lt;FormGroup&gt;\n              &lt;Label&gt;Body&lt;/Label&gt;\n              &lt;Field\n                required\n                name=\"body\"\n                className=\"form-control\"\n                component=\"input\"\n              /&gt;\n            &lt;/FormGroup&gt;\n          &lt;/ModalBody&gt;\n          &lt;ModalFooter&gt;\n            &lt;Button type=\"submit\" disabled={pristine} color=\"primary\"&gt;Save&lt;/Button&gt;\n            &lt;Button color=\"secondary\" onClick={onClose}&gt;Cancel&lt;/Button&gt;\n          &lt;/ModalFooter&gt;\n        &lt;/Form&gt;\n      &lt;/Modal&gt;\n    )}\n  /&gt;\n);\n\nexport default PostEditor;\n</code></pre>\n<p>The <code>submitPost</code> mutation is the new mutation to connect to the backend. It can use the <code>PostInput</code> type defined in the server:</p>\n<pre><code>const SUBMIT_POST = gql`\n  mutation SubmitPost($input: PostInput!) {\n    submitPost(input: $input) {\n      id\n    }\n  }\n`;\n</code></pre>\n<p>Final Form takes an <code>onSubmit</code> function that will pass in the data entered by the user. After the post is submitted, you’ll want to close the modal, so <code>PostEditor</code> takes an <code>onClose</code> prop to call when you’re done submitting.</p>\n<p>Final Form also takes an <code>initialValues</code> object to define what values the form should initially have. In this case, the <code>PostEditor</code> component will take a <code>post</code> prop that has the variables you need in it, so that gets passed along as the initial values.</p>\n<p>The other required prop is the <code>render</code> function, which will render the form. Final Form gives you a few useful form props so you can know if the form is valid or not, or if it’s been modified from the <code>initialValues</code>.</p>\n<pre><code>const PostEditor = ({ post, onClose }) =&gt; (\n  &lt;FinalForm\n    onSubmit={/* ... */}\n    initialValues={post}\n    render={/* ... */}\n  /&gt;\n);\n\nexport default PostEditor;\n</code></pre>\n<p>In the <code>onSubmit</code> function, you’ll call the mutation needed to submit the post. Apollo lets you re-fetch queries. Since you know your list of posts will be out of date once you submit edits, you can re-fetch the <code>GET_POSTS</code> query here.</p>\n<pre><code>onSubmit={async ({ id, author, body }) =&gt; {\n  const input = { id, author, body };\n\n  await client.mutate({\n    variables: { input },\n    mutation: SUBMIT_POST,\n    refetchQueries: () =&gt; [{ query: GET_POSTS }],\n  });\n\n  onClose();\n}}\n</code></pre>\n<p>The <code>render</code> function will display a Bootstrap modal. This <code>PostEditor</code> component will only be rendered when you want it to be open, so <code>isOpen</code> is just set to <code>true</code>. Here you also use the <code>onClose</code> prop to close the modal when the user clicks outside the modal, hits <code>Esc</code>, or clicks the Cancel button.</p>\n<p>The form needs to have the <code>handleSubmit</code> function passed to it as an <code>onSubmit</code> prop. This tells the form to go through Final Form instead of sending a <code>POST</code> request to the page.</p>\n<p>Final Form also handles all the boilerplate needed to have a controlled <code>input</code>. Instead of storing the data in state whenever the user types something, you can just use the <code>Field</code> component.</p>\n<pre><code>render={({ handleSubmit, pristine, invalid }) =&gt; (\n  &lt;Modal isOpen toggle={onClose}&gt;\n    &lt;Form onSubmit={handleSubmit}&gt;\n      &lt;ModalHeader toggle={onClose}&gt;\n        {post.id ? 'Edit Post' : 'New Post'}\n      &lt;/ModalHeader&gt;\n      &lt;ModalBody&gt;\n        &lt;FormGroup&gt;\n          &lt;Label&gt;Author&lt;/Label&gt;\n          &lt;Field\n            required\n            name=\"author\"\n            className=\"form-control\"\n            component=\"input\"\n          /&gt;\n        &lt;/FormGroup&gt;\n        &lt;FormGroup&gt;\n          &lt;Label&gt;Body&lt;/Label&gt;\n          &lt;Field\n            required\n            name=\"body\"\n            className=\"form-control\"\n            component=\"input\"\n          /&gt;\n        &lt;/FormGroup&gt;\n      &lt;/ModalBody&gt;\n      &lt;ModalFooter&gt;\n        &lt;Button type=\"submit\" disabled={pristine} color=\"primary\"&gt;Save&lt;/Button&gt;\n        &lt;Button color=\"secondary\" onClick={onClose}&gt;Cancel&lt;/Button&gt;\n      &lt;/ModalFooter&gt;\n    &lt;/Form&gt;\n  &lt;/Modal&gt;\n)}\n</code></pre>\n<p>Next, you’ll have to make a couple small changes to your <code>PostViewer</code>. This adds a hook to each row so that you can determine whether the row should be editable or not and if so, changes the styles a bit and lets you click on the row. Clicking on the row calls another callback, which you can use to set which post is being edited.</p>\n<pre><code>diff --git a/src/PostViewer.js b/src/PostViewer.js\nindex 5c53b5a..84177e0 100644\n--- a/src/PostViewer.js\n+++ b/src/PostViewer.js\n@@ -13,7 +13,11 @@ export const GET_POSTS = gql`\n   }\n `;\n\n-export default () =&gt; (\n+const rowStyles = (post, canEdit) =&gt; canEdit(post)\n+  ? { cursor: 'pointer', fontWeight: 'bold' }\n+  : {};\n+\n+const PostViewer = ({ canEdit, onEdit }) =&gt; (\n   &lt;Query query={GET_POSTS}&gt;\n     {({ loading, data }) =&gt; !loading &amp;&amp; (\n       &lt;Table&gt;\n@@ -25,7 +29,11 @@ export default () =&gt; (\n         &lt;/thead&gt;\n         &lt;tbody&gt;\n           {data.posts.map(post =&gt; (\n-            &lt;tr key={post.id}&gt;\n+            &lt;tr\n+              key={post.id}\n+              style={rowStyles(post, canEdit)}\n+              onClick={() =&gt; canEdit(post) &amp;&amp; onEdit(post)}\n+            &gt;\n               &lt;td&gt;{post.author}&lt;/td&gt;\n               &lt;td&gt;{post.body}&lt;/td&gt;\n             &lt;/tr&gt;\n@@ -35,3 +43,10 @@ export default () =&gt; (\n     )}\n   &lt;/Query&gt;\n );\n+\n+PostViewer.defaultProps = {\n+  canEdit: () =&gt; false,\n+  onEdit: () =&gt; null,\n+};\n+\n+export default PostViewer;\n</code></pre>\n<p>Now, tie this all together in <code>src/App.js</code>. You can create a “New Post” button to create a new post, and make it so that you can edit any other existing post as well:</p>\n<pre><code>import React, { Component } from 'react';\nimport { Button, Container } from 'reactstrap';\n\nimport PostViewer from './PostViewer';\nimport PostEditor from './PostEditor';\n\nclass App extends Component {\n  state = {\n    editing: null,\n  };\n\n  render() {\n    const { editing } = this.state;\n\n    return (\n      &lt;Container fluid&gt;\n        &lt;Button\n          className=\"my-2\"\n          color=\"primary\"\n          onClick={() =&gt; this.setState({ editing: {} })}\n        &gt;\n          New Post\n        &lt;/Button&gt;\n        &lt;PostViewer\n          canEdit={() =&gt; true}\n          onEdit={(post) =&gt; this.setState({ editing: post })}\n        /&gt;\n        {editing &amp;&amp; (\n          &lt;PostEditor\n            post={editing}\n            onClose={() =&gt; this.setState({ editing: null })}\n          /&gt;\n        )}\n      &lt;/Container&gt;\n    );\n  }\n}\n\nexport default App;\n</code></pre>\n<h2>Add User Authentication to the React + GraphQL Web App</h2>\n<p>One simple way to add authentication to your project is with Okta. Okta is a cloud service that allows developers to create, edit, and securely store user accounts and user account data, and connect them with one or multiple applications. If you don’t already have one, <a href=\"https://developer.okta.com/signup/\">sign up for a forever-free developer account</a>. Log in to your developer console, navigate to <strong>Applications</strong>, then click <strong>Add Application</strong>. Select <strong>Single-Page App</strong>, then click <strong>Next</strong>.</p>\n<p>Since Create React App runs on port 3000 by default, you should add that as a Base URI and Login Redirect URI. Your settings should look like the following:</p>\n<p><img src=\"https://developer.okta.com/assets/blog/graphql-express-react/create-new-application-settings-31cf8fdf708dbb8c222e9e5dd07b7e89f53cc2bae6b5c69acf427a44faadaeef.png\" alt=\"create new application settings\"></p>\n<p>Click <strong>Done</strong> to save your app, then copy your <strong>Client ID</strong> and paste it as a variable into a file called <code>.env.local</code> in the root of your project. This will allow you to access the file in your code without needing to store credentials in source control. You’ll also need to add your organization URL (without the <code>-admin</code> suffix). Environment variables (other than <code>NODE_ENV</code>) need to start with <code>REACT_APP_</code> in order for Create React App to read them, so the file should end up looking like this:</p>\n<p><strong>.env.local</strong></p>\n<pre><code>REACT_APP_OKTA_CLIENT_ID={yourClientId}\nREACT_APP_OKTA_ORG_URL=https://{yourOktaDomain}\n</code></pre>\n<p>You’re also going to need an API token later for the server, so while you’re in there, navigate to <strong>API</strong> -&gt; <strong>Tokens</strong>, then click on <strong>Create Token</strong>. You can have many tokens, so just give this one a name that reminds you what it’s for, like “GraphQL Express”. You’ll be given a token that you can only see right now. If you lose the token, you’ll have to create another one. Add this to <code>.env</code> also.</p>\n<pre><code>REACT_APP_OKTA_TOKEN={yourOktaAPIToken}\n</code></pre>\n<p>The easiest way to add Authentication with Okta to a React app is to use <a href=\"https://github.com/okta/okta-oidc-js/tree/master/packages/okta-react\">Okta’s React SDK</a>. You’ll also need to add routes, which can be done using <a href=\"https://reacttraining.com/react-router/\">React Router</a>.</p>\n<pre><code>yarn add @okta/okta-react@1.1.1 react-router-dom@4.3.1\n</code></pre>\n<p>In order to know if the user is authenticated, Okta requires the app to be wrapped in a <code>Security</code> component with some configuration. It also depends on React Router, so you’ll end up with a <code>BrowserRouter</code> component, wrapping a <code>Security</code> component, wrapping an <code>ApolloProvider</code> component, which finally wraps your <code>App</code> in a <code>Route</code>. Your <code>src/index.js</code> file should end up looking like this:</p>\n<pre><code>import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter, Route } from 'react-router-dom';\nimport { Security, ImplicitCallback } from '@okta/okta-react';\nimport { ApolloProvider } from 'react-apollo';\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport App from './App';\nimport registerServiceWorker from './registerServiceWorker';\nimport client from './apollo';\n\nReactDOM.render(\n  &lt;BrowserRouter&gt;\n    &lt;Security\n      issuer={`${process.env.REACT_APP_OKTA_ORG_URL}/oauth2/default`}\n      redirect_uri={`${window.location.origin}/implicit/callback`}\n      client_id={process.env.REACT_APP_OKTA_CLIENT_ID}\n    &gt;\n      &lt;ApolloProvider client={client}&gt;\n        &lt;Route path=\"/implicit/callback\" component={ImplicitCallback} /&gt;\n        &lt;Route path=\"/\" component={App} /&gt;\n      &lt;/ApolloProvider&gt;\n    &lt;/Security&gt;\n  &lt;/BrowserRouter&gt;,\n  document.getElementById('root')\n);\nregisterServiceWorker();\nif (module.hot) module.hot.accept();\n</code></pre>\n<p>The Okta SDK comes with a <code>withAuth</code> higher order component (HoC) that can be used for a wide variety of auth-related things, but for this example, you’ll only need to know whether or not you’re authenticated, and some information about the user. To make this a little easier, I wrote a simple HoC to override the one that comes with the Okta SDK. Create a new file <code>src/withAuth.js</code> containing the following:</p>\n<pre><code>import React from 'react';\nimport { withAuth } from '@okta/okta-react';\n\nexport default Component =&gt; withAuth(class WithAuth extends React.Component {\n  state = {\n    ...this.props.auth,\n    authenticated: null,\n    user: null,\n    loading: true,\n  };\n\n  componentDidMount() {\n    this.updateAuth();\n  }\n\n  componentDidUpdate() {\n    this.updateAuth();\n  }\n\n  async updateAuth() {\n    const authenticated = await this.props.auth.isAuthenticated();\n    if (authenticated !== this.state.authenticated) {\n      const user = await this.props.auth.getUser();\n      this.setState({ authenticated, user, loading: false });\n    }\n  }\n\n  render() {\n    const { auth, ...props } = this.props;\n    return &lt;Component {...props} auth={this.state} /&gt;;\n  }\n});\n</code></pre>\n<p>By wrapping a component with this new function, your app will automatically be re-rendered whenever a user logs in or out, and you’ll be able to access information about the user.</p>\n<p>Now you can wrap the <code>App</code> component with this <code>withAuth</code> HoC. For a short time when the app first loads, Okta won’t quite be sure whether a user is logged in or not. To keep things simple, just don’t render anything in your <code>App</code> component during this loading period. You could, however, choose to render the posts and just disable editing until you know more information about the user.</p>\n<p>At the very top of your render function in <code>src/App.js</code>, add the following:</p>\n<pre><code>const { auth } = this.props;\nif (auth.loading) return null;\n\nconst { user, login, logout } = auth;\n</code></pre>\n<p>Now you can replace the “New Post” button with the following code, which will render a “Sign In” button if you’re not logged in. If you are logged in, you’ll instead see both the “New Post” button you had before, as well as a “Sign Out” button. This will make it so that you must be logged in order to create a new post.</p>\n<pre><code>{user ? (\n  &lt;div&gt;\n    &lt;Button\n      className=\"my-2\"\n      color=\"primary\"\n      onClick={() =&gt; this.setState({ editing: {} })}\n    &gt;\n      New Post\n    &lt;/Button&gt;\n    &lt;Button\n      className=\"m-2\"\n      color=\"secondary\"\n      onClick={() =&gt; logout()}\n    &gt;\n      Sign Out (signed in as {user.name})\n    &lt;/Button&gt;\n  &lt;/div&gt;\n) : (\n  &lt;Button\n    className=\"my-2\"\n    color=\"primary\"\n    onClick={() =&gt; login()}\n  &gt;\n    Sign In\n  &lt;/Button&gt;\n)}\n</code></pre>\n<p>To make sure you also can’t edit a post unless you’re logged, change the <code>canEdit</code> prop to check that you have a user.</p>\n<pre><code>canEdit={() =&gt; Boolean(user)}\n</code></pre>\n<p>You also need to export <code>withAuth(App)</code> instead of <code>App</code>. Your <code>src/App.js</code> file should now look like this:</p>\n<pre><code>import React, { Component } from 'react';\nimport { Button, Container } from 'reactstrap';\n\nimport PostViewer from './PostViewer';\nimport PostEditor from './PostEditor';\nimport withAuth from './withAuth';\n\nclass App extends Component {\n  state = {\n    editing: null,\n  };\n\n  render() {\n    const { auth } = this.props;\n    if (auth.loading) return null;\n\n    const { user, login, logout } = auth;\n    const { editing } = this.state;\n\n    return (\n      &lt;Container fluid&gt;\n        {user ? (\n          &lt;div&gt;\n            &lt;Button\n              className=\"my-2\"\n              color=\"primary\"\n              onClick={() =&gt; this.setState({ editing: {} })}\n            &gt;\n              New Post\n            &lt;/Button&gt;\n            &lt;Button\n              className=\"m-2\"\n              color=\"secondary\"\n              onClick={() =&gt; logout()}\n            &gt;\n              Sign Out (signed in as {user.name})\n            &lt;/Button&gt;\n          &lt;/div&gt;\n        ) : (\n          &lt;Button\n            className=\"my-2\"\n            color=\"primary\"\n            onClick={() =&gt; login()}\n          &gt;\n            Sign In\n          &lt;/Button&gt;\n        )}\n        &lt;PostViewer\n          canEdit={() =&gt; Boolean(user)}\n          onEdit={(post) =&gt; this.setState({ editing: post })}\n        /&gt;\n        {editing &amp;&amp; (\n          &lt;PostEditor\n            post={editing}\n            onClose={() =&gt; this.setState({ editing: null })}\n          /&gt;\n        )}\n      &lt;/Container&gt;\n    );\n  }\n}\n\nexport default withAuth(App);\n</code></pre>\n<h2>Add User Authentication to the Server</h2>\n<p>The web app now requires you to be logged in to create a post, but a savvy user could still modify the data by sending a request directly to your server. To prevent this, add some authentication to the server. You’ll need to add Okta’s Node SDK and the JWT Verifier as dependencies. You’ll also need to use <code>dotenv</code> in order to read the variables from <code>.env.local</code>.</p>\n<pre><code>yarn add @okta/jwt-verifier@0.0.12 @okta/okta-sdk-nodejs@1.2.0 dotenv@6.0.0\n</code></pre>\n<p>At the top of your <code>src/server/index.js</code> file, you’ll need to tell <code>dotenv</code> to read in the environment variables:</p>\n<pre><code>require('dotenv').config({ path: '.env.local' });\n</code></pre>\n<p>You’re going to need the frontend to send a JSON Web Token (JWT) so that users can identify themselves. When you get a JWT on the server, you’ll need to verify it using Okta’s JWT Verifier. To get more information about a user, you’ll also need to use Okta’s Node SDK. You can set these up near the top of your server, just after all the other <code>require</code> statements.</p>\n<pre><code>const { Client } = require('@okta/okta-sdk-nodejs');\nconst OktaJwtVerifier = require('@okta/jwt-verifier');\n\nconst oktaJwtVerifier = new OktaJwtVerifier({\n  clientId: process.env.REACT_APP_OKTA_CLIENT_ID,\n  issuer: `${process.env.REACT_APP_OKTA_ORG_URL}/oauth2/default`,\n});\n\nconst client = new Client({\n  orgUrl: process.env.REACT_APP_OKTA_ORG_URL,\n  token: process.env.REACT_APP_OKTA_TOKEN,\n});\n</code></pre>\n<p>Now that you’re going to be using real users, it doesn’t make as much sense to just send a string with the username, especially since that could change over time. It would be better if a post is associated with a user. To set this up, create a new <code>AUTHORS</code> variable for your users, and change the <code>POSTS</code> variable to just have an <code>authorId</code> instead of an <code>author</code> string:</p>\n<pre><code>const AUTHORS = {\n  1: { id: 1, name: \"John Doe\" },\n  2: { id: 2, name: \"Jane Doe\" },\n};\n\nconst POSTS = [\n  { authorId: 1, body: \"Hello world\" },\n  { authorId: 2, body: \"Hi, planet!\" },\n];\n</code></pre>\n<p>In your schema, you’ll no longer need the <code>author: String</code> input in <code>PostInput</code>, and <code>author</code> on <code>Post</code> should now be of type <code>Author</code> instead of <code>String</code>. You’ll also need to make this new <code>Author</code> type:</p>\n<pre><code>type Author {\n  id: ID\n  name: String\n}\n</code></pre>\n<p>When looking up your user, you’ll now want to pull the author from the <code>AUTHORS</code> variable:</p>\n<pre><code>const mapPost = (post, id) =&gt; post &amp;&amp; ({\n  ...post,\n  id,\n  author: AUTHORS[post.authorId],\n});\n</code></pre>\n<p>Now, you’ll need to create a <code>getUserId</code> function that can verify the access token and fetch some information about the user. The token will be sent as an <code>Authorization</code> header, and will look something like <code>Bearer eyJraWQ...7h-zfqg</code>. The following function will add the author’s name to the <code>AUTHORS</code> object if it doesn’t already exist.</p>\n<pre><code>const getUserId = async ({ authorization }) =&gt; {\n  try {\n    const accessToken = authorization.trim().split(' ')[1];\n    const { claims: { uid } } = await oktaJwtVerifier.verifyAccessToken(accessToken);\n\n    if (!AUTHORS[uid]) {\n      const { profile: { firstName, lastName } } = await client.getUser(uid);\n\n      AUTHORS[uid] = {\n        id: uid,\n        name: [firstName, lastName].filter(Boolean).join(' '),\n      };\n    }\n\n    return uid;\n  } catch (error) {\n    return null;\n  }\n};\n</code></pre>\n<p>Now you can change the <code>submitPost</code> function to get the user’s ID when they post. If the user isn’t logged in, you can just return <code>null</code>. This will prevent the post from getting created. You can also return <code>null</code> if the user is trying to edit a post they didn’t create.</p>\n<pre><code>-  submitPost: ({ input: { id, author, body } }) =&gt; {\n-    const post = { author, body };\n+  submitPost: async ({ input: { id, body } }, { headers }) =&gt; {\n+    const authorId = await getUserId(headers);\n+    if (!authorId) return null;\n+\n+    const post = { authorId, body };\n     let index = POSTS.length;\n\n     if (id != null &amp;&amp; id &gt;= 0 &amp;&amp; id &lt; POSTS.length) {\n+      if (POSTS[id].authorId !== authorId) return null;\n+\n       POSTS.splice(id, 1, post);\n       index = id;\n     } else {\n</code></pre>\n<p>Your final <code>src/server/index.js</code> file should now look like this:</p>\n<pre><code>require('dotenv').config({ path: '.env.local' });\n\nconst express = require('express');\nconst cors = require('cors');\nconst graphqlHTTP = require('express-graphql');\nconst gql = require('graphql-tag');\nconst { buildASTSchema } = require('graphql');\nconst { Client } = require('@okta/okta-sdk-nodejs');\nconst OktaJwtVerifier = require('@okta/jwt-verifier');\n\nconst oktaJwtVerifier = new OktaJwtVerifier({\n  clientId: process.env.REACT_APP_OKTA_CLIENT_ID,\n  issuer: `${process.env.REACT_APP_OKTA_ORG_URL}/oauth2/default`,\n});\n\nconst client = new Client({\n  orgUrl: process.env.REACT_APP_OKTA_ORG_URL,\n  token: process.env.REACT_APP_OKTA_TOKEN,\n});\n\nconst AUTHORS = {\n  1: { id: 1, name: \"John Doe\" },\n  2: { id: 2, name: \"Jane Doe\" },\n};\n\nconst POSTS = [\n  { authorId: 1, body: \"Hello world\" },\n  { authorId: 2, body: \"Hi, planet!\" },\n];\n\nconst schema = buildASTSchema(gql`\n  type Query {\n    posts: [Post]\n    post(id: ID): Post\n  }\n\n  type Mutation {\n    submitPost(input: PostInput!): Post\n  }\n\n  input PostInput {\n    id: ID\n    body: String\n  }\n\n  type Post {\n    id: ID\n    author: Author\n    body: String\n  }\n\n  type Author {\n    id: ID\n    name: String\n  }\n`);\n\nconst mapPost = (post, id) =&gt; post &amp;&amp; ({\n  ...post,\n  id,\n  author: AUTHORS[post.authorId],\n});\n\nconst getUserId = async ({ authorization }) =&gt; {\n  try {\n    const accessToken = authorization.trim().split(' ')[1];\n    const { claims: { uid } } = await oktaJwtVerifier.verifyAccessToken(accessToken);\n\n    if (!AUTHORS[uid]) {\n      const { profile: { firstName, lastName } } = await client.getUser(uid);\n\n      AUTHORS[uid] = {\n        id: uid,\n        name: [firstName, lastName].filter(Boolean).join(' '),\n      };\n    }\n\n    return uid;\n  } catch (error) {\n    return null;\n  }\n};\n\nconst root = {\n  posts: () =&gt; POSTS.map(mapPost),\n  post: ({ id }) =&gt; mapPost(POSTS[id], id),\n  submitPost: async ({ input: { id, body } }, { headers }) =&gt; {\n    const authorId = await getUserId(headers);\n    if (!authorId) return null;\n\n    const post = { authorId, body };\n    let index = POSTS.length;\n\n    if (id != null &amp;&amp; id &gt;= 0 &amp;&amp; id &lt; POSTS.length) {\n      if (POSTS[id].authorId !== authorId) return null;\n\n      POSTS.splice(id, 1, post);\n      index = id;\n    } else {\n      POSTS.push(post);\n    }\n\n    return mapPost(post, index);\n  },\n};\n\nconst app = express();\napp.use(cors());\napp.use('/graphql', graphqlHTTP({\n  schema,\n  rootValue: root,\n  graphiql: true,\n}));\n\nconst port = process.env.PORT || 4000\napp.listen(port);\nconsole.log(`Running a GraphQL API server at localhost:${port}/graphql`);\n</code></pre>\n<p>You’ll now need to make a few more frontend changes to make sure you’re requesting an <code>author</code> object instead of assuming it’s a string, and you’ll need to pass in your auth token as a header.</p>\n<p>The <code>PostViewer</code> component will need a minor update</p>\n<pre><code>diff --git a/src/PostViewer.js b/src/PostViewer.js\nindex 84177e0..6bfddb9 100644\n--- a/src/PostViewer.js\n+++ b/src/PostViewer.js\n@@ -7,7 +7,10 @@ export const GET_POSTS = gql`\n   query GetPosts {\n     posts {\n       id\n-      author\n+      author {\n+        id\n+        name\n+      }\n       body\n     }\n   }\n@@ -34,7 +37,7 @@ const PostViewer = ({ canEdit, onEdit }) =&gt; (\n               style={rowStyles(post, canEdit)}\n               onClick={() =&gt; canEdit(post) &amp;&amp; onEdit(post)}\n             &gt;\n-              &lt;td&gt;{post.author}&lt;/td&gt;\n+              &lt;td&gt;{post.author.name}&lt;/td&gt;\n               &lt;td&gt;{post.body}&lt;/td&gt;\n             &lt;/tr&gt;\n           ))}\n</code></pre>\n<p>In <code>PostEditor</code> you’ll just need to get rid of the <code>author</code> altogether since that won’t be editable by the user, and will be determined by the auth token.</p>\n<pre><code>diff --git a/src/PostEditor.js b/src/PostEditor.js\nindex 182d1cc..6cb075c 100644\n--- a/src/PostEditor.js\n+++ b/src/PostEditor.js\n@@ -25,8 +25,8 @@ const SUBMIT_POST = gql`\n\n const PostEditor = ({ post, onClose }) =&gt; (\n   &lt;FinalForm\n-    onSubmit={async ({ id, author, body }) =&gt; {\n-      const input = { id, author, body };\n+    onSubmit={async ({ id, body }) =&gt; {\n+      const input = { id, body };\n\n       await client.mutate({\n         variables: { input },\n@@ -44,15 +44,6 @@ const PostEditor = ({ post, onClose }) =&gt; (\n             {post.id ? 'Edit Post' : 'New Post'}\n           &lt;/ModalHeader&gt;\n           &lt;ModalBody&gt;\n-            &lt;FormGroup&gt;\n-              &lt;Label&gt;Author&lt;/Label&gt;\n-              &lt;Field\n-                required\n-                name=\"author\"\n-                className=\"form-control\"\n-                component=\"input\"\n-              /&gt;\n-            &lt;/FormGroup&gt;\n             &lt;FormGroup&gt;\n               &lt;Label&gt;Body&lt;/Label&gt;\n               &lt;Field\n</code></pre>\n<p>Your Apollo Client is where you’ll be sending the auth token. In order to access the auth token, you’ll need some sort of closure. On each request, Apollo lets you modify headers. Change <code>src/apollo.js</code> to the following:</p>\n<pre><code>import ApolloClient from 'apollo-boost';\n\nlet auth;\n\nexport const updateAuth = (newAuth) =&gt; {\n  auth = newAuth;\n};\n\nexport default new ApolloClient({\n  uri: \"http://localhost:4000/graphql\",\n  request: async (operation) =&gt; {\n    const token = await auth.getAccessToken();\n    operation.setContext({\n      headers: {\n        authorization: `Bearer ${token}`,\n      },\n    });\n  },\n});\n</code></pre>\n<p>Now you’ll need to call the <code>updateAuth</code> component whenever <code>auth</code> changes in <code>src/withAuth.js</code>, to make sure that’s always up to date.</p>\n<pre><code>diff --git a/src/withAuth.js b/src/withAuth.js\nindex cce1b24..6d29dcc 100644\n--- a/src/withAuth.js\n+++ b/src/withAuth.js\n@@ -1,6 +1,8 @@\n import React from 'react';\n import { withAuth } from '@okta/okta-react';\n\n+import { updateAuth } from './apollo';\n+\n export default Component =&gt; withAuth(class WithAuth extends React.Component {\n   state = {\n     ...this.props.auth,\n@@ -18,6 +20,8 @@ export default Component =&gt; withAuth(class WithAuth extends React.Component {\n   }\n\n   async updateAuth() {\n+    updateAuth(this.props.auth);\n+\n     const authenticated = await this.props.auth.isAuthenticated();\n     if (authenticated !== this.state.authenticated) {\n       const user = await this.props.auth.getUser();\n</code></pre>\n<p>Now if you change <code>canEdit</code> in your <code>src/App.js</code> file once again, you can make it so users can only edit their own posts:</p>\n<pre><code>onChange={(post) =&gt; user &amp;&amp; user.sub === post.author.id}\n</code></pre>\n<h2>Learn more about GraphQL, React, Express and Web Security</h2>\n<p>You’ve now successfully built a GraphQL server, hooked it up to React, and locked it down with secure user authentication! As an exercise, see if you can switch the server from using simple, in-memory JavaScript objects to using a persistent data storage. For an example of using Sequelize in Node, check out <a href=\"https://developer.okta.com/blog/2018/06/28/tutorial-build-a-basic-crud-app-with-node\">Randall’s blog</a>.</p>\n<p>If you’d like to see the final sample code, you can find it <a href=\"https://github.com/oktadeveloper/okta-graphql-react-express-example\">on github</a>.</p>\n<p>If you’d like to learn more about GraphQL, Express, or React, check out some of these other posts on the Okta developer blog:</p>\n<ul><li><a href=\"https://developer.okta.com/blog/2018/09/13/build-and-understand-express-middleware-through-examples\">Build and Understand Express Middleware Through Examples</a></li>\n<li><a href=\"https://developer.okta.com/blog/2018/07/10/build-a-basic-crud-app-with-node-and-react\">Build a Basic CRUD App with Node and React</a></li>\n<li><a href=\"https://developer.okta.com/blog/2018/08/17/build-and-understand-user-authentication-in-node\">Build and Understand a Simple Node.js Website with User Authentication</a></li>\n<li><a href=\"https://developer.okta.com/blog/2018/07/11/build-react-graphql-api-user-authentication\">Build a Health Tracking App with React, GraphQL, and User Authentication</a></li>\n</ul>","filePath":"pages/React/.md","_id":"9KnPTaOovPGeRDjH"}
{"date":"2018-11-14T16:42:35.365Z","title":"A Bunch of Options for Looping Over querySelectorAll NodeLists","sourceUrl":"https://css-tricks.com/a-bunch-of-options-for-looping-over-queryselectorall-nodelists/","path":"JavaScript/","category":"JavaScript","tags":["JavaScript"," ES6"],"author":"CHRIS COYIER","excerpt":"A common need when writing vanilla JavaScript is to find a selection of elements in the DOM and loop over them. For example, finding instances of a button and attaching a click handler to them.","dateCreated":1542213354715,"coverImage":"","type":"Post","frontmatter":"---\npath: 'JavaScript/'\ndate: 'Wed Nov 14 2018 22:12:35 GMT+0530 (India Standard Time)'\ntitle: 'A Bunch of Options for Looping Over querySelectorAll NodeLists'\ntags: ['JavaScript','ES6']\ncategory: 'JavaScript'\ncategoryColor: '#F3C610'\nexcerpt: 'A common need when writing vanilla JavaScript is to find a selection of elements in the DOM and loop over them. For example, finding instances of a button and attaching a click handler to them.'\ncoverImage: ''\nsourceUrl: 'https://css-tricks.com/a-bunch-of-options-for-looping-over-queryselectorall-nodelists/'\ntype: 'Post'\n---\n    ","htmlCode":"<p>A common need when writing vanilla JavaScript is to find a selection of elements in the DOM and loop over them. For example, finding instances of a button and attaching a click handler to them.</p><pre rel=\"JavaScript\"><code><span>const</span> buttons <span>=</span> document<span>.</span><span>querySelectorAll</span><span>(</span><span>\".js-do-thing\"</span><span>)</span><span>;</span>\n<span spellcheck=\"true\">// There could be any number of these! </span>\n<span spellcheck=\"true\">// I need to loop over them and attach a click handler.</span></code></pre><p>There are SO MANY ways to go about it. Let's go through them.</p><p><span></span></p><h3><a href=\"https://css-tricks.com/a-bunch-of-options-for-looping-over-queryselectorall-nodelists/#article-header-id-0\">#</a>forEach</h3><p><code>forEach</code>&nbsp;is normally for arrays, and interestingly, what comes back from&nbsp;<code>querySelectorAll</code>&nbsp;is not an array but a NodeList. Fortunately, most modern browsers support using&nbsp;<code>forEach</code>&nbsp;on NodeLists anyway.</p><pre rel=\"JavaScript\"><code>buttons<span>.</span><span>forEach</span><span>(</span><span>(</span>button<span>)</span> <span>=</span><span>&gt;</span> <span>{</span>\n  button<span>.</span><span>addEventListener</span><span>(</span><span>'click'</span><span>,</span> <span>(</span><span>)</span> <span>=</span><span>&gt;</span> <span>{</span>\n    console<span>.</span><span>log</span><span>(</span><span>\"forEach worked\"</span><span>)</span><span>;</span>\n  <span>}</span><span>)</span><span>;</span>\n<span>}</span><span>)</span><span>;</span></code></pre><p>If you're worried that&nbsp;<code>forEach</code>&nbsp;might not work on your NodeList, you could spread it into an array first:</p><pre rel=\"JavaScript\"><code><span>[</span><span>.</span><span>.</span><span>.</span>buttons<span>]</span><span>.</span><span>forEach</span><span>(</span><span>(</span>button<span>)</span> <span>=</span><span>&gt;</span> <span>{</span>\n  button<span>.</span><span>addEventListener</span><span>(</span><span>'click'</span><span>,</span> <span>(</span><span>)</span> <span>=</span><span>&gt;</span> <span>{</span>\n    console<span>.</span><span>log</span><span>(</span><span>\"spread forEach worked\"</span><span>)</span><span>;</span>\n  <span>}</span><span>)</span><span>;</span>\n<span>}</span><span>)</span><span>;</span></code></pre><p>But I'm not actually sure if that helps anything since it seems a bit unlikely there are browsers that support spreads but not&nbsp;<code>forEach</code>on NodeLists. Maybe it gets weird when transpiling gets involved, though I dunno. Either way, spreading is nice in case you want to use anything else array-specific, like&nbsp;<code>.map()</code>,&nbsp;<code>.filter()</code>, or&nbsp;<code>.reduce()</code>.</p><p>A slightly older method is to jack into the array's natural&nbsp;<code>forEach</code>with this little hack:</p><pre rel=\"JavaScript\"><code><span>[</span><span>]</span><span>.</span>forEach<span>.</span><span>call</span><span>(</span>buttons<span>,</span> <span>(</span>button<span>)</span> <span>=</span><span>&gt;</span> <span>{</span>\n  button<span>.</span><span>addEventListener</span><span>(</span><span>'click'</span><span>,</span> <span>(</span><span>)</span> <span>=</span><span>&gt;</span> <span>{</span>\n    console<span>.</span><span>log</span><span>(</span><span>\"array forEach worked\"</span><span>)</span><span>;</span>\n  <span>}</span><span>)</span><span>;</span>\n<span>}</span><span>)</span><span>;</span></code></pre><p>Todd Motto once&nbsp;<a href=\"https://toddmotto.com/ditch-the-array-foreach-call-nodelist-hack/\">called out this method</a>&nbsp;pretty hard though, so be advised. He recommended building your own method (updated for ES6):</p><pre rel=\"JavaScript\"><code><span>const</span> forEach <span>=</span> <span>(</span>array<span>,</span> callback<span>,</span> scope<span>)</span> <span>=</span><span>&gt;</span> <span>{</span>\n  <span>for</span> <span>(</span><span>var</span> i <span>=</span> <span>0</span><span>;</span> i <span>&lt;</span> array<span>.</span>length<span>;</span> i<span>++</span><span>)</span> <span>{</span>\n    callback<span>.</span><span>call</span><span>(</span>scope<span>,</span> i<span>,</span> array<span>[</span>i<span>]</span><span>)</span><span>;</span> \n  <span>}</span>\n<span>}</span><span>;</span></code></pre><p>...which we would use like this:</p><pre rel=\"JavaScript\"><code><span>forEach</span><span>(</span>buttons<span>,</span> <span>(</span>index<span>,</span> button<span>)</span> <span>=</span><span>&gt;</span> <span>{</span>\n  console<span>.</span><span>log</span><span>(</span><span>\"our own function worked\"</span><span>)</span><span>;</span>\n<span>}</span><span>)</span><span>;</span></code></pre><h3><a href=\"https://css-tricks.com/a-bunch-of-options-for-looping-over-queryselectorall-nodelists/#article-header-id-1\">#</a>for .. of</h3><p><a href=\"http://kangax.github.io/compat-table/es6/#for..of_loops\">Browser support</a>&nbsp;for&nbsp;<code>for .. of</code>&nbsp;loops looks pretty good and this seems like a super clean syntax to me:</p><pre rel=\"JavaScript\"><code><span>for</span> <span>(</span><span>const</span> button <span>of</span> buttons<span>)</span> <span>{</span>\n  button<span>.</span><span>addEventListener</span><span>(</span><span>'click'</span><span>,</span> <span>(</span><span>)</span> <span>=</span><span>&gt;</span> <span>{</span>\n    console<span>.</span><span>log</span><span>(</span><span>\"for .. of worked\"</span><span>)</span><span>;</span>\n  <span>}</span><span>)</span><span>;</span>\n<span>}</span></code></pre><h3><a href=\"https://css-tricks.com/a-bunch-of-options-for-looping-over-queryselectorall-nodelists/#article-header-id-2\">#</a>Make an array right away</h3><pre rel=\"JavaScript\"><code><span>const</span> buttons <span>=</span> Array<span>.</span>prototype<span>.</span>slice<span>.</span><span>apply</span><span>(</span>\n  document<span>.</span><span>querySelectorAll</span><span>(</span><span>\".js-do-thing\"</span><span>)</span>\n<span>)</span><span>;</span></code></pre><p>Now you can use all the normal array functions.</p><pre rel=\"JavaScript\"><code>buttons<span>.</span><span>forEach</span><span>(</span><span>(</span>button<span>)</span> <span>=</span><span>&gt;</span> <span>{</span>\n  console<span>.</span><span>log</span><span>(</span><span>\"apply worked\"</span><span>)</span><span>;</span>\n<span>}</span><span>)</span><span>;</span></code></pre><h3><a href=\"https://css-tricks.com/a-bunch-of-options-for-looping-over-queryselectorall-nodelists/#article-header-id-3\">#</a>Old for loop</h3><p>If you need maximum possible browser support, there is no shame in an ancient classic&nbsp;<code>for</code>&nbsp;loop:</p><pre rel=\"JavaScript\"><code><span>for</span> <span>(</span><span>let</span> i <span>=</span> <span>0</span><span>;</span> i <span>&lt;</span> buttons<span>.</span>length<span>;</span> <span>++</span>i<span>)</span> <span>{</span>\n  buttons<span>[</span>i<span>]</span><span>.</span><span>addEventListener</span><span>(</span><span>'click'</span><span>,</span> <span>(</span><span>)</span> <span>=</span><span>&gt;</span> <span>{</span>\n    console<span>.</span><span>log</span><span>(</span><span>\"for loop worked\"</span><span>)</span><span>;</span>\n  <span>}</span><span>)</span><span>;</span>\n<span>}</span></code></pre><h3><a href=\"https://css-tricks.com/a-bunch-of-options-for-looping-over-queryselectorall-nodelists/#article-header-id-4\">#</a>Libraries</h3><p>If you're using jQuery, you don't even have to bother....</p><pre rel=\"jQuery\"><code><span>$</span><span>(</span><span>\".buttons\"</span><span>)</span><span>.</span><span>on</span><span>(</span><span>\"click\"</span><span>,</span> <span>(</span><span>)</span> <span>=</span><span>&gt;</span> <span>{</span>\n  console<span>.</span><span>log</span><span>(</span><span>\"jQuery works\"</span><span>)</span><span>;</span>\n<span>}</span><span>)</span><span>;</span></code></pre><p>If you're using a React/JSX setup, you don't need think about this kind of binding at all.</p><p>Lodash has a&nbsp;<code>_.forEach</code>&nbsp;as well, which presumably helps with older browsers.</p><pre rel=\"JavaScript\"><code>_<span>.</span><span>forEach</span><span>(</span>buttons<span>,</span> <span>(</span>button<span>,</span> key<span>)</span> <span>=</span><span>&gt;</span> <span>{</span>\n  console<span>.</span><span>log</span><span>(</span><span>\"lodash worked\"</span><span>)</span><span>;</span>\n<span>}</span><span>)</span><span>;</span></code></pre>","filePath":"pages/JavaScript/.md","_id":"Apdjx1HtgA2MjfhZ"}
{"date":{"$$date":1542038951537},"title":"React Render Props","sourceUrl":"https://tylermcginnis.com/react-render-props/","path":"React/React/","category":"React","tags":["React"],"author":"Tyler McGinnis","excerpt":"","dateCreated":1541518228325,"coverImage":"","type":"Post","frontmatter":"---\npath: 'React/'\ndate: 'Tue Nov 06 2018 21:04:13 GMT+0530 (India Standard Time)'\ntitle: 'React Render Props'\ntags: ['React']\ncategory: 'React'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://tylermcginnis.com/react-render-props/'\ntype: 'Post'\n---\n    ","htmlCode":"<p><span>There’s two important things to note before we get started. First, what we’re going to talk about is just a pattern. It’s not really even a React thing as much as it is a component architecture thing. Second, this isn’t required knowledge to build a React app. You could skip this post, never learn what we’re about to talk about, and still build fine React applications. However, just like building anything, the more tools you have available the better the outcome will be. If you write React apps, you’d be doing yourself a disservice by not having this in your “toolbox”.</span><br></p><div data-reactid=\"229\"><blockquote><p>If you want to read a similar article but about Higher-Order Components instead, check out&nbsp;<a href=\"https://tylermcginnis.com/react-higher-order-components\">React Higher-Order Components</a></p></blockquote><p>You can’t get very far into studying software development before you hear the (almost cultish) mantra of&nbsp;<code>Don't Repeat Yourself</code>&nbsp;or&nbsp;<code>D.R.Y</code>. Sometimes it can be taken a bit too far, but for the most part, it’s a worthwhile goal. In this post we’re going to look at the most popular pattern for accomplishing DRY in a React codebase, Higher-Order Components. However before we can explore the solution, we must first fully understand the problem.</p><p>Let’s say we were in charge of recreating a dashboard similar to Stripe’s. As most projects go, everything goes great until the very end. Just when you think you’re about to be done, you notice that the dashboard has a bunch of different tooltips that need to appear when certain elements are hovered over.</p><p><img src=\"https://tylermcginnis.com/images/posts/react-fundamentals/tool-tips.gif\" alt=\"GIF of Stripe's dashboard with lots of tooltips\"></p><p>There are a few ways to approach this. The one you decide to go with is to detect the hover state of the individual components and from that state, show or not show the tooltip. There are three components you need to add this hover detection functionality to -&nbsp;<code>Info</code>,&nbsp;<code>TrendChart</code>&nbsp;and&nbsp;<code>DailyChart</code>.</p><p>Let’s start with&nbsp;<code>Info</code>. Right now it’s just a simple SVG icon.</p><div><pre><code><span><span><span>class</span></span></span><span> </span><span><span><span>Info</span></span></span><span> </span><span><span><span>extends</span></span></span><span> </span><span><span><span>React</span></span><span><span>.</span></span><span><span>Component</span></span></span><span> </span><span>{</span>\n  <span>render</span><span>(</span><span>)</span> <span>{</span>\n    <span><span>return</span></span> <span>(</span>\n      <span><span><span>&lt;</span></span></span><span><span><span>svg</span>\n        <span>className</span></span></span><span><span><span>=</span></span></span><span><span><span><span>\"Icon-svg Icon--hoverable-svg\"</span></span></span></span><span><span>\n        <span>height</span></span></span><span><span><span>=</span></span></span><span><span><span><span>{</span></span></span></span><span><span><span><span>this</span></span></span></span><span><span><span><span>.</span></span></span></span><span><span><span>props</span></span></span><span><span><span><span>.</span></span></span></span><span><span><span>height</span></span></span><span><span><span><span>}</span></span></span></span><span><span>\n        <span>viewBox</span></span></span><span><span><span>=</span></span></span><span><span><span><span>\"0 0 16 16\"</span></span></span></span><span><span> <span>width</span></span></span><span><span><span>=</span></span></span><span><span><span><span>\"16\"</span></span></span></span><span><span><span>&gt;</span></span></span><span>\n          </span><span><span><span>&lt;</span></span></span><span><span><span>path</span> <span>d</span></span></span><span><span><span>=</span></span></span><span><span><span><span>\"M9 8a1 1 0 0 0-1-1H5.5a1 1 0 1 0 0 2H7v4a1 1 0 0 0 2 0zM4 0h8a4 4 0 0 1 4 4v8a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4zm4 5.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z\"</span></span></span></span><span><span> </span></span><span><span><span>/</span></span></span><span><span><span>&gt;</span></span></span><span>\n      </span><span><span><span>&lt;</span></span></span><span><span><span>/</span></span></span><span><span><span>svg</span></span></span><span><span><span>&gt;</span></span></span><span>\n    </span><span><span>)</span></span><span>\n  </span><span><span>}</span></span><span>\n</span><span><span>}</span></span></code></pre></div><p>Now we need to add functionality to it so it can detect whether it’s being hovered over or not. We can use the&nbsp;<code>onMouseOver</code>&nbsp;and&nbsp;<code>onMouseOut</code>&nbsp;mouse events that come with React. The function we pass to&nbsp;<code>onMouseOver</code>&nbsp;will be invoked when the component is hovered over and the function we pass to&nbsp;<code>onMouseOut</code>&nbsp;will be invoked when the component is no longer being hovered over. To do this the React way, we’ll add a&nbsp;<code>hovering</code>&nbsp;state property to our component so that we can cause a re-render when the&nbsp;<code>hovering</code>&nbsp;state changes, showing or hiding our tooltip.</p><div><pre><code><span><span><span>class</span></span></span><span> </span><span><span><span>Info</span></span></span><span> </span><span><span><span>extends</span></span></span><span> </span><span><span><span>React</span></span><span><span>.</span></span><span><span>Component</span></span></span><span> </span><span><span>{</span></span>\n  state <span>=</span> <span>{</span> hovering<span>:</span> <span><span>false</span></span> <span>}</span>\n  <span>mouseOver</span> <span>=</span> <span>(</span><span>)</span> <span>=&gt;</span> <span><span>this</span></span><span>.</span><span>setState</span><span>(</span><span>{</span> hovering<span>:</span> <span><span>true</span></span> <span>}</span><span>)</span>\n  <span>mouseOut</span> <span>=</span> <span>(</span><span>)</span> <span>=&gt;</span> <span><span>this</span></span><span>.</span><span>setState</span><span>(</span><span>{</span> hovering<span>:</span> <span><span>false</span></span> <span>}</span><span>)</span>\n  <span>render</span><span>(</span><span>)</span> <span>{</span>\n    <span><span>return</span></span> <span>(</span>\n      <span>&lt;</span><span>&gt;</span>\n        <span>{</span><span><span>this</span></span><span>.</span>state<span>.</span>hovering <span>===</span> <span><span>true</span></span>\n          <span>?</span> <span>&lt;</span>Tooltip id<span>=</span><span>{</span><span><span>this</span></span><span>.</span>props<span>.</span>id<span>}</span> <span>/</span><span>&gt;</span>\n          <span>:</span> <span>null</span><span>}</span>\n        <span>&lt;</span>svg\n          onMouseOver<span>=</span><span>{</span><span><span>this</span></span><span>.</span>mouseOver<span>}</span>\n          onMouseOut<span>=</span><span>{</span><span><span>this</span></span><span>.</span>mouseOut<span>}</span>\n          className<span>=</span><span><span>\"Icon-svg Icon--hoverable-svg\"</span></span>\n          height<span>=</span><span>{</span><span><span>this</span></span><span>.</span>props<span>.</span>height<span>}</span>\n          viewBox<span>=</span><span><span>\"0 0 16 16\"</span></span> width<span>=</span><span><span>\"16\"</span></span><span>&gt;</span>\n            <span>&lt;</span>path d<span>=</span><span><span>\"M9 8a1 1 0 0 0-1-1H5.5a1 1 0 1 0 0 2H7v4a1 1 0 0 0 2 0zM4 0h8a4 4 0 0 1 4 4v8a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4zm4 5.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z\"</span></span> <span>/</span><span>&gt;</span>\n        <span>&lt;</span><span>/</span>svg<span>&gt;</span>\n      <span>&lt;</span><span>/</span><span>&gt;</span>\n    <span>)</span>\n  <span>}</span>\n<span>}</span></code></pre></div><p>Looking good. Now we need to add the same functionality to our other two components,&nbsp;<code>TrendChart</code>&nbsp;and&nbsp;<code>DailyChart</code>. If it’s not broke, don’t fix it. Our hover logic for&nbsp;<code>Info</code>&nbsp;worked great so let’s use that same code again.</p><div><pre><code><span><span><span>class</span></span></span><span> </span><span><span><span>TrendChart</span></span></span><span> </span><span><span><span>extends</span></span></span><span> </span><span><span><span>React</span></span><span><span>.</span></span><span><span>Component</span></span></span><span> </span><span>{</span>\n  state <span>=</span> <span>{</span> <span>hovering</span><span>:</span> <span><span>false</span></span> <span>}</span>\n  <span>mouseOver</span> <span>=</span> <span><span><span>(</span></span></span><span><span><span>)</span></span></span><span> </span><span><span>=&gt;</span></span> <span><span>this</span></span><span>.</span><span>setState</span><span>(</span><span>{</span> <span>hovering</span><span>:</span> <span><span>true</span></span> <span>}</span><span>)</span>\n  <span>mouseOut</span> <span>=</span> <span><span><span>(</span></span></span><span><span><span>)</span></span></span><span> </span><span><span>=&gt;</span></span> <span><span>this</span></span><span>.</span><span>setState</span><span>(</span><span>{</span> <span>hovering</span><span>:</span> <span><span>false</span></span> <span>}</span><span>)</span>\n  <span>render</span><span>(</span><span>)</span> <span>{</span>\n    <span><span>return</span></span> <span>(</span>\n      <span>&lt;</span><span>&gt;</span>\n        <span>{</span><span>this</span><span>.</span>state<span>.</span>hovering <span>===</span> <span>true</span>\n          <span>?</span> <span>&lt;</span>Tooltip id<span>=</span><span>{</span><span>this</span><span>.</span>props<span>.</span>id<span>}</span><span>/</span><span>&gt;</span>\n          <span>:</span> <span>null</span><span>}</span>\n        <span>&lt;</span>Chart\n          type<span>=</span><span>'trend'</span>\n          onMouseOver<span>=</span><span>{</span><span>this</span><span>.</span>mouseOver<span>}</span>\n          onMouseOut<span>=</span><span>{</span><span>this</span><span>.</span>mouseOut<span>}</span>\n        <span>/</span><span>&gt;</span>\n      <span>&lt;</span><span>/</span><span>&gt;</span>\n    <span>)</span>\n  <span>}</span>\n<span>}</span></code></pre></div><p>You probably know the next step. We can do the same thing for our final&nbsp;<code>DailyChart</code>&nbsp;component.</p><div><pre><code><span><span><span>class</span></span></span><span> </span><span><span><span>DailyChart</span></span></span><span> </span><span><span><span>extends</span></span></span><span> </span><span><span><span>React</span></span><span><span>.</span></span><span><span>Component</span></span></span><span> </span><span>{</span>\n  state <span>=</span> <span>{</span> <span>hovering</span><span>:</span> <span><span>false</span></span> <span>}</span>\n  <span>mouseOver</span> <span>=</span> <span><span><span>(</span></span></span><span><span><span>)</span></span></span><span> </span><span><span>=&gt;</span></span> <span><span>this</span></span><span>.</span><span>setState</span><span>(</span><span>{</span> <span>hovering</span><span>:</span> <span><span>true</span></span> <span>}</span><span>)</span>\n  <span>mouseOut</span> <span>=</span> <span><span><span>(</span></span></span><span><span><span>)</span></span></span><span> </span><span><span>=&gt;</span></span> <span><span>this</span></span><span>.</span><span>setState</span><span>(</span><span>{</span> <span>hovering</span><span>:</span> <span><span>false</span></span> <span>}</span><span>)</span>\n  <span>render</span><span>(</span><span>)</span> <span>{</span>\n    <span><span>return</span></span> <span>(</span>\n      <span>&lt;</span><span>&gt;</span>\n        <span>{</span><span>this</span><span>.</span>state<span>.</span>hovering <span>===</span> <span>true</span>\n          <span>?</span> <span>&lt;</span>Tooltip id<span>=</span><span>{</span><span>this</span><span>.</span>props<span>.</span>id<span>}</span><span>/</span><span>&gt;</span>\n          <span>:</span> <span>null</span><span>}</span>\n        <span>&lt;</span>Chart\n          type<span>=</span><span>'daily'</span>\n          onMouseOver<span>=</span><span>{</span><span>this</span><span>.</span>mouseOver<span>}</span>\n          onMouseOut<span>=</span><span>{</span><span>this</span><span>.</span>mouseOut<span>}</span>\n        <span>/</span><span>&gt;</span>\n      <span>&lt;</span><span>/</span><span>&gt;</span>\n    <span>)</span>\n  <span>}</span>\n<span>}</span></code></pre></div><p>And with that, we’re all finished. You may have written React like this before. It’s not the end of the world (#shipit), but it’s not very “DRY”. As you saw, we’re repeating the exact same hover logic in every one of our components.</p><p>At this point, the&nbsp;<span>problem</span>&nbsp;should be pretty clear,&nbsp;<span>we want to avoid duplicating our hover logic anytime a new component needs it</span>. So what’s the&nbsp;<span>solution</span>? Well before we get to that, we need to get a refresh on two fundamental aspects of React. They are components which don’t render UI and passing functions as props.</p><h5>No UI Components</h5><p>In most cases whenever you build a React component, the end goal it to show some UI to the screen.</p><div><pre><code><span>View</span> <span>=</span> <span>fn</span><span>(</span>state<span>)</span></code></pre></div><p>However, that doesn’t always need to be the case. It’s entirely reasonable to have components which act as “Wrapper” components. They’re responsible for handling some logic but instead of rendering their own UI, they just render another component passing it data.</p><div><pre><code><span><span><span>class</span></span></span><span> </span><span><span><span>Users</span></span></span><span> </span><span><span><span>extends</span></span></span><span> </span><span><span><span>React</span></span><span><span>.</span></span><span><span>Component</span></span></span><span> </span><span>{</span>\n  state <span>=</span> <span>{</span>\n    <span>users</span><span>:</span> <span><span>null</span></span>\n  <span>}</span>\n  <span>componentDidMount</span><span>(</span><span>)</span> <span>{</span>\n    <span>getUsers</span><span>(</span><span>)</span>\n      <span>.</span><span>then</span><span>(</span><span><span>(</span></span><span><span>users</span></span><span><span>)</span></span><span> </span><span><span>=&gt;</span></span> <span>{</span>\n        <span><span>this</span></span><span>.</span><span>setState</span><span>(</span><span>{</span> users <span>}</span><span>)</span>\n      <span>}</span><span>)</span>\n  <span>}</span>\n  <span>render</span><span>(</span><span>)</span> <span>{</span>\n    <span>&lt;</span>Grid data<span>=</span><span>{</span><span><span>this</span></span><span>.</span>state<span>.</span>users<span>}</span> <span>/</span><span>&gt;</span>\n  <span>}</span>\n<span>}</span></code></pre></div><p>In the example above&nbsp;<code>Users</code>&nbsp;is responsible for getting the users, then passing them to the&nbsp;<code>Grid</code>component. It doesn’t have its own UI, instead, it uses the UI from the&nbsp;<code>Grid</code>&nbsp;component.</p><h5>Passing functions as props</h5><p>As you know, props are part of React’s component API that allow you to pass data into a component.</p><div><pre><code><span><span>&lt;</span></span><span><span>User</span> <span>id</span></span><span><span>=</span></span><span><span><span>'tylermcginnis'</span></span></span><span> </span><span><span>/</span></span><span><span>&gt;</span></span></code></pre></div><p>Then inside of the&nbsp;<code>User</code>&nbsp;component, the&nbsp;<code>props</code>&nbsp;object would have an&nbsp;<code>id</code>&nbsp;property referencing the string&nbsp;<code>tylermcginnis</code>.</p><div><pre><code><span><span><span>function</span></span></span><span> </span><span><span><span>User</span></span></span><span> </span><span><span>(</span></span><span><span>props</span></span><span><span>)</span></span><span> </span><span>{</span>\n  <span><span>const</span></span> id <span>=</span> props<span>.</span>id <span><span>// tylermcginnis</span></span>\n<span>}</span></code></pre></div><p>Now what if instead of passing a string as a prop, we passed a function?</p><div><pre><code><span><span>&lt;</span></span><span><span>User</span> <span>id</span></span><span><span>=</span></span><span><span><span>{</span></span></span><span><span><span>(</span></span></span><span><span><span>)</span></span></span><span> </span><span><span>=&gt;</span></span> <span>'tylermcginnis'</span><span>}</span> <span>/</span><span>&gt;</span></code></pre></div><p>Now the&nbsp;<code>props</code>&nbsp;object still has an&nbsp;<code>id</code>&nbsp;property, only now instead of being a string, it references a function. So in order to get the id, we need to invoke the function.</p><div><pre><code><span><span><span>function</span></span></span><span> </span><span><span><span>User</span></span></span><span> </span><span><span>(</span></span><span><span>props</span></span><span><span>)</span></span><span> </span><span>{</span>\n  <span><span>const</span></span> id <span>=</span> props<span>.</span><span>id</span><span>(</span><span>)</span> <span><span>// tylermcginnis</span></span>\n<span>}</span></code></pre></div><p>Now what if we wanted to pass the function prop some data? Well, it’s just a function so we could do it just like we normally would by passing it an argument.</p><div><pre><code><span><span><span>function</span></span></span><span> </span><span><span><span>User</span></span></span><span> </span><span><span><span>(</span></span></span><span><span>props</span></span><span><span><span>)</span></span></span><span> </span><span>{</span>\n  <span><span>const</span></span> id <span>=</span> props<span>.</span><span>id</span><span>(</span><span><span>true</span></span><span>)</span> <span><span>// tylermcginnis</span></span>\n<span>}</span>\n\n<span>&lt;</span>User id<span>=</span><span>{</span><span>(</span>isAuthed<span>)</span> <span>=&gt;</span> isAuthed <span>===</span> <span><span>true</span></span> <span>?</span> <span><span>'tylermcginnis'</span></span> <span>:</span> <span><span>null</span></span><span>}</span> <span>/</span><span>&gt;</span></code></pre></div><hr><p>OK… but what do both of these have to do with the problem we saw earlier of duplicating our hover logic anytime a new component needs it? Well we can combine both of these simple concepts in order to solve our problem.</p><p>First, we want to create a “Wrapper” component which is responsible for managing the hover state. We’ll call it, naturally,&nbsp;<code>Hover</code>&nbsp;and it’ll contain all the hover logic that we had to duplicate from earlier.</p><div><pre><code><span><span><span>class</span></span></span><span> </span><span><span><span>Hover</span></span></span><span> </span><span><span><span>extends</span></span></span><span> </span><span><span><span>React</span></span><span><span>.</span></span><span><span>Component</span></span></span><span> </span><span>{</span>\n  state <span>=</span> <span>{</span> <span>hovering</span><span>:</span> <span><span>false</span></span> <span>}</span>\n  <span>mouseOver</span> <span>=</span> <span><span><span>(</span></span></span><span><span><span>)</span></span></span><span> </span><span><span>=&gt;</span></span> <span><span>this</span></span><span>.</span><span>setState</span><span>(</span><span>{</span> <span>hovering</span><span>:</span> <span><span>true</span></span> <span>}</span><span>)</span>\n  <span>mouseOut</span> <span>=</span> <span><span><span>(</span></span></span><span><span><span>)</span></span></span><span> </span><span><span>=&gt;</span></span> <span><span>this</span></span><span>.</span><span>setState</span><span>(</span><span>{</span> <span>hovering</span><span>:</span> <span><span>false</span></span> <span>}</span><span>)</span>\n  <span>render</span><span>(</span><span>)</span> <span>{</span>\n    <span><span>return</span></span> <span>(</span>\n      <span><span><span>&lt;</span></span></span><span><span><span>div</span> <span>onMouseOver</span></span></span><span><span><span>=</span></span></span><span><span><span><span>{</span></span></span></span><span><span><span><span>this</span></span></span></span><span><span><span><span>.</span></span></span></span><span><span><span>mouseOver</span></span></span><span><span><span><span>}</span></span></span></span><span><span> <span>onMouseOut</span></span></span><span><span><span>=</span></span></span><span><span><span><span>{</span></span></span></span><span><span><span><span>this</span></span></span></span><span><span><span><span>.</span></span></span></span><span><span><span>mouseOut</span></span></span><span><span><span><span>}</span></span></span></span><span><span><span>&gt;</span></span></span><span>\n\n      </span><span><span><span>&lt;</span></span></span><span><span><span>/</span></span></span><span><span><span>div</span></span></span><span><span><span>&gt;</span></span></span>\n    <span>)</span>\n  <span>}</span>\n<span>}</span></code></pre></div><p>The next question becomes what should&nbsp;<code>Hover</code>&nbsp;render? This is where are function prop knowledge comes into play. Let’s have&nbsp;<code>Hover</code>&nbsp;receive a prop called&nbsp;<code>render</code>. This&nbsp;<code>render</code>&nbsp;prop is going to be a function that we can pass the&nbsp;<code>hovering</code>&nbsp;state to and it will return some UI.</p><div><pre><code><span><span><span><span>&lt;</span></span><span><span>Hover</span></span></span><span> </span><span><span><span>render</span></span></span><span><span><span>=</span></span><span><span><span>{</span></span></span><span><span><span>(</span></span></span><span><span>hovering</span></span><span><span><span>)</span></span></span><span> </span><span><span>=&gt;</span></span>\n  <span><span><span><span>&lt;</span></span><span><span>div</span></span></span><span><span>&gt;</span></span></span>\n    Is hovering<span>?</span> <span>{</span>hovering <span>===</span> <span>true</span> <span>?</span> <span>'Yes'</span> <span>:</span> <span>'No'</span><span>}</span>\n  <span><span><span><span>&lt;</span></span><span><span>div</span></span></span><span><span>&gt;</span></span></span>\n<span>}</span></span> <span>/&gt;</span></span></code></pre></div><p>Now the last change we need to make is in our&nbsp;<code>Hover</code>&nbsp;component. All we need to do is invoke&nbsp;<code>this.props.render</code>&nbsp;passing it&nbsp;<code>this.state.hover</code>.</p><div><pre><code><span><span><span>class</span></span></span><span> </span><span><span><span>Hover</span></span></span><span> </span><span><span><span>extends</span></span></span><span> </span><span><span><span>React</span></span><span><span>.</span></span><span><span>Component</span></span></span><span> </span><span>{</span>\n  state <span>=</span> <span>{</span> <span>hovering</span><span>:</span> <span><span>false</span></span> <span>}</span>\n  <span>mouseOver</span> <span>=</span> <span><span><span>(</span></span></span><span><span><span>)</span></span></span><span> </span><span><span>=&gt;</span></span> <span><span>this</span></span><span>.</span><span>setState</span><span>(</span><span>{</span> <span>hovering</span><span>:</span> <span><span>true</span></span> <span>}</span><span>)</span>\n  <span>mouseOut</span> <span>=</span> <span><span><span>(</span></span></span><span><span><span>)</span></span></span><span> </span><span><span>=&gt;</span></span> <span><span>this</span></span><span>.</span><span>setState</span><span>(</span><span>{</span> <span>hovering</span><span>:</span> <span><span>false</span></span> <span>}</span><span>)</span>\n  <span>render</span><span>(</span><span>)</span> <span>{</span>\n    <span><span>return</span></span> <span>(</span>\n      <span><span><span>&lt;</span></span></span><span><span><span>div</span> <span>onMouseOver</span></span></span><span><span><span>=</span></span></span><span><span><span><span>{</span></span></span></span><span><span><span><span>this</span></span></span></span><span><span><span><span>.</span></span></span></span><span><span><span>mouseOver</span></span></span><span><span><span><span>}</span></span></span></span><span><span> <span>onMouseOut</span></span></span><span><span><span>=</span></span></span><span><span><span><span>{</span></span></span></span><span><span><span><span>this</span></span></span></span><span><span><span><span>.</span></span></span></span><span><span><span>mouseOut</span></span></span><span><span><span><span>}</span></span></span></span><span><span><span>&gt;</span></span></span><span>\n        </span><span><span>{</span></span><span><span>this</span></span><span><span>.</span></span><span>props</span><span><span>.</span></span><span><span>render</span></span><span><span>(</span></span><span><span>this</span></span><span><span>.</span></span><span>state</span><span><span>.</span></span><span>hovering</span><span><span>)</span></span><span><span>}</span></span><span>\n      </span><span><span><span>&lt;</span></span></span><span><span><span>/</span></span></span><span><span><span>div</span></span></span><span><span><span>&gt;</span></span></span>\n    <span>)</span>\n  <span>}</span>\n<span>}</span></code></pre></div><p>Well would you look at that. Now that we have our&nbsp;<code>Hover</code>&nbsp;component, any time we need a component to be aware of its hover state, we just wrap it inside of a&nbsp;<code>Hover</code>s&nbsp;<code>render</code>&nbsp;prop.</p><p>Finally let’s head back to the original code we had and see how we no longer have to duplicate all the hover logic since we have our&nbsp;<code>Hover</code>&nbsp;component.</p><p>This is what we had before.</p><div><pre><code><span><span><span>class</span></span></span><span> </span><span><span><span>Info</span></span></span><span> </span><span><span><span>extends</span></span></span><span> </span><span><span><span>React</span></span><span><span>.</span></span><span><span>Component</span></span></span><span> </span><span>{</span>\n  state <span>=</span> <span>{</span> hovering<span>:</span> <span><span>false</span></span> <span>}</span>\n  <span>mouseOver</span> <span>=</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>this</span><span>.</span><span>setState</span><span>(</span><span>{</span> hovering<span>:</span> <span><span>true</span></span> <span>}</span><span>)</span>\n  <span>mouseOut</span> <span>=</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>this</span><span>.</span><span>setState</span><span>(</span><span>{</span> hovering<span>:</span> <span><span>false</span></span> <span>}</span><span>)</span>\n  <span>render</span><span>(</span><span>)</span> <span>{</span>\n    <span><span>return</span></span> <span>(</span>\n      <span>&lt;</span><span>&gt;</span>\n        <span>{</span><span>this</span><span>.</span>state<span>.</span>hovering <span>===</span> <span><span>true</span></span>\n          <span>?</span> <span>&lt;</span>Tooltip id<span>=</span><span>{</span><span>this</span><span>.</span>props<span>.</span>id<span>}</span> <span>/</span><span>&gt;</span>\n          <span>:</span> <span><span>null</span></span><span>}</span>\n        <span>&lt;</span>svg\n          onMouseOver<span>=</span><span>{</span><span>this</span><span>.</span>mouseOver<span>}</span>\n          onMouseOut<span>=</span><span>{</span><span>this</span><span>.</span>mouseOut<span>}</span>\n          className<span>=</span><span><span>\"Icon-svg Icon--hoverable-svg\"</span></span>\n          height<span>=</span><span>{</span><span>this</span><span>.</span>props<span>.</span>height<span>}</span>\n          viewBox<span>=</span><span><span>\"0 0 16 16\"</span></span> width<span>=</span><span><span>\"16\"</span></span><span>&gt;</span>\n            <span>&lt;</span>path d<span>=</span><span><span>\"M9 8a1 1 0 0 0-1-1H5.5a1 1 0 1 0 0 2H7v4a1 1 0 0 0 2 0zM4 0h8a4 4 0 0 1 4 4v8a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4zm4 5.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z\"</span></span> <span>/</span><span>&gt;</span>\n        <span>&lt;</span><span>/</span>svg<span>&gt;</span>\n      <span>&lt;</span><span>/</span><span>&gt;</span>\n    <span>)</span>\n  <span>}</span>\n<span>}</span>\n\n<span><span><span>class</span></span></span><span> </span><span><span><span>TrendChart</span></span></span><span> </span><span><span><span>extends</span></span></span><span> </span><span><span><span>React</span></span><span><span>.</span></span><span><span>Component</span></span></span><span> </span><span>{</span>\n  state <span>=</span> <span>{</span> hovering<span>:</span> <span><span>false</span></span> <span>}</span>\n  <span>mouseOver</span> <span>=</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>this</span><span>.</span><span>setState</span><span>(</span><span>{</span> hovering<span>:</span> <span><span>true</span></span> <span>}</span><span>)</span>\n  <span>mouseOut</span> <span>=</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>this</span><span>.</span><span>setState</span><span>(</span><span>{</span> hovering<span>:</span> <span><span>false</span></span> <span>}</span><span>)</span>\n  <span>render</span><span>(</span><span>)</span> <span>{</span>\n    <span><span>return</span></span> <span>(</span>\n      <span>&lt;</span><span>&gt;</span>\n        <span>{</span><span>this</span><span>.</span>state<span>.</span>hovering <span>===</span> <span><span>true</span></span>\n          <span>?</span> <span>&lt;</span>Tooltip id<span>=</span><span>{</span><span>this</span><span>.</span>props<span>.</span>id<span>}</span><span>/</span><span>&gt;</span>\n          <span>:</span> <span><span>null</span></span><span>}</span>\n        <span>&lt;</span>Chart\n          type<span>=</span><span><span>'trend'</span></span>\n          onMouseOver<span>=</span><span>{</span><span>this</span><span>.</span>mouseOver<span>}</span>\n          onMouseOut<span>=</span><span>{</span><span>this</span><span>.</span>mouseOut<span>}</span>\n        <span>/</span><span>&gt;</span>\n      <span>&lt;</span><span>/</span><span>&gt;</span>\n    <span>)</span>\n  <span>}</span>\n<span>}</span>\n\n<span><span><span>class</span></span></span><span> </span><span><span><span>DailyChart</span></span></span><span> </span><span><span><span>extends</span></span></span><span> </span><span><span><span>React</span></span><span><span>.</span></span><span><span>Component</span></span></span><span> </span><span>{</span>\n  state <span>=</span> <span>{</span> hovering<span>:</span> <span><span>false</span></span> <span>}</span>\n  <span>mouseOver</span> <span>=</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>this</span><span>.</span><span>setState</span><span>(</span><span>{</span> hovering<span>:</span> <span><span>true</span></span> <span>}</span><span>)</span>\n  <span>mouseOut</span> <span>=</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>this</span><span>.</span><span>setState</span><span>(</span><span>{</span> hovering<span>:</span> <span><span>false</span></span> <span>}</span><span>)</span>\n  <span>render</span><span>(</span><span>)</span> <span>{</span>\n    <span><span>return</span></span> <span>(</span>\n      <span>&lt;</span><span>&gt;</span>\n        <span>{</span><span>this</span><span>.</span>state<span>.</span>hovering <span>===</span> <span><span>true</span></span>\n          <span>?</span> <span>&lt;</span>Tooltip id<span>=</span><span>{</span><span>this</span><span>.</span>props<span>.</span>id<span>}</span><span>/</span><span>&gt;</span>\n          <span>:</span> <span><span>null</span></span><span>}</span>\n        <span>&lt;</span>Chart\n          type<span>=</span><span><span>'daily'</span></span>\n          onMouseOver<span>=</span><span>{</span><span>this</span><span>.</span>mouseOver<span>}</span>\n          onMouseOut<span>=</span><span>{</span><span>this</span><span>.</span>mouseOut<span>}</span>\n        <span>/</span><span>&gt;</span>\n      <span>&lt;</span><span>/</span><span>&gt;</span>\n    <span>)</span>\n  <span>}</span>\n<span>}</span>\n\n<span><span><span>function</span></span></span><span> </span><span><span><span>App</span></span></span><span> </span><span><span><span>(</span></span></span><span><span><span>)</span></span></span><span> </span><span>{</span>\n  <span><span>return</span></span> <span>(</span>\n    <span>&lt;</span><span>&gt;</span>\n      <span>&lt;</span>Info <span>/</span><span>&gt;</span>\n      <span>&lt;</span>TrendChart <span>/</span><span>&gt;</span>\n      <span>&lt;</span>DailyChart <span>/</span><span>&gt;</span>\n    <span>&lt;</span><span>/</span><span>&gt;</span>\n  <span>)</span>\n<span>}</span></code></pre></div><p>And now with our&nbsp;<code>Hover</code>&nbsp;component, instead of each component having to duplicate the hover logic, we can wrap each one inside of the&nbsp;<code>render</code>&nbsp;prop we pass to&nbsp;<code>Hover</code>&nbsp;and then pass down the&nbsp;<code>hovering</code>argument as a prop.</p><div><pre><code><span>function</span> <span>Info</span> <span>(</span>props<span>)</span> <span>{</span>\n  <span>return</span> <span>(</span>\n    <span><span>&lt;</span></span><span><span>&gt;</span></span>\n<span>      <span>{</span>props<span>.</span>hovering <span>===</span> <span>true</span>\n</span>        <span>?</span> <span><span>&lt;</span></span><span><span>Tooltip</span> <span>id</span></span><span><span>=</span></span><span><span><span>{</span></span></span><span><span><span>this</span></span></span><span><span><span>.</span></span></span><span><span>props</span></span><span><span><span>.</span></span></span><span><span>id</span></span><span><span><span>}</span></span></span><span> </span><span><span>/</span></span><span><span>&gt;</span></span>\n        <span>:</span> <span>null</span><span>}</span>\n      <span><span>&lt;</span></span><span><span>svg</span>\n        <span>onMouseOver</span></span><span><span>=</span></span><span><span><span>{</span></span></span><span><span><span>this</span></span></span><span><span><span>.</span></span></span><span><span>mouseOver</span></span><span><span><span>}</span></span></span><span>\n        <span>onMouseOut</span></span><span><span>=</span></span><span><span><span>{</span></span></span><span><span><span>this</span></span></span><span><span><span>.</span></span></span><span><span>mouseOut</span></span><span><span><span>}</span></span></span><span>\n        <span>className</span></span><span><span>=</span></span><span><span><span>\"Icon-svg Icon--hoverable-svg\"</span></span></span><span>\n        <span>height</span></span><span><span>=</span></span><span><span><span>{</span></span></span><span><span><span>this</span></span></span><span><span><span>.</span></span></span><span><span>props</span></span><span><span><span>.</span></span></span><span><span>height</span></span><span><span><span>}</span></span></span><span>\n        <span>viewBox</span></span><span><span>=</span></span><span><span><span>\"0 0 16 16\"</span></span></span><span> <span>width</span></span><span><span>=</span></span><span><span><span>\"16\"</span></span></span><span><span>&gt;</span></span>\n          <span><span>&lt;</span></span><span><span>path</span> <span>d</span></span><span><span>=</span></span><span><span><span>\"M9 8a1 1 0 0 0-1-1H5.5a1 1 0 1 0 0 2H7v4a1 1 0 0 0 2 0zM4 0h8a4 4 0 0 1 4 4v8a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4zm4 5.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z\"</span></span></span><span> </span><span><span>/</span></span><span><span>&gt;</span></span>\n      <span><span>&lt;</span></span><span><span>/</span></span><span><span>svg</span></span><span><span>&gt;</span></span>\n    <span><span>&lt;</span></span><span><span>/</span></span><span><span>&gt;</span></span>\n  <span>)</span>\n<span>}</span>\n\n<span>function</span> <span>TrendChart</span> <span>(</span>props<span>)</span> <span>{</span>\n  <span>return</span> <span>(</span>\n    <span><span>&lt;</span></span><span><span>&gt;</span></span>\n<span>      <span>{</span>props<span>.</span>hovering <span>===</span> <span>true</span>\n</span>        <span>?</span> <span><span>&lt;</span></span><span><span>Tooltip</span> <span>id</span></span><span><span>=</span></span><span><span><span>{</span></span></span><span><span><span>this</span></span></span><span><span><span>.</span></span></span><span><span>props</span></span><span><span><span>.</span></span></span><span><span>id</span></span><span><span><span>}</span></span></span><span><span><span>/</span></span></span><span><span>&gt;</span></span>\n        <span>:</span> <span>null</span><span>}</span>\n      <span><span>&lt;</span></span><span><span>Chart</span>\n        <span>type</span></span><span><span>=</span></span><span><span><span>'trend'</span></span></span><span>\n        <span>onMouseOver</span></span><span><span>=</span></span><span><span><span>{</span></span></span><span><span><span>this</span></span></span><span><span><span>.</span></span></span><span><span>mouseOver</span></span><span><span><span>}</span></span></span><span>\n        <span>onMouseOut</span></span><span><span>=</span></span><span><span><span>{</span></span></span><span><span><span>this</span></span></span><span><span><span>.</span></span></span><span><span>mouseOut</span></span><span><span><span>}</span></span></span><span>\n      </span><span><span>/</span></span><span><span>&gt;</span></span>\n    <span><span>&lt;</span></span><span><span>/</span></span><span><span>&gt;</span></span>\n  <span>)</span>\n<span>}</span>\n\n\n<span>function</span> <span>DailyChart</span> <span>(</span>props<span>)</span> <span>{</span>\n  <span>return</span> <span>(</span>\n    <span><span>&lt;</span></span><span><span>&gt;</span></span>\n<span>      <span>{</span>props<span>.</span>hovering <span>===</span> <span>true</span>\n</span>        <span>?</span> <span><span>&lt;</span></span><span><span>Tooltip</span> <span>id</span></span><span><span>=</span></span><span><span><span>{</span></span></span><span><span><span>this</span></span></span><span><span><span>.</span></span></span><span><span>props</span></span><span><span><span>.</span></span></span><span><span>id</span></span><span><span><span>}</span></span></span><span><span><span>/</span></span></span><span><span>&gt;</span></span>\n        <span>:</span> <span>null</span><span>}</span>\n      <span><span>&lt;</span></span><span><span>Chart</span>\n        <span>type</span></span><span><span>=</span></span><span><span><span>'daily'</span></span></span><span>\n        <span>onMouseOver</span></span><span><span>=</span></span><span><span><span>{</span></span></span><span><span><span>this</span></span></span><span><span><span>.</span></span></span><span><span>mouseOver</span></span><span><span><span>}</span></span></span><span>\n        <span>onMouseOut</span></span><span><span>=</span></span><span><span><span>{</span></span></span><span><span><span>this</span></span></span><span><span><span>.</span></span></span><span><span>mouseOut</span></span><span><span><span>}</span></span></span><span>\n      </span><span><span>/</span></span><span><span>&gt;</span></span>\n    <span><span>&lt;</span></span><span><span>/</span></span><span><span>&gt;</span></span>\n  <span>)</span>\n<span>}</span>\n\n<span>function</span> <span>App</span> <span>(</span><span>)</span> <span>{</span>\n  <span>return</span> <span>(</span>\n    <span><span>&lt;</span></span><span><span>&gt;</span></span>\n<span>      <span><span>&lt;</span></span><span><span>Hover</span> <span>render</span></span><span><span>=</span></span><span><span><span>{</span></span></span><span><span><span>(</span></span></span><span><span>hovering</span></span><span><span><span>)</span></span></span><span> </span><span><span>=&gt;</span></span>\n</span><span>        <span><span>&lt;</span></span><span><span>Info</span> <span>hovering</span></span><span><span>=</span></span><span><span><span>{</span></span></span><span><span>hovering</span></span><span><span><span>}</span></span></span><span><span>&gt;</span></span>\n</span><span>      <span>}</span><span>&gt;</span>\n</span><span>\n</span><span>      <span><span>&lt;</span></span><span><span>Hover</span> <span>render</span></span><span><span>=</span></span><span><span><span>{</span></span></span><span><span><span>(</span></span></span><span><span>hovering</span></span><span><span><span>)</span></span></span><span> </span><span><span>=&gt;</span></span>\n</span><span>        <span><span>&lt;</span></span><span><span>TrendChart</span> <span>hovering</span></span><span><span>=</span></span><span><span><span>{</span></span></span><span><span>hovering</span></span><span><span><span>}</span></span></span><span><span>&gt;</span></span>\n</span><span>      <span>}</span><span>&gt;</span>\n</span><span>\n</span><span>      <span><span>&lt;</span></span><span><span>Hover</span> <span>render</span></span><span><span>=</span></span><span><span><span>{</span></span></span><span><span><span>(</span></span></span><span><span>hovering</span></span><span><span><span>)</span></span></span><span> </span><span><span>=&gt;</span></span>\n</span><span>        <span><span>&lt;</span></span><span><span>DailyChart</span> <span>hovering</span></span><span><span>=</span></span><span><span><span>{</span></span></span><span><span>hovering</span></span><span><span><span>}</span></span></span><span><span>&gt;</span></span>\n</span><span>      <span>}</span><span>&gt;</span>\n</span>    <span><span>&lt;</span></span><span><span>/</span></span><span><span>&gt;</span></span>\n  <span>)</span>\n<span>}</span></code></pre></div><p>This pattern, as you probably guessed by now, is called&nbsp;<code>Render Props</code>. Summarized in the React docs, “the term render prop refers to a technique for sharing code between React components using a prop whose value is a function”.</p><hr><p>Another way to utilize the render props pattern is with React’s&nbsp;<code>children</code>&nbsp;prop. If you’ve never used&nbsp;<code>props.children</code>&nbsp;before, it’s just like any other prop, accept instead of you passing it explicitly to the component, React automatically does it for you and it reference whatever is in the body of the component.</p><div><pre><code><span><span><span>function</span></span></span><span> </span><span><span><span>User</span></span></span><span> </span><span><span>(</span></span><span><span>props</span></span><span><span>)</span></span><span> </span><span>{</span>\n  <span><span>return</span></span> <span>(</span>\n    <span><span><span>&lt;</span></span></span><span><span><span>div</span></span></span><span><span><span>&gt;</span></span></span><span>\n      </span><span><span>{</span></span><span>props</span><span><span>.</span></span><span>children</span><span><span>}</span></span><span>\n    </span><span><span><span>&lt;</span></span></span><span><span><span>/</span></span></span><span><span><span>div</span></span></span><span><span><span>&gt;</span></span></span>\n  <span>)</span>\n<span>}</span>\n\n<span>&lt;</span>User<span>&gt;</span>\n  This is props<span>.</span>children\n<span>&lt;</span><span><span>/</span></span><span>User</span><span><span>&gt;</span></span></code></pre></div><p>In the example above, what’s going to get rendered to the UI is a&nbsp;<code>div</code>&nbsp;with the words&nbsp;<code>This is props.children</code>&nbsp;inside of it.</p><p>Now what if instead of having&nbsp;<code>props.children</code>&nbsp;be a string, it was a function? Just as we saw earlier, we’d need to invoke it to get the value.</p><div><pre><code><span><span><span>function</span></span></span><span> </span><span><span><span>User</span></span></span><span> </span><span><span>(</span></span><span><span>props</span></span><span><span>)</span></span><span> </span><span>{</span>\n  <span><span>return</span></span> <span>(</span>\n    <span><span><span>&lt;</span></span></span><span><span><span>div</span></span></span><span><span><span>&gt;</span></span></span><span>\n</span><span><span>      </span><span><span>{</span></span><span>props</span><span><span>.</span></span><span><span>children</span></span><span><span>(</span></span><span><span>)</span></span><span><span>}</span></span><span>\n</span></span><span>    </span><span><span><span>&lt;</span></span></span><span><span><span>/</span></span></span><span><span><span>div</span></span></span><span><span><span>&gt;</span></span></span>\n  <span>)</span>\n<span>}</span>\n\n<span>&lt;</span>User<span>&gt;</span>\n<span>  <span>{</span><span>(</span><span>)</span> <span>=&gt;</span> This is props<span>.</span>children<span>}</span>\n</span><span>&lt;</span><span><span>/</span></span><span>User</span><span><span>&gt;</span></span></code></pre></div><p>With our newly formed knowledge of&nbsp;<code>props.children</code>, let’s update our examples from earlier. Now instead of&nbsp;<code>Hover</code>&nbsp;having a&nbsp;<code>render</code>&nbsp;prop, let’s get rid of that all together and use&nbsp;<code>props.children</code>&nbsp;instead.</p><div><pre><code><span>function</span> <span>App</span> <span>(</span><span>)</span> <span>{</span>\n  <span>return</span> <span>(</span>\n    <span><span>&lt;</span></span><span><span>&gt;</span></span>\n      <span><span>&lt;</span></span><span><span>Hover</span></span><span><span>&gt;</span></span>\n        <span>{</span><span>(</span>hovering<span>)</span> <span>=&gt;</span> <span><span>&lt;</span></span><span><span>Info</span> <span>hovering</span></span><span><span>=</span></span><span><span><span>{</span></span></span><span><span>hovering</span></span><span><span><span>}</span></span></span><span><span>&gt;</span></span><span>}</span>\n      <span><span>&lt;</span></span><span><span>/</span></span><span><span>Hover</span></span><span><span>&gt;</span></span>\n\n      <span><span>&lt;</span></span><span><span>Hover</span></span><span><span>&gt;</span></span>\n        <span>{</span><span>(</span>hovering<span>)</span> <span>=&gt;</span> <span><span>&lt;</span></span><span><span>TrendChart</span> <span>hovering</span></span><span><span>=</span></span><span><span><span>{</span></span></span><span><span>hovering</span></span><span><span><span>}</span></span></span><span><span>&gt;</span></span><span>}</span>\n      <span><span>&lt;</span></span><span><span>/</span></span><span><span>Hover</span></span><span><span>&gt;</span></span>\n\n      <span><span>&lt;</span></span><span><span>Hover</span></span><span><span>&gt;</span></span>\n        <span>{</span><span>(</span>hovering<span>)</span> <span>=&gt;</span> <span><span>&lt;</span></span><span><span>DailyChart</span> <span>hovering</span></span><span><span>=</span></span><span><span><span>{</span></span></span><span><span>hovering</span></span><span><span><span>}</span></span></span><span><span>&gt;</span></span><span>}</span>\n      <span><span>&lt;</span></span><span><span>/</span></span><span><span>Hover</span></span><span><span>&gt;</span></span>\n    <span><span>&lt;</span></span><span><span>/</span></span><span><span>&gt;</span></span>\n  <span>)</span>\n<span>}</span></code></pre></div><p>Looks good. Now we need to update&nbsp;<code>Hover</code>&nbsp;so instead of invoking&nbsp;<code>this.props.render</code>, it invokes&nbsp;<code>this.props.children</code>.</p><div><pre><code><span><span><span>class</span></span></span><span> </span><span><span><span>Hover</span></span></span><span> </span><span><span><span>extends</span></span></span><span> </span><span><span><span>React</span></span><span><span>.</span></span><span><span>Component</span></span></span><span> </span><span>{</span>\n  state <span>=</span> <span>{</span> <span>hovering</span><span>:</span> <span><span>false</span></span> <span>}</span>\n  <span>mouseOver</span> <span>=</span> <span><span><span>(</span></span></span><span><span><span>)</span></span></span><span> </span><span><span>=&gt;</span></span> <span><span>this</span></span><span>.</span><span>setState</span><span>(</span><span>{</span> <span>hovering</span><span>:</span> <span><span>true</span></span> <span>}</span><span>)</span>\n  <span>mouseOut</span> <span>=</span> <span><span><span>(</span></span></span><span><span><span>)</span></span></span><span> </span><span><span>=&gt;</span></span> <span><span>this</span></span><span>.</span><span>setState</span><span>(</span><span>{</span> <span>hovering</span><span>:</span> <span><span>false</span></span> <span>}</span><span>)</span>\n  <span>render</span><span>(</span><span>)</span> <span>{</span>\n    <span><span>return</span></span> <span>(</span>\n      <span><span><span>&lt;</span></span></span><span><span><span>div</span> <span>onMouseOver</span></span></span><span><span><span>=</span></span></span><span><span><span><span>{</span></span></span></span><span><span><span><span>this</span></span></span></span><span><span><span><span>.</span></span></span></span><span><span><span>mouseOver</span></span></span><span><span><span><span>}</span></span></span></span><span><span> <span>onMouseOut</span></span></span><span><span><span>=</span></span></span><span><span><span><span>{</span></span></span></span><span><span><span><span>this</span></span></span></span><span><span><span><span>.</span></span></span></span><span><span><span>mouseOut</span></span></span><span><span><span><span>}</span></span></span></span><span><span><span>&gt;</span></span></span><span>\n</span><span><span>        </span><span><span>{</span></span><span><span>this</span></span><span><span>.</span></span><span>props</span><span><span>.</span></span><span><span>children</span></span><span><span>(</span></span><span><span>this</span></span><span><span>.</span></span><span>state</span><span><span>.</span></span><span>hovering</span><span><span>)</span></span><span><span>}</span></span><span>\n</span></span><span>      </span><span><span><span>&lt;</span></span></span><span><span><span>/</span></span></span><span><span><span>div</span></span></span><span><span><span>&gt;</span></span></span>\n    <span>)</span>\n  <span>}</span>\n<span>}</span></code></pre></div><p>Nice. Is this better? Not really, it’s just different. I prefer it, but there’s nothing objectively better about it.</p><hr><p>If you read our post about&nbsp;<a href=\"https://tylermcginnis.com/react-higher-order-components\">Higher Order Components</a>, you’ll be familiar with how HOCs have some pitfalls. The biggest one was with inversion of control and naming collisions. Because you have to pass your component over to the Higher-Order component, you have no control over how it’s rendered. We looked at an example with React Router’s&nbsp;<code>withRouter</code>&nbsp;HOC.&nbsp;<code>withRouter</code>&nbsp;will pass&nbsp;<code>match</code>,&nbsp;<code>location</code>, and&nbsp;<code>history</code>props to the wrapped component whenever it renders.</p><div><pre><code><span><span><span>class</span></span></span><span> </span><span><span><span>Game</span></span></span><span> </span><span><span><span>extends</span></span></span><span> </span><span><span><span>React</span></span><span><span>.</span></span><span><span>Component</span></span></span><span> </span><span>{</span>\n  <span>render</span><span>(</span><span>)</span> <span>{</span>\n    <span><span>const</span></span> <span>{</span> match<span>,</span> location<span>,</span> history <span>}</span> <span>=</span> <span><span>this</span></span><span>.</span>props <span><span>// From React Router</span></span>\n\n    <span>...</span>\n  <span>}</span>\n<span>}</span>\n\n<span><span>export</span></span> <span><span>default</span></span> <span>withRouter</span><span>(</span>Game<span>)</span></code></pre></div><p>If our Game component is already receiving&nbsp;<code>match</code>,&nbsp;<code>location</code>, or&nbsp;<code>history</code>&nbsp;as a prop, we’re going to have a naming collision and it’s going to be a hard bug to track down.</p><p>Does this same pitfall occur with Render Props? Nope. Instead of handing over the component, we hand over a function. Then, when that function is invoked, it’ll be passed the data we need. No inversion of control and no naming collisions since we can decide how the component is rendered.</p><div><pre><code><span>&lt;</span>Hover<span>&gt;</span>\n  <span>{</span><span>(</span>hovering<span>)</span> <span>=&gt;</span> <span>{</span>\n    <span><span>// We can do whatever we want here.</span></span>\n    <span><span>// We decide how and when to render the component</span></span>\n    <span><span>return</span></span> <span><span><span>&lt;</span></span></span><span><span><span>Info</span> <span>anyNameWeWant</span></span></span><span><span><span>=</span></span></span><span><span><span><span>{</span></span></span></span><span><span><span>hovering</span></span></span><span><span><span><span>}</span></span></span></span><span><span> </span></span><span><span><span>/</span></span></span><span><span><span>&gt;</span></span></span><span>\n  </span><span><span>}</span></span><span><span>}</span></span><span>\n</span><span><span><span>&lt;</span></span></span><span><span><span>/</span></span></span><span><span><span>Hover</span></span></span><span><span><span>&gt;</span></span></span></code></pre></div><hr><p>Now the big question is, should you use Render Props or Higher Order Components? Well, that’s up to you. You now know how to use them both which means you have enough information to make an informed decision for yourself.</p></div>","filePath":"pages/React/.md","_id":"Bol9U59ZaBQfCjZs","favorite":true,"dateUpdated":1542038951537}
{"date":"2018-10-31T16:23:50.119Z","title":"How to pass props to components in React","sourceUrl":"https://www.robinwieruch.de/react-pass-props-to-component/","path":"React/","category":"React","tags":["React"],"author":"","excerpt":"","dateCreated":1541002881296,"coverImage":"","type":"Post","frontmatter":"---\npath: 'React/'\ndate: 'Wed Oct 31 2018 21:53:50 GMT+0530 (India Standard Time)'\ntitle: 'How to pass props to components in React'\ntags: ['React']\ncategory: 'React'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://www.robinwieruch.de/react-pass-props-to-component/'\ntype: 'Post'\n---\n    ","htmlCode":"<p>Everyone who is new to React is confused by these so called props, because they are never mentioned in any other web framework, and rarely explained on their own. They are one of the early things you will learn in React after initially grasping React’s JSX syntax. Basically props are used to pass data from component to component. In this guide, I want to explain React props in greater detail. First, it explains the&nbsp;<em>“What are props in React?” question</em>, followed by different props examples to see how they can be used in React.</p><h2>Table of Contents</h2><ul><li><a href=\"https://www.robinwieruch.de/react-pass-props-to-component/#react-props\">What are Props in React?</a></li><li><a href=\"https://www.robinwieruch.de/react-pass-props-to-component/#react-props-vs-state\">React Props vs. State</a></li><li><a href=\"https://www.robinwieruch.de/react-pass-props-to-component/#react-props-child-parent\">How to pass Props from child to parent Component?</a></li><li><a href=\"https://www.robinwieruch.de/react-pass-props-to-component/#react-props-state-derived-properties\">Props can be state, props, or derived properties</a></li><li><a href=\"https://www.robinwieruch.de/react-pass-props-to-component/#react-props-code-style\">React Props and Code Style</a></li><li><a href=\"https://www.robinwieruch.de/react-pass-props-to-component/#react-props-syntax-spread-rest\">React …props syntax</a></li><li><a href=\"https://www.robinwieruch.de/react-pass-props-to-component/#react-props-default-value\">React props with default value</a></li><li><a href=\"https://www.robinwieruch.de/react-pass-props-to-component/#react-props-children\">React’s children prop</a></li><li><a href=\"https://www.robinwieruch.de/react-pass-props-to-component/#react-components-as-props\">How to pass Components as Props?</a></li><li><a href=\"https://www.robinwieruch.de/react-pass-props-to-component/#react-children-as-a-function\">Children as a Function</a></li><li><a href=\"https://www.robinwieruch.de/react-pass-props-to-component/#react-context-api\">React’s Context API</a></li><li><a href=\"https://www.robinwieruch.de/react-pass-props-to-component/#react-props-to-state\">How to set props to state?</a></li><li><a href=\"https://www.robinwieruch.de/react-pass-props-to-component/#react-props-pitfalls\">React Props Pitfalls</a></li></ul><h2>What are Props in React?</h2><p>Normally you start out with React’s JSX syntax for rendering something to the browser when learning about React. Basically JSX mixes HTML with JavaScript to get the best of both worlds.</p><div><pre><code data-lang=\"javascript\"><span></span><span>import</span> <span>React</span><span>,</span> <span>{</span> <span>Component</span> <span>}</span> <span>from</span> <span>'react'</span><span>;</span>\n\n<span>class</span> <span>App</span> <span>extends</span> <span>Component</span> <span>{</span>\n  <span>render</span><span>()</span> <span>{</span>\n<span>    <span>const</span> <span>greeting</span> <span>=</span> <span>'Welcome to React'</span><span>;</span>\n</span><span>\n</span><span>    <span>return</span> <span>(</span>\n</span><span>      <span>&lt;</span><span>div</span><span>&gt;</span>\n</span><span>        <span>&lt;</span><span>h1</span><span>&gt;</span><span>{</span><span>greeting</span><span>}</span><span>&lt;</span><span>/h1&gt;</span>\n</span><span>      <span>&lt;</span><span>/div&gt;</span>\n</span><span>    <span>);</span>\n</span>  <span>}</span>\n<span>}</span>\n\n<span>export</span> <span>default</span> <span>App</span><span>;</span>\n</code></pre></div><p>Pretty soon you will split out your first React component.</p><div><pre><code data-lang=\"javascript\"><span></span><span>import</span> <span>React</span><span>,</span> <span>{</span> <span>Component</span> <span>}</span> <span>from</span> <span>'react'</span><span>;</span>\n\n<span>class</span> <span>App</span> <span>extends</span> <span>Component</span> <span>{</span>\n  <span>render</span><span>()</span> <span>{</span>\n    <span>return</span> <span>(</span>\n      <span>&lt;</span><span>div</span><span>&gt;</span>\n<span>        <span>&lt;</span><span>Greeting</span> <span>/&gt;</span>\n</span>      <span>&lt;</span><span>/div&gt;</span>\n    <span>);</span>\n  <span>}</span>\n<span>}</span>\n\n<span><span>class</span> <span>Greeting</span> <span>extends</span> <span>Component</span> <span>{</span>\n</span><span>  <span>render</span><span>()</span> <span>{</span>\n</span><span>    <span>const</span> <span>greeting</span> <span>=</span> <span>'Welcome to React'</span><span>;</span>\n</span><span>\n</span><span>    <span>return</span> <span>&lt;</span><span>h1</span><span>&gt;</span><span>{</span><span>greeting</span><span>}</span><span>&lt;</span><span>/h1&gt;;</span>\n</span><span>  <span>}</span>\n</span><span><span>}</span>\n</span>\n<span>export</span> <span>default</span> <span>App</span><span>;</span>\n</code></pre></div><p>A common question followed by this act:&nbsp;<span>how to pass the data as params (parameters) from one React component to another component?</span>&nbsp;That’s because you don’t want to have a component rendering static data, but pass dynamic data to your component instead. That’s where React’s props come into play. You can pass data in React by defining custom HTML attributes to which you assign your data with JSX syntax. So don’t forget the curly braces.</p><div><pre><code data-lang=\"javascript\"><span></span><span>import</span> <span>React</span><span>,</span> <span>{</span> <span>Component</span> <span>}</span> <span>from</span> <span>'react'</span><span>;</span>\n\n<span>class</span> <span>App</span> <span>extends</span> <span>Component</span> <span>{</span>\n  <span>render</span><span>()</span> <span>{</span>\n    <span>const</span> <span>greeting</span> <span>=</span> <span>'Welcome to React'</span><span>;</span>\n\n    <span>return</span> <span>(</span>\n      <span>&lt;</span><span>div</span><span>&gt;</span>\n<span>        <span>&lt;</span><span>Greeting</span> <span>greeting</span><span>=</span><span>{</span><span>greeting</span><span>}</span> <span>/&gt;</span>\n</span>      <span>&lt;</span><span>/div&gt;</span>\n    <span>);</span>\n  <span>}</span>\n<span>}</span>\n\n<span><span>class</span> <span>Greeting</span> <span>extends</span> <span>Component</span> <span>{</span>\n</span><span>  <span>render</span><span>()</span> <span>{</span>\n</span><span>    <span>return</span> <span>&lt;</span><span>h1</span><span>&gt;</span><span>{</span><span>this</span><span>.</span><span>props</span><span>.</span><span>greeting</span><span>}</span><span>&lt;</span><span>/h1&gt;;</span>\n</span><span>  <span>}</span>\n</span><span><span>}</span>\n</span>\n<span>export</span> <span>default</span> <span>App</span><span>;</span>\n</code></pre></div><p>As you can see, the props are received in React’s class component via the&nbsp;<code>this</code>&nbsp;instance of the class. A common question which comes up then:&nbsp;<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/facebook/react/issues/1387\">Why aren’t the props received in the render methods signature?</a>It would be similar to functional stateless components then. As for now, the team behind React considered it, but didn’t change the API for React class components yet. Maybe it will be changed at some point.</p><div>Read more:&nbsp;<a href=\"https://www.robinwieruch.de/javascript-fundamentals-react-requirements/\" itemprop=\"url\">React class components and functional stateless components</a></div><p>In a functional stateless component, the props are received in the function signature as arguments:</p><div><pre><code data-lang=\"javascript\"><span></span><span>import</span> <span>React</span><span>,</span> <span>{</span> <span>Component</span> <span>}</span> <span>from</span> <span>'react'</span><span>;</span>\n\n<span>class</span> <span>App</span> <span>extends</span> <span>Component</span> <span>{</span>\n  <span>render</span><span>()</span> <span>{</span>\n    <span>const</span> <span>greeting</span> <span>=</span> <span>'Welcome to React'</span><span>;</span>\n\n    <span>return</span> <span>(</span>\n      <span>&lt;</span><span>div</span><span>&gt;</span>\n        <span>&lt;</span><span>Greeting</span> <span>greeting</span><span>=</span><span>{</span><span>greeting</span><span>}</span> <span>/&gt;</span>\n      <span>&lt;</span><span>/div&gt;</span>\n    <span>);</span>\n  <span>}</span>\n<span>}</span>\n\n<span><span>const</span> <span>Greeting</span> <span>=</span> <span>props</span> <span>=&gt;</span> <span>&lt;</span><span>h1</span><span>&gt;</span><span>{</span><span>props</span><span>.</span><span>greeting</span><span>}</span><span>&lt;</span><span>/h1&gt;;</span>\n</span>\n<span>export</span> <span>default</span> <span>App</span><span>;</span>\n</code></pre></div><p>Since you will find always the props in the function signature, which most of the time is only the container object of your data, but not the data to be used, you can&nbsp;<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment\">destructure</a>&nbsp;the props early in the function signature. One would call it React props destructuring:</p><div><pre><code data-lang=\"javascript\"><span></span><span>const</span> <span>Greeting</span> <span>=</span> <span>({</span> <span>greeting</span> <span>})</span> <span>=&gt;</span> <span>&lt;</span><span>h1</span><span>&gt;</span><span>{</span><span>greeting</span><span>}</span><span>&lt;</span><span>/h1&gt;;</span>\n</code></pre></div><p>As you have seen, props enable you to pass variables from one to another component down the component tree. In the previous example, it was only a string variable. But props can be anything from integers over objects to arrays. Even React components, but you will learn about this later. You can also define the props inline. In case of strings, you can pass props inside double quotes (or single quotes) too.</p><div><pre><code data-lang=\"javascript\"><span></span><span>import</span> <span>React</span><span>,</span> <span>{</span> <span>Component</span> <span>}</span> <span>from</span> <span>'react'</span><span>;</span>\n\n<span>class</span> <span>App</span> <span>extends</span> <span>Component</span> <span>{</span>\n  <span>render</span><span>()</span> <span>{</span>\n    <span>return</span> <span>(</span>\n      <span>&lt;</span><span>div</span><span>&gt;</span>\n<span>        <span>&lt;</span><span>Greeting</span> <span>greeting</span><span>=</span><span>\"Welcome to React\"</span> <span>/&gt;</span>\n</span>      <span>&lt;</span><span>/div&gt;</span>\n    <span>);</span>\n  <span>}</span>\n<span>}</span>\n\n<span>const</span> <span>Greeting</span> <span>=</span> <span>({</span> <span>greeting</span> <span>})</span> <span>=&gt;</span> <span>&lt;</span><span>h1</span><span>&gt;</span><span>{</span><span>greeting</span><span>}</span><span>&lt;</span><span>/h1&gt;;</span>\n\n<span>export</span> <span>default</span> <span>App</span><span>;</span>\n</code></pre></div><p>But you can also pass other data structures with inline props. In case of objects, it can be confusing for React beginners, because you have two curly braces: one for the JSX and one for the object. That’s especially confusing when passing a style object to a style attribute in React the first time.</p><div><pre><code data-lang=\"javascript\"><span></span><span>import</span> <span>React</span><span>,</span> <span>{</span> <span>Component</span> <span>}</span> <span>from</span> <span>'react'</span><span>;</span>\n\n<span>class</span> <span>App</span> <span>extends</span> <span>Component</span> <span>{</span>\n  <span>render</span><span>()</span> <span>{</span>\n    <span>return</span> <span>(</span>\n      <span>&lt;</span><span>div</span><span>&gt;</span>\n<span>        <span>&lt;</span><span>Greeting</span> <span>greeting</span><span>=</span><span>{{</span> <span>text</span><span>:</span> <span>'Welcome to React'</span> <span>}}</span> <span>/&gt;</span>\n</span>      <span>&lt;</span><span>/div&gt;</span>\n    <span>);</span>\n  <span>}</span>\n<span>}</span>\n\n<span><span>const</span> <span>Greeting</span> <span>=</span> <span>({</span> <span>greeting</span> <span>})</span> <span>=&gt;</span> <span>&lt;</span><span>h1</span><span>&gt;</span><span>{</span><span>greeting</span><span>.</span><span>text</span><span>}</span><span>&lt;</span><span>/h1&gt;;</span>\n</span>\n<span>export</span> <span>default</span> <span>App</span><span>;</span>\n</code></pre></div><p>Note: It is important to note that is could lead to performance issues, because every time the component renders a new object is created again. But it can be a premature optimization as well when learning only about React.</p><p>Basically that’s how props are passed to React components. As you may have noticed, props are only passed from top to bottom in React’s component tree. There is no way to pass props up to a parent component. We will revisit this issue later in this article. In addition, it’s important to know that React’s props are read only. There is&nbsp;<span>no way in React to set props</span>&nbsp;(even though it was possible in the past). After all, props are only used to pass data from one component to another component React, but only from parent to child components down the component tree.</p><h2>React Props vs. State</h2><p>Passing only props from component to component doesn’t make the component interactive, because nothing is there to change the props. Props are read-only. That’s the time when React state comes into play which can be changed. The state is co-located to a React component.</p><div><pre><code data-lang=\"javascript\"><span></span><span>import</span> <span>React</span><span>,</span> <span>{</span> <span>Component</span> <span>}</span> <span>from</span> <span>'react'</span><span>;</span>\n\n<span>class</span> <span>App</span> <span>extends</span> <span>Component</span> <span>{</span>\n<span>  <span>constructor</span><span>(</span><span>props</span><span>)</span> <span>{</span>\n</span><span>    <span>super</span><span>(</span><span>props</span><span>);</span>\n</span><span>\n</span><span>    <span>this</span><span>.</span><span>state</span> <span>=</span> <span>{</span>\n</span><span>      <span>isShow</span><span>:</span> <span>true</span><span>,</span>\n</span><span>    <span>};</span>\n</span><span>  <span>}</span>\n</span>\n<span>  <span>toggleShow</span> <span>=</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n</span><span>    <span>this</span><span>.</span><span>setState</span><span>(</span><span>state</span> <span>=&gt;</span> <span>({</span> <span>isShow</span><span>:</span> <span>!</span><span>state</span><span>.</span><span>isShow</span> <span>}));</span>\n</span><span>  <span>};</span>\n</span>\n  <span>render</span><span>()</span> <span>{</span>\n    <span>return</span> <span>(</span>\n      <span>&lt;</span><span>div</span><span>&gt;</span>\n<span>        <span>{</span><span>this</span><span>.</span><span>state</span><span>.</span><span>isShow</span> <span>?</span> <span>&lt;</span><span>Greeting</span> <span>greeting</span><span>=</span><span>{</span><span>greeting</span><span>}</span> <span>/&gt;</span> <span>:</span> <span>null</span><span>}</span>\n</span>\n<span>        <span>&lt;</span><span>button</span> <span>onClick</span><span>=</span><span>{</span><span>this</span><span>.</span><span>toggleShow</span><span>}</span> <span>type</span><span>=</span><span>\"button\"</span><span>&gt;</span>\n</span><span>          <span>Toggle</span> <span>Show</span>\n</span><span>        <span>&lt;</span><span>/button&gt;</span>\n</span>      <span>&lt;</span><span>/div&gt;</span>\n    <span>);</span>\n  <span>}</span>\n<span>}</span>\n\n<span>const</span> <span>Greeting</span> <span>=</span> <span>({</span> <span>greeting</span> <span>})</span> <span>=&gt;</span> <span>&lt;</span><span>h1</span><span>&gt;</span><span>{</span><span>greeting</span><span>}</span><span>&lt;</span><span>/h1&gt;;</span>\n\n<span>export</span> <span>default</span> <span>App</span><span>;</span>\n</code></pre></div><p>In this case, the code uses a ternary operator to either show the greeting or not. You can read up&nbsp;<a href=\"https://www.robinwieruch.de/conditional-rendering-react/\">this tutorial about all the conditional renderings in React</a>. The state makes the React components interactive. You can&nbsp;<span>read and write state</span>, whereas&nbsp;<span>props are read-only</span>. Once the state changes, the component renders again. In addition, state can be passed as props to child components too.</p><div><pre><code data-lang=\"javascript\"><span></span><span>import</span> <span>React</span><span>,</span> <span>{</span> <span>Component</span> <span>}</span> <span>from</span> <span>'react'</span><span>;</span>\n\n<span>class</span> <span>App</span> <span>extends</span> <span>Component</span> <span>{</span>\n  <span>constructor</span><span>(</span><span>props</span><span>)</span> <span>{</span>\n    <span>super</span><span>(</span><span>props</span><span>);</span>\n\n    <span>this</span><span>.</span><span>state</span> <span>=</span> <span>{</span>\n      <span>isShow</span><span>:</span> <span>true</span><span>,</span>\n    <span>};</span>\n  <span>}</span>\n\n  <span>toggleShow</span> <span>=</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n    <span>this</span><span>.</span><span>setState</span><span>(</span><span>state</span> <span>=&gt;</span> <span>({</span> <span>isShow</span><span>:</span> <span>!</span><span>state</span><span>.</span><span>isShow</span> <span>}));</span>\n  <span>};</span>\n\n  <span>render</span><span>()</span> <span>{</span>\n    <span>const</span> <span>greeting</span> <span>=</span> <span>'Welcome to React'</span><span>;</span>\n\n    <span>return</span> <span>(</span>\n      <span>&lt;</span><span>div</span><span>&gt;</span>\n<span>        <span>&lt;</span><span>Greeting</span> <span>greeting</span><span>=</span><span>{</span><span>greeting</span><span>}</span> <span>isShow</span><span>=</span><span>{</span><span>this</span><span>.</span><span>state</span><span>.</span><span>isShow</span><span>}</span> <span>/&gt;</span>\n</span>\n        <span>&lt;</span><span>button</span> <span>onClick</span><span>=</span><span>{</span><span>this</span><span>.</span><span>toggleShow</span><span>}</span> <span>type</span><span>=</span><span>\"button\"</span><span>&gt;</span>\n          <span>Toggle</span> <span>Show</span>\n        <span>&lt;</span><span>/button&gt;</span>\n      <span>&lt;</span><span>/div&gt;</span>\n    <span>);</span>\n  <span>}</span>\n<span>}</span>\n\n<span><span>const</span> <span>Greeting</span> <span>=</span> <span>({</span> <span>greeting</span><span>,</span> <span>isShow</span> <span>})</span> <span>=&gt;</span>\n</span><span>  <span>isShow</span> <span>?</span> <span>&lt;</span><span>h1</span><span>&gt;</span><span>{</span><span>greeting</span><span>}</span><span>&lt;</span><span>/h1&gt; : null;</span>\n</span>\n<span>export</span> <span>default</span> <span>App</span><span>;</span>\n</code></pre></div><p>The child component doesn’t know whether the incoming props are state or props from the parent component. The component just consumes the data as props. And the child component re-renders too once the incoming props changed.</p><p>In conclusion, every time the props or state change, the rendering mechanism of the affected component is triggered. That’s how the whole component tree becomes interactive, because after all, state is passed as props to other components, and once the state in a component changes, which may be passed as props to the child components, all affected components render again.</p><h2>How to pass Props from child to parent Component?</h2><p>This a common question for React newcomers and the answer for it is brief: there is&nbsp;<span>no way to pass props from a child to a parent component</span>. Let’s revisit the previous example, but this time with an additional Button component for the toggle mechanism.</p><div><pre><code data-lang=\"javascript\"><span></span><span>import</span> <span>React</span><span>,</span> <span>{</span> <span>Component</span> <span>}</span> <span>from</span> <span>'react'</span><span>;</span>\n\n<span>class</span> <span>App</span> <span>extends</span> <span>Component</span> <span>{</span>\n  <span>render</span><span>()</span> <span>{</span>\n    <span>const</span> <span>greeting</span> <span>=</span> <span>'Welcome to React'</span><span>;</span>\n\n    <span>return</span> <span>(</span>\n      <span>&lt;</span><span>div</span><span>&gt;</span>\n<span>        <span>{</span><span>isShow</span> <span>?</span> <span>&lt;</span><span>Greeting</span> <span>greeting</span><span>=</span><span>{</span><span>greeting</span><span>}</span> <span>/&gt;</span> <span>:</span> <span>null</span><span>}</span>\n</span>\n<span>        <span>&lt;</span><span>Button</span> <span>/&gt;</span>\n</span>      <span>&lt;</span><span>/div&gt;</span>\n    <span>);</span>\n  <span>}</span>\n<span>}</span>\n\n<span><span>class</span> <span>Button</span> <span>extends</span> <span>Component</span> <span>{</span>\n</span><span>  <span>constructor</span><span>(</span><span>props</span><span>)</span> <span>{</span>\n</span><span>    <span>super</span><span>(</span><span>props</span><span>);</span>\n</span><span>\n</span><span>    <span>this</span><span>.</span><span>state</span> <span>=</span> <span>{</span>\n</span><span>      <span>isShow</span><span>:</span> <span>true</span><span>,</span>\n</span><span>    <span>};</span>\n</span><span>  <span>}</span>\n</span><span>\n</span><span>  <span>toggleShow</span> <span>=</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n</span><span>    <span>this</span><span>.</span><span>setState</span><span>(</span><span>state</span> <span>=&gt;</span> <span>({</span> <span>isShow</span><span>:</span> <span>!</span><span>state</span><span>.</span><span>isShow</span> <span>}));</span>\n</span><span>  <span>};</span>\n</span><span>\n</span><span>  <span>render</span><span>()</span> <span>{</span>\n</span><span>    <span>return</span> <span>(</span>\n</span><span>      <span>&lt;</span><span>button</span> <span>onClick</span><span>=</span><span>{</span><span>this</span><span>.</span><span>toggleShow</span><span>}</span> <span>type</span><span>=</span><span>\"button\"</span><span>&gt;</span>\n</span><span>        <span>Toggle</span> <span>Show</span>\n</span><span>      <span>&lt;</span><span>/button&gt;</span>\n</span><span>    <span>);</span>\n</span><span>  <span>}</span>\n</span><span><span>}</span>\n</span>\n<span>const</span> <span>Greeting</span> <span>=</span> <span>({</span> <span>greeting</span> <span>})</span> <span>=&gt;</span> <span>&lt;</span><span>h1</span><span>&gt;</span><span>{</span><span>greeting</span><span>}</span><span>&lt;</span><span>/h1&gt;;</span>\n\n<span>export</span> <span>default</span> <span>App</span><span>;</span>\n</code></pre></div><p>So far, the Button component manages its own co-located state. Since the Button component manages the&nbsp;<code>isShow</code>&nbsp;property, there is no way to pass it up as props to the App component. The App component needs the&nbsp;<code>isShow</code>&nbsp;property though for the conditional rendering of the Greeting component. At the moment, the application wouldn’t work this way. That’s the point when you have to&nbsp;<span>lift state</span>&nbsp;up for making it accessible for other components (in this case the App component itself) as state (or as passed props for other components).</p><div><pre><code data-lang=\"javascript\"><span></span><span>import</span> <span>React</span><span>,</span> <span>{</span> <span>Component</span> <span>}</span> <span>from</span> <span>'react'</span><span>;</span>\n\n<span>class</span> <span>App</span> <span>extends</span> <span>Component</span> <span>{</span>\n<span>  <span>constructor</span><span>(</span><span>props</span><span>)</span> <span>{</span>\n</span><span>    <span>super</span><span>(</span><span>props</span><span>);</span>\n</span><span>\n</span><span>    <span>this</span><span>.</span><span>state</span> <span>=</span> <span>{</span>\n</span><span>      <span>isShow</span><span>:</span> <span>true</span><span>,</span>\n</span><span>    <span>};</span>\n</span><span>  <span>}</span>\n</span><span>\n</span><span>  <span>toggleShow</span> <span>=</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n</span><span>    <span>this</span><span>.</span><span>setState</span><span>(</span><span>state</span> <span>=&gt;</span> <span>({</span> <span>isShow</span><span>:</span> <span>!</span><span>state</span><span>.</span><span>isShow</span> <span>}));</span>\n</span><span>  <span>};</span>\n</span>\n  <span>render</span><span>()</span> <span>{</span>\n    <span>const</span> <span>greeting</span> <span>=</span> <span>'Welcome to React'</span><span>;</span>\n\n    <span>return</span> <span>(</span>\n      <span>&lt;</span><span>div</span><span>&gt;</span>\n<span>        <span>{</span><span>this</span><span>.</span><span>state</span><span>.</span><span>isShow</span> <span>?</span> <span>&lt;</span><span>Greeting</span> <span>greeting</span><span>=</span><span>{</span><span>greeting</span><span>}</span> <span>/&gt;</span> <span>:</span> <span>null</span><span>}</span>\n</span>\n<span>        <span>&lt;</span><span>Button</span> <span>onClick</span><span>=</span><span>{</span><span>this</span><span>.</span><span>toggleShow</span><span>}</span> <span>/&gt;</span>\n</span>      <span>&lt;</span><span>/div&gt;</span>\n    <span>);</span>\n  <span>}</span>\n<span>}</span>\n\n<span><span>const</span> <span>Button</span> <span>=</span> <span>({</span> <span>onClick</span> <span>})</span> <span>=&gt;</span> <span>(</span>\n</span><span>  <span>&lt;</span><span>button</span> <span>onClick</span><span>=</span><span>{</span><span>onClick</span><span>}</span> <span>type</span><span>=</span><span>\"button\"</span><span>&gt;</span>\n</span><span>    <span>Toggle</span> <span>Show</span>\n</span><span>  <span>&lt;</span><span>/button&gt;</span>\n</span><span><span>);</span>\n</span>\n<span>const</span> <span>Greeting</span> <span>=</span> <span>({</span> <span>greeting</span> <span>})</span> <span>=&gt;</span> <span>&lt;</span><span>h1</span><span>&gt;</span><span>{</span><span>greeting</span><span>}</span><span>&lt;</span><span>/h1&gt;;</span>\n\n<span>export</span> <span>default</span> <span>App</span><span>;</span>\n</code></pre></div><p>The important ingredient is that the App component&nbsp;<span>passes down a function in the props</span>&nbsp;to the Button component now. The function is used for the click handler in the Button component. However, the Button doesn’t know the business logic of the function, only that it has to trigger the function when the button gets clicked. Above in the App component, the state is changed when the passed function is called, and thus all affected components, which use the changed state or consume it as props, render again. Now you can even pass the state as props to the Greeting component.</p><div><pre><code data-lang=\"javascript\"><span></span><span>import</span> <span>React</span><span>,</span> <span>{</span> <span>Component</span> <span>}</span> <span>from</span> <span>'react'</span><span>;</span>\n\n<span>class</span> <span>App</span> <span>extends</span> <span>Component</span> <span>{</span>\n  <span>constructor</span><span>(</span><span>props</span><span>)</span> <span>{</span>\n    <span>super</span><span>(</span><span>props</span><span>);</span>\n\n    <span>this</span><span>.</span><span>state</span> <span>=</span> <span>{</span>\n      <span>isShow</span><span>:</span> <span>true</span><span>,</span>\n    <span>};</span>\n  <span>}</span>\n\n  <span>toggleShow</span> <span>=</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n    <span>this</span><span>.</span><span>setState</span><span>(</span><span>state</span> <span>=&gt;</span> <span>({</span> <span>isShow</span><span>:</span> <span>!</span><span>state</span><span>.</span><span>isShow</span> <span>}));</span>\n  <span>};</span>\n\n  <span>render</span><span>()</span> <span>{</span>\n    <span>const</span> <span>greeting</span> <span>=</span> <span>'Welcome to React'</span><span>;</span>\n\n    <span>return</span> <span>(</span>\n      <span>&lt;</span><span>div</span><span>&gt;</span>\n<span>        <span>&lt;</span><span>Greeting</span> <span>greeting</span><span>=</span><span>{</span><span>greeting</span><span>}</span> <span>isShow</span><span>=</span><span>{</span><span>this</span><span>.</span><span>state</span><span>.</span><span>isShow</span><span>}</span> <span>/&gt;</span>\n</span>\n        <span>&lt;</span><span>Button</span> <span>onClick</span><span>=</span><span>{</span><span>this</span><span>.</span><span>toggleShow</span><span>}</span> <span>/&gt;</span>\n      <span>&lt;</span><span>/div&gt;</span>\n    <span>);</span>\n  <span>}</span>\n<span>}</span>\n\n<span>const</span> <span>Button</span> <span>=</span> <span>({</span> <span>onClick</span> <span>})</span> <span>=&gt;</span> <span>(</span>\n  <span>&lt;</span><span>button</span> <span>onClick</span><span>=</span><span>{</span><span>onClick</span><span>}</span> <span>type</span><span>=</span><span>\"button\"</span><span>&gt;</span>\n    <span>Toggle</span> <span>Show</span>\n  <span>&lt;</span><span>/button&gt;</span>\n<span>);</span>\n\n<span><span>const</span> <span>Greeting</span> <span>=</span> <span>({</span> <span>greeting</span><span>,</span> <span>isShow</span> <span>})</span> <span>=&gt;</span>\n</span><span>  <span>isShow</span> <span>?</span> <span>&lt;</span><span>h1</span><span>&gt;</span><span>{</span><span>greeting</span><span>}</span><span>&lt;</span><span>/h1&gt; : null;</span>\n</span>\n<span>export</span> <span>default</span> <span>App</span><span>;</span>\n</code></pre></div><p>As said, there is no way passing props from a child to a parent component. But&nbsp;<span>you can always pass functions from parent to child components</span>, whereas the child components make use of these functions and the functions may change the state in a parent component above. Once the state has changed, the state is passed down as props again. All affected components will render again. For instance, the same pattern applies for having page components in your React application. Once you want to pass data from page to another in React, you can lift the state up to the component (usually App component) which has all page components as its child components. Then the data is managed as state in the top level component but still can be distributed to all child components.</p><h2>Props can be state, props, or derived properties</h2><p>Regardless of passing props or state to a component, the component just receives the data as props. It doesn’t differentiate between props or state. Everything incoming is props, everything managed by the component itself is state. However, there is one other thing apart from props and state which is sometimes mentioned:&nbsp;<span>derived props</span>&nbsp;(<span>derived properties</span>). Basically it is the same as props, but only a variation of the props before they are passed to the next component.</p><div><pre><code data-lang=\"javascript\"><span></span><span>import</span> <span>React</span><span>,</span> <span>{</span> <span>Component</span> <span>}</span> <span>from</span> <span>'react'</span><span>;</span>\n\n<span>class</span> <span>App</span> <span>extends</span> <span>Component</span> <span>{</span>\n  <span>render</span><span>()</span> <span>{</span>\n<span>    <span>const</span> <span>greeting</span> <span>=</span> <span>{</span>\n</span><span>      <span>subject</span><span>:</span> <span>'React'</span><span>,</span>\n</span><span>      <span>description</span><span>:</span> <span>'Your component library for ...'</span><span>,</span>\n</span><span>    <span>};</span>\n</span>\n    <span>return</span> <span>(</span>\n      <span>&lt;</span><span>div</span><span>&gt;</span>\n<span>        <span>&lt;</span><span>Greeting</span> <span>greeting</span><span>=</span><span>{</span><span>greeting</span><span>}</span> <span>/&gt;</span>\n</span>      <span>&lt;</span><span>/div&gt;</span>\n    <span>);</span>\n  <span>}</span>\n<span>}</span>\n\n<span>const</span> <span>Greeting</span> <span>=</span> <span>({</span> <span>greeting</span> <span>})</span> <span>=&gt;</span>\n  <span>&lt;</span><span>div</span><span>&gt;</span>\n<span>    <span>&lt;</span><span>Title</span> <span>title</span><span>=</span><span>{</span><span>`Welcome to </span><span>${</span><span>greeting</span><span>.</span><span>subject</span><span>}</span><span>`</span><span>}</span> <span>/&gt;</span>\n</span>    <span>&lt;</span><span>Description</span> <span>description</span><span>=</span><span>{</span><span>greeting</span><span>.</span><span>description</span><span>}</span> <span>/&gt;</span>\n  <span>&lt;</span><span>/div&gt;</span>\n\n<span><span>const</span> <span>Title</span> <span>=</span> <span>({</span> <span>title</span> <span>})</span> <span>=&gt;</span>\n</span><span>  <span>&lt;</span><span>h1</span><span>&gt;</span><span>{</span><span>title</span><span>}</span><span>&lt;</span><span>/h1&gt;;</span>\n</span>\n<span>const</span> <span>Description</span> <span>=</span> <span>({</span> <span>description</span> <span>})</span> <span>=&gt;</span>\n  <span>&lt;</span><span>p</span><span>&gt;</span><span>{</span><span>description</span><span>}</span><span>&lt;</span><span>/p&gt;;</span>\n\n<span>export</span> <span>default</span> <span>App</span><span>;</span>\n</code></pre></div><p>In this scenario, the title in the Title component is a derived property from props plus a string interpolation in the Greeting component. This is the most basic example for it, but you can imagine how state or any other business logic could be used to change the passed props on the way down the component tree. Later you will learn about derived state too.</p><h2>React Props and Code Style</h2><p>Passing lots of props down to a component can have a terrible effect on the code style:</p><div><pre><code data-lang=\"javascript\"><span></span><span>import</span> <span>React</span><span>,</span> <span>{</span> <span>Component</span> <span>}</span> <span>from</span> <span>'react'</span><span>;</span>\n<span>import</span> <span>logo</span> <span>from</span> <span>'./logo.svg'</span>\n\n<span>class</span> <span>App</span> <span>extends</span> <span>Component</span> <span>{</span>\n  <span>render</span><span>()</span> <span>{</span>\n    <span>const</span> <span>greeting</span> <span>=</span> <span>{</span>\n      <span>subject</span><span>:</span> <span>'React'</span><span>,</span>\n      <span>description</span><span>:</span> <span>'Your component library for ...'</span><span>,</span>\n    <span>};</span>\n\n    <span>return</span> <span>(</span>\n      <span>&lt;</span><span>div</span><span>&gt;</span>\n<span>        <span>&lt;</span><span>Greeting</span> <span>subject</span><span>=</span><span>{</span><span>greeting</span><span>.</span><span>subject</span><span>}</span> <span>description</span><span>=</span><span>{</span><span>greeting</span><span>.</span><span>description</span><span>}</span> <span>logo</span><span>=</span><span>{</span><span>logo</span><span>}</span> <span>/&gt;</span>\n</span>      <span>&lt;</span><span>/div&gt;</span>\n    <span>);</span>\n  <span>}</span>\n<span>}</span>\n\n<span>const</span> <span>Greeting</span> <span>=</span> <span>({</span> <span>subject</span><span>,</span> <span>description</span><span>,</span> <span>logo</span> <span>})</span> <span>=&gt;</span>\n  <span>...</span>\n</code></pre></div><p>So how to overcome this bad code style which is hard to read and maintain? One way would be passing the props with multiple indented lines to a component. The destructuring could follow the same rules:</p><div><pre><code data-lang=\"javascript\"><span></span><span>import</span> <span>React</span><span>,</span> <span>{</span> <span>Component</span> <span>}</span> <span>from</span> <span>'react'</span><span>;</span>\n<span>import</span> <span>logo</span> <span>from</span> <span>'./logo.svg'</span>\n\n<span>class</span> <span>App</span> <span>extends</span> <span>Component</span> <span>{</span>\n  <span>render</span><span>()</span> <span>{</span>\n    <span>const</span> <span>greeting</span> <span>=</span> <span>{</span>\n      <span>subject</span><span>:</span> <span>'React'</span><span>,</span>\n      <span>description</span><span>:</span> <span>'Your component library for ...'</span><span>,</span>\n    <span>};</span>\n\n    <span>return</span> <span>(</span>\n      <span>&lt;</span><span>div</span><span>&gt;</span>\n        <span>&lt;</span><span>Greeting</span>\n<span>          <span>subject</span><span>=</span><span>{</span><span>greeting</span><span>.</span><span>subject</span><span>}</span>\n</span><span>          <span>description</span><span>=</span><span>{</span><span>greeting</span><span>.</span><span>description</span><span>}</span>\n</span><span>          <span>logo</span><span>=</span><span>{</span><span>logo</span><span>}</span>\n</span>        <span>/&gt;</span>\n      <span>&lt;</span><span>/div&gt;</span>\n    <span>);</span>\n  <span>}</span>\n<span>}</span>\n\n<span>const</span> <span>Greeting</span> <span>=</span> <span>({</span>\n<span>  <span>subject</span><span>,</span>\n</span><span>  <span>description</span><span>,</span>\n</span><span>  <span>logo</span><span>,</span>\n</span><span>})</span> <span>=&gt;</span>\n  <span>...</span>\n</code></pre></div><p>You can do all of this code formatting on your own or use a code formatter instead.&nbsp;<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/prettier/prettier\">Prettier</a>&nbsp;is the most popular choice when it comes to opinionated code formatters. If you are interested in using Prettier, here you can read up on how to set it up on&nbsp;<a href=\"https://www.robinwieruch.de/react-js-windows-setup/\">Windows</a>&nbsp;or&nbsp;<a href=\"https://www.robinwieruch.de/react-js-macos-setup/\">MacOS</a>&nbsp;in Visual Studio Code.</p><h2>React ...props syntax</h2><p>Another strategy for passing all props to a child component is the&nbsp;<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax\">JavaScript spread operator</a>. JavaScript’s spread operator in React is a useful power feature and you can read people referring to it as the&nbsp;<span>React …props syntax</span>&nbsp;even though it is not really a React feature but just a thing coming from JavaScript.</p><div><pre><code data-lang=\"javascript\"><span></span><span>class</span> <span>App</span> <span>extends</span> <span>Component</span> <span>{</span>\n  <span>render</span><span>()</span> <span>{</span>\n    <span>const</span> <span>greeting</span> <span>=</span> <span>{</span>\n      <span>subject</span><span>:</span> <span>'React'</span><span>,</span>\n      <span>description</span><span>:</span> <span>'Your component library for ...'</span><span>,</span>\n    <span>};</span>\n\n    <span>return</span> <span>(</span>\n      <span>&lt;</span><span>div</span><span>&gt;</span>\n<span>        <span>&lt;</span><span>Greeting</span> <span>{...</span><span>greeting</span><span>}</span> <span>/&gt;</span>\n</span>      <span>&lt;</span><span>/div&gt;</span>\n    <span>);</span>\n  <span>}</span>\n<span>}</span>\n\n<span>const</span> <span>Greeting</span> <span>=</span> <span>({</span> <span>subject</span><span>,</span> <span>description</span> <span>})</span> <span>=&gt;</span> <span>(</span>\n  <span>&lt;</span><span>div</span><span>&gt;</span>\n    <span>&lt;</span><span>Title</span> <span>title</span><span>=</span><span>{</span><span>`Welcome to </span><span>${</span><span>subject</span><span>}</span><span>`</span><span>}</span> <span>/&gt;</span>\n    <span>&lt;</span><span>Description</span> <span>description</span><span>=</span><span>{</span><span>description</span><span>}</span> <span>/&gt;</span>\n  <span>&lt;</span><span>/div&gt;</span>\n<span>);</span>\n\n<span>const</span> <span>Title</span> <span>=</span> <span>({</span> <span>title</span> <span>})</span> <span>=&gt;</span> <span>&lt;</span><span>h1</span><span>&gt;</span><span>{</span><span>title</span><span>}</span><span>&lt;</span><span>/h1&gt;;</span>\n\n<span>const</span> <span>Description</span> <span>=</span> <span>({</span> <span>description</span> <span>})</span> <span>=&gt;</span> <span>&lt;</span><span>p</span><span>&gt;</span><span>{</span><span>description</span><span>}</span><span>&lt;</span><span>/p&gt;;</span>\n</code></pre></div><p>The props spreading can be used to spread a whole object with key value pairs down to a child component. It has the same effect as passing each value of the object by its own to the component as before. The child component gets the props the same way as before too. Another thing which builds up on top of the&nbsp;<span>prop spread</span>&nbsp;is the&nbsp;<span>prop spread with rest</span>.</p><div><pre><code data-lang=\"javascript\"><span></span><span>class</span> <span>App</span> <span>extends</span> <span>Component</span> <span>{</span>\n  <span>render</span><span>()</span> <span>{</span>\n    <span>const</span> <span>greeting</span> <span>=</span> <span>{</span>\n      <span>subject</span><span>:</span> <span>'React'</span><span>,</span>\n      <span>description</span><span>:</span> <span>'Your component library for ...'</span><span>,</span>\n    <span>};</span>\n\n    <span>return</span> <span>(</span>\n      <span>&lt;</span><span>div</span><span>&gt;</span>\n        <span>&lt;</span><span>Greeting</span> <span>{...</span><span>greeting</span><span>}</span> <span>/&gt;</span>\n      <span>&lt;</span><span>/div&gt;</span>\n    <span>);</span>\n  <span>}</span>\n<span>}</span>\n\n<span><span>const</span> <span>Greeting</span> <span>=</span> <span>({</span> <span>subject</span><span>,</span> <span>...</span><span>other</span> <span>})</span> <span>=&gt;</span> <span>(</span>\n</span>  <span>&lt;</span><span>div</span><span>&gt;</span>\n<span>    <span>&lt;</span><span>Title</span> <span>title</span><span>=</span><span>{</span><span>`Welcome to </span><span>${</span><span>subject</span><span>}</span><span>`</span><span>}</span> <span>/&gt;</span>\n</span><span>    <span>&lt;</span><span>Description</span> <span>{...</span><span>other</span><span>}</span> <span>/&gt;</span>\n</span>  <span>&lt;</span><span>/div&gt;</span>\n<span>);</span>\n\n<span>const</span> <span>Title</span> <span>=</span> <span>({</span> <span>title</span> <span>})</span> <span>=&gt;</span> <span>&lt;</span><span>h1</span><span>&gt;</span><span>{</span><span>title</span><span>}</span><span>&lt;</span><span>/h1&gt;;</span>\n\n<span>const</span> <span>Description</span> <span>=</span> <span>({</span> <span>description</span> <span>})</span> <span>=&gt;</span> <span>&lt;</span><span>p</span><span>&gt;</span><span>{</span><span>description</span><span>}</span><span>&lt;</span><span>/p&gt;;</span>\n</code></pre></div><p>As you can see, in the Greeting component the props are destructured but with a&nbsp;<span>rest assignment</span>&nbsp;which is called&nbsp;<code>other</code>&nbsp;in this case. So you have the&nbsp;<code>subject</code>&nbsp;prop but also the&nbsp;<code>other</code>&nbsp;prop which is essentially just an object with all the remaining properties (in this case only the&nbsp;<code>description</code>). Now you can spread the rest of the props to the Description component, because all the relevant props for the other components (here the Title component) were separated from it.</p><h2>React props with default value</h2><p>In some cases you may want to pass default values as props. Historically the best approach to it was using JavaScript’s logical OR operator.</p><div><pre><code data-lang=\"javascript\"><span></span><span>const</span> <span>Greeting</span> <span>=</span> <span>({</span> <span>subject</span><span>,</span> <span>description</span> <span>})</span> <span>=&gt;</span> <span>{</span>\n<span>  <span>subject</span> <span>=</span> <span>subject</span> <span>||</span> <span>'Earth'</span><span>;</span>\n</span>\n  <span>return</span> <span>(</span>\n    <span>&lt;</span><span>div</span><span>&gt;</span>\n      <span>&lt;</span><span>Title</span> <span>title</span><span>=</span><span>{</span><span>`Welcome to </span><span>${</span><span>subject</span><span>}</span><span>`</span><span>}</span> <span>/&gt;</span>\n      <span>&lt;</span><span>Description</span> <span>description</span><span>=</span><span>{</span><span>description</span><span>}</span> <span>/&gt;</span>\n    <span>&lt;</span><span>/div&gt;</span>\n  <span>);</span>\n<span>};</span>\n</code></pre></div><p>You can also inline it as prop:</p><div><pre><code data-lang=\"javascript\"><span></span><span>const</span> <span>Greeting</span> <span>=</span> <span>({</span> <span>subject</span><span>,</span> <span>description</span> <span>})</span> <span>=&gt;</span> <span>(</span>\n  <span>&lt;</span><span>div</span><span>&gt;</span>\n<span>    <span>&lt;</span><span>Title</span> <span>title</span><span>=</span><span>{</span><span>`Welcome to </span><span>${</span><span>subject</span> <span>||</span> <span>'Earth'</span><span>}</span><span>`</span><span>}</span> <span>/&gt;</span>\n</span>    <span>&lt;</span><span>Description</span> <span>description</span><span>=</span><span>{</span><span>description</span><span>}</span> <span>/&gt;</span>\n  <span>&lt;</span><span>/div&gt;</span>\n<span>);</span>\n</code></pre></div><p>However, with JavaScript language additions there are other features you can use for it. For instance&nbsp;<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Default_parameters\">JavaScript’s default parameter</a>&nbsp;for the default value of the prop:</p><div><pre><code data-lang=\"javascript\"><span></span><span><span>const</span> <span>Greeting</span> <span>=</span> <span>({</span> <span>subject</span> <span>=</span> <span>'Earth'</span><span>,</span> <span>description</span> <span>})</span> <span>=&gt;</span> <span>(</span>\n</span>  <span>&lt;</span><span>div</span><span>&gt;</span>\n    <span>&lt;</span><span>Title</span> <span>title</span><span>=</span><span>{</span><span>`Welcome to </span><span>${</span><span>subject</span><span>}</span><span>`</span><span>}</span> <span>/&gt;</span>\n    <span>&lt;</span><span>Description</span> <span>description</span><span>=</span><span>{</span><span>description</span><span>}</span> <span>/&gt;</span>\n  <span>&lt;</span><span>/div&gt;</span>\n<span>);</span>\n</code></pre></div><p>The latter is the most popular choice when using only JavaScript for the default value. However, in case you are using&nbsp;<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://reactjs.org/docs/typechecking-with-proptypes.html\">React’s PropTypes</a>, it’s is also possible to pass&nbsp;<span>default prop values</span>&nbsp;the React way:</p><div><pre><code data-lang=\"javascript\"><span></span><span>const</span> <span>Greeting</span> <span>=</span> <span>({</span> <span>subject</span><span>,</span> <span>description</span> <span>})</span> <span>=&gt;</span> <span>(</span>\n  <span>&lt;</span><span>div</span><span>&gt;</span>\n    <span>&lt;</span><span>Title</span> <span>title</span><span>=</span><span>{</span><span>`Welcome to </span><span>${</span><span>subject</span><span>}</span><span>`</span><span>}</span> <span>/&gt;</span>\n    <span>&lt;</span><span>Description</span> <span>description</span><span>=</span><span>{</span><span>description</span><span>}</span> <span>/&gt;</span>\n  <span>&lt;</span><span>/div&gt;</span>\n<span>);</span>\n\n<span><span>Greeting</span><span>.</span><span>defaultProps</span> <span>=</span> <span>{</span>\n</span><span>  <span>subject</span><span>:</span> <span>'Earth'</span><span>,</span>\n</span><span><span>};</span>\n</span></code></pre></div><p>After all, my recommendation would be using JavaScript’s default parameter, because everyone outside of the React world understands it as well. Moreover, often you will not have React’s PropTypes in your project for making use of the PropTypes default in the first place.</p><h2>React's children prop</h2><p>The children prop in React can be used for composing React components into each other. Rather than using inheritance (due to the nature of React’s class components), React&nbsp;<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://reactjs.org/docs/composition-vs-inheritance.html\">embraces composition over inheritance</a>. That’s why you can just put any string, element(s) or React component(s) in between of the opening and closing component tags.</p><div><pre><code data-lang=\"javascript\"><span></span><span>class</span> <span>App</span> <span>extends</span> <span>Component</span> <span>{</span>\n  <span>...</span>\n\n  <span>render</span><span>()</span> <span>{</span>\n    <span>const</span> <span>greeting</span> <span>=</span> <span>'Welcome to React'</span><span>;</span>\n\n    <span>return</span> <span>(</span>\n      <span>&lt;</span><span>div</span><span>&gt;</span>\n        <span>&lt;</span><span>Greeting</span> <span>greeting</span><span>=</span><span>{</span><span>greeting</span><span>}</span> <span>isShow</span><span>=</span><span>{</span><span>this</span><span>.</span><span>state</span><span>.</span><span>isShow</span><span>}</span> <span>/&gt;</span>\n\n<span>        <span>&lt;</span><span>Button</span> <span>onClick</span><span>=</span><span>{</span><span>this</span><span>.</span><span>toggleShow</span><span>}</span><span>&gt;</span><span>Toggle</span> <span>Show</span><span>&lt;</span><span>/Button&gt;</span>\n</span>      <span>&lt;</span><span>/div&gt;</span>\n    <span>);</span>\n  <span>}</span>\n<span>}</span>\n\n<span><span>const</span> <span>Button</span> <span>=</span> <span>({</span> <span>onClick</span><span>,</span> <span>children</span> <span>})</span> <span>=&gt;</span> <span>(</span>\n</span>  <span>&lt;</span><span>button</span> <span>onClick</span><span>=</span><span>{</span><span>onClick</span><span>}</span> <span>type</span><span>=</span><span>\"button\"</span><span>&gt;</span>\n<span>    <span>{</span><span>children</span><span>}</span>\n</span>  <span>&lt;</span><span>/button&gt;</span>\n<span>);</span>\n</code></pre></div><p>In this case, only a string is put in between of the component tags. Then in the child component, you can make use of everything which is in between of the tags (string, element(s), component(s)), by using&nbsp;<span>React’s children prop</span>. For instance, you can just render the content of the children prop like it is done in this example. In the following sections, you will see how the children prop can be used as a function too.</p><h2>How to pass Components as Props?</h2><p>Before you have learned about React’s children prop to pass a component as prop to another component.</p><div><pre><code data-lang=\"javascript\"><span></span><span>const</span> <span>User</span> <span>=</span> <span>({</span> <span>user</span> <span>})</span> <span>=&gt;</span> <span>(</span>\n  <span>&lt;</span><span>Profile</span> <span>user</span><span>=</span><span>{</span><span>user</span><span>}</span><span>&gt;</span>\n    <span>&lt;</span><span>AvatarRound</span> <span>user</span><span>=</span><span>{</span><span>user</span><span>}</span> <span>/&gt;</span>\n  <span>&lt;</span><span>/Profile&gt;</span>\n<span>);</span>\n\n<span>const</span> <span>Profile</span> <span>=</span> <span>({</span> <span>user</span><span>,</span> <span>children</span> <span>})</span> <span>=&gt;</span> <span>(</span>\n  <span>&lt;</span><span>div</span> <span>className</span><span>=</span><span>\"profile\"</span><span>&gt;</span>\n    <span>&lt;</span><span>div</span><span>&gt;</span><span>{</span><span>children</span><span>}</span><span>&lt;</span><span>/div&gt;</span>\n    <span>&lt;</span><span>div</span><span>&gt;</span>\n      <span>&lt;</span><span>p</span><span>&gt;</span><span>{</span><span>user</span><span>.</span><span>name</span><span>}</span><span>&lt;</span><span>/p&gt;</span>\n    <span>&lt;</span><span>/div&gt;</span>\n  <span>&lt;</span><span>/div&gt;</span>\n<span>);</span>\n\n<span>const</span> <span>AvatarRound</span> <span>=</span> <span>({</span> <span>user</span> <span>})</span> <span>=&gt;</span> <span>(</span>\n  <span>&lt;</span><span>img</span> <span>className</span><span>=</span><span>\"round\"</span> <span>alt</span><span>=</span><span>\"avatar\"</span> <span>src</span><span>=</span><span>{</span><span>user</span><span>.</span><span>avatarUrl</span><span>}</span> <span>/&gt;</span>\n<span>);</span>\n</code></pre></div><p>However, what if you want to&nbsp;<span>pass more than one component and place them at different positions</span>? Then again you don’t need to use the children prop and instead you just use regular props:</p><div><pre><code data-lang=\"javascript\"><span></span><span>const</span> <span>User</span> <span>=</span> <span>({</span> <span>user</span> <span>})</span> <span>=&gt;</span> <span>(</span>\n  <span>&lt;</span><span>Profile</span>\n    <span>user</span><span>=</span><span>{</span><span>user</span><span>}</span>\n    <span>avatar</span><span>=</span><span>{</span><span>&lt;</span><span>AvatarRound</span> <span>user</span><span>=</span><span>{</span><span>user</span><span>}</span> <span>/&gt;</span><span>}</span>\n    <span>biography</span><span>=</span><span>{</span><span>&lt;</span><span>BiographyFat</span> <span>user</span><span>=</span><span>{</span><span>user</span><span>}</span> <span>/&gt;</span><span>}</span>\n  <span>/&gt;</span>\n<span>);</span>\n\n<span>const</span> <span>Profile</span> <span>=</span> <span>({</span> <span>user</span><span>,</span> <span>avatar</span><span>,</span> <span>biography</span> <span>})</span> <span>=&gt;</span> <span>(</span>\n  <span>&lt;</span><span>div</span> <span>className</span><span>=</span><span>\"profile\"</span><span>&gt;</span>\n    <span>&lt;</span><span>div</span><span>&gt;</span><span>{</span><span>avatar</span><span>}</span><span>&lt;</span><span>/div&gt;</span>\n    <span>&lt;</span><span>div</span><span>&gt;</span>\n      <span>&lt;</span><span>p</span><span>&gt;</span><span>{</span><span>user</span><span>.</span><span>name</span><span>}</span><span>&lt;</span><span>/p&gt;</span>\n      <span>{</span><span>biography</span><span>}</span>\n    <span>&lt;</span><span>/div&gt;</span>\n  <span>&lt;</span><span>/div&gt;</span>\n<span>);</span>\n\n<span>const</span> <span>AvatarRound</span> <span>=</span> <span>({</span> <span>user</span> <span>})</span> <span>=&gt;</span> <span>(</span>\n  <span>&lt;</span><span>img</span> <span>className</span><span>=</span><span>\"round\"</span> <span>alt</span><span>=</span><span>\"avatar\"</span> <span>src</span><span>=</span><span>{</span><span>user</span><span>.</span><span>avatarUrl</span><span>}</span> <span>/&gt;</span>\n<span>);</span>\n\n<span>const</span> <span>BiographyFat</span> <span>=</span> <span>({</span> <span>user</span> <span>})</span> <span>=&gt;</span> <span>(</span>\n  <span>&lt;</span><span>p</span> <span>className</span><span>=</span><span>\"fat\"</span><span>&gt;</span><span>{</span><span>user</span><span>.</span><span>biography</span><span>}</span><span>&lt;</span><span>/p&gt;</span>\n<span>);</span>\n</code></pre></div><p>Often this approach is used when having a surrounding layout component which takes multiple components as content with props. Now you can exchange the Avatar or Biography components dynamically with other components such as:</p><div><pre><code data-lang=\"javascript\"><span></span><span>const</span> <span>AvatarSquare</span> <span>=</span> <span>({</span> <span>user</span> <span>})</span> <span>=&gt;</span> <span>(</span>\n  <span>&lt;</span><span>img</span> <span>className</span><span>=</span><span>\"square\"</span> <span>alt</span><span>=</span><span>\"avatar\"</span> <span>src</span><span>=</span><span>{</span><span>user</span><span>.</span><span>avatarUrl</span><span>}</span> <span>/&gt;</span>\n<span>);</span>\n\n<span>const</span> <span>BiographyItalic</span> <span>=</span> <span>({</span> <span>user</span> <span>})</span> <span>=&gt;</span> <span>(</span>\n  <span>&lt;</span><span>p</span> <span>className</span><span>=</span><span>\"italic\"</span><span>&gt;</span><span>{</span><span>user</span><span>.</span><span>biography</span><span>}</span><span>&lt;</span><span>/p&gt;</span>\n<span>);</span>\n</code></pre></div><p>Many people refer to this as&nbsp;<span>slot pattern</span>&nbsp;in React. You can find a working minimal project on&nbsp;<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/the-road-to-learn-react/react-slot-pattern-example\">GitHub</a>. And again, that’s how composition in React shines. You don’t need to touch the Profile component. Moreover, you don’t need to pass props, in this case the user, multiple levels down the component tree, but rather pass it to the slotted components.</p><h2>Children as a Function</h2><p>The concept of&nbsp;<span>children as a function</span>&nbsp;or&nbsp;<span>child as a function</span>, also called&nbsp;<span>render prop</span>, is one of the advanced patterns in React (next to&nbsp;<a href=\"https://www.robinwieruch.de/gentle-introduction-higher-order-components/\">higher-order components</a>). The components which implement this pattern can be called&nbsp;<span>render prop components.</span></p><p>The following implementations can be difficult to follow when not having used render props in React before. Please read up this article&nbsp;<a href=\"https://www.robinwieruch.de/react-render-props-pattern/\">as introduction to render props in React</a>&nbsp;first.</p><p>First, let’s start with the render prop. Basically it is a function passed as prop (usually called render, but the name can be anything). The function receives arguments (in this case the amount), but also renders JSX (in this case the components for the currency conversion).</p><div><pre><code data-lang=\"javascript\"><span></span><span>const</span> <span>App</span> <span>=</span> <span>()</span> <span>=&gt;</span> <span>(</span>\n  <span>&lt;</span><span>div</span><span>&gt;</span>\n    <span>&lt;</span><span>h1</span><span>&gt;</span><span>US</span> <span>Dollar</span> <span>to</span> <span>Euro</span><span>:&lt;</span><span>/h1&gt;</span>\n<span>    <span>&lt;</span><span>Amount</span> <span>render</span><span>=</span><span>{</span><span>amount</span> <span>=&gt;</span> <span>&lt;</span><span>Euro</span> <span>amount</span><span>=</span><span>{</span><span>amount</span><span>}</span> <span>/&gt;</span><span>}</span> <span>/&gt;</span>\n</span>\n    <span>&lt;</span><span>h1</span><span>&gt;</span><span>US</span> <span>Dollar</span> <span>to</span> <span>Pound</span><span>:&lt;</span><span>/h1&gt;</span>\n<span>    <span>&lt;</span><span>Amount</span> <span>render</span><span>=</span><span>{</span><span>amount</span> <span>=&gt;</span> <span>&lt;</span><span>Pound</span> <span>amount</span><span>=</span><span>{</span><span>amount</span><span>}</span> <span>/&gt;</span><span>}</span> <span>/&gt;</span>\n</span>  <span>&lt;</span><span>/div&gt;</span>\n<span>);</span>\n\n<span>class</span> <span>Amount</span> <span>extends</span> <span>Component</span> <span>{</span>\n  <span>constructor</span><span>(</span><span>props</span><span>)</span> <span>{</span>\n    <span>super</span><span>(</span><span>props</span><span>);</span>\n\n    <span>this</span><span>.</span><span>state</span> <span>=</span> <span>{</span>\n      <span>amount</span><span>:</span> <span>0</span><span>,</span>\n    <span>};</span>\n  <span>}</span>\n\n  <span>onIncrement</span> <span>=</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n    <span>this</span><span>.</span><span>setState</span><span>(</span><span>state</span> <span>=&gt;</span> <span>({</span> <span>amount</span><span>:</span> <span>state</span><span>.</span><span>amount</span> <span>+</span> <span>1</span> <span>}));</span>\n  <span>};</span>\n\n  <span>onDecrement</span> <span>=</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n    <span>this</span><span>.</span><span>setState</span><span>(</span><span>state</span> <span>=&gt;</span> <span>({</span> <span>amount</span><span>:</span> <span>state</span><span>.</span><span>amount</span> <span>-</span> <span>1</span> <span>}));</span>\n  <span>};</span>\n\n  <span>render</span><span>()</span> <span>{</span>\n    <span>return</span> <span>(</span>\n      <span>&lt;</span><span>div</span><span>&gt;</span>\n        <span>&lt;</span><span>button</span> <span>type</span><span>=</span><span>\"button\"</span> <span>onClick</span><span>=</span><span>{</span><span>this</span><span>.</span><span>onIncrement</span><span>}</span><span>&gt;</span>\n          <span>+</span>\n        <span>&lt;</span><span>/button&gt;</span>\n        <span>&lt;</span><span>button</span> <span>type</span><span>=</span><span>\"button\"</span> <span>onClick</span><span>=</span><span>{</span><span>this</span><span>.</span><span>onDecrement</span><span>}</span><span>&gt;</span>\n          <span>-</span>\n        <span>&lt;</span><span>/button&gt;</span>\n\n        <span>&lt;</span><span>p</span><span>&gt;</span><span>US</span> <span>Dollar</span><span>:</span> <span>{</span><span>this</span><span>.</span><span>state</span><span>.</span><span>amount</span><span>}</span><span>&lt;</span><span>/p&gt;</span>\n\n<span>        <span>{</span><span>this</span><span>.</span><span>props</span><span>.</span><span>render</span><span>(</span><span>this</span><span>.</span><span>state</span><span>.</span><span>amount</span><span>)}</span>\n</span>      <span>&lt;</span><span>/div&gt;</span>\n    <span>);</span>\n  <span>}</span>\n<span>}</span>\n\n<span>const</span> <span>Euro</span> <span>=</span> <span>({</span> <span>amount</span> <span>})</span> <span>=&gt;</span> <span>&lt;</span><span>p</span><span>&gt;</span><span>Euro</span><span>:</span> <span>{</span><span>amount</span> <span>*</span> <span>0.86</span><span>}</span><span>&lt;</span><span>/p&gt;;</span>\n\n<span>const</span> <span>Pound</span> <span>=</span> <span>({</span> <span>amount</span> <span>})</span> <span>=&gt;</span> <span>&lt;</span><span>p</span><span>&gt;</span><span>Pound</span><span>:</span> <span>{</span><span>amount</span> <span>*</span> <span>0.76</span><span>}</span><span>&lt;</span><span>/p&gt;;</span>\n</code></pre></div><p>Second, refactor the whole thing from having a render prop to having the children as a function:</p><div><pre><code data-lang=\"javascript\"><span></span><span>const</span> <span>App</span> <span>=</span> <span>()</span> <span>=&gt;</span> <span>(</span>\n  <span>&lt;</span><span>div</span><span>&gt;</span>\n    <span>&lt;</span><span>h1</span><span>&gt;</span><span>US</span> <span>Dollar</span> <span>to</span> <span>Euro</span><span>:&lt;</span><span>/h1&gt;</span>\n<span>    <span>&lt;</span><span>Amount</span><span>&gt;</span><span>{</span><span>amount</span> <span>=&gt;</span> <span>&lt;</span><span>Euro</span> <span>amount</span><span>=</span><span>{</span><span>amount</span><span>}</span> <span>/&gt;</span><span>}</span><span>&lt;</span><span>/Amount&gt;</span>\n</span>\n    <span>&lt;</span><span>h1</span><span>&gt;</span><span>US</span> <span>Dollar</span> <span>to</span> <span>Pound</span><span>:&lt;</span><span>/h1&gt;</span>\n<span>    <span>&lt;</span><span>Amount</span><span>&gt;</span><span>{</span><span>amount</span> <span>=&gt;</span> <span>&lt;</span><span>Pound</span> <span>amount</span><span>=</span><span>{</span><span>amount</span><span>}</span> <span>/&gt;</span><span>}</span><span>&lt;</span><span>/Amount&gt;</span>\n</span>  <span>&lt;</span><span>/div&gt;</span>\n<span>);</span>\n\n<span>class</span> <span>Amount</span> <span>extends</span> <span>Component</span> <span>{</span>\n  <span>constructor</span><span>(</span><span>props</span><span>)</span> <span>{</span>\n    <span>super</span><span>(</span><span>props</span><span>);</span>\n\n    <span>this</span><span>.</span><span>state</span> <span>=</span> <span>{</span>\n      <span>amount</span><span>:</span> <span>0</span><span>,</span>\n    <span>};</span>\n  <span>}</span>\n\n  <span>onIncrement</span> <span>=</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n    <span>this</span><span>.</span><span>setState</span><span>(</span><span>state</span> <span>=&gt;</span> <span>({</span> <span>amount</span><span>:</span> <span>state</span><span>.</span><span>amount</span> <span>+</span> <span>1</span> <span>}));</span>\n  <span>};</span>\n\n  <span>onDecrement</span> <span>=</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n    <span>this</span><span>.</span><span>setState</span><span>(</span><span>state</span> <span>=&gt;</span> <span>({</span> <span>amount</span><span>:</span> <span>state</span><span>.</span><span>amount</span> <span>-</span> <span>1</span> <span>}));</span>\n  <span>};</span>\n\n  <span>render</span><span>()</span> <span>{</span>\n    <span>return</span> <span>(</span>\n      <span>&lt;</span><span>div</span><span>&gt;</span>\n        <span>&lt;</span><span>button</span> <span>type</span><span>=</span><span>\"button\"</span> <span>onClick</span><span>=</span><span>{</span><span>this</span><span>.</span><span>onIncrement</span><span>}</span><span>&gt;</span>\n          <span>+</span>\n        <span>&lt;</span><span>/button&gt;</span>\n        <span>&lt;</span><span>button</span> <span>type</span><span>=</span><span>\"button\"</span> <span>onClick</span><span>=</span><span>{</span><span>this</span><span>.</span><span>onDecrement</span><span>}</span><span>&gt;</span>\n          <span>-</span>\n        <span>&lt;</span><span>/button&gt;</span>\n\n        <span>&lt;</span><span>p</span><span>&gt;</span><span>US</span> <span>Dollar</span><span>:</span> <span>{</span><span>this</span><span>.</span><span>state</span><span>.</span><span>amount</span><span>}</span><span>&lt;</span><span>/p&gt;</span>\n\n<span>        <span>{</span><span>this</span><span>.</span><span>props</span><span>.</span><span>children</span><span>(</span><span>this</span><span>.</span><span>state</span><span>.</span><span>amount</span><span>)}</span>\n</span>      <span>&lt;</span><span>/div&gt;</span>\n    <span>);</span>\n  <span>}</span>\n<span>}</span>\n\n<span>const</span> <span>Euro</span> <span>=</span> <span>({</span> <span>amount</span> <span>})</span> <span>=&gt;</span> <span>&lt;</span><span>p</span><span>&gt;</span><span>Euro</span><span>:</span> <span>{</span><span>amount</span> <span>*</span> <span>0.86</span><span>}</span><span>&lt;</span><span>/p&gt;;</span>\n\n<span>const</span> <span>Pound</span> <span>=</span> <span>({</span> <span>amount</span> <span>})</span> <span>=&gt;</span> <span>&lt;</span><span>p</span><span>&gt;</span><span>Pound</span><span>:</span> <span>{</span><span>amount</span> <span>*</span> <span>0.76</span><span>}</span><span>&lt;</span><span>/p&gt;;</span>\n</code></pre></div><p>That’s essentially everything to distinguish between a render prop or a children as a function in a render prop component. The former is passed as a normal prop and the latter is passed as a children prop. You have seen before that functions can be passed as callback handlers (e.g. button click) to React components, but this time the function is passed to actually render something whereas the responsibility for&nbsp;<em>what to render</em>&nbsp;was partially moved outside of the render prop component but the props are provided by the render prop component itself.</p><p>You can find a working minimal project on&nbsp;<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/the-road-to-learn-react/react-children-as-a-function-example\">GitHub</a>. And again, if you had any problems following the last examples, check the referenced article, because this guide doesn’t go into detail for render prop components in React.</p><h2>React's Context API</h2><p>At some point, you are passing a lot of props down your component tree. Depending on the depth of the component tree, it can happen that many props are passed from a top level component to all the leaf components. Every component in between has to pass the props even though it may not be interested in the props. The problem is called&nbsp;<span>prop drilling</span>&nbsp;in React. There are a couple of solutions to overcome this “problem”. You have already learned about one solution: passing components as props by using the slot pattern. Then you don’t have to pass a prop through all components, but rather distribute the props at a top level to all slotted components.</p><p>Another solution is&nbsp;<span>React’s Context API</span>&nbsp;which can be used to pass props implicitly down to component tree. Every component which is interested in the props passed by React’s Context API can consume them. All the other components don’t need to consume them and thus they will never know about the props. Moreover, the components between the top level and the leaf components don’t need to know about the props as well. Checkout&nbsp;<a href=\"https://www.robinwieruch.de/react-context-api/\">React’s Context API</a>&nbsp;if you are interested in using it.</p><h2>How to set props to state?</h2><p>Previously you have got to know more about props and state in React. Sometimes there is one question which comes up for React beginners, but also for experienced React developers when implementing React components:&nbsp;<span>How to set props to state?</span>&nbsp;In case of the initial state, it is totally fine to derive it from the props. You can do it in the constructor of a class component:</p><div><pre><code data-lang=\"javascript\"><span></span><span>class</span> <span>Profile</span> <span>extends</span> <span>Component</span> <span>{</span>\n  <span>constructor</span><span>(</span><span>props</span><span>)</span> <span>{</span>\n    <span>super</span><span>(</span><span>props</span><span>);</span>\n\n    <span>this</span><span>.</span><span>state</span> <span>=</span> <span>{</span>\n<span>      <span>value</span><span>:</span> <span>props</span><span>.</span><span>initialValue</span><span>,</span>\n</span>    <span>};</span>\n  <span>}</span>\n\n  <span>onChange</span> <span>=</span> <span>event</span> <span>=&gt;</span> <span>{</span>\n    <span>this</span><span>.</span><span>setState</span><span>({</span> <span>value</span><span>:</span> <span>event</span><span>.</span><span>target</span><span>.</span><span>value</span> <span>});</span>\n  <span>}</span>\n\n  <span>render</span><span>()</span> <span>{</span>\n    <span>return</span> <span>(</span>\n      <span>&lt;</span><span>label</span><span>&gt;</span>\n        <span>Name</span><span>:</span>\n\n        <span>&lt;</span><span>input</span>\n          <span>value</span><span>=</span><span>{</span><span>this</span><span>.</span><span>state</span><span>.</span><span>value</span><span>}</span>\n          <span>onChange</span><span>=</span><span>{</span><span>this</span><span>.</span><span>onChange</span><span>}</span>\n          <span>type</span><span>=</span><span>\"text\"</span>\n        <span>/&gt;</span>\n      <span>&lt;</span><span>/label&gt;</span>\n    <span>);</span>\n  <span>}</span>\n<span>}</span>\n</code></pre></div><p>That’s a common pattern in React. But what about incoming props which are changing and should be set to the state then? You can do it by using the&nbsp;<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://reactjs.org/docs/react-component.html#static-getderivedstatefromprops\">getDerivedStateFromProps(props, state) lifecycle method</a>. It is invoked before the render lifecycle method for the mounting and update lifecycles of the component. By using this lifecycle method, it is possible to set the state of the component based on changing props.</p><p>However, the&nbsp;<code>getDerivedStateFromProps()</code>&nbsp;lifecycle method exists only for rare use cases. Usually one should think twice about the implementation logic of the component(s) before using this lifecycle method. This article doesn’t go into detail about this topic, because there already exists an excellent article about it:&nbsp;<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://reactjs.org/blog/2018/06/07/you-probably-dont-need-derived-state.html\">You Probably Don’t Need Derived State</a>. You should definitely check it out in case you are running into an edge case where derived state is applicable. Usually there is a way around this lifecycle method and the article explains these scenarios in great detail.</p><h2>React Props Pitfalls</h2><p>There are a couple of pitfalls when passing props in React. Here I want to collect a list of these things in case someone stumbles upon them:</p><h3>React props are not being passed in Components</h3><p>Sometimes you run into the problem that your React props are not being passed. Personally I ran into this issue several times when I forgot to use the curly braces for the props destructuring in my functional stateless components:</p><div><pre><code data-lang=\"javascript\"><span></span><span><span>const</span> <span>Button</span> <span>=</span> <span>(</span><span>onClick</span><span>,</span> <span>children</span><span>)</span> <span>=&gt;</span> <span>(</span>\n</span>  <span>&lt;</span><span>button</span> <span>onClick</span><span>=</span><span>{</span><span>onClick</span><span>}</span> <span>type</span><span>=</span><span>\"button\"</span><span>&gt;</span>\n    <span>{</span><span>children</span><span>}</span>\n  <span>&lt;</span><span>/button&gt;</span>\n<span>);</span>\n</code></pre></div><p>In this case, the&nbsp;<code>onClick</code>&nbsp;argument is the actual props. So you have to destructure it, so the first argument of the function, for accessing the&nbsp;<code>onClick</code>&nbsp;and&nbsp;<code>children</code>&nbsp;props.</p><div><pre><code data-lang=\"javascript\"><span></span><span><span>const</span> <span>Button</span> <span>=</span> <span>({</span> <span>onClick</span><span>,</span> <span>children</span> <span>})</span> <span>=&gt;</span> <span>(</span>\n</span>  <span>&lt;</span><span>button</span> <span>onClick</span><span>=</span><span>{</span><span>onClick</span><span>}</span> <span>type</span><span>=</span><span>\"button\"</span><span>&gt;</span>\n    <span>{</span><span>children</span><span>}</span>\n  <span>&lt;</span><span>/button&gt;</span>\n<span>);</span>\n</code></pre></div><p>Most often that’s already the solution to the problem. If not, you should track down the prop from parent to child component by adding&nbsp;<code>console.log(props)</code>&nbsp;calls to your components. If you have a functional stateless component, you don’t necessarily need to add an arrow function body to your component for putting the&nbsp;<code>console.log()</code>&nbsp;in between. Instead you can use this neat trick:</p><div><pre><code data-lang=\"javascript\"><span></span><span>const</span> <span>Button</span> <span>=</span> <span>({</span> <span>onClick</span><span>,</span> <span>children</span> <span>})</span> <span>=&gt;</span>\n<span>  <span>console</span><span>.</span><span>log</span><span>(</span><span>onClick</span><span>,</span> <span>children</span><span>)</span> <span>||</span> <span>(</span>\n</span>  <span>&lt;</span><span>button</span> <span>onClick</span><span>=</span><span>{</span><span>onClick</span><span>}</span> <span>type</span><span>=</span><span>\"button\"</span><span>&gt;</span>\n    <span>{</span><span>children</span><span>}</span>\n  <span>&lt;</span><span>/button&gt;</span>\n<span>);</span>\n</code></pre></div><p>The&nbsp;<code>console.log()</code>&nbsp;always evaluates to true and thus the component is still being rendered. That’s how you can easily get a logging for your props in between your input and output of your functional stateless component.</p><h3>React props key is undefined</h3><p>When rendering lists in React, you have to use a key prop identifying the element in the list. React uses the key for performance reasons, but also for keeping track of the element in case your list changes (e.g. due ordering, removing, adding of items). That’s why you should use a unique identifier which is associated to the rendered item.</p><div><pre><code data-lang=\"javascript\"><span></span><span>const</span> <span>List</span> <span>=</span> <span>({</span> <span>users</span> <span>})</span> <span>=&gt;</span> <span>(</span>\n  <span>&lt;</span><span>ul</span><span>&gt;</span>\n    <span>{</span><span>users</span><span>.</span><span>map</span><span>(</span><span>user</span> <span>=&gt;</span> <span>&lt;</span><span>Item</span> <span>key</span><span>=</span><span>{</span><span>user</span><span>.</span><span>id</span><span>}</span><span>&gt;</span><span>{</span><span>user</span><span>.</span><span>name</span><span>}</span><span>&lt;</span><span>/Item&gt;)}</span>\n  <span>&lt;</span><span>/ul&gt;</span>\n<span>);</span>\n\n<span>const</span> <span>Item</span> <span>=</span> <span>({</span> <span>children</span> <span>})</span> <span>=&gt;</span> <span>(</span>\n  <span>&lt;</span><span>p</span><span>&gt;</span><span>{</span><span>children</span><span>}</span><span>&lt;</span><span>/p&gt;</span>\n<span>);</span>\n</code></pre></div><p>So far, everything is alright with this code. However, sometimes you want to get the key prop in the child component.</p><div><pre><code data-lang=\"javascript\"><span></span><span>const</span> <span>List</span> <span>=</span> <span>({</span> <span>users</span> <span>})</span> <span>=&gt;</span> <span>(</span>\n  <span>&lt;</span><span>ul</span><span>&gt;</span>\n    <span>{</span><span>users</span><span>.</span><span>map</span><span>(</span><span>user</span> <span>=&gt;</span> <span>&lt;</span><span>Item</span> <span>key</span><span>=</span><span>{</span><span>user</span><span>.</span><span>id</span><span>}</span><span>&gt;</span><span>{</span><span>user</span><span>.</span><span>name</span><span>}</span><span>&lt;</span><span>/Item&gt;)}</span>\n  <span>&lt;</span><span>/ul&gt;</span>\n<span>);</span>\n\n<span><span>const</span> <span>Item</span> <span>=</span> <span>({</span> <span>key</span><span>,</span> <span>children</span> <span>})</span> <span>=&gt;</span> <span>(</span>\n</span><span>  <span>&lt;</span><span>p</span><span>&gt;</span><span>{</span><span>key</span><span>}</span> <span>{</span><span>children</span><span>}</span><span>&lt;</span><span>/p&gt;</span>\n</span><span>);</span>\n</code></pre></div><p>That’s not working and you will also see a warning in your developer console log:&nbsp;<em>”… key is not a prop. Trying to access it will result in undefined being returned.</em>&nbsp;In this case, you have to pass a second prop when you want to get the key from the props.</p><div><pre><code data-lang=\"javascript\"><span></span><span>const</span> <span>List</span> <span>=</span> <span>({</span> <span>users</span> <span>})</span> <span>=&gt;</span> <span>(</span>\n  <span>&lt;</span><span>ul</span><span>&gt;</span>\n    <span>{</span><span>users</span><span>.</span><span>map</span><span>(</span><span>user</span> <span>=&gt;</span> <span>(</span>\n<span>      <span>&lt;</span><span>Item</span> <span>key</span><span>=</span><span>{</span><span>user</span><span>.</span><span>id</span><span>}</span> <span>id</span><span>=</span><span>{</span><span>user</span><span>.</span><span>id</span><span>}</span><span>&gt;</span>\n</span>        <span>{</span><span>user</span><span>.</span><span>name</span><span>}</span>\n      <span>&lt;</span><span>/Item&gt;</span>\n    <span>))}</span>\n  <span>&lt;</span><span>/ul&gt;</span>\n<span>);</span>\n\n<span><span>const</span> <span>Item</span> <span>=</span> <span>({</span> <span>id</span><span>,</span> <span>children</span> <span>})</span> <span>=&gt;</span> <span>(</span>\n</span><span>  <span>&lt;</span><span>p</span><span>&gt;</span><span>{</span><span>id</span><span>}</span> <span>{</span><span>children</span><span>}</span><span>&lt;</span><span>/p&gt;</span>\n</span><span>);</span>\n</code></pre></div><p>In the end, that’s the workaround to pass props (e.g. key) which are internally used by React and not passed to the child components.</p><h3>Pass props to Styled Components</h3><p>Did you hear about&nbsp;<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/styled-components/styled-components\">styled components</a>? They can be used for styling your components in React. Rather than thinking about cascading style sheets as for HTML styles, you only style your components. So the style becomes more co-located to your components. In fact, in the case of styled components, the style becomes a React component:</p><div><pre><code data-lang=\"javascript\"><span></span><span>import</span> <span>React</span><span>,</span> <span>{</span> <span>Component</span> <span>}</span> <span>from</span> <span>'react'</span><span>;</span>\n<span>import</span> <span>styled</span> <span>from</span> <span>'styled-components'</span><span>;</span>\n\n<span>const</span> <span>Input</span> <span>=</span> <span>styled</span><span>.</span><span>input</span><span>`</span>\n<span>  padding: 0.5em;</span>\n<span>  margin: 0.5em;</span>\n<span>  color: palevioletred;</span>\n<span>  background: papayawhip;</span>\n<span>  border: none;</span>\n<span>  border-radius: 3px;</span>\n<span>`</span><span>;</span>\n\n<span>class</span> <span>App</span> <span>extends</span> <span>Component</span> <span>{</span>\n  <span>constructor</span><span>(</span><span>props</span><span>)</span> <span>{</span>\n    <span>super</span><span>(</span><span>props</span><span>);</span>\n\n    <span>this</span><span>.</span><span>state</span> <span>=</span> <span>{</span>\n      <span>value</span><span>:</span> <span>''</span><span>,</span>\n    <span>};</span>\n  <span>}</span>\n\n  <span>onChange</span> <span>=</span> <span>event</span> <span>=&gt;</span> <span>{</span>\n    <span>this</span><span>.</span><span>setState</span><span>({</span> <span>value</span><span>:</span> <span>event</span><span>.</span><span>target</span><span>.</span><span>value</span> <span>});</span>\n  <span>}</span>\n\n  <span>render</span><span>()</span> <span>{</span>\n    <span>return</span> <span>(</span>\n      <span>&lt;</span><span>div</span><span>&gt;</span>\n        <span>&lt;</span><span>Input</span>\n          <span>value</span><span>=</span><span>{</span><span>this</span><span>.</span><span>state</span><span>.</span><span>value</span><span>}</span>\n          <span>onChange</span><span>=</span><span>{</span><span>this</span><span>.</span><span>onChange</span><span>}</span>\n        <span>/&gt;</span>\n      <span>&lt;</span><span>/div&gt;</span>\n    <span>);</span>\n  <span>}</span>\n<span>}</span>\n</code></pre></div><p>The input element which is used to implement the Input styled component gets the&nbsp;<code>value</code>&nbsp;and&nbsp;<code>onChange</code>as props automatically. But what if you want to get props in a styled component to do something with them? Then you can add a string interpolation in the template literal and get the props in the inlined function’s signature:</p><div><pre><code data-lang=\"javascript\"><span></span><span>import</span> <span>React</span><span>,</span> <span>{</span> <span>Component</span> <span>}</span> <span>from</span> <span>'react'</span><span>;</span>\n<span>import</span> <span>styled</span> <span>from</span> <span>'styled-components'</span><span>;</span>\n\n<span>const</span> <span>Input</span> <span>=</span> <span>styled</span><span>.</span><span>input</span><span>`</span>\n<span>  padding: 0.5em;</span>\n<span>  margin: 0.5em;</span>\n<span>  color: palevioletred;</span>\n<span>  background: papayawhip;</span>\n<span>  border: none;</span>\n<span><span>  border-radius: </span><span>${</span><span>props</span> <span>=&gt;</span> <span>props</span><span>.</span><span>hasRadius</span> <span>?</span> <span>'3px'</span> <span>:</span> <span>'0px'</span><span>}</span><span>;</span>\n</span><span>`</span><span>;</span>\n\n<span>class</span> <span>App</span> <span>extends</span> <span>Component</span> <span>{</span>\n  <span>...</span>\n\n  <span>render</span><span>()</span> <span>{</span>\n    <span>return</span> <span>(</span>\n      <span>&lt;</span><span>div</span><span>&gt;</span>\n        <span>&lt;</span><span>Input</span>\n          <span>value</span><span>=</span><span>{</span><span>this</span><span>.</span><span>state</span><span>.</span><span>value</span><span>}</span>\n          <span>onChange</span><span>=</span><span>{</span><span>this</span><span>.</span><span>onChange</span><span>}</span>\n<span>          <span>hasRadius</span><span>=</span><span>{</span><span>true</span><span>}</span>\n</span>        <span>/&gt;</span>\n      <span>&lt;</span><span>/div&gt;</span>\n    <span>);</span>\n  <span>}</span>\n<span>}</span>\n</code></pre></div><p>Basically that’s how you pass props to styled components and how you get props in a styled component. If you haven’t used styled components yet, you should give them a shot for styling your React components without thinking about CSS files.</p><h3>Pass props with React Router</h3><p>React Router is another&nbsp;<a href=\"https://www.robinwieruch.de/essential-react-libraries-framework/\">essential React library</a>&nbsp;which is often used to complement React applications. Mapping URL routes to React components usually looks similar to this:</p><div><pre><code data-lang=\"javascript\"><span></span><span>const</span> <span>App</span> <span>=</span> <span>({</span> <span>user</span> <span>})</span> <span>=&gt;</span>\n  <span>&lt;</span><span>Router</span><span>&gt;</span>\n    <span>&lt;</span><span>Route</span> <span>exact</span> <span>path</span><span>=</span><span>'/'</span> <span>component</span><span>=</span><span>{</span><span>Home</span><span>}</span> <span>/&gt;</span>\n    <span>&lt;</span><span>Route</span> <span>path</span><span>=</span><span>'/articles'</span> <span>component</span><span>=</span><span>{</span><span>Article</span><span>}</span> <span>/&gt;</span>\n    <span>&lt;</span><span>Route</span> <span>path</span><span>=</span><span>'/about'</span> <span>component</span><span>=</span><span>{</span><span>About</span><span>}</span> <span>/&gt;</span>\n  <span>&lt;</span><span>/Router&gt;</span>\n</code></pre></div><p>But how would you pass props to the child component in React Router? You can use the render prop instead of the component prop for passing props to the child component.</p><div><pre><code data-lang=\"javascript\"><span></span><span>const</span> <span>App</span> <span>=</span> <span>({</span> <span>user</span> <span>})</span> <span>=&gt;</span>\n  <span>&lt;</span><span>Router</span><span>&gt;</span>\n    <span>&lt;</span><span>Route</span>\n      <span>exact</span> <span>path</span><span>=</span><span>'/'</span>\n<span>      <span>render</span><span>=</span><span>{()</span> <span>=&gt;</span> <span>&lt;</span><span>Home</span> <span>user</span><span>=</span><span>{</span><span>user</span><span>}</span> <span>/&gt;</span><span>}</span>\n</span>    <span>/&gt;</span>\n    <span>&lt;</span><span>Route</span>\n      <span>path</span><span>=</span><span>'/articles'</span>\n<span>      <span>render</span><span>=</span><span>{()</span> <span>=&gt;</span> <span>&lt;</span><span>Article</span> <span>user</span><span>=</span><span>{</span><span>user</span><span>}</span> <span>/&gt;</span><span>}</span>\n</span>    <span>/&gt;</span>\n    <span>&lt;</span><span>Route</span>\n      <span>path</span><span>=</span><span>'/about'</span>\n<span>      <span>render</span><span>=</span><span>{()</span> <span>=&gt;</span> <span>&lt;</span><span>About</span> <span>user</span><span>=</span><span>{</span><span>user</span><span>}</span> <span>/&gt;</span><span>}</span>\n</span>    <span>/&gt;</span>\n  <span>&lt;</span><span>/Router&gt;</span>\n</code></pre></div><p>Whereas the component prop would re-render the component every time when using an inline function, the render prop doesn’t perform the remounting. So you can be sure that the components are kept mounted and yet you can pass props to them. In addition, you receive the React Router props in the render prop function, in case you want to do something with them, too:</p><div><pre><code data-lang=\"javascript\"><span></span><span>const</span> <span>App</span> <span>=</span> <span>({</span> <span>user</span> <span>})</span> <span>=&gt;</span>\n  <span>&lt;</span><span>Router</span><span>&gt;</span>\n    <span>&lt;</span><span>Route</span>\n      <span>exact</span> <span>path</span><span>=</span><span>'/'</span>\n<span>      <span>render</span><span>=</span><span>{</span><span>props</span> <span>=&gt;</span> <span>&lt;</span><span>Home</span> <span>user</span><span>=</span><span>{</span><span>user</span><span>}</span> <span>/&gt;</span><span>}</span>\n</span>    <span>/&gt;</span>\n    <span>&lt;</span><span>Route</span>\n      <span>path</span><span>=</span><span>'/articles'</span>\n<span>      <span>render</span><span>=</span><span>{</span><span>props</span> <span>=&gt;</span> <span>&lt;</span><span>Article</span> <span>user</span><span>=</span><span>{</span><span>user</span><span>}</span> <span>/&gt;</span><span>}</span>\n</span>    <span>/&gt;</span>\n    <span>&lt;</span><span>Route</span>\n      <span>path</span><span>=</span><span>'/about'</span>\n<span>      <span>render</span><span>=</span><span>{</span><span>props</span> <span>=&gt;</span> <span>&lt;</span><span>About</span> <span>user</span><span>=</span><span>{</span><span>user</span><span>}</span> <span>/&gt;</span><span>}</span>\n</span>    <span>/&gt;</span>\n  <span>&lt;</span><span>/Router&gt;</span>\n</code></pre></div><p>The route props include match, location, and history which are used to get the current route state from React Router within your component. So regardless of the component prop or render prop, for both you would receive the match, location, and history props in the Home, Article and About components:</p><div><pre><code data-lang=\"javascript\"><span></span><span>const</span> <span>App</span> <span>=</span> <span>()</span> <span>=&gt;</span>\n  <span>&lt;</span><span>Router</span><span>&gt;</span>\n    <span>&lt;</span><span>Route</span> <span>exact</span> <span>path</span><span>=</span><span>'/'</span> <span>component</span><span>=</span><span>{</span><span>Home</span><span>}</span> <span>/&gt;</span>\n    <span>&lt;</span><span>Route</span> <span>path</span><span>=</span><span>'/articles'</span> <span>component</span><span>=</span><span>{</span><span>Article</span><span>}</span> <span>/&gt;</span>\n    <span>&lt;</span><span>Route</span> <span>path</span><span>=</span><span>'/about'</span> <span>component</span><span>=</span><span>{</span><span>About</span><span>}</span> <span>/&gt;</span>\n  <span>&lt;</span><span>/Router&gt;</span>\n\n<span><span>const</span> <span>Home</span> <span>=</span> <span>(</span><span>props</span><span>)</span> <span>=&gt;</span>\n</span><span>  <span>console</span><span>.</span><span>log</span><span>(</span><span>props</span><span>.</span><span>history</span><span>)</span> <span>||</span>\n</span><span>  <span>console</span><span>.</span><span>log</span><span>(</span><span>props</span><span>.</span><span>match</span><span>)</span> <span>||</span>\n</span><span>  <span>console</span><span>.</span><span>log</span><span>(</span><span>props</span><span>.</span><span>location</span><span>)</span> <span>||</span>\n</span>  <span>&lt;</span><span>h1</span><span>&gt;</span><span>My</span> <span>Home</span> <span>Page</span><span>&lt;</span><span>/h1&gt;</span>\n\n<span>...</span>\n</code></pre></div><p>Often when working with React Router you are confronted with one of the following errors:</p><ul><li>props.location undefined</li><li>props.history undefined</li><li>props.match undefined</li></ul><p>As mentioned, you only have access to these props when using the component in the Route component from React Router. Every other component doesn’t have the React Router props, unless you pass them further down the component tree to these components. Another way of making the React Router props available in your component is using the&nbsp;<code>withRouter()</code>&nbsp;higher-order component from React Router.</p><div><pre><code data-lang=\"javascript\"><span></span><span>const</span> <span>App</span> <span>=</span> <span>()</span> <span>=&gt;</span>\n  <span>&lt;</span><span>Router</span><span>&gt;</span>\n    <span>&lt;</span><span>Route</span> <span>exact</span> <span>path</span><span>=</span><span>'/'</span> <span>component</span><span>=</span><span>{</span><span>Home</span><span>}</span> <span>/&gt;</span>\n    <span>&lt;</span><span>Route</span> <span>path</span><span>=</span><span>'/articles'</span> <span>component</span><span>=</span><span>{</span><span>Article</span><span>}</span> <span>/&gt;</span>\n    <span>&lt;</span><span>Route</span> <span>path</span><span>=</span><span>'/about'</span> <span>component</span><span>=</span><span>{</span><span>About</span><span>}</span> <span>/&gt;</span>\n  <span>&lt;</span><span>/Router&gt;</span>\n\n<span>const</span> <span>Home</span> <span>=</span> <span>()</span> <span>=&gt;</span>\n<span>  <span>&lt;</span><span>TitleWithRouter</span> <span>/&gt;</span>\n</span>\n<span>const</span> <span>Title</span> <span>=</span> <span>(</span><span>props</span><span>)</span> <span>=&gt;</span>\n  <span>console</span><span>.</span><span>log</span><span>(</span><span>props</span><span>)</span> <span>||</span> <span>&lt;</span><span>h1</span><span>&gt;</span><span>My</span> <span>Home</span> <span>Page</span><span>&lt;</span><span>/h1&gt;;</span>\n\n<span><span>// without withRouter the props in the Title component would be an empty object</span>\n</span><span><span>const</span> <span>TitleWithRouter</span> <span>=</span> <span>withRouter</span><span>(</span><span>Title</span><span>);</span>\n</span></code></pre></div><p>Basically these are the most common pitfalls when using React Router. You should definitely try React Router once you have learned the fundamentals of React.</p><hr><p>I guess the article almost covered everything about (passing) props in React. In the end, props aren’t difficult. They are read-only and enable you to pass data down the component tree. Everything else which makes React interactive is mostly state. Or, as you have read, changing props which are triggering a re-render for the components as well. So I hope this article gave you a good overview about all the different usages of props in React.</p>","filePath":"pages/React/.md","_id":"CureHzlw5JWBQ7ZG"}
{"date":{"$$date":1542039558552},"title":"The Evolution of Async JavaScript: From Callbacks, to Promises, to Async/Await","sourceUrl":"https://tylermcginnis.com/async-javascript-from-callbacks-to-promises-to-async-await/","path":"JavaScript/JavaScript/JavaScript/","category":"JavaScript","tags":["JavaScript"," Async/Await"],"author":"Tyler McGinnis","excerpt":"","dateCreated":1541516432499,"coverImage":"","type":"Post","frontmatter":"---\npath: 'JavaScript/'\ndate: 'Tue Nov 06 2018 20:31:57 GMT+0530 (India Standard Time)'\ntitle: 'The Evolution of Async JavaScript: From Callbacks, to Promises, to Async/Await'\ntags: ['JavaScript','Async/Await']\ncategory: 'JavaScript'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://tylermcginnis.com/async-javascript-from-callbacks-to-promises-to-async-await/'\ntype: 'Post'\n---\n    ","htmlCode":"<div data-reactid=\"219\">This is part of our&nbsp;<a href=\"https://tylermcginnis.com/courses/advanced-javascript/\" data-reactid=\"221\">Advanced JavaScript</a>&nbsp;course.&nbsp;Check it out if you like this post.</div><div data-reactid=\"224\"><div data-reactid=\"225\"><div data-reactid=\"226\"></div><img alt=\"The Evolution of Async JavaScript: From Callbacks, to Promises, to Async/Await image\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAC4jAAAuIwF4pT92AAACOUlEQVQoz4VTzWsTURDfv8CbV/Hg2Yuo54LgRaQHL9pLDx48iFSEQlEPIkXBSAtVTImEpqLSGttDMNWoJzWHGmljVdqYpE2y+WyTbvYzu293f857SbQi6sAw897b+c1vPlZiugajVEJnextmuUwq07kIQy7B3t2FVa3A9zxw8X1fWEVtI3JvEhcP78PL0dPAygeYnQ6pA8k1TQFiVasE2oBZKUMvbEHfzJNfEcmYYQggrwe8/DGF0MQ4xgaOIDhwCAsnjiH+JAzX1iAxTYWWy0Lf2kSn0YBVr0HP53qAZfFm1arYK0W5gkg4hKtXRnBh8BRCB/dj5ugBFOaCkBxVFeVxlnarKYCUz2lh1cyGAOVMHaUFRmDPZicRnziPVruNOlU0Px/FraGzGB8+g9HBkwRID0axAJN6xVX0rtkUPjN0KsOG59iC2eraNwyNjOEcBV8KPkZ6RxP3DUXBo9lpxGILVDL1x6rVBAvOkrPigLx0z+4COb1SHTqvppYxfP0ujl8O4FosBeb5v7VD9FD9nhGDMGVZMNSyWagb63AZA7MtLCXTSLxYQquSBx8LI8Yra19x+06AJttN6vVU4qvguy48CvZdJlaE+x7d8dy2ZSHx5i1mHkawmHiH9KcvFOn+osTjuTVM+DQPCf+Q/t7V6nW8isfxfDqEqQdhZLK5n2skvvA9rN+/iVzgRo/hf5SLS6ZJwHPRKN4nk937PjuyuadTqL5e/DvDPtBeUC479EcVC4U/33gvmYsfm3Uc52YTHv4AAAAASUVORK5CYII=\" data-reactid=\"227\"><img alt=\"The Evolution of Async JavaScript: From Callbacks, to Promises, to Async/Await image\" srcset=\"/static/evolutionOfAsync-b8ee8c6bde0531e6dea3d798d8c3cdf2-0a0cc.png 200w,\n/static/evolutionOfAsync-b8ee8c6bde0531e6dea3d798d8c3cdf2-ae85a.png 400w,\n/static/evolutionOfAsync-b8ee8c6bde0531e6dea3d798d8c3cdf2-b64db.png 800w,\n/static/evolutionOfAsync-b8ee8c6bde0531e6dea3d798d8c3cdf2-73708.png 1200w,\n/static/evolutionOfAsync-b8ee8c6bde0531e6dea3d798d8c3cdf2-5f837.png 1280w\" src=\"https://tylermcginnis.com/static/evolutionOfAsync-b8ee8c6bde0531e6dea3d798d8c3cdf2-b64db.png\" sizes=\"(max-width: 800px) 100vw, 800px\"></div></div><div data-reactid=\"229\"><h3>Video</h3><div><div><iframe src=\"https://www.youtube.com/embed/gB-OmN1egV8\" frameborder=\"0\" allowfullscreen=\"\"></iframe></div></div><h3>Post</h3><p>One of my favorite sites is&nbsp;<a href=\"http://www.berkshirehathaway.com/\">BerkshireHathaway.com</a>&nbsp;- it’s simple, effective, and has been doing its job well since it launched in 1997. Even more remarkable, over the last 20 years, there’s a good chance this site has never had a bug. Why? Because it’s all static. It’s been pretty much the same since it launched over 20 years ago. Turns out sites are pretty simple to build if you have all of your data up front. Unfortunately, most sites now days don’t. To compensate for this, we’ve invented “patterns” for handling fetching external data for our apps. Like most things, these patterns each have tradeoffs that have changed over time. In this post we’ll break down the pros and cons of three of the most common patterns,&nbsp;<code>Callbacks</code>,&nbsp;<code>Promises</code>, and&nbsp;<code>Async/Await</code>&nbsp;and talk about their significance and progression from a historical context.</p><p>Let’s start with the OG of these data fetching patterns, Callbacks.</p><h3>Callbacks</h3><blockquote><p>I’m going to assume you know exactly 0 about callbacks. If I’m assuming wrong, just scroll down a bit.</p></blockquote><p>When I was first learning to program, it helped me to think about functions as machines. These machines can do anything you want them to. They can even accept input and return a value. Each machine has a button on it that you can press when you want the machine to run, ().</p><div><pre><code><span>function</span> <span>add</span> <span>(</span>x<span>,</span> y<span>)</span> <span>{</span>\n  <span>return</span> x <span>+</span> y\n<span>}</span>\n\n<span>add</span><span>(</span><span>2</span><span>,</span><span>3</span><span>)</span> <span>// 5 - Press the button, run the machine.</span></code></pre></div><p>Whether&nbsp;<span>I</span>&nbsp;press the button,&nbsp;<span>you</span>&nbsp;press the button, or&nbsp;<span>someone else</span>&nbsp;presses the button doesn’t matter. Whenever the button is pressed, like it or not, the machine is going to run.</p><div><pre><code><span>function</span> <span>add</span> <span>(</span>x<span>,</span> y<span>)</span> <span>{</span>\n  <span>return</span> x <span>+</span> y\n<span>}</span>\n\n<span>const</span> me <span>=</span> add\n<span>const</span> you <span>=</span> add\n<span>const</span> someoneElse <span>=</span> add\n\n<span>me</span><span>(</span><span>2</span><span>,</span><span>3</span><span>)</span> <span>// 5 - Press the button, run the machine.</span>\n<span>you</span><span>(</span><span>2</span><span>,</span><span>3</span><span>)</span> <span>// 5 - Press the button, run the machine.</span>\n<span>someoneElse</span><span>(</span><span>2</span><span>,</span><span>3</span><span>)</span> <span>// 5 - Press the button, run the machine.</span></code></pre></div><p>In the code above we assign the&nbsp;<code>add</code>&nbsp;function to three different variables,&nbsp;<code>me</code>,&nbsp;<code>you</code>, and&nbsp;<code>someoneElse</code>. It’s important to note that the original&nbsp;<code>add</code>&nbsp;and each of the variables we created are pointing to the same spot in memory. They’re literally the exact same thing under different names. So when we invoke&nbsp;<code>me</code>,&nbsp;<code>you</code>, or&nbsp;<code>someoneElse</code>, it’s as if we’re invoking&nbsp;<code>add</code>.</p><p>Now what if we take our&nbsp;<code>add</code>&nbsp;machine and pass it to another machine? Remember, it doesn’t matter who presses the () button, if it’s pressed, it’s going to run.</p><div><pre><code><span>function</span> <span>add</span> <span>(</span>x<span>,</span> y<span>)</span> <span>{</span>\n  <span>return</span> x <span>+</span> y\n<span>}</span>\n\n<span>function</span> <span>addFive</span> <span>(</span>x<span>,</span> addReference<span>)</span> <span>{</span>\n  <span>return</span> <span>addReference</span><span>(</span>x<span>,</span> <span>5</span><span>)</span> <span>// 15 - Press the button, run the machine.</span>\n<span>}</span>\n\n<span>addFive</span><span>(</span><span>10</span><span>,</span> add<span>)</span> <span>// 15</span></code></pre></div><p>Your brain might have got a little weird on this one, nothing new is going on here though. Instead of “pressing the button” on&nbsp;<code>add</code>, we pass&nbsp;<code>add</code>&nbsp;as an argument to&nbsp;<code>addFive</code>, rename it&nbsp;<code>addReference</code>, and then we “press the button” or invoke it.</p><p>This highlights some important concepts of the JavaScript language. First, just as you can pass a string or a number as an argument to a function, so too can you pass a reference to a function as an argument. When you do this the function you’re passing as an argument is called a&nbsp;<span>callback</span>&nbsp;function and the function you’re passing the callback function to is called a&nbsp;<span>higher order function</span>.</p><p>Because vocabulary is important, here’s the same code with the variables re-named to match the concepts they’re demonstrating.</p><div><pre><code><span>function</span> <span>add</span> <span>(</span>x<span>,</span>y<span>)</span> <span>{</span>\n  <span>return</span> x <span>+</span> y\n<span>}</span>\n\n<span>function</span> <span>higherOrderFunction</span> <span>(</span>x<span>,</span> callback<span>)</span> <span>{</span>\n  <span>return</span> <span>callback</span><span>(</span>x<span>,</span> <span>5</span><span>)</span>\n<span>}</span>\n\n<span>higherOrderFunction</span><span>(</span><span>10</span><span>,</span> add<span>)</span></code></pre></div><p>This pattern should look familiar, it’s everywhere. If you’ve ever used any of the JavaScript&nbsp;<a href=\"https://tylermcginnis.com/javascript-array-methods-you-should-know/\">Array methods</a>, you’ve used a callback. If you’ve ever used lodash, you’ve used a callback. If you’ve ever used jQuery, you’ve used a callback.</p><div><pre><code><span>[</span><span>1</span><span>,</span><span>2</span><span>,</span><span>3</span><span>]</span><span>.</span><span>map</span><span>(</span><span>(</span>i<span>)</span> <span>=&gt;</span> i <span>+</span> <span>5</span><span>)</span>\n\n_<span>.</span><span>filter</span><span>(</span><span>[</span><span>1</span><span>,</span><span>2</span><span>,</span><span>3</span><span>,</span><span>4</span><span>]</span><span>,</span> <span>(</span>n<span>)</span> <span>=&gt;</span> n <span>%</span> <span>2</span> <span>===</span> <span>0</span> <span>)</span><span>;</span>\n\n<span>$</span><span>(</span><span>'#btn'</span><span>)</span><span>.</span><span>on</span><span>(</span><span>'click'</span><span>,</span> <span>(</span><span>)</span> <span>=&gt;</span>\n  console<span>.</span><span>log</span><span>(</span><span>'Callbacks are everywhere'</span><span>)</span>\n<span>)</span></code></pre></div><p>In general, there are two popular use cases for callbacks. The first, and what we see in the&nbsp;<code>.map</code>&nbsp;and&nbsp;<code>_.filter</code>&nbsp;examples, is a nice abstraction over turning one value into another. We say “Hey, here’s an array and a function. Go ahead and get me a new value based on the function I gave you”. The second, and what we see in the jQuery example, is delaying execution of a function until a particular time. “Hey, here’s this function. Go ahead and invoke it whenever the element with an id of&nbsp;<code>btn</code>&nbsp;is clicked.” It’s this second use case that we’re going to focus on, “delaying execution of a function until a particular time”.</p><p>Right now we’ve only looked at examples that are synchronous. As we talked about at the beginning of this post, most of the apps we build don’t have all the data they need up front. Instead, they need to fetch external data as the user interacts with the app. We’ve just seen how callbacks can be a great use case for this because, again, they allow you to “delay execution of a function until a particular time”. It doesn’t take much imagination to see how we can adapt that sentence to work with data fetching. Instead of delaying execution of a function until&nbsp;<em>a particular time</em>, we can delay execution of a function&nbsp;<em>until we have the data we need</em>. Here’s probably the most popular example of this, jQuery’s&nbsp;<code>getJSON</code>&nbsp;method.</p><div><pre><code><span>// updateUI and showError are irrelevant.</span>\n<span>// Pretend they do what they sound like.</span>\n\n<span>const</span> id <span>=</span> <span>'tylermcginnis'</span>\n\n$<span>.</span><span>getJSON</span><span>(</span><span>{</span>\n  url<span>:</span> <span><span>`https://api.github.com/users/</span><span><span>${</span>id<span>}</span></span><span>`</span></span><span>,</span>\n  success<span>:</span> updateUI<span>,</span>\n  error<span>:</span> showError<span>,</span>\n<span>}</span><span>)</span></code></pre></div><p>We can’t update the UI of our app until we have the user’s data. So what do we do? We say, “Hey, here’s an object. If the request succeeds, go ahead and call&nbsp;<code>success</code>&nbsp;passing it the user’s data. If it doesn’t, go ahead and call&nbsp;<code>error</code>&nbsp;passing it the error object. You don’t need to worry about what each method does, just be sure to call them when you’re supposed to”. This is a perfect demonstration of using a callback for async requests.</p><hr><p>At this point we’ve learned about what callbacks are and how they can be beneficial both in synchronous and asynchronous code. What we haven’t talked yet is the dark side of callbacks. Take a look at this code below. Can you tell what’s happening?</p><div><pre><code><span>// updateUI, showError, and getLocationURL are irrelevant.</span>\n<span>// Pretend they do what they sound like.</span>\n\n<span>const</span> id <span>=</span> <span>'tylermcginnis'</span>\n\n<span>$</span><span>(</span><span>\"#btn\"</span><span>)</span><span>.</span><span>on</span><span>(</span><span>\"click\"</span><span>,</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n  $<span>.</span><span>getJSON</span><span>(</span><span>{</span>\n    url<span>:</span> <span><span>`https://api.github.com/users/</span><span><span>${</span>id<span>}</span></span><span>`</span></span><span>,</span>\n    success<span>:</span> <span>(</span>user<span>)</span> <span>=&gt;</span> <span>{</span>\n      $<span>.</span><span>getJSON</span><span>(</span><span>{</span>\n        url<span>:</span> <span>getLocationURL</span><span>(</span>user<span>.</span>location<span>.</span><span>split</span><span>(</span><span>','</span><span>)</span><span>)</span><span>,</span>\n        <span>success</span> <span>(</span>weather<span>)</span> <span>{</span>\n          <span>updateUI</span><span>(</span><span>{</span>\n            user<span>,</span>\n            weather<span>:</span> weather<span>.</span>query<span>.</span>results\n          <span>}</span><span>)</span>\n        <span>}</span><span>,</span>\n        error<span>:</span> showError<span>,</span>\n      <span>}</span><span>)</span>\n    <span>}</span><span>,</span>\n    error<span>:</span> showError\n  <span>}</span><span>)</span>\n<span>}</span><span>)</span></code></pre></div><p>If it helps, you can play around with the&nbsp;<a href=\"https://codesandbox.io/s/v06mmo3j7l\">live version here</a>.</p><p>Notice we’ve added a few more layers of callbacks. First we’re saying don’t run the initial AJAX request until the element with an id of&nbsp;<code>btn</code>&nbsp;is clicked. Once the button is clicked, we make the first request. If that request succeeds, we make a second request. If that request succeeds, we invoke the&nbsp;<code>updateUI</code>&nbsp;method passing it the data we got from both requests. Regardless of if you understood the code at first glance or not, objectively it’s much harder to read than the code before. This brings us to the topic of “Callback Hell”.</p><p>As humans, we naturally think sequentially. When you have nested callbacks inside of nested callbacks, it forces you out of your natural way of thinking. Bugs happen when there’s a disconnect between how your software is read and how you naturally think.</p><p>Like most solutions to software problems, a commonly prescribed approach for making “Callback Hell” easier to consume is to modularize your code.</p><div><pre><code><span>function</span> <span>getUser</span><span>(</span>id<span>,</span> onSuccess<span>,</span> onFailure<span>)</span> <span>{</span>\n  $<span>.</span><span>getJSON</span><span>(</span><span>{</span>\n    url<span>:</span> <span><span>`https://api.github.com/users/</span><span><span>${</span>id<span>}</span></span><span>`</span></span><span>,</span>\n    success<span>:</span> onSuccess<span>,</span>\n    error<span>:</span> onFailure\n  <span>}</span><span>)</span>\n<span>}</span>\n\n<span>function</span> <span>getWeather</span><span>(</span>user<span>,</span> onSuccess<span>,</span> onFailure<span>)</span> <span>{</span>\n  $<span>.</span><span>getJSON</span><span>(</span><span>{</span>\n    url<span>:</span> <span>getLocationURL</span><span>(</span>user<span>.</span>location<span>.</span><span>split</span><span>(</span><span>','</span><span>)</span><span>)</span><span>,</span>\n    success<span>:</span> onSuccess<span>,</span>\n    error<span>:</span> onFailure<span>,</span>\n  <span>}</span><span>)</span>\n<span>}</span>\n\n<span>$</span><span>(</span><span>\"#btn\"</span><span>)</span><span>.</span><span>on</span><span>(</span><span>\"click\"</span><span>,</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n  <span>getUser</span><span>(</span><span>\"tylermcginnis\"</span><span>,</span> <span>(</span>user<span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>getWeather</span><span>(</span>user<span>,</span> <span>(</span>weather<span>)</span> <span>=&gt;</span> <span>{</span>\n      <span>updateUI</span><span>(</span><span>{</span>\n        user<span>,</span>\n        weather<span>:</span> weather<span>.</span>query<span>.</span>results\n      <span>}</span><span>)</span>\n    <span>}</span><span>,</span> showError<span>)</span>\n  <span>}</span><span>,</span> showError<span>)</span>\n<span>}</span><span>)</span></code></pre></div><p>If it helps, you can play around with the&nbsp;<a href=\"https://codesandbox.io/s/m587rq0lox\">live version here</a>.</p><p>OK, the function names help us understand what’s going on, but is it objectively “better”? Not by much. We’ve put a band-aid over the readability issue of Callback Hell. The problem still exists that we naturally think sequentially and, even with the extra functions, nested callbacks break us out of that sequential way of thinking.</p><hr><p>The next issue of callbacks has to do with&nbsp;<a href=\"https://en.wikipedia.org/wiki/Inversion_of_control\">inversion of control</a>. When you write a callback, you’re assuming that the program you’re giving the callback to is responsible and will call it when (and only when) it’s supposed to. You’re essentially inverting the control of your program over to another program. When you’re dealing with libraries like jQuery, lodash, or even vanilla JavaScript, it’s safe to assume that the callback function will be invoked at the correct time with the correct arguments. However, for many third party libraries, callback functions are the interface for how you interact with them. It’s entirely plausible that a third party library could, whether on purpose or accidentally, break how they interact with your callback.</p><div><pre><code><span>function</span> <span>criticalFunction</span> <span>(</span><span>)</span> <span>{</span>\n  <span>// It's critical that this function</span>\n  <span>// gets called and with the correct</span>\n  <span>// arguments.</span>\n<span>}</span>\n\n<span>thirdPartyLib</span><span>(</span>criticalFunction<span>)</span></code></pre></div><p>Since you’re not the one calling&nbsp;<code>criticalFunction</code>, you have 0 control over when and with what argument it’s invoked.&nbsp;<em>Most</em>&nbsp;of the time this isn’t an issue, but when it is, it’s a big one.</p><hr><h3>Promises</h3><p>Have you ever been to a busy restaurant without a reservation? When this happens, the restaurant needs a way to get back in contact with you when a table opens up. Historically, they’d just take your name and yell it when your table was ready. Then, as naturally occurs, they decided to start getting fancy. One solution was, instead of taking your name, they’d take your number and text you once a table opened up. This allowed you to be out of yelling range but more importantly, it allowed them to target your phone with ads whenever they wanted. Sound familiar? It should! OK, maybe it shouldn’t. It’s a metaphor for callbacks!&nbsp;<span>Giving your number to a restaurant is just like giving a callback function to a third party service. You&nbsp;<em>expect</em>&nbsp;the restaurant to text you when a table opens up, just like you&nbsp;<em>expect</em>&nbsp;the third party service to invoke your function when and how they said they would.</span>&nbsp;Once your number or callback function is in their hands though, you’ve lost all control.</p><p>Thankfully, there is another solution that exists. One that, by design, allows you to keep all the control. You’ve probably even experienced it before - it’s that little buzzer thing they give you. You know, this one.</p><br><p><img src=\"https://tylermcginnis.com/images/posts/advanced-javascript/buzzy.png\" alt=\"Restaurant Buzzer\"></p><br><p>If you’ve never used one before, the idea is simple. Instead of taking your name or number, they give you this device. When the device starts buzzing and glowing, your table is ready. You can still do whatever you’d like as you’re waiting for your table to open up, but now you don’t have to give up anything. In fact, it’s the exact opposite.&nbsp;<span>They</span>&nbsp;have to give&nbsp;<span>you</span>&nbsp;something. There is no inversion of control.</p><p>The buzzer will always be in one of three different states -&nbsp;<code>pending</code>,&nbsp;<code>fulfilled</code>, or&nbsp;<code>rejected</code>.</p><p><code>pending</code>&nbsp;is the default, initial state. When they give you the buzzer, it’s in this state.</p><p><code>fulfilled</code>&nbsp;is the state the buzzer is in when it’s flashing and your table is ready.</p><p><code>rejected</code>&nbsp;is the state the buzzer is in when something goes wrong. Maybe the restaurant is about to close or they forgot someone rented out the restaurant for the night.</p><p>Again, the important thing to remember is that you, the receiver of the buzzer, have all the control. If the buzzer gets put into&nbsp;<code>fulfilled</code>, you can go to your table. If it gets put into&nbsp;<code>fulfilled</code>&nbsp;and you want to ignore it, cool, you can do that too. If it gets put into&nbsp;<code>rejected</code>, that sucks but you can go somewhere else to eat. If nothing ever happens and it stays in&nbsp;<code>pending</code>, you never get to eat but you’re not actually out anything.</p><p>Now that you’re a master of the restaurant buzzer thingy, let’s apply that knowledge to something that matters.</p><p><span>If giving the restaurant your number is like giving them a callback function, receiving the little buzzy thing is like receiving what’s called a “Promise”.</span></p><p>As always, let’s start with&nbsp;<span>why</span>. Why do Promises exist? They exist to make the complexity of making asynchronous requests more manageable. Exactly like the buzzer, a&nbsp;<code>Promise</code>&nbsp;can be in one of three states,&nbsp;<code>pending</code>,&nbsp;<code>fulfilled</code>&nbsp;or&nbsp;<code>rejected</code>. Unlike the buzzer, instead of these states representing the status of a table at a restaurant, they represent the status of an asynchronous request.</p><p>If the async request is still ongoing, the&nbsp;<code>Promise</code>&nbsp;will have a status of&nbsp;<code>pending</code>. If the async request was successfully completed, the&nbsp;<code>Promise</code>&nbsp;will change to a status of&nbsp;<code>fulfilled</code>. If the async request failed, the&nbsp;<code>Promise</code>&nbsp;will change to a status of&nbsp;<code>rejected</code>. The buzzer metaphor is pretty spot on, right?</p><p>Now that you understand why Promises exist and the different states they can be in, there are three more questions we need to answer.</p><ol><li>How do you create a Promise?</li><li>How do you change the status of a promise?</li><li>How do you listen for when the status of a promise changes?</li></ol><h5>1) How do you create a Promise?</h5><p>This one is pretty straight forward. You create a&nbsp;<code>new</code>&nbsp;instance of&nbsp;<code>Promise</code>.</p><div><pre><code><span>const</span> promise <span>=</span> <span>new</span> <span>Promise</span><span>(</span><span>)</span></code></pre></div><h5>2) How do you change the status of a promise?</h5><p>The&nbsp;<code>Promise</code>&nbsp;constructor function takes in a single argument, a (callback) function. This function is going to be passed two arguments,&nbsp;<code>resolve</code>&nbsp;and&nbsp;<code>reject</code>.</p><p><code>resolve</code>&nbsp;- a function that allows you to change the status of the promise to&nbsp;<code>fulfilled</code></p><p><code>reject</code>&nbsp;- a function that allows you to change the status of the promise to&nbsp;<code>rejected</code>.</p><p>In the code below, we use&nbsp;<code>setTimeout</code>&nbsp;to wait 2 seconds and then invoke&nbsp;<code>resolve</code>. This will change the status of the promise to&nbsp;<code>fulfilled</code>.</p><div><pre><code><span>const</span> promise <span>=</span> <span>new</span> <span>Promise</span><span>(</span><span>(</span>resolve<span>,</span> reject<span>)</span> <span>=&gt;</span> <span>{</span>\n  <span>setTimeout</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>resolve</span><span>(</span><span>)</span> <span>// Change status to 'fulfilled'</span>\n  <span>}</span><span>,</span> <span>2000</span><span>)</span>\n<span>}</span><span>)</span></code></pre></div><p>We can see this change in action by logging the promise right after we create it and then again roughly 2 seconds later after&nbsp;<code>resolve</code>&nbsp;has been called.</p><p><img src=\"https://tylermcginnis.com/images/posts/advanced-javascript/resolve.gif\" alt=\"Use resolve to change the status of a promise to fulfilled\"></p><p>Notice the promise goes from&nbsp;<code>&lt;pending&gt;</code>&nbsp;to&nbsp;<code>&lt;resolved&gt;</code>.</p><h4>3) How do you listen for when the status of a promise changes?</h4><p>In my opinion this is the most important question. It’s cool we know how to create a promise and change its status, but that’s worthless if we don’t know how to do anything after the status changes.</p><p>One thing we haven’t talked about yet is what a promise actually is. When you create a&nbsp;<code>new Promise</code>, you’re really just creating a plain old JavaScript object. This object can invoke two methods,&nbsp;<code>then</code>, and&nbsp;<code>catch</code>. Here’s the key. When the status of the promise changes to&nbsp;<code>fulfilled</code>, the function that was passed to&nbsp;<code>.then</code>&nbsp;will get invoked. When the status of a promise changes to&nbsp;<code>rejected</code>, the function that was passed to&nbsp;<code>.catch</code>&nbsp;will be invoked. What this means is that once you create a promise, you’ll pass the function you want to run if the async request is successful to&nbsp;<code>.then</code>. You’ll pass the function you want to run if the async request fails to&nbsp;<code>.catch</code>.</p><p>Let’s take a look at an example. We’ll use&nbsp;<code>setTimeout</code>&nbsp;again to change the status of the promise to&nbsp;<code>fulfilled</code>&nbsp;after two seconds (2000 milliseconds).</p><div><pre><code><span>function</span> <span>onSuccess</span> <span>(</span><span>)</span> <span>{</span>\n  console<span>.</span><span>log</span><span>(</span><span>'Success!'</span><span>)</span>\n<span>}</span>\n\n<span>function</span> <span>onError</span> <span>(</span><span>)</span> <span>{</span>\n  console<span>.</span><span>log</span><span>(</span><span>'💩'</span><span>)</span>\n<span>}</span>\n\n<span>const</span> promise <span>=</span> <span>new</span> <span>Promise</span><span>(</span><span>(</span>resolve<span>,</span> reject<span>)</span> <span>=&gt;</span> <span>{</span>\n  <span>setTimeout</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>resolve</span><span>(</span><span>)</span>\n  <span>}</span><span>,</span> <span>2000</span><span>)</span>\n<span>}</span><span>)</span>\n\npromise<span>.</span><span>then</span><span>(</span>onSuccess<span>)</span>\npromise<span>.</span><span>catch</span><span>(</span>onError<span>)</span></code></pre></div><p>If you run the code above you’ll notice that roughly 2 seconds later, you’ll see “Success!” in the console. Again the reason this happens is because of two things. First, when we created the promise, we invoked&nbsp;<code>resolve</code>&nbsp;after ~2000 milliseconds - this changed the status of the promise to&nbsp;<code>fulfilled</code>. Second, we passed the&nbsp;<code>onSuccess</code>&nbsp;function to the promises’&nbsp;<code>.then</code>&nbsp;method. By doing that we told the promise to invoke&nbsp;<code>onSuccess</code>&nbsp;when the status of the promise changed to&nbsp;<code>fulfilled</code>&nbsp;which it did after ~2000 milliseconds.</p><p>Now let’s pretend something bad happened and we wanted to change the status of the promise to&nbsp;<code>rejected</code>. Instead of calling&nbsp;<code>resolve</code>, we would call&nbsp;<code>reject</code>.</p><div><pre><code><span>function</span> <span>onSuccess</span> <span>(</span><span>)</span> <span>{</span>\n  console<span>.</span><span>log</span><span>(</span><span>'Success!'</span><span>)</span>\n<span>}</span>\n\n<span>function</span> <span>onError</span> <span>(</span><span>)</span> <span>{</span>\n  console<span>.</span><span>log</span><span>(</span><span>'💩'</span><span>)</span>\n<span>}</span>\n\n<span>const</span> promise <span>=</span> <span>new</span> <span>Promise</span><span>(</span><span>(</span>resolve<span>,</span> reject<span>)</span> <span>=&gt;</span> <span>{</span>\n  <span>setTimeout</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n<span>    <span>reject</span><span>(</span><span>)</span>\n</span>  <span>}</span><span>,</span> <span>2000</span><span>)</span>\n<span>}</span><span>)</span>\n\npromise<span>.</span><span>then</span><span>(</span>onSuccess<span>)</span>\npromise<span>.</span><span>catch</span><span>(</span>onError<span>)</span></code></pre></div><p>Now this time instead of the&nbsp;<code>onSuccess</code>&nbsp;function being invoked, the&nbsp;<code>onError</code>&nbsp;function will be invoked since we called&nbsp;<code>reject</code>.</p><hr><p>Now that you know your way around the Promise API, let’s start looking at some real code.</p><p>Remember the last async callback example we saw earlier?</p><div><pre><code><span>function</span> <span>getUser</span><span>(</span>id<span>,</span> onSuccess<span>,</span> onFailure<span>)</span> <span>{</span>\n  $<span>.</span><span>getJSON</span><span>(</span><span>{</span>\n    url<span>:</span> <span><span>`https://api.github.com/users/</span><span><span>${</span>id<span>}</span></span><span>`</span></span><span>,</span>\n    success<span>:</span> onSuccess<span>,</span>\n    error<span>:</span> onFailure\n  <span>}</span><span>)</span>\n<span>}</span>\n\n<span>function</span> <span>getWeather</span><span>(</span>user<span>,</span> onSuccess<span>,</span> onFailure<span>)</span> <span>{</span>\n  $<span>.</span><span>getJSON</span><span>(</span><span>{</span>\n    url<span>:</span> <span>getLocationURL</span><span>(</span>user<span>.</span>location<span>.</span><span>split</span><span>(</span><span>','</span><span>)</span><span>)</span><span>,</span>\n    success<span>:</span> onSuccess<span>,</span>\n    error<span>:</span> onFailure<span>,</span>\n  <span>}</span><span>)</span>\n<span>}</span>\n\n<span>$</span><span>(</span><span>\"#btn\"</span><span>)</span><span>.</span><span>on</span><span>(</span><span>\"click\"</span><span>,</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n  <span>getUser</span><span>(</span><span>\"tylermcginnis\"</span><span>,</span> <span>(</span>user<span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>getWeather</span><span>(</span>user<span>,</span> <span>(</span>weather<span>)</span> <span>=&gt;</span> <span>{</span>\n      <span>updateUI</span><span>(</span><span>{</span>\n        user<span>,</span>\n        weather<span>:</span> weather<span>.</span>query<span>.</span>results\n      <span>}</span><span>)</span>\n    <span>}</span><span>,</span> showError<span>)</span>\n  <span>}</span><span>,</span> showError<span>)</span>\n<span>}</span><span>)</span></code></pre></div><p>Is there anyway we could use the Promise API here instead of using callbacks? What if we wrap our AJAX requests inside of a promise? Then we can simply&nbsp;<code>resolve</code>&nbsp;or&nbsp;<code>reject</code>&nbsp;depending on how the request goes. Let’s start with&nbsp;<code>getUser</code>.</p><div><pre><code><span>function</span> <span>getUser</span><span>(</span>id<span>)</span> <span>{</span>\n  <span>return</span> <span>new</span> <span>Promise</span><span>(</span><span>(</span>resolve<span>,</span> reject<span>)</span> <span>=&gt;</span> <span>{</span>\n    $<span>.</span><span>getJSON</span><span>(</span><span>{</span>\n      url<span>:</span> <span><span>`https://api.github.com/users/</span><span><span>${</span>id<span>}</span></span><span>`</span></span><span>,</span>\n      success<span>:</span> resolve<span>,</span>\n      error<span>:</span> reject\n    <span>}</span><span>)</span>\n  <span>}</span><span>)</span>\n<span>}</span></code></pre></div><p>Nice. Notice that the parameters of&nbsp;<code>getUser</code>&nbsp;have changed. Instead of receiving&nbsp;<code>id</code>,&nbsp;<code>onSuccess</code>, and&nbsp;<code>onFailure</code>, it just receives&nbsp;<code>id</code>. There’s no more need for those other two callback functions because we’re no longer inverting control. Instead, we use the Promise’s&nbsp;<code>resolve</code>&nbsp;and&nbsp;<code>reject</code>&nbsp;functions.&nbsp;<code>resolve</code>&nbsp;will be invoked if the request was successful,&nbsp;<code>reject</code>&nbsp;will be invoked if there was an error.</p><p>Next let’s refactor&nbsp;<code>getWeather</code>. We’ll follow the same strategy here. Instead of taking in&nbsp;<code>onSuccess</code>&nbsp;and&nbsp;<code>onFailure</code>&nbsp;callback functions, we’ll use&nbsp;<code>resolve</code>&nbsp;and&nbsp;<code>reject</code>.</p><div><pre><code><span>function</span> <span>getWeather</span><span>(</span>user<span>)</span> <span>{</span>\n  <span>return</span> <span>new</span> <span>Promise</span><span>(</span><span>(</span>resolve<span>,</span> reject<span>)</span> <span>=&gt;</span> <span>{</span>\n    $<span>.</span><span>getJSON</span><span>(</span><span>{</span>\n      url<span>:</span> <span>getLocationURL</span><span>(</span>user<span>.</span>location<span>.</span><span>split</span><span>(</span><span>','</span><span>)</span><span>)</span><span>,</span>\n      success<span>:</span> resolve<span>,</span>\n      error<span>:</span> reject<span>,</span>\n    <span>}</span><span>)</span>\n  <span>}</span><span>)</span>\n<span>}</span></code></pre></div><p>Looking good. Now the last thing we need to update is our click handler. Remember, here’s the flow we want to take.</p><ol><li>Get the user’s information from the Github API.</li><li>Use the user’s location to get their weather from the Yahoo Weather API.</li><li>Update the UI with the users info and their weather.</li></ol><p>Let’s start with #1 - getting the user’s information from the Github API.</p><div><pre><code><span>$</span><span>(</span><span>\"#btn\"</span><span>)</span><span>.</span><span>on</span><span>(</span><span>\"click\"</span><span>,</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n  <span>const</span> userPromise <span>=</span> <span>getUser</span><span>(</span><span>'tylermcginnis'</span><span>)</span>\n\n  userPromise<span>.</span><span>then</span><span>(</span><span>(</span>user<span>)</span> <span>=&gt;</span> <span>{</span>\n\n  <span>}</span><span>)</span>\n\n  userPromise<span>.</span><span>catch</span><span>(</span>showError<span>)</span>\n<span>}</span><span>)</span></code></pre></div><p>Notice that now instead of&nbsp;<code>getUser</code>&nbsp;taking in two callback functions, it returns us a promise that we can call&nbsp;<code>.then</code>&nbsp;and&nbsp;<code>.catch</code>&nbsp;on. If&nbsp;<code>.then</code>&nbsp;is called, it’ll be called with the user’s information. If&nbsp;<code>.catch</code>&nbsp;is called, it’ll be called with the error.</p><p>Next let’s do #2 - Use the user’s location to get their weather.</p><div><pre><code><span>$</span><span>(</span><span>\"#btn\"</span><span>)</span><span>.</span><span>on</span><span>(</span><span>\"click\"</span><span>,</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n  <span>const</span> userPromise <span>=</span> <span>getUser</span><span>(</span><span>'tylermcginnis'</span><span>)</span>\n\n  userPromise<span>.</span><span>then</span><span>(</span><span>(</span>user<span>)</span> <span>=&gt;</span> <span>{</span>\n<span>    <span>const</span> weatherPromise <span>=</span> <span>getWeather</span><span>(</span>user<span>)</span>\n</span><span>    weatherPromise<span>.</span><span>then</span><span>(</span><span>(</span>weather<span>)</span> <span>=&gt;</span> <span>{</span>\n</span><span>\n</span><span>    <span>}</span><span>)</span>\n</span><span>\n</span><span>    weatherPromise<span>.</span><span>catch</span><span>(</span>showError<span>)</span>\n</span>  <span>}</span><span>)</span>\n\n  userPromise<span>.</span><span>catch</span><span>(</span>showError<span>)</span>\n<span>}</span><span>)</span></code></pre></div><p>Notice we follow the exact same pattern we did in #1 but now we invoke&nbsp;<code>getWeather</code>&nbsp;passing it the&nbsp;<code>user</code>object we got from&nbsp;<code>userPromise</code>.</p><p>Finally, #3 - Update the UI with the users info and their weather.</p><div><pre><code><span>$</span><span>(</span><span>\"#btn\"</span><span>)</span><span>.</span><span>on</span><span>(</span><span>\"click\"</span><span>,</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n  <span>const</span> userPromise <span>=</span> <span>getUser</span><span>(</span><span>'tylermcginnis'</span><span>)</span>\n\n  userPromise<span>.</span><span>then</span><span>(</span><span>(</span>user<span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>const</span> weatherPromise <span>=</span> <span>getWeather</span><span>(</span>user<span>)</span>\n    weatherPromise<span>.</span><span>then</span><span>(</span><span>(</span>weather<span>)</span> <span>=&gt;</span> <span>{</span>\n<span>      <span>updateUI</span><span>(</span><span>{</span>\n</span><span>        user<span>,</span>\n</span><span>        weather<span>:</span> weather<span>.</span>query<span>.</span>results\n</span><span>      <span>}</span><span>)</span>\n</span>    <span>}</span><span>)</span>\n\n    weatherPromise<span>.</span><span>catch</span><span>(</span>showError<span>)</span>\n  <span>}</span><span>)</span>\n\n  userPromise<span>.</span><span>catch</span><span>(</span>showError<span>)</span>\n<span>}</span><span>)</span></code></pre></div><p><a href=\"https://codesandbox.io/s/l9xrjq88p7\">Here’s the full code</a>&nbsp;you can play around with.</p><p>Our new code is&nbsp;<em>better</em>, but there are still some improvement we can make. Before we can make those improvements though, there are two more features of promises you need to be aware of, chaining and passing arguments from&nbsp;<code>resolve</code>&nbsp;to&nbsp;<code>then</code>.</p><h4>Chaining</h4><p>Both&nbsp;<code>.then</code>&nbsp;and&nbsp;<code>.catch</code>&nbsp;will return a new promise. That seems like a small detail but it’s important because it means that promises can be chained.</p><p>In the example below, we call&nbsp;<code>getPromise</code>&nbsp;which returns us a promise that will resolve in at least 2000 milliseconds. From there, because&nbsp;<code>.then</code>&nbsp;will return a promise, we can continue to chain our&nbsp;<code>.then</code>s together until we throw a&nbsp;<code>new Error</code>&nbsp;which is caught by the&nbsp;<code>.catch</code>&nbsp;method.</p><div><pre><code><span>function</span> <span>getPromise</span> <span>(</span><span>)</span> <span>{</span>\n  <span>return</span> <span>new</span> <span>Promise</span><span>(</span><span>(</span>resolve<span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>setTimeout</span><span>(</span>resolve<span>,</span> <span>2000</span><span>)</span>\n  <span>}</span><span>)</span>\n<span>}</span>\n\n<span>function</span> <span>logA</span> <span>(</span><span>)</span> <span>{</span>\n  console<span>.</span><span>log</span><span>(</span><span>'A'</span><span>)</span>\n<span>}</span>\n\n<span>function</span> <span>logB</span> <span>(</span><span>)</span> <span>{</span>\n  console<span>.</span><span>log</span><span>(</span><span>'B'</span><span>)</span>\n<span>}</span>\n\n<span>function</span> <span>logCAndThrow</span> <span>(</span><span>)</span> <span>{</span>\n  console<span>.</span><span>log</span><span>(</span><span>'C'</span><span>)</span>\n\n  <span>throw</span> <span>new</span> <span>Error</span><span>(</span><span>)</span>\n<span>}</span>\n\n<span>function</span> <span>catchError</span> <span>(</span><span>)</span> <span>{</span>\n  console<span>.</span><span>log</span><span>(</span><span>'Error!'</span><span>)</span>\n<span>}</span>\n\n<span>getPromise</span><span>(</span><span>)</span>\n  <span>.</span><span>then</span><span>(</span>logA<span>)</span> <span>// A</span>\n  <span>.</span><span>then</span><span>(</span>logB<span>)</span> <span>// B</span>\n  <span>.</span><span>then</span><span>(</span>logCAndThrow<span>)</span> <span>// C</span>\n  <span>.</span><span>catch</span><span>(</span>catchError<span>)</span> <span>// Error!</span></code></pre></div><p>Cool, but why is this so important? Remember back in the callback section we talked about one of the downfalls of callbacks being that they force you out of your natural, sequential way of thinking. When you chain promises together, it doesn’t force you out of that natural way of thinking because chained promises are sequential.&nbsp;<code>getPromise runs then logA runs then logB runs then...</code>.</p><p>Just so you can see one more example, here’s a common use case when you use the&nbsp;<code>fetch</code>&nbsp;API.&nbsp;<code>fetch</code>&nbsp;will return you a promise that will resolve with the HTTP response. To get the actual JSON, you’ll need to call&nbsp;<code>.json</code>. Because of chaining, we can think about this in a sequential manner.</p><div><pre><code><span>fetch</span><span>(</span><span>'/api/user.json'</span><span>)</span>\n  <span>.</span><span>then</span><span>(</span><span>(</span>response<span>)</span> <span>=&gt;</span> response<span>.</span><span>json</span><span>(</span><span>)</span><span>)</span>\n  <span>.</span><span>then</span><span>(</span><span>(</span>user<span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>// user is now ready to go.</span>\n  <span>}</span><span>)</span></code></pre></div><p>Now that we know about chaining, let’s refactor our&nbsp;<code>getUser</code>/<code>getWeather</code>&nbsp;code from earlier to use it.</p><div><pre><code><span>function</span> <span>getUser</span><span>(</span>id<span>)</span> <span>{</span>\n  <span>return</span> <span>new</span> <span>Promise</span><span>(</span><span>(</span>resolve<span>,</span> reject<span>)</span> <span>=&gt;</span> <span>{</span>\n    $<span>.</span><span>getJSON</span><span>(</span><span>{</span>\n      url<span>:</span> <span><span>`https://api.github.com/users/</span><span><span>${</span>id<span>}</span></span><span>`</span></span><span>,</span>\n      success<span>:</span> resolve<span>,</span>\n      error<span>:</span> reject\n    <span>}</span><span>)</span>\n  <span>}</span><span>)</span>\n<span>}</span>\n\n<span>function</span> <span>getWeather</span><span>(</span>user<span>)</span> <span>{</span>\n  <span>return</span> <span>new</span> <span>Promise</span><span>(</span><span>(</span>resolve<span>,</span> reject<span>)</span> <span>=&gt;</span> <span>{</span>\n    $<span>.</span><span>getJSON</span><span>(</span><span>{</span>\n      url<span>:</span> <span>getLocationURL</span><span>(</span>user<span>.</span>location<span>.</span><span>split</span><span>(</span><span>','</span><span>)</span><span>)</span><span>,</span>\n      success<span>:</span> resolve<span>,</span>\n      error<span>:</span> reject<span>,</span>\n    <span>}</span><span>)</span>\n  <span>}</span><span>)</span>\n<span>}</span>\n\n<span>$</span><span>(</span><span>\"#btn\"</span><span>)</span><span>.</span><span>on</span><span>(</span><span>\"click\"</span><span>,</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n  <span>getUser</span><span>(</span><span>\"tylermcginnis\"</span><span>)</span>\n    <span>.</span><span>then</span><span>(</span>getWeather<span>)</span>\n    <span>.</span><span>then</span><span>(</span><span>(</span>weather<span>)</span> <span>=&gt;</span> <span>{</span>\n      <span>// We need both the user and the weather here.</span>\n      <span>// Right now we just have the weather</span>\n      <span>updateUI</span><span>(</span><span>)</span> <span>// ????</span>\n    <span>}</span><span>)</span>\n    <span>.</span><span>catch</span><span>(</span>showError<span>)</span>\n<span>}</span><span>)</span></code></pre></div><p>It&nbsp;<em>looks</em>&nbsp;much better, but now we’re running into an issue. Can you spot it? In the second&nbsp;<code>.then</code>&nbsp;we want to to call&nbsp;<code>updateUI</code>. The problem is we need to pass&nbsp;<code>updateUI</code>&nbsp;both the&nbsp;<code>user</code>&nbsp;and the&nbsp;<code>weather</code>. Currently how we have it set up, we’re only receiving the&nbsp;<code>weather</code>, not the&nbsp;<code>user</code>. Somehow we need to figure out a way to make it so the promise that&nbsp;<code>getWeather</code>&nbsp;returns is resolved with both the&nbsp;<code>user</code>&nbsp;and the&nbsp;<code>weather</code>.</p><p>Here’s the key.&nbsp;<code>resolve</code>&nbsp;is just a function. Any arguments you pass to it will be passed along to the function given to&nbsp;<code>.then</code>. What that means is that inside of&nbsp;<code>getWeather</code>, if we invoke&nbsp;<code>resolve</code>&nbsp;ourself, we can pass to it&nbsp;<code>weather</code>&nbsp;and&nbsp;<code>user</code>. Then, the second&nbsp;<code>.then</code>&nbsp;method in our chain will receive both&nbsp;<code>user</code>&nbsp;and&nbsp;<code>weather</code>as an argument.</p><div><pre><code><span>function</span> <span>getWeather</span><span>(</span>user<span>)</span> <span>{</span>\n  <span>return</span> <span>new</span> <span>Promise</span><span>(</span><span>(</span>resolve<span>,</span> reject<span>)</span> <span>=&gt;</span> <span>{</span>\n    $<span>.</span><span>getJSON</span><span>(</span><span>{</span>\n      url<span>:</span> <span>getLocationURL</span><span>(</span>user<span>.</span>location<span>.</span><span>split</span><span>(</span><span>','</span><span>)</span><span>)</span><span>,</span>\n<span>      <span>success</span><span>(</span>weather<span>)</span> <span>{</span>\n</span><span>        <span>resolve</span><span>(</span><span>{</span> user<span>,</span> weather<span>:</span> weather<span>.</span>query<span>.</span>results <span>}</span><span>)</span>\n</span><span>      <span>}</span><span>,</span>\n</span>      error<span>:</span> reject<span>,</span>\n    <span>}</span><span>)</span>\n  <span>}</span><span>)</span>\n<span>}</span>\n\n<span>$</span><span>(</span><span>\"#btn\"</span><span>)</span><span>.</span><span>on</span><span>(</span><span>\"click\"</span><span>,</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n  <span>getUser</span><span>(</span><span>\"tylermcginnis\"</span><span>)</span>\n    <span>.</span><span>then</span><span>(</span>getWeather<span>)</span>\n<span>    <span>.</span><span>then</span><span>(</span><span>(</span>data<span>)</span> <span>=&gt;</span> <span>{</span>\n</span><span>      <span>// Now, data is an object with a</span>\n</span><span>      <span>// \"weather\" property and a \"user\" property.</span>\n</span><span>\n</span><span>      <span>updateUI</span><span>(</span>data<span>)</span>\n</span><span>    <span>}</span><span>)</span>\n</span>    <span>.</span><span>catch</span><span>(</span>showError<span>)</span>\n<span>}</span><span>)</span></code></pre></div><blockquote><p>You can play around with the&nbsp;<a href=\"https://codesandbox.io/s/9lkl75vqxw\">final code here</a></p></blockquote><p>It’s in our click handler where you really see the power of promises shine compared to callbacks.</p><div><pre><code><span>// Callbacks 🚫</span>\n<span>getUser</span><span>(</span><span>\"tylermcginnis\"</span><span>,</span> <span>(</span>user<span>)</span> <span>=&gt;</span> <span>{</span>\n  <span>getWeather</span><span>(</span>user<span>,</span> <span>(</span>weather<span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>updateUI</span><span>(</span><span>{</span>\n      user<span>,</span>\n      weather<span>:</span> weather<span>.</span>query<span>.</span>results\n    <span>}</span><span>)</span>\n  <span>}</span><span>,</span> showError<span>)</span>\n<span>}</span><span>,</span> showError<span>)</span>\n\n\n<span>// Promises ✅</span>\n<span>getUser</span><span>(</span><span>\"tylermcginnis\"</span><span>)</span>\n  <span>.</span><span>then</span><span>(</span>getWeather<span>)</span>\n  <span>.</span><span>then</span><span>(</span><span>(</span>data<span>)</span> <span>=&gt;</span> <span>updateUI</span><span>(</span>data<span>)</span><span>)</span>\n  <span>.</span><span>catch</span><span>(</span>showError<span>)</span><span>;</span></code></pre></div><p>Following that logic feels natural because it’s how we’re used to thinking, sequentially.&nbsp;<code>getUser then getWeather then update the UI with the data</code>.</p><hr><p>Now it’s clear that promises drastically increase the readability of our asynchronous code, but is there a way we can make it even better? Assume that you were on the TC39 committee and you had all the power to add new features to the JavaScript language. What steps, if any, would you take to improve this code?</p><div><pre><code><span>$</span><span>(</span><span>\"#btn\"</span><span>)</span><span>.</span><span>on</span><span>(</span><span>\"click\"</span><span>,</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n  <span>getUser</span><span>(</span><span>\"tylermcginnis\"</span><span>)</span>\n    <span>.</span><span>then</span><span>(</span>getWeather<span>)</span>\n    <span>.</span><span>then</span><span>(</span><span>(</span>data<span>)</span> <span>=&gt;</span> <span>updateUI</span><span>(</span>data<span>)</span><span>)</span>\n    <span>.</span><span>catch</span><span>(</span>showError<span>)</span>\n<span>}</span><span>)</span></code></pre></div><p>As we’ve discussed, the code reads pretty nicely. Just as our brains work, it’s in a sequential order. One issue that we did run into was that we needed to thread the data (<code>users</code>) from the first async request all the way through to the last&nbsp;<code>.then</code>. This wasn’t a big deal, but it made us change up our&nbsp;<code>getWeather</code>&nbsp;function to also pass along&nbsp;<code>users</code>. What if we just wrote our asynchronous code the same way which we write our synchronous code? If we did, that problem would go away entirely and it would still read sequentially. Here’s an idea.</p><div><pre><code><span>$</span><span>(</span><span>\"#btn\"</span><span>)</span><span>.</span><span>on</span><span>(</span><span>\"click\"</span><span>,</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n  <span>const</span> user <span>=</span> <span>getUser</span><span>(</span><span>'tylermcginnis'</span><span>)</span>\n  <span>const</span> weather <span>=</span> <span>getWeather</span><span>(</span>user<span>)</span>\n\n  <span>updateUI</span><span>(</span><span>{</span>\n    user<span>,</span>\n    weather<span>,</span>\n  <span>}</span><span>)</span>\n<span>}</span><span>)</span></code></pre></div><p>Well, that would be nice. Our asynchronous code looks exactly like our synchronous code. There’s no extra steps our brain needs to take because we’re already very familiar with this way of thinking. Sadly, this obviously won’t work. As you know, if we were to run the code above,&nbsp;<code>user</code>&nbsp;and&nbsp;<code>weather</code>&nbsp;would both just be promises since that’s what&nbsp;<code>getUser</code>&nbsp;and&nbsp;<code>getWeather</code>&nbsp;return. But remember, we’re on TC39. We have all the power to add any feature to the language we want. As is, this code would be really tricky to make work. We’d have to somehow teach the JavaScript engine to know the difference between asynchronous function invocations and regular, synchronous function invocations on the fly. Let’s add a few keywords to our code to make it easier on the engine.</p><p>First, let’s add a keyword to the main function itself. This could clue the engine to the fact that inside of this function, we’re going to have some asynchronous function invocations. Let’s use&nbsp;<code>async</code>&nbsp;for this.</p><div><pre><code><span><span>$</span><span>(</span><span>\"#btn\"</span><span>)</span><span>.</span><span>on</span><span>(</span><span>\"click\"</span><span>,</span> <span>async</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n</span>  <span>const</span> user <span>=</span> <span>getUser</span><span>(</span><span>'tylermcginnis'</span><span>)</span>\n  <span>const</span> weather <span>=</span> <span>getWeather</span><span>(</span>user<span>)</span>\n\n  <span>updateUI</span><span>(</span><span>{</span>\n    user<span>,</span>\n    weather<span>,</span>\n  <span>}</span><span>)</span>\n<span>}</span><span>)</span></code></pre></div><p>Cool. That seems reasonable. Next let’s add another keyword to let the engine know exactly when a function being invoked is asynchronous and is going to return a promise. Let’s use&nbsp;<code>await</code>. As in, “Hey engine. This function is asynchronous and returns a promise. Instead of continuing on like you typically do, go ahead and ‘await’ the eventual value of the promise and return it before continuing”. With both of our new&nbsp;<code>async</code>&nbsp;and&nbsp;<code>await</code>&nbsp;keywords in play, our new code will look like this.</p><div><pre><code><span><span>$</span><span>(</span><span>\"#btn\"</span><span>)</span><span>.</span><span>on</span><span>(</span><span>\"click\"</span><span>,</span> <span>async</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n</span><span>  <span>const</span> user <span>=</span> <span>await</span> <span>getUser</span><span>(</span><span>'tylermcginnis'</span><span>)</span>\n</span><span>  <span>const</span> weather <span>=</span> <span>await</span> <span>getWeather</span><span>(</span>user<span>.</span>location<span>)</span>\n</span>\n  <span>updateUI</span><span>(</span><span>{</span>\n    user<span>,</span>\n    weather<span>,</span>\n  <span>}</span><span>)</span>\n<span>}</span><span>)</span></code></pre></div><p>Pretty slick. We’ve invented a reasonable way to have our asynchronous code look and behave as if it were synchronous. Now the next step is to actually convince someone on TC39 that this is a good idea. Lucky for us, as you probably guessed by now, we don’t need to do any convincing because this feature is already part of JavaScript and it’s called&nbsp;<code>Async/Await</code>.</p><p>Don’t believe me?&nbsp;<a href=\"https://codesandbox.io/s/00w10o19xn\">Here’s our live code now</a>&nbsp;that we’ve added Async/Await to it. Feel free to play around with it.</p><hr><h4>async functions return a promise</h4><p>Now that you’ve seen the benefit of Async/Await, let’s discuss some smaller details that are important to know. First, anytime you add&nbsp;<code>async</code>&nbsp;to a function, that function is going to implicitly return a promise.</p><div><pre><code><span>async</span> <span>function</span> <span>getPromise</span><span>(</span><span>)</span><span>{</span><span>}</span>\n\n<span>const</span> promise <span>=</span> <span>getPromise</span><span>(</span><span>)</span></code></pre></div><p>Even though&nbsp;<code>getPromise</code>&nbsp;is literally empty, it’ll still return a promise since it was an&nbsp;<code>async</code>&nbsp;function.</p><p>If the&nbsp;<code>async</code>&nbsp;function returns a value, that value will also get wrapped in a promise. That means you’ll have to use&nbsp;<code>.then</code>&nbsp;to access it.</p><div><pre><code><span>async</span> <span>function</span> <span>add</span> <span>(</span>x<span>,</span> y<span>)</span> <span>{</span>\n  <span>return</span> x <span>+</span> y\n<span>}</span>\n\n<span>add</span><span>(</span><span>2</span><span>,</span><span>3</span><span>)</span><span>.</span><span>then</span><span>(</span><span>(</span>result<span>)</span> <span>=&gt;</span> <span>{</span>\n  console<span>.</span><span>log</span><span>(</span>result<span>)</span> <span>// 5</span>\n<span>}</span><span>)</span></code></pre></div><hr><h4>await without async is bad</h4><p>If you try to use the&nbsp;<code>await</code>&nbsp;keyword inside of a function that isn’t&nbsp;<code>async</code>, you’ll get an error.</p><div><pre><code><span><span>$</span><span>(</span><span>\"#btn\"</span><span>)</span><span>.</span><span>on</span><span>(</span><span>\"click\"</span><span>,</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n</span>  <span>const</span> user <span>=</span> <span>await</span> <span>getUser</span><span>(</span><span>'tylermcginnis'</span><span>)</span> <span>// SyntaxError: await is a reserved word</span>\n  <span>const</span> weather <span>=</span> <span>await</span> <span>getWeather</span><span>(</span>user<span>.</span>location<span>)</span> <span>// SyntaxError: await is a reserved word</span>\n\n  <span>updateUI</span><span>(</span><span>{</span>\n    user<span>,</span>\n    weather<span>,</span>\n  <span>}</span><span>)</span>\n<span>}</span><span>)</span></code></pre></div><p>Here’s how I think about it. When you add&nbsp;<code>async</code>&nbsp;to a function it does two things. It makes it so the function itself returns (or wraps what gets returned in) a promise and makes it so you can use&nbsp;<code>await</code>&nbsp;inside of it.</p><hr><h4>Error Handling</h4><p>You may have noticed we cheated a little bit. In our original code we had a way to catch any errors using&nbsp;<code>.catch</code>. When we switched to Async/Await, we removed that code. With Async/Await, the most common approach is to wrap your code in a&nbsp;<code>try/catch</code>&nbsp;block to be able to catch the error.</p><div><pre><code><span>$</span><span>(</span><span>\"#btn\"</span><span>)</span><span>.</span><span>on</span><span>(</span><span>\"click\"</span><span>,</span> <span>async</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n  <span>try</span> <span>{</span>\n    <span>const</span> user <span>=</span> <span>await</span> <span>getUser</span><span>(</span><span>'tylermcginnis'</span><span>)</span>\n    <span>const</span> weather <span>=</span> <span>await</span> <span>getWeather</span><span>(</span>user<span>.</span>location<span>)</span>\n\n    <span>updateUI</span><span>(</span><span>{</span>\n      user<span>,</span>\n      weather<span>,</span>\n    <span>}</span><span>)</span>\n  <span>}</span> <span>catch</span> <span>(</span><span>e</span><span>)</span> <span>{</span>\n    <span>showError</span><span>(</span>e<span>)</span>\n  <span>}</span>\n<span>}</span><span>)</span></code></pre></div></div>","filePath":"pages/JavaScript/.md","_id":"Di6ovpjLxvP2jkur","dateUpdated":1542039558552,"favorite":false}
{"date":"2018-11-15T15:37:06.533Z","title":"Angular: Unit Testing Tips and Tricks","sourceUrl":"https://www.dev6.com/Angular-Unit-Testing-Tips-n-Tricks","path":"Angular/","category":"Angular","tags":["Angular"," Unit Testing"," TDD"],"author":"Tyler Padley","excerpt":"","dateCreated":1542296077827,"coverImage":"","type":"Post","frontmatter":"---\npath: 'Angular/'\ndate: 'Thu Nov 15 2018 21:07:06 GMT+0530 (India Standard Time)'\ntitle: 'Angular: Unit Testing Tips and Tricks'\ntags: ['Angular','Unit Testing','TDD']\ncategory: 'Angular'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://www.dev6.com/Angular-Unit-Testing-Tips-n-Tricks'\ntype: 'Post'\n---\n    ","htmlCode":"<p>One of the better upgrades in the Angular 2 framework is its capacity for unit testing. From the reactive forms module to the new TestBed, it’s easier than ever to write quick, meaningful tests and run them in any project.</p><p>&nbsp;</p><p>While there are many introductory articles around unit testing and the official Angular documentation does a good job illustrating the concepts, the goal of this article is to highlight some of the lesser known, but still handy features in Angular 2’s testing framework.</p><p>&nbsp;</p><p>This article assumes you have some basic knowledge of Angular 2’s unit testing capabilities, including TestBed, Karma and Jasmine.</p><p>&nbsp;</p><h2>Testing in Isolation</h2><p>One of the more difficult things to do when testing is to ensure you are testing in isolation. Eliminating external dependencies will give you more stable, repeatable test results. Angular 2 provides a few techniques for handling this.</p><p>&nbsp;</p><p>The handiest shortcut I’ve seen when writing unit tests is Angular’s CUSTOM_ELEMENTS_SCHEMA constant. When added to a TestBed’s schemas collection, this schema will allow the compilation of your test environment without having to provide declarations for all of the elements contained within the template. Here is an example usage:</p><p>&nbsp;</p><p><code>&nbsp;TestBed.<em>configureTestingModule</em>({<br>&nbsp;&nbsp;&nbsp; imports: [RouterTestingModule],<br>&nbsp;&nbsp;&nbsp; schemas: [CUSTOM_ELEMENTS_SCHEMA],<br>&nbsp;&nbsp;&nbsp; declarations: [TestComponent],<br>});</code></p><p>&nbsp;</p><p>What this will do, is safely ignore any custom elements in TestComponent’s template, crucial for ensuring you’re testing the component in isolation. However, there are a few gotchas with this schema, as it only allows named tags and attributes with the hyphen (-) in their name, restricting users to industry-standard naming conventions.</p><p>&nbsp;</p><p>This should suffice for most use cases, but sometimes you may need to provide specific data, or eliminate the template altogether. TestBed has a handy feature that will allow you to override most aspects of the component through&nbsp;<em>overrideComponent</em>.</p><p>&nbsp;</p><p>This feature will allow you to add, remove or set any property that is configured via the component’s decorator, including the template. Here is an example below:</p><p>&nbsp;</p><p><code>fixture = TestBed.<em>overrideComponent</em>(OverriddenComponent, {<br>&nbsp;&nbsp;&nbsp; set: {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; template: `&lt;h1&gt;Test&lt;/h1&gt;`<br>&nbsp;&nbsp;&nbsp; }<br>}).<em>createComponent</em>(OverriddenComponent);</code></p><p>&nbsp;</p><p>&nbsp;</p><p>Setting the component template to a simple string will remove the requirement of providing all necessary dependencies and allow you to test the underlying component code. You can also replace internal declarations to match anything new you want to test within the component.</p><h2>&nbsp;</h2><h2>Testing Inputs</h2><p>With reactive forms, it becomes relatively straightforward to test your inputs; setting values can be done on a form or control level, validity flags are set right away, and you can test the resulting submission all with built in methods.<br><br>However, one of the more underrated new features of the framework is the valueChanges observable. These can be subscribed to at a form or control level, and then allow you to leverage the power of the RXJS Observable framework to add things like debouncing, filters and formatters. Here’s an example below:</p><p>&nbsp;</p><p><code><strong>this</strong>.inputName.valueChanges<br>&nbsp;&nbsp;&nbsp; .debounceTime(250)<br>&nbsp;&nbsp;&nbsp; .takeWhile(() =&gt;&nbsp;<strong>this</strong>.active)<br>&nbsp;&nbsp;&nbsp; .subscribe(entry =&gt; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>//process values here</strong><br>&nbsp;&nbsp;&nbsp; });</code></p><p>&nbsp;</p><p>When testing this type of code, the values have to be entered into the form control itself. Fortunately, Angular’s ComponentFixture has a solution for this:</p><p>&nbsp;</p><p><code>Let fixture:ComponentFixture = TestBed.createComponent(TestComponent);</code></p><p><code>Let input = fixture.debugElement.query(By.<em>css</em>(\"input\"));<br>input.nativeElement.value = testValue;<br>dispatchEvent(input.nativeElement, \"input\");</code></p><p>&nbsp;</p><p>The debugElement allows you to run various element queries to access components within the template, and from there it’s just a matter of setting the value, then using the testing framework’s “<strong>dispatchEvent</strong>” method to send that data on through to the Observable. This can also apply to combo boxes, radio buttons and other form controls.</p><p>&nbsp;</p><p>This technique is also critical for testing directive instances as Angular’s testing framework allows you to query by directive:</p><p><code><strong>let&nbsp;</strong>inputElement: DebugElement = fixture.debugElement.query(By.<em>directive</em>(TestDirective));<br>directive = inputElement.injector.get(TestDirective);</code></p><p>&nbsp;</p><p>This technique will get you an element reference, however, accessing the element’s injector can get you access to the directive instance provided to that element.</p><h2>&nbsp;</h2><h2>Route Values</h2><p>Often you will find yourself writing code based on parameters provided by the route. While Angular’s RouterTestingModule is handy for testing routes and routing directives such as&nbsp;<em>resolves</em>&nbsp;and&nbsp;<em>guards</em>, if you’re just looking to capture route data, you can easily mock what you’re after using the RXJS framework and Subject stubs.</p><p>&nbsp;</p><p>Typically, you can replace the ActivatedRoute injection with the required mock object and then use standard observable techniques to emit data. Here’s an example below:</p><p>&nbsp;</p><p><code><strong>let&nbsp;</strong>mockRoute:&nbsp;<strong>any&nbsp;</strong>= { snapshot: {}};<br><br>mockRoute.parent = { params:&nbsp;<strong>new&nbsp;</strong>Subject&lt;<strong>any</strong>&gt;()};<br>mockRoute.params =&nbsp;<strong>new&nbsp;</strong>Subject&lt;<strong>any</strong>&gt;();<br>mockRoute.queryParams =&nbsp;<strong>new&nbsp;</strong>Subject&lt;<strong>any</strong>&gt;();</code></p><p><code>&nbsp;</code></p><p><code>TestBed.<em>configureTestingModule</em>({<br>&nbsp;&nbsp;&nbsp; imports: [RouterTestingModule.<em>withRoutes</em>([])],<br>&nbsp;&nbsp;&nbsp; providers: [{ provide: ActivatedRoute, useValue: mockRoute }],<br>&nbsp;&nbsp;&nbsp; declarations: [ TestComponent ]<br>})</code></p><p>&nbsp;</p><p>The above code will replace the ActivatedRoute injection with the mock, stubbing out the parent params (for route parameters from the parent), the route params, and the route query params. Sending test data through is simply a matter of triggering an Observable.next within your test case.</p><p>&nbsp;</p><p><code>mockRoute.parent.params.next({ paramName: 17 });<br>mockRoute.params.next({ paramName: \"test\"});</code></p><p>&nbsp;</p><p>This approach is much simpler than declaring acceptable routes (though you will want separate unit tests to ensure your routing use cases are valid).</p><p>&nbsp;</p><p>One final note, is that since these are observable event dispatches you will want to call&nbsp;<em>complete()</em>&nbsp;at the end of your test, and, if using jasmine, wrap your test cases in an&nbsp;<em>async()</em>&nbsp;call.</p><p>&nbsp;</p><p>These examples are just a brief summary of some simple solutions to common testing problems I’ve encountered thus far in testing with Angular 2. Feel free to leave comments with tips and suggestions of your own!</p>","filePath":"pages/Angular/.md","_id":"HL8wVQAcS7LFvgQw"}
{"title":"Understanding, creating and subscribing to observables in Angular 22","sourceUrl":"","path":"RxJs/RxJs/RxJs/JavaScript/","category":"RxJs","tags":["RxJs"," Observables"],"excerpt":"","date":{"$$date":1540568407188},"coverImage":"","type":"Post","frontmatter":"---\npath: 'JavaScript/'\ndate: ''\ntitle: 'Understanding, creating and subscribing to observables in Angular 22'\ntags: ['JavaScript','ES6']\ncategory: 'JavaScript'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: ''\ntype: 'Post'\n---\n    ","htmlCode":"<div id=\"wrapper-container\"><div><div><div><h3 name=\"fbad\">Observables</h3><blockquote name=\"a21a\">Observables are lazy collections of multiple values over&nbsp;time.</blockquote><p name=\"d926\">yeah, right…well, actually it’s pretty easy:</p><ol><li name=\"931c\"><span>Observables are lazy</span><br>You could think of lazy observables as newsletters. For each subscriber a new newsletter is created. They are then only send to those people, and not to anyone else.</li><li name=\"77a7\"><span>Observables can have multiple values over time</span><br>Now if you keep that subscription to the newsletter open, you will get a new one every once and a while. The sender decides when you get it but all you have to do is just wait until it comes straight into your inbox.</li></ol><p name=\"a3c9\">If you come from the world of promises this is a key difference as promises always return only one value. Another thing is that observables are cancelable. If you don’t want your newsletter anymore, you unsubscribe. With promises this is different, you can’t cancel a promise. If the promise is handed to you, the process that will produce that promise’s resolution is already underway, and you generally don’t have access to prevent that promise’s resolution from executing.</p><h3 name=\"2edf\">Push vs&nbsp;pull</h3><p name=\"b4bb\">A key thing to understand when using observables is that observables push. Push and pull are two different ways that describe how a&nbsp;<em>data producer&nbsp;</em>communicates with the&nbsp;<em>data consumer</em>.</p><p name=\"b14a\"><span>Pull<br></span>When pulling, the data consumer decides when it get’s data from the data producer. The producer is unaware of when data will be delivered to the consumer.</p><p name=\"376f\">Every javascript function uses the pull. The function is a Producer of data, and the code that calls the function is consuming it by “pulling” out a&nbsp;<em>single</em>&nbsp;return value from its call.</p><p name=\"601c\"><span>Push<br></span>When pushing, it works the other way around. The data producer (the creator of the newsletter) decides when the consumer (the subscriber to the newsletter) gets the data.</p><p name=\"60bf\">Promises are the most common way of push in JavaScript today. A promise (the producer) delivers a resolved value to registered callbacks (the consumers), but unlike functions, it is the promise which is in charge of determining precisely when that value is “pushed” to the callbacks.</p><p name=\"6da8\">Observables are a new way of pushing data in JavaScript. An observable is a Producer of multiple values, “pushing” them to subscribers.</p><h3 name=\"a493\">Observables in&nbsp;Angular</h3><p name=\"c447\">If you start using Angular you will probably encounter observables when setting up your HTTP requests. So let’s start there.</p><pre style=\"font-family: monospace, monospace; font-size: 20px; margin: 0px; color: rgba(0, 0, 0, 0.84); background-color: rgb(255, 255, 255);\"><code>import { Observable } from \"rxjs/Rx\"<br>import { Injectable } from \"@angular/core\"<br>import { Http, Response } from \"@angular/http\"<br><br>@Injectable()<br>export class HttpClient {<br><br>    constructor(<br>        public http: Http<br>    ) {}<br><br>    public fetchUsers() {<br>        return this.http.get(\"/api/users\").map((res: Response) =&gt; res.json())<br>    }<br>}</code></pre><p name=\"30d8\">We have now created a simple HttpClient with a fetchUsers method that returns an observable. We probably like to display the users in some sort of list, so let’s do something with this method. Since this method returns an observable we have to subscribe to it. In Angular we can subscribe to an observable in two ways:</p><p name=\"3e9a\"><span>Manner 1:</span><br>We subscribe to an observable in our template using the async pipe. The benefit of this is that Angular deals with your subscription during the lifecycle of a component. Angular will automatically subscribe and unsubscribe for you. Don’t forget to import the “CommonModule” into your module, as the async pipe will be exposed from that.</p><pre style=\"font-family: monospace, monospace; font-size: 20px; margin: 0px; color: rgba(0, 0, 0, 0.84); background-color: rgb(255, 255, 255);\"><code>import { Component } from \"@angular/core\"<br>import { Observable } from \"rxjs/Rx\"<br><br>// client<br>import { HttpClient } from \"../services/client\"<br><br>// interface<br>import { IUser } from \"../services/interfaces\"<br><br>@Component({<br>    selector: \"user-list\",<br>    templateUrl:  \"./template.html\",<br>})<br>export class UserList {<br><br>    public users$: Observable&lt;IUser[]&gt;<br><br>    constructor(<br>        public client: HttpClient,<br>    ) {}<br><br>    // do a call to fetch the users on init of component<br>    // the fetchUsers method returns an observable<br>    // which we assign to the users$ property of our class<br>    public ngOnInit() {<br>        this.users$ = this.client.fetchUsers()<br>    }<br>}</code></pre><pre style=\"font-family: monospace, monospace; font-size: 20px; margin: 0px; color: rgba(0, 0, 0, 0.84); background-color: rgb(255, 255, 255);\"><code>&lt;!-- We use the async pipe to automatically subscribe/unsubscribe to our observable --&gt;<br>&lt;ul class=\"user__list\" *ngIf=\"(users$ | async).length\"&gt;<br>    &lt;li class=\"user\" *ngFor=\"let user of users$ | async\"&gt;<br>        {{ user.name }} - {{ user.birth_date }}<br>    &lt;/li&gt;<br>&lt;/ul&gt;</code></pre><p name=\"ebfd\"><span name=\"anon_be25f95e5afc\" data-creator-ids=\"anon\">Please note the dollar sign. Using the dollar sign in the name of a variable that is an observable, is considered best practice. This way it’s easy to identify if your variable is an observable or not.</span></p><p name=\"732e\"><span>Manner 2:</span><br>We subscribe to the observable ourselves using the actual&nbsp;<code>subscribe()</code>method. This can be handy if you would first like to do something with the data before displaying it. The downside is that you have to manage the subscription yourself.</p><pre style=\"font-family: monospace, monospace; font-size: 20px; margin: 0px; color: rgba(0, 0, 0, 0.84); background-color: rgb(255, 255, 255);\"><code>import { Component } from \"@angular/core\"<br><br>// client<br>import { HttpClient } from \"../services/client\"<br><br>// interface<br>import { IUser } from \"../services/interfaces\"<br><br>@Component({<br>    selector: \"user-list\",<br>    templateUrl:  \"./template.html\",<br>})<br>export class UserList {<br><br>    public users: IUser[]<br><br>    constructor(<br>        public client: HttpClient,<br>    ) {}<br><br>    // do a call to fetch the users on init of component<br>    // we manually subscribe to this method and take the users<br>    // in our callback<br>    public ngOnInit() {<br>        this.client.fetchUsers().subscribe((users: IUser[]) =&gt; {<br><br>            // do stuff with our data here.<br>            // ....<br><br>            // asign data to our class property in the end<br>            // so it will be available to our template<br>            this.users = users<br>        })<br>    }<br>}</code></pre><pre style=\"font-family: monospace, monospace; font-size: 20px; margin: 0px; color: rgba(0, 0, 0, 0.84); background-color: rgb(255, 255, 255);\"><code>&lt;ul class=\"user__list\" *ngIf=\"users.length\"&gt;<br>    &lt;li class=\"user\" *ngFor=\"let user of users\"&gt;<br>        {{ user.name }} - {{ user.birth_date }}<br>    &lt;/li&gt;<br>&lt;/ul&gt;</code></pre><p name=\"9176\">As you can see the template logic is quite similar, the component logic can actually become much different en more complex if you go for manner 2. In general i would recommend to choose manner 1. As this is the most easy and you don’t have to manually manage your subscriptions. Keeping your subscriptions open while not using them is a memory leak and therefore not good.</p><h3 name=\"8a40\">Creating an observable yourself</h3><p name=\"c5ed\">Now that you know how to deal with common observables that are given to you by Angular, it’s good to know how you create an observable yourself. The simplest version looks like this:</p><pre style=\"font-family: monospace, monospace; font-size: 20px; margin: 0px; color: rgba(0, 0, 0, 0.84); background-color: rgb(255, 255, 255);\"><code>import { Observable } from \"rxjs/Observable\"<br><br>// create observable<br>const simpleObservable = new Observable((observer) =&gt; {<br>    <br>    // observable execution<br>    observer.next(\"bla bla bla\")<br>    observer.complete()<br>})<br><br>// subscribe to the observable<br>simpleObservable.subscribe()<br><br>// dispose the observable<br>simpleObservable.unsubscribe()</code></pre><p name=\"e9af\">As you can see in the example observables are&nbsp;<span>created</span>&nbsp;by using the&nbsp;<code>new Observable()</code>&nbsp;call, then&nbsp;<span>subscribed</span>&nbsp;to by an observer,&nbsp;<span>executed</span>&nbsp;by calling the&nbsp;<code>next()</code>&nbsp;and&nbsp;<span>disposed</span>&nbsp;by calling&nbsp;<code>unsubscribe()</code>.</p><p name=\"f4c6\"><span>Creating observables<br></span>Creating observables is easy, just call the&nbsp;<code>new Observable()</code>&nbsp;and pass along one argument which represents the observer. Therefore i usually call it “observer” as well.</p><p name=\"1c2e\"><span>Subscribing to observables<br></span>Remember, observables are lazy. If you don’t subscribe nothing is going to happen. It’s good to know that when you subscribe to an observer, each call of&nbsp;<code>subscribe()</code>&nbsp;will trigger it’s own independent execution for that given observer. Subscribe calls are not shared among multiple subscribers to the same observable.</p><p name=\"2f40\"><span>Executing observables<br></span>The code inside an observables represents the execution of the observables. On the parameter that was given when creating the observable there are three functions available to send data to the subscribers of the observable:</p><ul><li name=\"3b29\">“next”: sends any value such as Numbers, Arrays or objects to it’s subscribers.</li><li name=\"987d\">“error”: sends a Javascript error or exception</li><li name=\"156d\">“complete”: does not send any value.</li></ul><p name=\"149c\">Calls of the next are the most common as they actually deliver the data to it’s subscribers. During observable execution there can be an infinite calls to the&nbsp;<code>observer.next()</code>, however when&nbsp;<code>observer.error()</code>&nbsp;or&nbsp;<code>observer.complete()</code>is called, the execution stops and no more data will be delivered to the subscribers.</p><p name=\"7c99\"><span>Disposing observables<br></span>Because observable execution can run for an infinite amount of time, we need a way to stop it from executing. Since each execution is run for every subscriber it’s important to not keep subscriptions open for subscribers that don’t need data anymore, as that would mean a waste of memory and computing power.</p><p name=\"14fe\">When you subscribe to an observable, you get back a subscription, which represents the ongoing execution. Just call&nbsp;<code>unsubscribe()</code>to cancel the execution.</p><h3 name=\"8c9a\">Conclusion</h3><p name=\"58af\">This post should give you a better understanding of how observables actually work. To get even more out of observables the next step is to understand the power of Rxjs and all the helper functions they provide. Rxjs alone could cover multiple posts which i will write about later. If you want to get one step further. Checkout my post about rxjs subjects:&nbsp;<a href=\"https://hackernoon.com/understanding-rxjs-subjects-339428a1815b\" data-href=\"https://hackernoon.com/understanding-rxjs-subjects-339428a1815b\" rel=\"nofollow noopener\" target=\"_blank\">https://hackernoon.com/understanding-rxjs-subjects-339428a1815b</a></p></div></div></div></div>","filePath":"pages/JavaScript/.md","_id":"HsNsWxIc3kK2GXlA"}
{"date":{"$$date":1541515569593},"title":"An Annotated webpack 4 Config for Frontend Web Development","sourceUrl":"https://nystudio107.com/blog/an-annotated-webpack-4-config-for-frontend-web-development","path":"JavaScript/JavaScript/","category":"JavaScript","tags":["Webpack"],"author":"Andrew Welch","excerpt":"","dateCreated":1541513749547,"coverImage":"","type":"Post","frontmatter":"---\npath: 'JavaScript/'\ndate: 'Tue Nov 06 2018 19:51:44 GMT+0530 (India Standard Time)'\ntitle: 'An Annotated webpack 4 Config for Frontend Web Development'\ntags: ['Webpack']\ncategory: 'JavaScript'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://nystudio107.com/blog/an-annotated-webpack-4-config-for-frontend-web-development'\ntype: 'Post'\n---\n    ","htmlCode":"<div><div><p>Build­ing a&nbsp;mod­ern web­site has become cus­tom appli­ca­tion devel­op­ment. Web­sites are expect­ed to do more than just be mar­ket­ing sites as they&nbsp;take on the func­tion­al­i­ty of tra­di­tion­al&nbsp;apps.</p><p>Any time a&nbsp;process becomes com­pli­cat­ed, we break it down into man­age­able com­po­nents, and auto­mate the build process with tool­ing. This is the case in whether we are man­u­fac­tur­ing cars, draft­ing legal doc­u­ments, or build­ing websites.&nbsp;</p></div></div><div><div><blockquote>Use the right tool for the job</blockquote></div></div><div><div><p>Tools like&nbsp;<a href=\"http://webpack.js.org/\" target=\"_blank\" rel=\"noreferrer noopener\">web­pack</a>&nbsp;have been at the fore­front of mod­ern web devel­op­ment for pre­cise­ly that rea­son: they help us build com­plex things.</p><p>web­pack&nbsp;<span>4</span>&nbsp;boasts some&nbsp;<a href=\"http://medium.com/webpack/webpack-4-released-today-6cdb994702d4\" target=\"_blank\" rel=\"noreferrer noopener\">amaz­ing improve­ments</a>, the most appeal­ing to me was how much faster it’d become at build­ing. So I&nbsp;decid­ed to adopt&nbsp;it.</p></div></div><div><div><section><div><figure><div><div data-expand=\"-1\"><picture><source data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_100_line/buckle-up-i-want-to-try-something.jpg.webp 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_100_line/buckle-up-i-want-to-try-something.jpg.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x432_crop_center-center_100_line/buckle-up-i-want-to-try-something.jpg.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x324_crop_center-center_100_line/buckle-up-i-want-to-try-something.jpg.webp 576w\" type=\"image/webp\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_100_line/buckle-up-i-want-to-try-something.jpg.webp 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_100_line/buckle-up-i-want-to-try-something.jpg.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x432_crop_center-center_100_line/buckle-up-i-want-to-try-something.jpg.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x324_crop_center-center_100_line/buckle-up-i-want-to-try-something.jpg.webp 576w\"><img src=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQAAAQABAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADAREAAhEBAxEB%2F8QAFwAAAwEAAAAAAAAAAAAAAAAAAAEEBv%2FEACMQAAEDAgUFAAAAAAAAAAAAAAEAAwQCBRMyNHKxISIjMXH%2FxAAXAQEBAQEAAAAAAAAAAAAAAAAAAgED%2F8QAGxEAAQUBAQAAAAAAAAAAAAAAAAIDETEyAWH%2F2gAMAwEAAhEDEQA%2FANZfXZLUPwU9pzEe%2Fi4PTHhaIkdkcfcjnFBwhkqq6FaxkLssm6N7YeFbmekpsIWiY2DhG8cCrP%2FZ\" data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_100_line/buckle-up-i-want-to-try-something.jpg 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_100_line/buckle-up-i-want-to-try-something.jpg 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x432_crop_center-center_100_line/buckle-up-i-want-to-try-something.jpg 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x324_crop_center-center_100_line/buckle-up-i-want-to-try-something.jpg 576w\" data-lowsrc=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQAAAQABAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADAREAAhEBAxEB%2F8QAFwAAAwEAAAAAAAAAAAAAAAAAAAEEBv%2FEACMQAAEDAgUFAAAAAAAAAAAAAAEAAwQCBRMyNHKxISIjMXH%2FxAAXAQEBAQEAAAAAAAAAAAAAAAAAAgED%2F8QAGxEAAQUBAQAAAAAAAAAAAAAAAAIDETEyAWH%2F2gAMAwEAAhEDEQA%2FANZfXZLUPwU9pzEe%2Fi4PTHhaIkdkcfcjnFBwhkqq6FaxkLssm6N7YeFbmekpsIWiY2DhG8cCrP%2FZ\" alt=\"Buckle Up I Want To Try Something\" height=\"auto\" width=\"900\" sizes=\"100vw\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_100_line/buckle-up-i-want-to-try-something.jpg 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_100_line/buckle-up-i-want-to-try-something.jpg 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x432_crop_center-center_100_line/buckle-up-i-want-to-try-something.jpg 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x324_crop_center-center_100_line/buckle-up-i-want-to-try-something.jpg 576w\"></picture></div></div></figure></div></section></div></div><div><div><p>Buck­le up, because this is a&nbsp;long arti­cle filled with tons of information.</p></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/an-annotated-webpack-4-config-for-frontend-web-development#adopting-webpack\"><i></i><span>LINK</span></a></span>ADOPTING WEBPACK</h3><p>A bit over a&nbsp;year ago, I&nbsp;pub­lished the arti­cle&nbsp;<a href=\"https://nystudio107.com/blog/a-gulp-workflow-for-frontend-development-automation\">A&nbsp;Gulp Work­flow for Fron­tend Devel­op­ment Automa­tion</a>&nbsp;that showed how to use Gulp to accom­plish the same thing. How­ev­er in the inter­ven­ing time, I’ve been doing more and more with fron­tend frame­works like&nbsp;<a href=\"http://vuejs.org/\" target=\"_blank\" rel=\"noreferrer noopener\">Vue­JS</a>&nbsp;and&nbsp;<a href=\"http://graphql.org/\" target=\"_blank\" rel=\"noreferrer noopener\">GraphQL</a>, as dis­cussed in the&nbsp;<a href=\"https://nystudio107.com/blog/using-vuejs-graphql-to-make-practical-magic\">Using Vue­JS + GraphQL to make Prac­ti­cal Mag­ic</a>&nbsp;article.</p><p>I have found that web­pack makes it eas­i­er for me to build the types of web­sites and appli­ca­tions that I’m mak­ing these days, and it also allows me to use the most mod­ern tool­chain around.</p><p>There are oth­er choices:</p><ul><li><strong><a href=\"http://laravel.com/docs/5.7/mix\" target=\"_blank\" rel=\"noreferrer noopener\">Lar­avel Mix</a></strong>&nbsp;is a&nbsp;lay­er on top of web­pack. It’s appeal­ing in its sim­plic­i­ty: you can get up and run­ning quick­ly, and it’ll do what you want&nbsp;<span>90</span>% of the time. But that remain­ing&nbsp;<span>10</span>% means a&nbsp;drop down into web­pack any­way. And it still doesn’t sup­port web­pack&nbsp;<span>4</span>.</li><li><strong><a href=\"http://cli.vuejs.org/\" target=\"_blank\" rel=\"noreferrer noopener\">vue-cli</a></strong>&nbsp;is very appeal­ing if you’re build­ing noth­ing but Vue­JS fron­tends. It again is a&nbsp;lay­er on top of web­pack that works great most of the time, and does some amaz­ing things for you. But again, you need to drop down into web­pack when your needs diverge from what it pro­vides. And I’m not always using Vue­JS exclusively.</li><li><strong><a href=\"http://neutrinojs.org/\" target=\"_blank\" rel=\"noreferrer noopener\">Neu­tri­no</a></strong>&nbsp;is an inter­est­ing lay­er on web­pack that we explored in the&nbsp;<a href=\"http://devmode.fm/episodes/neutrino-how-i-learned-to-stop-worrying-and-love-webpack\" target=\"_blank\" rel=\"noreferrer noopener\">Neu­tri­no: How I&nbsp;Learned to Stop Wor­ry­ing and Love Web­pack</a>&nbsp;pod­cast. The premise is amaz­ing, build­ing a&nbsp;web­pack con­fig by snap­ping togeth­er pre­fab Lego brick com­po­nents. But learn­ing how it worked seemed almost as much work as learn­ing web­pack itself.</li></ul><p>I won’t fault you if you choose any of the above tools (or even some­thing else), but note that there’s a&nbsp;com­mon theme to all of them:&nbsp;they lay­er on top of webpack.</p></div></div><div><div><blockquote>Understanding how the layers in your development system work pays dividends in the end</blockquote></div></div><div><div><p>Ulti­mate­ly, you just need to decide where in the pyra­mid of fron­tend tech­nolo­gies you want to&nbsp;stand.<br></p><p>At some point, I&nbsp;think it makes sense to under­stand how an impor­tant tool like web­pack works. A&nbsp;while ago, I’d&nbsp;<a href=\"http://twitter.com/nystudio107/status/941488105600765952\" target=\"_blank\" rel=\"noreferrer noopener\">com­plained to Sean Larkin</a>&nbsp;(one of the web­pack core team mem­bers) that web­pack was like a&nbsp;<span></span>​<span>“</span>black box”. His reply was pithy, but quite poignant:</p></div></div><div><div><blockquote>It’s only black if you haven’t opened it</blockquote></div></div><div><div><p>He’s right. Time to open the&nbsp;box.</p><p>This arti­cle will not teach you all there is to know about web­pack or even how to install it. There are plen­ty of resources avail­able for that — pick the for­mat that you learn best&nbsp;from:</p><ul><li><strong><a href=\"https://medium.com/@rajaraodv/webpack-the-confusing-parts-58712f8fcad9\" target=\"_blank\" rel=\"noreferrer noopener\">web­pack — the Con­fus­ing Parts</a></strong> — for a&nbsp;con­cise overview of how web­pack&nbsp;works</li><li><strong><a href=\"http://webpack.js.org/concepts/\" target=\"_blank\" rel=\"noreferrer noopener\">web­pack doc­u­men­ta­tion</a></strong> — if you learn best by reading</li><li><strong><a href=\"http://frontendmasters.com/courses/webpack-fundamentals/\" target=\"_blank\" rel=\"noreferrer noopener\">web­pack fun­da­men­tals</a></strong> — if you learn best by watching</li><li><strong><a href=\"http://www.valentinog.com/blog/from-gulp-to-webpack-4-tutorial/\" target=\"_blank\" rel=\"noreferrer noopener\">How to switch from Gulp to web­pack</a></strong> — if that’s where you’re com­ing&nbsp;from</li></ul><p>…and there are many, many more. Instead, this arti­cle will anno­tate a&nbsp;full work­ing exam­ple of a&nbsp;fair­ly sophis­ti­cat­ed web­pack&nbsp;<span>4</span>&nbsp;set­up. You may use all of it; you may use bits and pieces of it. But hope­ful­ly you’ll learn a&nbsp;thing or two from&nbsp;it.</p><p>While on my con­tin­u­ing jour­ney learn­ing web­pack, I&nbsp;found many tuto­r­i­al videos, a&nbsp;bunch of write-ups show­ing how to install it and a&nbsp;basic con­fig,&nbsp;but not a&nbsp;whole lot of real-world pro­duc­tion exam­ples of web­pack con­figs. So here we&nbsp;are.</p></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/an-annotated-webpack-4-config-for-frontend-web-development#what-we-get-out-of-the-box\"><i></i><span>LINK</span></a></span>WHAT WE GET OUT OF THE BOX</h3><p>As I&nbsp;set about learn­ing web­pack by open­ing up the box, I&nbsp;had a&nbsp;list of tech­nolo­gies that I&nbsp;relied upon that I&nbsp;want­ed to be part of the build process. I&nbsp;also took the time to look around to see what else was out there that I&nbsp;could adopt in the process.</p><p>As dis­cussed in the&nbsp;<a href=\"https://nystudio107.com/blog/a-pretty-website-isnt-enough\">A&nbsp;Pret­ty Web­site Isn’t Enough arti­cle</a>, web­site per­for­mance has always been a&nbsp;key con­cern of mine, so it should be no sur­prise that there’s a&nbsp;focus on that in this web­pack con­fig as&nbsp;well.</p></div></div><div><div><section><div><figure><div><div data-expand=\"-1\"><picture><source data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/webpack-black-box.jpg.webp 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/webpack-black-box.jpg.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/webpack-black-box.jpg.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/webpack-black-box.jpg.webp 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/webpack-black-box.jpg.webp 368w\" type=\"image/webp\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/webpack-black-box.jpg.webp 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/webpack-black-box.jpg.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/webpack-black-box.jpg.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/webpack-black-box.jpg.webp 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/webpack-black-box.jpg.webp 368w\"><img src=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQEASABIAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADAREAAhEBAxEB%2F8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMFBv%2FEACQQAAECBQIHAAAAAAAAAAAAAAIBAwAEBQYREnEjMTQ1UXKx%2F8QAFAEBAAAAAAAAAAAAAAAAAAAAAP%2FEABQRAQAAAAAAAAAAAAAAAAAAAAD%2F2gAMAwEAAhEDEQA%2FAH3Mdckpx15CeKTUsgoEuBTwuOUAWzW6vPVFpnJuS2eIRDq0pvAbSZ6Z31WAnWz2drdfsB%2F%2F2Q%3D%3D\" data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/webpack-black-box.jpg 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/webpack-black-box.jpg 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/webpack-black-box.jpg 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/webpack-black-box.jpg 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/webpack-black-box.jpg 368w\" data-lowsrc=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQEASABIAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADAREAAhEBAxEB%2F8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMFBv%2FEACQQAAECBQIHAAAAAAAAAAAAAAIBAwAEBQYREnEjMTQ1UXKx%2F8QAFAEBAAAAAAAAAAAAAAAAAAAAAP%2FEABQRAQAAAAAAAAAAAAAAAAAAAAD%2F2gAMAwEAAhEDEQA%2FAH3Mdckpx15CeKTUsgoEuBTwuOUAWzW6vPVFpnJuS2eIRDq0pvAbSZ6Z31WAnWz2drdfsB%2F%2F2Q%3D%3D\" alt=\"Webpack Black Box\" height=\"auto\" width=\"100%\" sizes=\"100vw\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/webpack-black-box.jpg 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/webpack-black-box.jpg 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/webpack-black-box.jpg 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/webpack-black-box.jpg 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/webpack-black-box.jpg 368w\"></picture></div></div></figure></div></section></div></div><div><div><p>So here is my very opin­ion­at­ed list of things that I&nbsp;want­ed web­pack to do for me, and tech­nolo­gies I&nbsp;want­ed to incor­po­rate in my build process:</p><ul><li><strong><a href=\"http://webpack.js.org/guides/production/\" target=\"_blank\" rel=\"noreferrer noopener\">Devel­op­ment / Pro­duc­tion</a></strong> — in local devel­op­ment, I&nbsp;want fast builds via the in-mem­o­ry&nbsp;<a href=\"http://webpack.js.org/configuration/dev-server/\" target=\"_blank\" rel=\"noreferrer noopener\">web­pack-dev-serv­er</a>, and for pro­duc­tion builds (often done in a&nbsp;Dock­er con­tain­er via&nbsp;<a href=\"http://buddy.works/\" target=\"_blank\" rel=\"noreferrer noopener\">buddy.works</a>), I&nbsp;want the every pos­si­ble opti­miza­tion. Thus we have sep­a­rate&nbsp;<kbd>dev</kbd>&nbsp;and&nbsp;<kbd>prod</kbd>&nbsp;con­figs&nbsp;<span>&amp;</span>&nbsp;builds.</li><li><strong><a href=\"http://webpack.js.org/concepts/hot-module-replacement/\" target=\"_blank\" rel=\"noreferrer noopener\">Hot Mod­ule Replace­ment</a></strong> — as I&nbsp;make changes to my JavaScript,&nbsp;<span>CSS</span>, or tem­plates, I&nbsp;want the web­page to seam­less­ly refresh. This speeds devel­op­ment tremen­dous­ly: just&nbsp;say no to the Reload button.</li><li><strong><a href=\"http://webpack.js.org/guides/code-splitting/#dynamic-imports\" target=\"_blank\" rel=\"noreferrer noopener\">Dynam­ic Code Split­ting</a></strong> — I&nbsp;don’t want to man­u­al­ly have to define JavaScript chunks in a&nbsp;con­fig file, I&nbsp;want web­pack to sort it out for&nbsp;me.</li><li><strong><a href=\"http://webpack.js.org/guides/lazy-loading/\" target=\"_blank\" rel=\"noreferrer noopener\">Lazy Load­ing</a></strong> — aka async dynam­ic mod­ule load­ing. Load only the code/​resources need­ed, when they are need­ed, with­out ren­der blocking.</li><li><strong><a href=\"http://philipwalton.com/articles/deploying-es2015-code-in-production-today/\">Mod­ern&nbsp;<span>&amp;</span>&nbsp;Lega­cy&nbsp;<span>JS</span>&nbsp;Bun­dles</a></strong> — I&nbsp;want­ed to deploy mod­ern&nbsp;<span>ES<span>2015</span></span>+ JavaScript mod­ules to the&nbsp;<a href=\"https://caniuse.com/#search=javascript%20modules\" target=\"_blank\" rel=\"noreferrer noopener\"><span>75</span>%+ of world­wide browsers</a>&nbsp;that sup­port it, while grace­ful­ly pro­vid­ing a&nbsp;fall­back lega­cy bun­dle for lega­cy browsers (with all of the tran­spiled code and polyfills).</li><li><strong><a href=\"http://webpack.js.org/guides/caching/\" target=\"_blank\" rel=\"noreferrer noopener\">Cache Bust­ing via manifest.json</a>&nbsp;</strong>- this allows us to set a&nbsp;long expiry data for our sta­t­ic assets, while also ensur­ing that they are auto­mat­i­cal­ly cache bust­ed if they change.</li><li><strong><a href=\"http://developers.google.com/speed/docs/insights/OptimizeCSSDelivery\" target=\"_blank\" rel=\"noreferrer noopener\">Crit­i­cal&nbsp;<span>CSS</span></a></strong> — as per the&nbsp;<a href=\"https://nystudio107.com/blog/implementing-critical-css\">Imple­ment­ing Crit­i­cal&nbsp;<span>CSS</span>&nbsp;on your web­site arti­cle</a>, this is some­thing that&nbsp;makes ini­tial page loads sig­nif­i­cant­ly faster.</li><li><strong><a href=\"http://developers.google.com/web/tools/workbox/\" target=\"_blank\" rel=\"noreferrer noopener\">Work­box Ser­vice Work­er</a></strong> — we can lever­age Google’s Work­box project to gen­er­ate a&nbsp;<a href=\"http://developers.google.com/web/fundamentals/primers/service-workers/\" target=\"_blank\" rel=\"noreferrer noopener\">Ser­vice Work­er</a>&nbsp;for us that will know about all of our project’s assets.&nbsp;<span>PWA</span>, here we&nbsp;come!</li><li><strong><a href=\"http://postcss.org/\" target=\"_blank\" rel=\"noreferrer noopener\">PostC­SS</a></strong> — I&nbsp;think of it as the&nbsp;<span></span>​<span>“</span>Babel of&nbsp;<span>CSS</span>”, things like&nbsp;<span>SASS</span>&nbsp;and&nbsp;<span>SCSS</span>&nbsp;are built on it, and it lets you use upcom­ing&nbsp;<span>CSS</span>&nbsp;fea­tures&nbsp;now.</li><li><strong><a href=\"http://images.guide/\" target=\"_blank\" rel=\"noreferrer noopener\">Image Opti­miza­tion</a></strong> — Images are by far the largest thing on most web­pages, so it makes sense to opti­mize them via auto­mat­ed tools like&nbsp;<kbd>mozjpeg</kbd>,&nbsp;<kbd>optipng</kbd>,&nbsp;<kbd>svgo</kbd>, etc.</li><li><strong><a href=\"http://developers.google.com/speed/webp/\" target=\"_blank\" rel=\"noreferrer noopener\">Auto­mat­ic .webp Cre­ation</a></strong> — Chrome, Edge, and Fire­fox all are sup­port­ing&nbsp;<kbd>.webp</kbd>, a&nbsp;for­mat that is more effi­cient than&nbsp;<span>JPEG</span>.</li><li><strong><a href=\"http://vuejs.org/\" target=\"_blank\" rel=\"noreferrer noopener\">Vue­JS</a></strong> — Vue­JS is my fron­tend frame­work of choice. I&nbsp;want to be able to use sin­gle file&nbsp;<kbd>.vue</kbd>&nbsp;com­po­nents as a&nbsp;seam­less part of my devel­op­ment process.</li><li><strong><a href=\"http://tailwindcss.com/docs/what-is-tailwind/\" target=\"_blank\" rel=\"noreferrer noopener\">Tail­wind&nbsp;<span>CSS</span></a></strong> — Tail­wind is a&nbsp;util­i­ty-first&nbsp;<span>CSS</span>&nbsp;that I&nbsp;use for rapid­ly pro­to­typ­ing in local dev, and then run through&nbsp;<a href=\"http://github.com/FullHuman/purgecss\" target=\"_blank\" rel=\"noreferrer noopener\">PurgeC­SS</a>&nbsp;for pro­duc­tion, to reduce the size dramatically.</li></ul><p>Phew, quite an ambi­tious&nbsp;list!</p></div></div><div><div><section><div><figure><div><div data-expand=\"-1\"><picture><source data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/ambitious-feature-list-webpack.jpg.webp 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/ambitious-feature-list-webpack.jpg.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/ambitious-feature-list-webpack.jpg.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/ambitious-feature-list-webpack.jpg.webp 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/ambitious-feature-list-webpack.jpg.webp 368w\" type=\"image/webp\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/ambitious-feature-list-webpack.jpg.webp 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/ambitious-feature-list-webpack.jpg.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/ambitious-feature-list-webpack.jpg.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/ambitious-feature-list-webpack.jpg.webp 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/ambitious-feature-list-webpack.jpg.webp 368w\"><img src=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQEBLAEsAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADAREAAhEBAxEB%2F8QAFgABAQEAAAAAAAAAAAAAAAAABwMG%2F8QAIxAAAgIAAwkAAAAAAAAAAAAAAQIAAwYRIQQSMTQ1YXFywf%2FEABYBAQEBAAAAAAAAAAAAAAAAAAQFBv%2FEAB4RAAMAAQQDAAAAAAAAAAAAAAABAgQDESEyM0Nx%2F9oADAMBAAIRAxEAPwCgrsaoF7LddczwgVkRuMehRlMRh02gK77wJzUdouLVrgNcOHyI79JXzM%2F6l9KK8wdYq5%2Bv0%2Byvh9A2X3R%2F%2F9k%3D\" data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/ambitious-feature-list-webpack.jpg 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/ambitious-feature-list-webpack.jpg 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/ambitious-feature-list-webpack.jpg 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/ambitious-feature-list-webpack.jpg 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/ambitious-feature-list-webpack.jpg 368w\" data-lowsrc=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQEBLAEsAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADAREAAhEBAxEB%2F8QAFgABAQEAAAAAAAAAAAAAAAAABwMG%2F8QAIxAAAgIAAwkAAAAAAAAAAAAAAQIAAwYRIQQSMTQ1YXFywf%2FEABYBAQEBAAAAAAAAAAAAAAAAAAQFBv%2FEAB4RAAMAAQQDAAAAAAAAAAAAAAABAgQDESEyM0Nx%2F9oADAMBAAIRAxEAPwCgrsaoF7LddczwgVkRuMehRlMRh02gK77wJzUdouLVrgNcOHyI79JXzM%2F6l9KK8wdYq5%2Bv0%2Byvh9A2X3R%2F%2F9k%3D\" alt=\"Ambitious Feature List Webpack\" height=\"auto\" width=\"100%\" sizes=\"100vw\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/ambitious-feature-list-webpack.jpg 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/ambitious-feature-list-webpack.jpg 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/ambitious-feature-list-webpack.jpg 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/ambitious-feature-list-webpack.jpg 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/ambitious-feature-list-webpack.jpg 368w\"></picture><img src=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQEBLAEsAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADAREAAhEBAxEB%2F8QAFgABAQEAAAAAAAAAAAAAAAAABwMG%2F8QAIxAAAgIAAwkAAAAAAAAAAAAAAQIAAwYRIQQSMTQ1YXFywf%2FEABYBAQEBAAAAAAAAAAAAAAAAAAQFBv%2FEAB4RAAMAAQQDAAAAAAAAAAAAAAABAgQDESEyM0Nx%2F9oADAMBAAIRAxEAPwCgrsaoF7LddczwgVkRuMehRlMRh02gK77wJzUdouLVrgNcOHyI79JXzM%2F6l9KK8wdYq5%2Bv0%2Byvh9A2X3R%2F%2F9k%3D\"></div></div></figure></div></section></div></div><div><div><p>There’s more too, like the auto­mat­ic ugli­fi­ca­tion of JavaScript, mini­fi­ca­tion of&nbsp;<span>CSS</span>, and oth­er stan­dard things we’d expect from a&nbsp;fron­tend build system.</p><p>I also want it to work with a&nbsp;devel­op­ment team that may use dis­parate tools for their local dev envi­ron­ment, and to have the con­fig be easy to main­tain and reuse from project to project.</p></div></div><div><div><blockquote>The importance of maintainability and reusability can’t be understated</blockquote></div></div><div><div><p>Your stack of fron­tend frameworks/​technologies&nbsp;may look dif­fer­ent from mine, but the prin­ci­ples applied will be the same. So read on, regard­less of what you&nbsp;use!</p></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/an-annotated-webpack-4-config-for-frontend-web-development#project-tree-organization\"><i></i><span>LINK</span></a></span>PROJECT TREE &amp; ORGANIZATION</h3><p>To give you an overview of what the set­up looks like, here’s a&nbsp;bare bones project tree:</p></div></div><div><div><section><div><pre><code>├── example.env\n├── package.json\n├── postcss.config.js\n├── src\n│   ├── css\n│   │   ├── app.pcss\n│   │   ├── components\n│   │   │   ├── global.pcss\n│   │   │   ├── typography.pcss\n│   │   │   └── webfonts.pcss\n│   │   ├── pages\n│   │   │   └── homepage.pcss\n│   │   └── vendor.pcss\n│   ├── fonts\n│   ├── img\n│   │   └── favicon-src.png\n│   ├── js\n│   │   ├── app.js\n│   │   └── workbox-catch-handler.js\n│   └── vue\n│       └── Confetti.vue\n├── tailwind.config.js\n├── templates\n├── webpack.common.js\n├── webpack.dev.js\n├── webpack.prod.js\n├── webpack.settings.js\n└── yarn.lock</code></pre><aside><h5><i></i>&nbsp;Bare bones project tree</h5></aside></div></section></div></div><div><div><p>For the com­plete source code for every­thing pre­sent­ed here, check out the&nbsp;<strong><a href=\"http://github.com/nystudio107/annotated-webpack-4-config\" target=\"_blank\" rel=\"noreferrer noopener\">anno­tat­ed-web­pack-<span>4</span>-con­fig</a></strong>&nbsp;github repo.</p></div></div><div><div><p>So in terms of the core con­fig files,&nbsp;we have:</p><ul><li><kbd><strong>.env</strong></kbd> — envi­ron­men­tal-spe­cif­ic set­tings for the&nbsp;<kbd>webpack-dev-server</kbd>; this is&nbsp;<em>nev­er</em>&nbsp;checked into&nbsp;git</li><li><kbd><strong>webpack.settings.js</strong></kbd> — a&nbsp;JSON-ish set­tings file, the only file we need to edit from project to project</li><li><kbd><strong>webpack.common.js</strong></kbd> — com­mon set­tings for both types of builds</li><li><kbd><strong>webpack.dev.js</strong></kbd> — set­tings for local devel­op­ment builds</li><li><kbd><strong>webpack.prod.js</strong></kbd> — set­tings for pro­duc­tion builds</li></ul><p>Here’s a&nbsp;dia­gram of how it all fits together:</p></div></div><div><div><section><div><figure><div><div><picture><source data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x1315_crop_center-center_100_line/webpack-config-text-solid-sm.png.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x1018_crop_center-center_100_line/webpack-config-text-solid-sm.png.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x763_crop_center-center_100_line/webpack-config-text-solid-sm.png.webp 576w\" type=\"image/webp\"><img src=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQAAAQABAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAVABADASIAAhEBAxEB%2F8QAGAABAAMBAAAAAAAAAAAAAAAAAAMEBQb%2FxAAlEAABAwMDAwUAAAAAAAAAAAABAgMEAAUREyFREhWBMTNBQ9H%2FxAAWAQEBAQAAAAAAAAAAAAAAAAACAwT%2FxAAeEQABAwQDAAAAAAAAAAAAAAABAAIREhMhQQMxQv%2FaAAwDAQACEQMRAD8A7C7SmYrbeuoJ6lYGQdz4paZTMptzQUFdKsHAOx81i3efEu6mo6FutrSvYlvPrtzS0T4lpU9HUt1xal7kN8bc0bIqr2jd86U7bI7t0acbAX8Mj9qq6T3BY04%2FuH6RzSlV5sRC3sY0nIHS%2F9k%3D\" data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x1315_crop_center-center_100_line/webpack-config-text-solid-sm.png 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x1018_crop_center-center_100_line/webpack-config-text-solid-sm.png 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x763_crop_center-center_100_line/webpack-config-text-solid-sm.png 576w\" data-lowsrc=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQAAAQABAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAVABADASIAAhEBAxEB%2F8QAGAABAAMBAAAAAAAAAAAAAAAAAAMEBQb%2FxAAlEAABAwMDAwUAAAAAAAAAAAABAgMEAAUREyFREhWBMTNBQ9H%2FxAAWAQEBAQAAAAAAAAAAAAAAAAACAwT%2FxAAeEQABAwQDAAAAAAAAAAAAAAABAAIREhMhQQMxQv%2FaAAwDAQACEQMRAD8A7C7SmYrbeuoJ6lYGQdz4paZTMptzQUFdKsHAOx81i3efEu6mo6FutrSvYlvPrtzS0T4lpU9HUt1xal7kN8bc0bIqr2jd86U7bI7t0acbAX8Mj9qq6T3BY04%2FuH6RzSlV5sRC3sY0nIHS%2F9k%3D\" alt=\"Webpack Config Text Solid Sm\" height=\"auto\" width=\"744\"></picture></div></div></figure></div></section></div></div><div><div><p>The goal is that you need to edit only what is in the gold col­ored round­ed-rec­tan­gles (<kbd>.env</kbd><span>&amp;</span>&nbsp;<kbd>webpack.settings.js</kbd>) from project to project.</p><p>Sep­a­rat­ing things out in this way makes work­ing with the con­fig files quite a&nbsp;bit eas­i­er. Even if you do end up chang­ing the var­i­ous web­pack con­fig files from what I’ve pre­sent­ed here, keep­ing with this method­ol­o­gy will help you main­tain them long-term.</p><p>Don’t wor­ry, we’ll get into each file in detail later.<br></p></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/an-annotated-webpack-4-config-for-frontend-web-development#annotated-package-json\"><i></i><span>LINK</span></a></span>ANNOTATED PACKAGE.JSON</h3><p>Let’s start by break­ing down our&nbsp;<kbd>package.json</kbd>&nbsp;:</p></div></div><div><div><section><div><pre><code><span>{</span>\n    <span>\"name\"</span><span>:</span> <span>\"example-project\"</span><span>,</span>\n    <span>\"version\"</span><span>:</span> <span>\"1.0.0\"</span><span>,</span>\n    <span>\"description\"</span><span>:</span> <span>\"Example Project brand website\"</span><span>,</span>\n    <span>\"keywords\"</span><span>:</span> <span>[</span>\n        <span>\"Example\"</span><span>,</span>\n        <span>\"Keywords\"</span>\n    <span>]</span><span>,</span>\n    <span>\"homepage\"</span><span>:</span> <span>\"https://github.com/example-developer/example-project\"</span><span>,</span>\n    <span>\"bugs\"</span><span>:</span> <span>{</span>\n        <span>\"email\"</span><span>:</span> <span>\"someone@example-developer.com\"</span><span>,</span>\n        <span>\"url\"</span><span>:</span> <span>\"https://github.com/example-developer/example-project/issues\"</span>\n    <span>}</span><span>,</span>\n    <span>\"license\"</span><span>:</span> <span>\"SEE LICENSE IN LICENSE.md\"</span><span>,</span>\n    <span>\"author\"</span><span>:</span> <span>{</span>\n        <span>\"name\"</span><span>:</span> <span>\"Example Developer\"</span><span>,</span>\n        <span>\"email\"</span><span>:</span> <span>\"someone@example-developer.com\"</span><span>,</span>\n        <span>\"url\"</span><span>:</span> <span>\"https://example-developer.com\"</span>\n    <span>}</span><span>,</span>\n    <span>\"browser\"</span><span>:</span> <span>\"/web/index.php\"</span><span>,</span>\n    <span>\"repository\"</span><span>:</span> <span>{</span>\n        <span>\"type\"</span><span>:</span> <span>\"git\"</span><span>,</span>\n        <span>\"url\"</span><span>:</span> <span>\"git+https://github.com/example-developer/example-project.git\"</span>\n    <span>}</span><span>,</span>\n    <span>\"private\"</span><span>:</span> <span>true</span><span>,</span></code></pre><aside><h5><i></i>&nbsp;package.json meta information</h5></aside></div></section></div></div><div><div><p>Noth­ing par­tic­u­lar­ly inter­est­ing here, just meta infor­ma­tion for our web­site as out­lined in the&nbsp;<a href=\"http://docs.npmjs.com/files/package.json\" target=\"_blank\" rel=\"noreferrer noopener\">package.json spec­i­fi­ca­tion</a>.</p></div></div><div><div><section><div><pre><code><span>\"scripts\"</span><span>:</span> <span>{</span>\n        <span>\"dev\"</span><span>:</span> <span>\"webpack-dev-server --config webpack.dev.js\"</span><span>,</span>\n        <span>\"build\"</span><span>:</span> <span>\"webpack --config webpack.prod.js --progress --hide-modules\"</span>\n    <span>}</span><span>,</span></code></pre><aside><h5><i></i>&nbsp;package.json scripts</h5></aside></div></section></div></div><div><div><p>These are the scripts that rep­re­sent the two major build steps we have for our project:</p><ul><li><strong>dev</strong> — used when­ev­er we’re work­ing on the project, it spins up the&nbsp;<kbd>webpack-dev-server</kbd>&nbsp;to allow for Hot Mod­ule Replace­ment (<span>HMR</span>), in mem­o­ry com­pi­la­tion, and oth­er niceties.</li><li><strong>build</strong> — used when we do a&nbsp;pro­duc­tion deploy­ment,&nbsp;it does all of the fan­cy and time con­sum­ing things like Crit­i­cal&nbsp;<span>CSS</span>, ugli­fi­ca­tion of JavaScript, etc. that need to be done for pro­duc­tion deployment.</li></ul><p>To run them, we just use the&nbsp;<span>CLI</span>&nbsp;<em>inside of our devel­op­ment envi­ron­ment</em>&nbsp;to do&nbsp;<kbd>yarn dev</kbd>&nbsp;or&nbsp;<kbd>yarn build</kbd>&nbsp;if we’re using&nbsp;<a href=\"http://yarnpkg.com/\" target=\"_blank\" rel=\"noreferrer noopener\">yarn</a>, and&nbsp;<kbd>npm run dev</kbd>&nbsp;or&nbsp;<kbd>npm run build</kbd>&nbsp;if we’re using&nbsp;<a href=\"http://www.npmjs.com/\" target=\"_blank\" rel=\"noreferrer noopener\">npm</a>.&nbsp;These are the only two com­mands you’ll need to&nbsp;use.</p><p>Notice that via the&nbsp;<kbd>--config</kbd>&nbsp;flag, we’re also pass­ing in&nbsp;<a href=\"http://webpack.js.org/guides/production/\" target=\"_blank\" rel=\"noreferrer noopener\">sep­a­rate con­fig files</a>. This lets us break down our web­pack con­fig into sep­a­rate log­i­cal files, because we’re going to be doing things very dif­fer­ent­ly for devel­op­ment builds com­pared to pro­duc­tion builds.</p></div></div><div><div><p>Next up we have our&nbsp;<strong>browser­slist</strong>:<br></p></div></div><div><div><section><div><pre><code><span>\"browserslist\"</span><span>:</span> <span>{</span>\n        <span>\"production\"</span><span>:</span> <span>[</span>\n            <span>\"&gt; 1%\"</span><span>,</span>\n            <span>\"last 2 versions\"</span><span>,</span>\n            <span>\"Firefox ESR\"</span>\n        <span>]</span><span>,</span>\n        <span>\"legacyBrowsers\"</span><span>:</span> <span>[</span>\n            <span>\"&gt; 1%\"</span><span>,</span>\n            <span>\"last 2 versions\"</span><span>,</span>\n            <span>\"Firefox ESR\"</span>\n        <span>]</span><span>,</span>\n        <span>\"modernBrowsers\"</span><span>:</span> <span>[</span>\n            <span>\"last 2 Chrome versions\"</span><span>,</span>\n            <span>\"not Chrome &lt; 60\"</span><span>,</span>\n            <span>\"last 2 Safari versions\"</span><span>,</span>\n            <span>\"not Safari &lt; 10.1\"</span><span>,</span>\n            <span>\"last 2 iOS versions\"</span><span>,</span>\n            <span>\"not iOS &lt; 10.3\"</span><span>,</span>\n            <span>\"last 2 Firefox versions\"</span><span>,</span>\n            <span>\"not Firefox &lt; 54\"</span><span>,</span>\n            <span>\"last 2 Edge versions\"</span><span>,</span>\n            <span>\"not Edge &lt; 15\"</span>\n        <span>]</span>\n    <span>}</span><span>,</span></code></pre><aside><h5><i></i>&nbsp;package.json browserslist</h5></aside></div></section></div></div><div><div><p>This is a&nbsp;<a href=\"http://github.com/browserslist/browserslist\" target=\"_blank\" rel=\"noreferrer noopener\">browser­slist</a>&nbsp;that tar­gets spe­cif­ic browsers based on human-read­able con­figs. The&nbsp;<a href=\"http://github.com/postcss/autoprefixer\" target=\"_blank\" rel=\"noreferrer noopener\">PostC­SS auto­pre­fix­er</a>&nbsp;defaults to using our&nbsp;<kbd>production</kbd>&nbsp;set­tings. We pass in the&nbsp;<kbd>legacyBrowsers</kbd>&nbsp;and&nbsp;<kbd>modernBrowsers</kbd>&nbsp;to Babel to han­dle build­ing both lega­cy and mod­ern JavaScript bun­dles. More on that&nbsp;later!</p><p>Next up we have our&nbsp;<strong>devDe­pen­den­cies</strong>, which are all of the npm pack­ages required for our build system:<br></p></div></div><div><div><section><div><pre><code><span>\"devDependencies\"</span><span>:</span> <span>{</span>\n        <span>\"@babel/core\"</span><span>:</span> <span>\"^7.1.0\"</span><span>,</span>\n        <span>\"@babel/plugin-syntax-dynamic-import\"</span><span>:</span> <span>\"^7.0.0\"</span><span>,</span>\n        <span>\"@babel/plugin-transform-runtime\"</span><span>:</span> <span>\"^7.1.0\"</span><span>,</span>\n        <span>\"@babel/preset-env\"</span><span>:</span> <span>\"^7.1.0\"</span><span>,</span>\n        <span>\"@babel/register\"</span><span>:</span> <span>\"^7.0.0\"</span><span>,</span>\n        <span>\"@babel/runtime\"</span><span>:</span> <span>\"^7.0.0\"</span><span>,</span>\n        <span>\"autoprefixer\"</span><span>:</span> <span>\"^9.1.5\"</span><span>,</span>\n        <span>\"babel-loader\"</span><span>:</span> <span>\"^8.0.2\"</span><span>,</span>\n        <span>\"clean-webpack-plugin\"</span><span>:</span> <span>\"^0.1.19\"</span><span>,</span>\n        <span>\"copy-webpack-plugin\"</span><span>:</span> <span>\"^4.5.2\"</span><span>,</span>\n        <span>\"create-symlink-webpack-plugin\"</span><span>:</span> <span>\"^1.0.0\"</span><span>,</span>\n        <span>\"critical\"</span><span>:</span> <span>\"^1.3.4\"</span><span>,</span>\n        <span>\"critical-css-webpack-plugin\"</span><span>:</span> <span>\"^0.2.0\"</span><span>,</span>\n        <span>\"css-loader\"</span><span>:</span> <span>\"^1.0.0\"</span><span>,</span>\n        <span>\"cssnano\"</span><span>:</span> <span>\"^4.1.0\"</span><span>,</span>\n        <span>\"dotenv\"</span><span>:</span> <span>\"^6.1.0\"</span><span>,</span>\n        <span>\"file-loader\"</span><span>:</span> <span>\"^2.0.0\"</span><span>,</span>\n        <span>\"git-rev-sync\"</span><span>:</span> <span>\"^1.12.0\"</span><span>,</span>\n        <span>\"glob-all\"</span><span>:</span> <span>\"^3.1.0\"</span><span>,</span>\n        <span>\"html-webpack-plugin\"</span><span>:</span> <span>\"^3.2.0\"</span><span>,</span>\n        <span>\"ignore-loader\"</span><span>:</span> <span>\"^0.1.2\"</span><span>,</span>\n        <span>\"imagemin\"</span><span>:</span> <span>\"^6.0.0\"</span><span>,</span>\n        <span>\"imagemin-gifsicle\"</span><span>:</span> <span>\"^5.2.0\"</span><span>,</span>\n        <span>\"imagemin-mozjpeg\"</span><span>:</span> <span>\"^7.0.0\"</span><span>,</span>\n        <span>\"imagemin-optipng\"</span><span>:</span> <span>\"^5.2.1\"</span><span>,</span>\n        <span>\"imagemin-svgo\"</span><span>:</span> <span>\"^7.0.0\"</span><span>,</span>\n        <span>\"imagemin-webp\"</span><span>:</span> <span>\"^4.1.0\"</span><span>,</span>\n        <span>\"imagemin-webp-webpack-plugin\"</span><span>:</span> <span>\"^1.0.2\"</span><span>,</span>\n        <span>\"img-loader\"</span><span>:</span> <span>\"^3.0.1\"</span><span>,</span>\n        <span>\"mini-css-extract-plugin\"</span><span>:</span> <span>\"^0.4.3\"</span><span>,</span>\n        <span>\"moment\"</span><span>:</span> <span>\"^2.22.2\"</span><span>,</span>\n        <span>\"optimize-css-assets-webpack-plugin\"</span><span>:</span> <span>\"^5.0.1\"</span><span>,</span>\n        <span>\"postcss\"</span><span>:</span> <span>\"^7.0.2\"</span><span>,</span>\n        <span>\"postcss-extend\"</span><span>:</span> <span>\"^1.0.5\"</span><span>,</span>\n        <span>\"postcss-hexrgba\"</span><span>:</span> <span>\"^1.0.1\"</span><span>,</span>\n        <span>\"postcss-import\"</span><span>:</span> <span>\"^12.0.0\"</span><span>,</span>\n        <span>\"postcss-loader\"</span><span>:</span> <span>\"^3.0.0\"</span><span>,</span>\n        <span>\"postcss-nested\"</span><span>:</span> <span>\"^4.1.0\"</span><span>,</span>\n        <span>\"postcss-nested-ancestors\"</span><span>:</span> <span>\"^2.0.0\"</span><span>,</span>\n        <span>\"postcss-simple-vars\"</span><span>:</span> <span>\"^5.0.1\"</span><span>,</span>\n        <span>\"purgecss-webpack-plugin\"</span><span>:</span> <span>\"^1.3.0\"</span><span>,</span>\n        <span>\"purgecss-whitelister\"</span><span>:</span> <span>\"^2.2.0\"</span><span>,</span>\n        <span>\"resolve-url-loader\"</span><span>:</span> <span>\"^3.0.0\"</span><span>,</span>\n        <span>\"sane\"</span><span>:</span> <span>\"^4.0.1\"</span><span>,</span>\n        <span>\"save-remote-file-webpack-plugin\"</span><span>:</span> <span>\"^1.0.0\"</span><span>,</span>\n        <span>\"style-loader\"</span><span>:</span> <span>\"^0.23.0\"</span><span>,</span>\n        <span>\"symlink-webpack-plugin\"</span><span>:</span> <span>\"^0.0.4\"</span><span>,</span>\n        <span>\"terser-webpack-plugin\"</span><span>:</span> <span>\"^1.1.0\"</span><span>,</span>\n        <span>\"vue-loader\"</span><span>:</span> <span>\"^15.4.2\"</span><span>,</span>\n        <span>\"vue-style-loader\"</span><span>:</span> <span>\"^4.1.2\"</span><span>,</span>\n        <span>\"vue-template-compiler\"</span><span>:</span> <span>\"^2.5.17\"</span><span>,</span>\n        <span>\"webapp-webpack-plugin\"</span><span>:</span> <span>\"https://github.com/brunocodutra/webapp-webpack-plugin.git\"</span><span>,</span>\n        <span>\"webpack\"</span><span>:</span> <span>\"^4.19.1\"</span><span>,</span>\n        <span>\"webpack-bundle-analyzer\"</span><span>:</span> <span>\"^3.0.2\"</span><span>,</span>\n        <span>\"webpack-cli\"</span><span>:</span> <span>\"^3.1.1\"</span><span>,</span>\n        <span>\"webpack-dashboard\"</span><span>:</span> <span>\"^2.0.0\"</span><span>,</span>\n        <span>\"webpack-dev-server\"</span><span>:</span> <span>\"^3.1.9\"</span><span>,</span>\n        <span>\"webpack-manifest-plugin\"</span><span>:</span> <span>\"^2.0.4\"</span><span>,</span>\n        <span>\"webpack-merge\"</span><span>:</span> <span>\"^4.1.4\"</span><span>,</span>\n        <span>\"webpack-notifier\"</span><span>:</span> <span>\"^1.6.0\"</span><span>,</span>\n        <span>\"workbox-webpack-plugin\"</span><span>:</span> <span>\"^3.6.2\"</span>\n    <span>}</span><span>,</span></code></pre><aside><h5><i></i>&nbsp;package.json devDependencies</h5></aside></div></section></div></div><div><div><p>Yep, that’s quite a&nbsp;bit of pack­ages. But our build process&nbsp;<em>does</em>&nbsp;quite a&nbsp;bit.</p><p>And final­ly, we use the&nbsp;<strong>depen­den­cies</strong>&nbsp;for the pack­ages we use on the fron­tend of our website:</p></div></div><div><div><section><div><pre><code><span>\"dependencies\"</span><span>:</span> <span>{</span>\n        <span>\"@babel/polyfill\"</span><span>:</span> <span>\"^7.0.0\"</span><span>,</span>\n        <span>\"axios\"</span><span>:</span> <span>\"^0.18.0\"</span><span>,</span>\n        <span>\"tailwindcss\"</span><span>:</span> <span>\"^0.6.6\"</span><span>,</span>\n        <span>\"vue\"</span><span>:</span> <span>\"^2.5.17\"</span><span>,</span>\n        <span>\"vue-confetti\"</span><span>:</span> <span>\"^0.4.2\"</span>\n    <span>}</span>\n<span>}</span></code></pre><aside><h5><i></i>&nbsp;package.json dependencies</h5></aside></div></section></div></div><div><div><p>Obvi­ous­ly for an actu­al website/​app, there would be more pack­ages in&nbsp;<strong>depen­den­cies</strong>; but we’re focus­ing on the build process.</p></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/an-annotated-webpack-4-config-for-frontend-web-development#annotated-webpack-settings-js\"><i></i><span>LINK</span></a></span>ANNOTATED WEBPACK.SETTINGS.JS</h3><p>I’m also using a&nbsp;sim­i­lar approach I&nbsp;dis­cussed in the&nbsp;<a href=\"https://nystudio107.com/blog/a-better-package-json-for-the-frontend\">A&nbsp;Bet­ter package.json for the Fron­tend arti­cle</a>, which is to&nbsp;cor­don off the con­fig that changes from project to project into a&nbsp;sep­a­rate&nbsp;<kbd>webpack.settings.js</kbd>, and keep the web­pack con­fig itself the&nbsp;same.</p></div></div><div><div><blockquote>The key concept is that the only file we need to edit from project to project is the webpack.settings.js</blockquote></div></div><div><div><p>Since most projects have a&nbsp;very sim­i­lar set of things that need to be done, we can cre­ate a&nbsp;web­pack con­fig that works for a&nbsp;wide vari­ety of projects. We just need to change the data it oper­ates&nbsp;on.</p><p>Thus the sep­a­ra­tion of con­cerns between what is in our&nbsp;<kbd>webpack.settings.js</kbd>&nbsp;file (the data that changes from project to project) and what is in our web­pack con­fig (how that data is manip­u­lat­ed to pro­duce an end result).</p></div></div><div><div><section><div><pre><code><span>// webpack.settings.js - webpack settings config</span>\n\n<span>// node modules</span>\n<span>require</span><span>(</span><span>'dotenv'</span><span>)</span><span>.</span><span>config</span><span>(</span><span>)</span><span>;</span>\n\n<span>// Webpack settings exports</span>\n<span>// noinspection WebpackConfigHighlighting</span>\nmodule<span>.</span>exports <span>=</span> <span>{</span>\n    name<span>:</span> <span>\"Example Project\"</span><span>,</span>\n    copyright<span>:</span> <span>\"Example Company, Inc.\"</span><span>,</span>\n    paths<span>:</span> <span>{</span>\n        src<span>:</span> <span>{</span>\n            base<span>:</span> <span>\"./src/\"</span><span>,</span>\n            css<span>:</span> <span>\"./src/css/\"</span><span>,</span>\n            js<span>:</span> <span>\"./src/js/\"</span>\n        <span>}</span><span>,</span>\n        dist<span>:</span> <span>{</span>\n            base<span>:</span> <span>\"./web/dist/\"</span><span>,</span>\n            clean<span>:</span> <span>[</span>\n                <span>\"./img\"</span><span>,</span>\n                <span>\"./criticalcss\"</span><span>,</span>\n                <span>\"./css\"</span><span>,</span>\n                <span>\"./js\"</span>\n            <span>]</span>\n        <span>}</span><span>,</span>\n        templates<span>:</span> <span>\"./templates/\"</span>\n    <span>}</span><span>,</span>\n    urls<span>:</span> <span>{</span>\n        live<span>:</span> <span>\"https://example.com/\"</span><span>,</span>\n        local<span>:</span> <span>\"http://example.test/\"</span><span>,</span>\n        critical<span>:</span> <span>\"http://example.test/\"</span><span>,</span>\n        publicPath<span>:</span> <span>\"/dist/\"</span>\n    <span>}</span><span>,</span>\n    vars<span>:</span> <span>{</span>\n        cssName<span>:</span> <span>\"styles\"</span>\n    <span>}</span><span>,</span>\n    entries<span>:</span> <span>{</span>\n        <span>\"app\"</span><span>:</span> <span>\"app.js\"</span>\n    <span>}</span><span>,</span>\n    copyWebpackConfig<span>:</span> <span>[</span>\n        <span>{</span>\n            <span>from</span><span>:</span> <span>\"./src/js/workbox-catch-handler.js\"</span><span>,</span>\n            to<span>:</span> <span>\"js/[name].[ext]\"</span>\n        <span>}</span>\n    <span>]</span><span>,</span>\n    criticalCssConfig<span>:</span> <span>{</span>\n        base<span>:</span> <span>\"./web/dist/criticalcss/\"</span><span>,</span>\n        suffix<span>:</span> <span>\"_critical.min.css\"</span><span>,</span>\n        criticalHeight<span>:</span> <span>1200</span><span>,</span>\n        criticalWidth<span>:</span> <span>1200</span><span>,</span>\n        ampPrefix<span>:</span> <span>\"amp_\"</span><span>,</span>\n        ampCriticalHeight<span>:</span> <span>19200</span><span>,</span>\n        ampCriticalWidth<span>:</span> <span>600</span><span>,</span>\n        pages<span>:</span> <span>[</span>\n            <span>{</span>\n                url<span>:</span> <span>\"\"</span><span>,</span>\n                template<span>:</span> <span>\"index\"</span>\n            <span>}</span>\n        <span>]</span>\n    <span>}</span><span>,</span>\n    devServerConfig<span>:</span> <span>{</span>\n        <span>public</span><span>:</span> <span>(</span><span>)</span> <span>=&gt;</span> process<span>.</span>env<span>.</span>DEVSERVER_PUBLIC <span>||</span> <span>\"http://localhost:8080\"</span><span>,</span>\n        host<span>:</span> <span>(</span><span>)</span> <span>=&gt;</span> process<span>.</span>env<span>.</span>DEVSERVER_HOST <span>||</span> <span>\"localhost\"</span><span>,</span>\n        poll<span>:</span> <span>(</span><span>)</span> <span>=&gt;</span> process<span>.</span>env<span>.</span>DEVSERVER_POLL <span>||</span> <span>false</span><span>,</span>\n        port<span>:</span> <span>(</span><span>)</span> <span>=&gt;</span> process<span>.</span>env<span>.</span>DEVSERVER_PORT <span>||</span> <span>8080</span><span>,</span>\n        https<span>:</span> <span>(</span><span>)</span> <span>=&gt;</span> process<span>.</span>env<span>.</span>DEVSERVER_HTTPS <span>||</span> <span>false</span><span>,</span>\n    <span>}</span><span>,</span>\n    manifestConfig<span>:</span> <span>{</span>\n        basePath<span>:</span> <span>\"\"</span>\n    <span>}</span><span>,</span>\n    purgeCssConfig<span>:</span> <span>{</span>\n        paths<span>:</span> <span>[</span>\n            <span>\"./templates/**/*.{twig,html}\"</span><span>,</span>\n            <span>\"./src/vue/**/*.{vue,html}\"</span>\n        <span>]</span><span>,</span>\n        whitelist<span>:</span> <span>[</span>\n            <span>\"./src/css/components/**/*.{css,pcss}\"</span>\n        <span>]</span><span>,</span>\n        whitelistPatterns<span>:</span> <span>[</span><span>]</span><span>,</span>\n        extensions<span>:</span> <span>[</span>\n            <span>\"html\"</span><span>,</span>\n            <span>\"js\"</span><span>,</span>\n            <span>\"twig\"</span><span>,</span>\n            <span>\"vue\"</span>\n        <span>]</span>\n    <span>}</span><span>,</span>\n    saveRemoteFileConfig<span>:</span> <span>[</span>\n        <span>{</span>\n            url<span>:</span> <span>\"https://www.google-analytics.com/analytics.js\"</span><span>,</span>\n            filepath<span>:</span> <span>\"js/analytics.js\"</span>\n        <span>}</span>\n    <span>]</span><span>,</span>\n    createSymlinkConfig<span>:</span> <span>[</span>\n        <span>{</span>\n            origin<span>:</span> <span>\"img/favicons/favicon.ico\"</span><span>,</span>\n            symlink<span>:</span> <span>\"../favicon.ico\"</span>\n        <span>}</span>\n    <span>]</span><span>,</span>\n    webappConfig<span>:</span> <span>{</span>\n        logo<span>:</span> <span>\"./src/img/favicon-src.png\"</span><span>,</span>\n        prefix<span>:</span> <span>\"img/favicons/\"</span>\n    <span>}</span><span>,</span>\n    workboxConfig<span>:</span> <span>{</span>\n        swDest<span>:</span> <span>\"../sw.js\"</span><span>,</span>\n        precacheManifestFilename<span>:</span> <span>\"js/precache-manifest.[manifestHash].js\"</span><span>,</span>\n        importScripts<span>:</span> <span>[</span>\n            <span>\"/dist/workbox-catch-handler.js\"</span>\n        <span>]</span><span>,</span>\n        exclude<span>:</span> <span>[</span>\n            <span>/\\.(png|jpe?g|gif|svg|webp)$/i</span><span>,</span>\n            <span>/\\.map$/</span><span>,</span>\n            <span>/^manifest.*\\\\.js(?:on)?$/</span><span>,</span>\n        <span>]</span><span>,</span>\n        globDirectory<span>:</span> <span>\"./web/\"</span><span>,</span>\n        globPatterns<span>:</span> <span>[</span>\n            <span>\"offline.html\"</span><span>,</span>\n            <span>\"offline.svg\"</span>\n        <span>]</span><span>,</span>\n        offlineGoogleAnalytics<span>:</span> <span>true</span><span>,</span>\n        runtimeCaching<span>:</span> <span>[</span>\n            <span>{</span>\n                urlPattern<span>:</span> <span>/\\.(?:png|jpg|jpeg|svg|webp)$/</span><span>,</span>\n                handler<span>:</span> <span>\"cacheFirst\"</span><span>,</span>\n                options<span>:</span> <span>{</span>\n                    cacheName<span>:</span> <span>\"images\"</span><span>,</span>\n                    expiration<span>:</span> <span>{</span>\n                        maxEntries<span>:</span> <span>20</span>\n                    <span>}</span>\n                <span>}</span>\n            <span>}</span>\n        <span>]</span>\n    <span>}</span>\n<span>}</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.settings.js</h5></aside></div></section></div></div><div><div><p>We’ll cov­er what all of these things are down in the web­pack con­fig sec­tions. The impor­tant thing to note here is that we’ve tak­en things that change from project to project, and bro­ken them out of our web­pack con­fig, and into a&nbsp;sep­a­rate&nbsp;<kbd>webpack.settings.js</kbd>&nbsp;file.</p><p>This means we can just define what’s dif­fer­ent in each project in our&nbsp;<kbd>webpack.settings.js</kbd>&nbsp;file, and not have to be wran­gling with the web­pack con­fig itself.</p><p>Even though the&nbsp;<kbd>webpack.settings.js</kbd>&nbsp;file is just JavaScript, I&nbsp;tried to keep it as JSON-ish as pos­si­ble, so we’re just chang­ing sim­ple set­tings in it. I&nbsp;didn’t use&nbsp;<span>JSON</span>&nbsp;as a&nbsp;file for­mat for flex­i­bil­i­ty, and also to allow for com­ments to be&nbsp;added.</p></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/an-annotated-webpack-4-config-for-frontend-web-development#common-conventions-for-webpack-configs\"><i></i><span>LINK</span></a></span>COMMON CONVENTIONS FOR WEBPACK CONFIGS</h3><p>I’ve adopt­ed a&nbsp;few con­ven­tions for all of the web­pack con­fig files (<kbd>webpack.common.js</kbd>,&nbsp;<kbd>webpack.dev.js</kbd>,&nbsp;<span>&amp;</span>&nbsp;<kbd>webpack.prod.js</kbd>) to make things more consistent.</p><p>Each con­fig file has two inter­nal configs:</p><ul><li><strong>lega­cy­Con­fig</strong> — the con­fig that applies to the lega­cy&nbsp;<span>ES<span>5</span></span>&nbsp;build</li><li><strong>mod­ern­Con­fig</strong> — the con­fig that applies to the mod­ern&nbsp;<span>ES<span>2015</span></span>+ build</li></ul><p>We do it this way because we have sep­a­rate con­fig­u­ra­tions to cre­ate the&nbsp;lega­cy and mod­ern builds. This keeps them log­i­cal­ly sep­a­rate. The&nbsp;<kbd>webpack.common.js</kbd>&nbsp;also has a&nbsp;<strong>baseC­on­fig</strong>; this is pure­ly organizational.</p><p>Think of it like Object Ori­ent­ed Pro­gram­ming, where the var­i­ous con­figs inher­it from each oth­er, with the&nbsp;<strong>baseC­on­fig</strong>&nbsp;being the root object.<br></p><p>Anoth­er con­ven­tion that I’ve adopt­ed to keep the con­fig­u­ra­tion clean and read­able is to have&nbsp;<kbd>configure()</kbd>&nbsp;func­tions for the var­i­ous web­pack plu­g­ins and oth­er pieces of web­pack that need con­fig­ur­ing, rather than putting it all inline.</p><p>I did this because some data com­ing from the&nbsp;<kbd>webpack.settings.js</kbd>&nbsp;needs to be trans­formed before it can be used by web­pack, and because of the dual legacy/​modern builds, we need to return a&nbsp;dif­fer­ent con­fig depend­ing on the type of&nbsp;build.</p><p>It also makes the con­fig files a&nbsp;bit more read­able as&nbsp;well.</p><p>As a&nbsp;gen­er­al web­pack con­cept, under­stand that&nbsp;web­pack itself knows only how to load&nbsp;JavaScript and&nbsp;<span>JSON</span>. To load any­thing else, we need to to use a&nbsp;<a href=\"http://webpack.js.org/concepts/#loaders\" target=\"_blank\" rel=\"noreferrer noopener\">loader</a>. We’ll be using a&nbsp;num­ber of dif­fer­ent load­ers in our web­pack config.<br></p></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/an-annotated-webpack-4-config-for-frontend-web-development#annotated-webpack-common-js\"><i></i><span>LINK</span></a></span>ANNOTATED WEBPACK.COMMON.JS</h3><p>Now let’s have a&nbsp;look at our&nbsp;<kbd>webpack.common.js</kbd>&nbsp;con­fig file that has all of the set­tings that are shared by both the&nbsp;<kbd>dev</kbd>&nbsp;and&nbsp;<kbd>prod</kbd>&nbsp;build&nbsp;types.</p></div></div><div><div><section><div><pre><code><span>// webpack.common.js - common webpack config</span>\n<span>const</span> LEGACY_CONFIG <span>=</span> <span>'legacy'</span><span>;</span>\n<span>const</span> MODERN_CONFIG <span>=</span> <span>'modern'</span><span>;</span>\n\n<span>// node modules</span>\n<span>const</span> path <span>=</span> <span>require</span><span>(</span><span>'path'</span><span>)</span><span>;</span>\n<span>const</span> merge <span>=</span> <span>require</span><span>(</span><span>'webpack-merge'</span><span>)</span><span>;</span>\n\n<span>// webpack plugins</span>\n<span>const</span> CopyWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>'copy-webpack-plugin'</span><span>)</span><span>;</span>\n<span>const</span> ManifestPlugin <span>=</span> <span>require</span><span>(</span><span>'webpack-manifest-plugin'</span><span>)</span><span>;</span>\n<span>const</span> VueLoaderPlugin <span>=</span> <span>require</span><span>(</span><span>'vue-loader/lib/plugin'</span><span>)</span><span>;</span>\n<span>const</span> WebpackNotifierPlugin <span>=</span> <span>require</span><span>(</span><span>'webpack-notifier'</span><span>)</span><span>;</span>\n\n<span>// config files</span>\n<span>const</span> pkg <span>=</span> <span>require</span><span>(</span><span>'./package.json'</span><span>)</span><span>;</span>\n<span>const</span> settings <span>=</span> <span>require</span><span>(</span><span>'./webpack.settings.js'</span><span>)</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.common.js preamble</h5></aside></div></section></div></div><div><div><p>In the pre­am­ble we pull in the Node pack­ages we need, and the web­pack plu­g­ins we use. We then import our&nbsp;<kbd>webpack.settings.js</kbd>&nbsp;as&nbsp;<kbd>settings</kbd>&nbsp;so we can access the set­tings there, and also&nbsp;import our&nbsp;<kbd>package.json</kbd>&nbsp;as&nbsp;<kbd>pkg</kbd>&nbsp;to access a&nbsp;few set­tings there as&nbsp;well.</p></div></div><div><div><p><strong><span>CON­FIG­U­RA­TION</span>&nbsp;<span>FUNCTIONS</span></strong></p><p>Here’s what the&nbsp;<kbd>configureBabelLoader()</kbd>&nbsp;looks like:</p></div></div><div><div><section><div><pre><code><span>// Configure Babel loader</span>\n<span>const</span> <span>configureBabelLoader</span> <span>=</span> <span>(</span>browserList<span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>return</span> <span>{</span>\n        test<span>:</span> <span>/\\.js$/</span><span>,</span>\n        exclude<span>:</span> <span>/node_modules/</span><span>,</span>\n        use<span>:</span> <span>{</span>\n            loader<span>:</span> <span>'babel-loader'</span><span>,</span>\n            options<span>:</span> <span>{</span>\n                presets<span>:</span> <span>[</span>\n                    <span>[</span>\n                        <span>'@babel/preset-env'</span><span>,</span> <span>{</span>\n                        modules<span>:</span> <span>false</span><span>,</span>\n                        useBuiltIns<span>:</span> <span>'entry'</span><span>,</span>\n                        targets<span>:</span> <span>{</span>\n                            browsers<span>:</span> browserList<span>,</span>\n                        <span>}</span><span>,</span>\n                    <span>}</span>\n                    <span>]</span><span>,</span>\n                <span>]</span><span>,</span>\n                plugins<span>:</span> <span>[</span>\n                    <span>'@babel/plugin-syntax-dynamic-import'</span><span>,</span>\n                    <span>[</span>\n                        <span>\"@babel/plugin-transform-runtime\"</span><span>,</span> <span>{</span>\n                        <span>\"regenerator\"</span><span>:</span> <span>true</span>\n                    <span>}</span>\n                    <span>]</span>\n                <span>]</span><span>,</span>\n            <span>}</span><span>,</span>\n        <span>}</span><span>,</span>\n    <span>}</span><span>;</span>\n<span>}</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.common.js configureBabelLoader</h5></aside></div></section></div></div><div><div><p>The&nbsp;<kbd>configureBabelLoader()</kbd>&nbsp;func­tion con­fig­ures the&nbsp;<kbd>babel-loader</kbd>&nbsp;to han­dle the load­ing of all files that end in&nbsp;<kbd>.js</kbd>. It uses&nbsp;<a href=\"http://babeljs.io/docs/en/babel-preset-env\" target=\"_blank\" rel=\"noreferrer noopener\">@babel/preset-env</a>&nbsp;instead of&nbsp;a&nbsp;<kbd>.babelrc</kbd>&nbsp;file so we can keep every­thing com­part­men­tal­ized in our web­pack config.</p><p>Babel can com­pile mod­ern&nbsp;<span>ES<span>2015</span></span>+ JavaScript (and many oth­er lan­guages like Type­Script or Cof­fee­Script)&nbsp;down to JavaScript that tar­gets a&nbsp;spe­cif­ic set of browsers or stan­dards. We pass in the&nbsp;<kbd>browserList</kbd>&nbsp;as a&nbsp;para­me­ter so that we can build&nbsp;<a href=\"http://philipwalton.com/articles/deploying-es2015-code-in-production-today/\" target=\"_blank\" rel=\"noreferrer noopener\">both mod­ern&nbsp;<span>ES<span>2015</span></span>+&nbsp;mod­ules and lega­cy&nbsp;<span>ES<span>5</span></span>&nbsp;JavaScript</a>&nbsp;with poly­fills for lega­cy browsers.</p><p>In our&nbsp;<span>HTML</span>, we just do some­thing like&nbsp;this:</p></div></div><div><div><section><div><pre><code><span>&lt;!-- Browsers with ES module support load this file. --&gt;</span>\n<span><span><span>&lt;</span>script</span> <span>type</span><span><span>=</span><span>\"</span>module<span>\"</span></span> <span>src</span><span><span>=</span><span>\"</span>main.js<span>\"</span></span><span>&gt;</span></span><span></span><span><span><span>&lt;/</span>script</span><span>&gt;</span></span>\n\n<span>&lt;!-- Older browsers load this file (and module-supporting --&gt;</span>\n<span>&lt;!-- browsers know *not* to load this file). --&gt;</span>\n<span><span><span>&lt;</span>script</span> <span>nomodule</span> <span>src</span><span><span>=</span><span>\"</span>main-legacy.js<span>\"</span></span><span>&gt;</span></span><span></span><span><span><span>&lt;/</span>script</span><span>&gt;</span></span></code></pre><aside><h5><i></i>&nbsp;Modern/legacy JavaScript loading</h5></aside></div></section></div></div><div><div><p>No poly­fills, no fuss. Old browsers ignore the&nbsp;<kbd>type=\"module\"</kbd>&nbsp;script, and get the&nbsp;<kbd>main-legacy.js</kbd>. Mod­ern browsers load the&nbsp;<kbd>main.js</kbd>, and ignore the&nbsp;<kbd>nomodule</kbd>. It’s bril­liant; I&nbsp;wish I&nbsp;came up with the idea! Lest you think it’s fringe,&nbsp;<a href=\"http://medium.com/the-vue-point/vue-cli-3-0-is-here-c42bebe28fbb\" target=\"_blank\" rel=\"noreferrer noopener\">vue-cli has adopt­ed this strat­e­gy</a>&nbsp;in ver­sion&nbsp;<span>3</span>.</p><p>The&nbsp;<a href=\"http://babeljs.io/docs/en/babel-plugin-syntax-dynamic-import\" target=\"_blank\" rel=\"noreferrer noopener\">@babel/plugin-syntax-dynamic-import</a>&nbsp;plu­g­in is what allows us to do dynam­ic imports even before the&nbsp;<a href=\"http://github.com/tc39/proposal-dynamic-import\" target=\"_blank\" rel=\"noreferrer noopener\">ECMAScript dynam­ic import pro­pos­al</a>&nbsp;is imple­ment­ed by web browsers. This lets us load our JavaScript mod­ules&nbsp;<a href=\"http://webpack.js.org/guides/code-splitting/#dynamic-imports\" target=\"_blank\" rel=\"noreferrer noopener\">asyn­chro­nous­ly, and dynam­i­cal­ly</a>&nbsp;as needed.</p><p>So what does this mean? It means we can do some­thing like&nbsp;this:</p></div></div><div><div><section><div><pre><code><span>// App main</span>\n<span>const</span> main <span>=</span> <span>async</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>// Async load the vue module</span>\n    <span>const</span> Vue <span>=</span> <span>await</span> <span>import</span><span>(</span><span>/* webpackChunkName: \"vue\" */</span> <span>'vue'</span><span>)</span><span>;</span>\n    <span>// Create our vue instance</span>\n    <span>const</span> vm <span>=</span> <span>new</span> <span>Vue<span>.</span>default</span><span>(</span><span>{</span>\n        el<span>:</span> <span>\"#app\"</span><span>,</span>\n        components<span>:</span> <span>{</span>\n            <span>'confetti'</span><span>:</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>import</span><span>(</span><span>/* webpackChunkName: \"confetti\" */</span> <span>'../vue/Confetti.vue'</span><span>)</span><span>,</span>\n        <span>}</span><span>,</span>\n    <span>}</span><span>)</span><span>;</span>\n<span>}</span><span>;</span>\n<span>// Execute async function</span>\n<span>main</span><span>(</span><span>)</span><span>.</span><span>then</span><span>(</span> <span>(</span>value<span>)</span> <span>=&gt;</span> <span>{</span>\n<span>}</span><span>)</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;dynamic import() example</h5></aside></div></section></div></div><div><div><p>This does two pri­ma­ry things:</p><ol><li>Via the&nbsp;<kbd>/* webpackChunkName: \"vue\" */</kbd>&nbsp;com­ment, we’ve told web­pack what we want this dynam­i­cal­ly code split chunk to be&nbsp;named</li><li>Since we’re using&nbsp;<kbd>import()</kbd>&nbsp;in an&nbsp;<kbd>async</kbd>&nbsp;func­tion (“<kbd>main</kbd>”), that func­tion&nbsp;<kbd>await</kbd>s&nbsp;the result of our dynam­i­cal­ly loaded JavaScript import&nbsp;while the rest of our code con­tin­ues on its mer­ry&nbsp;way</li></ol><p>We’ve effec­tive­ly told web­pack how we want our chunks split up through code, rather than via con­fig. And through the mag­ic of&nbsp;<kbd>@babel/plugin-syntax-dynamic-import</kbd>, this JavaScript chunk&nbsp;can be loaded asyn­chro­nous­ly, on demand as needed.</p><p>Notice we did the same thing with our&nbsp;<kbd>.vue</kbd>&nbsp;sin­gle file com­po­nents, too.&nbsp;Nice.</p><p>Instead of using&nbsp;<kbd>await</kbd>, we could also just exe­cute our code after the&nbsp;<kbd>import()</kbd>&nbsp;<a href=\"http://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise\" target=\"_blank\" rel=\"noreferrer noopener\">Promise</a>&nbsp;has returned:</p></div></div><div><div><section><div><pre><code><span>// Async load the vue module</span>\n<span>import</span><span>(</span><span>/* webpackChunkName: \"vue\" */</span> <span>'vue'</span><span>)</span><span>.</span><span>then</span><span>(</span>Vue <span>=&gt;</span> <span>{</span>\n    <span>// Vue has loaded, do something with it</span>\n    <span>// Create our vue instance</span>\n    <span>const</span> vm <span>=</span> <span>new</span> <span>Vue<span>.</span>default</span><span>(</span><span>{</span>\n        el<span>:</span> <span>\"#app\"</span><span>,</span>\n        components<span>:</span> <span>{</span>\n            <span>'confetti'</span><span>:</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>import</span><span>(</span><span>/* webpackChunkName: \"confetti\" */</span> <span>'../vue/Confetti.vue'</span><span>)</span><span>,</span>\n        <span>}</span><span>,</span>\n    <span>}</span><span>)</span><span>;</span>\n<span>}</span><span>)</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;dynamic import() promise example</h5></aside></div></section></div></div><div><div><p>Here instead of using&nbsp;<kbd>await</kbd>&nbsp;with&nbsp;<a href=\"http://webpack.js.org/api/module-methods/#import-\" target=\"_blank\" rel=\"noreferrer noopener\">import()</a>&nbsp;we’re using the Promise, so then we know the dynam­ic import has hap­pened and can hap­pi­ly use&nbsp;<kbd>Vue</kbd>.</p><p>If you’re pay­ing atten­tion, you can see that we’ve effec­tive­ly solved JavaScript depen­den­cies via Promis­es.&nbsp;Nice!</p><p>We can even do fun things like load cer­tain JavaScript chunks only after the user has clicked on some­thing, scrolled to a&nbsp;cer­tain posi­tion, or sat­is­fied some oth­er con­di­tion. Check out the&nbsp;<a href=\"http://webpack.js.org/api/module-methods/#import-\" target=\"_blank\" rel=\"noreferrer noopener\">Mod­ule Meth­ods import()</a>&nbsp;for&nbsp;more.</p><p>If you’re inter­est­ed in learn­ing more about Babel, check out the&nbsp;<a href=\"http://www.thebasement.be/working-with-babel-7-and-webpack/\" target=\"_blank\" rel=\"noreferrer noopener\">Work­ing with Babel&nbsp;<span>7</span>&nbsp;and Web­pack</a>&nbsp;article.</p><p>Next up we have&nbsp;<kbd>configureEntries()</kbd>:</p></div></div><div><div><section><div><pre><code><span>// Configure Entries</span>\n<span>const</span> <span>configureEntries</span> <span>=</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>let</span> entries <span>=</span> <span>{</span><span>}</span><span>;</span>\n    <span>for</span> <span>(</span><span>const</span> <span>[</span>key<span>,</span> value<span>]</span> <span>of</span> Object<span>.</span><span>entries</span><span>(</span>settings<span>.</span>entries<span>)</span><span>)</span> <span>{</span>\n        entries<span>[</span>key<span>]</span> <span>=</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> settings<span>.</span>paths<span>.</span>src<span>.</span>js <span>+</span> value<span>)</span><span>;</span>\n    <span>}</span>\n\n    <span>return</span> entries<span>;</span>\n<span>}</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.common.js configureEntries()</h5></aside></div></section></div></div><div><div><p>Here we pull in the web­pack&nbsp;<a href=\"http://webpack.js.org/concepts/entry-points/\" target=\"_blank\" rel=\"noreferrer noopener\">Entry Points</a>&nbsp;from our&nbsp;<kbd>webpack.settings.js</kbd>&nbsp;via&nbsp;<kbd>settings.entries</kbd>.&nbsp;For a&nbsp;<a href=\"https://medium.com/@pshrmn/demystifying-single-page-applications-3068d0555d46\" target=\"_blank\" rel=\"noreferrer noopener\">Sin­gle Page App</a>(<span>SPA</span>) you’ll have just one entry point. For a&nbsp;more tra­di­tion­al web­site, you may have sev­er­al entry points (per­haps one per page template).</p><p>Either way, because we’ve defined our entry points in our&nbsp;<kbd>webpack.settings.js</kbd>, it’s easy to con­fig­ure them there. An entry point is real­ly just a&nbsp;<kbd>&lt;script src=\"app.js\"&gt;&lt;/script&gt;</kbd>&nbsp;tag that you’ll include in your&nbsp;<span>HTML</span>&nbsp;to boot­strap the JavaScript.</p><p>Since we’re using dynam­i­cal­ly import­ed mod­ules, we typ­i­cal­ly would have only one&nbsp;<kbd>&lt;script&gt;&lt;/script&gt;</kbd>&nbsp;tag on a&nbsp;page; the rest of our JavaScript gets loaded dynam­i­cal­ly as needed.</p><p>Next we have the&nbsp;<kbd>configureFontLoader()</kbd>&nbsp;function:<br></p></div></div><div><div><section><div><pre><code><span>// Configure Font loader</span>\n<span>const</span> <span>configureFontLoader</span> <span>=</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>return</span> <span>{</span>\n        test<span>:</span> <span>/\\.(ttf|eot|woff2?)$/i</span><span>,</span>\n        use<span>:</span> <span>[</span>\n            <span>{</span>\n                loader<span>:</span> <span>'file-loader'</span><span>,</span>\n                options<span>:</span> <span>{</span>\n                    name<span>:</span> <span>'fonts/[name].[ext]'</span>\n                <span>}</span>\n            <span>}</span>\n        <span>]</span>\n    <span>}</span><span>;</span>\n<span>}</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.common.js configureFontLoader()</h5></aside></div></section></div></div><div><div><p>Font load­ing is the same for both&nbsp;<kbd>dev</kbd>&nbsp;and&nbsp;<kbd>prod</kbd>&nbsp;builds, so we include it here. For any local fonts that we’re using, we can tell web­pack to load them in our JavaScript:</p></div></div><div><div><section><div><pre><code><span>import</span> comicsans <span>from</span> <span>'../fonts/ComicSans.woff2'</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;importing fonts</h5></aside></div></section></div></div><div><div><p>Next we have the&nbsp;<kbd>configureManifest()</kbd>&nbsp;function:<br></p></div></div><div><div><section><div><pre><code><span>// Configure Manifest</span>\n<span>const</span> <span>configureManifest</span> <span>=</span> <span>(</span>fileName<span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>return</span> <span>{</span>\n        fileName<span>:</span> fileName<span>,</span>\n        basePath<span>:</span> settings<span>.</span>manifestConfig<span>.</span>basePath<span>,</span>\n        map<span>:</span> <span>(</span>file<span>)</span> <span>=&gt;</span> <span>{</span>\n            file<span>.</span>name <span>=</span> file<span>.</span>name<span>.</span><span>replace</span><span>(</span><span>/(\\.[a-f0-9]{32})(\\..*)$/</span><span>,</span> <span>'$2'</span><span>)</span><span>;</span>\n            <span>return</span> file<span>;</span>\n        <span>}</span><span>,</span>\n    <span>}</span><span>;</span>\n<span>}</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.common.js configureManifest()</h5></aside></div></section></div></div><div><div><p>This con­fig­ures the&nbsp;<a href=\"http://github.com/danethurber/webpack-manifest-plugin\" target=\"_blank\" rel=\"noreferrer noopener\">web­pack-man­i­fest-plu­g­in</a>&nbsp;for file­name-based cache bust­ing. In a&nbsp;nut­shell, web­pack knows about all of the JavaScript,&nbsp;<span>CSS</span>, and oth­er resources we need, so it can gen­er­ate a&nbsp;man­i­fest that points to the con­tent-hashed name of the resource, e.g.:</p></div></div><div><div><section><div><pre><code><span>{</span>\n  <span>\"vendors~confetti~vue.js\"</span><span>:</span> <span>\"/dist/js/vendors~confetti~vue.03b9213ce186db5518ea.js\"</span><span>,</span>\n  <span>\"vendors~confetti~vue.js.map\"</span><span>:</span> <span>\"/dist/js/vendors~confetti~vue.03b9213ce186db5518ea.js.map\"</span><span>,</span>\n  <span>\"app.js\"</span><span>:</span> <span>\"/dist/js/app.30334b5124fa6e221464.js\"</span><span>,</span>\n  <span>\"app.js.map\"</span><span>:</span> <span>\"/dist/js/app.30334b5124fa6e221464.js.map\"</span><span>,</span>\n  <span>\"confetti.js\"</span><span>:</span> <span>\"/dist/js/confetti.1152197f8c58a1b40b34.js\"</span><span>,</span>\n  <span>\"confetti.js.map\"</span><span>:</span> <span>\"/dist/js/confetti.1152197f8c58a1b40b34.js.map\"</span><span>,</span>\n  <span>\"js/precache-manifest.js\"</span><span>:</span> <span>\"/dist/js/precache-manifest.f774c437974257fc8026ca1bc693655c.js\"</span><span>,</span>\n  <span>\"../sw.js\"</span><span>:</span> <span>\"/dist/../sw.js\"</span>\n<span>}</span></code></pre><aside><h5><i></i>&nbsp;webpack-manifest-plugin manifest.json</h5></aside></div></section></div></div><div><div><p>We pass in a&nbsp;file­name because we cre­ate both a&nbsp;mod­ern&nbsp;<kbd>manifest.json</kbd>&nbsp;and a&nbsp;lega­cy&nbsp;<kbd>manifest-legacy.json</kbd>&nbsp;that have the entry points for our mod­ern&nbsp;<span>ES<span>2015</span></span>+ mod­ules and lega­cy&nbsp;<span>ES<span>5</span></span>&nbsp;mod­ules, respec­tive­ly. The keys in both of the man­i­fests are iden­ti­cal for resources that are built for both mod­ern and lega­cy builds.</p><p>Next up we have a&nbsp;pret­ty stan­dard look­ing&nbsp;<kbd>configureVueLoader()</kbd>:</p></div></div><div><div><section><div><pre><code><span>// Configure Vue loader</span>\n<span>const</span> <span>configureVueLoader</span> <span>=</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>return</span> <span>{</span>\n        test<span>:</span> <span>/\\.vue$/</span><span>,</span>\n        loader<span>:</span> <span>'vue-loader'</span>\n    <span>}</span><span>;</span>\n<span>}</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.common.js configureVueLoader()</h5></aside></div></section></div></div><div><div><p>This just lets us load&nbsp;<a href=\"http://vuejs.org/v2/guide/single-file-components.html\" target=\"_blank\" rel=\"noreferrer noopener\">Vue Sin­gle File Com­po­nents</a>&nbsp;eas­i­ly. web­pack takes care of extract­ing the appro­pri­ate&nbsp;<span>HTML</span>,&nbsp;<span>CSS</span>, and JavaScript for&nbsp;you.</p></div></div><div><div><p><strong><span>BASE</span>&nbsp;<span>CON­FIG</span></strong></p><p>The&nbsp;<kbd>baseConfig</kbd>&nbsp;gets merged with both the&nbsp;<kbd>modernConfig</kbd>&nbsp;and&nbsp;<kbd>legacyConfig</kbd>:</p></div></div><div><div><section><div><pre><code><span>// The base webpack config</span>\n<span>const</span> baseConfig <span>=</span> <span>{</span>\n    name<span>:</span> pkg<span>.</span>name<span>,</span>\n    entry<span>:</span> <span>configureEntries</span><span>(</span><span>)</span><span>,</span>\n    output<span>:</span> <span>{</span>\n        path<span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> settings<span>.</span>paths<span>.</span>dist<span>.</span>base<span>)</span><span>,</span>\n        publicPath<span>:</span> settings<span>.</span>urls<span>.</span>publicPath\n    <span>}</span><span>,</span>\n    resolve<span>:</span> <span>{</span>\n        alias<span>:</span> <span>{</span>\n            <span>'vue$'</span><span>:</span> <span>'vue/dist/vue.esm.js'</span>\n        <span>}</span>\n    <span>}</span><span>,</span>\n    module<span>:</span> <span>{</span>\n        rules<span>:</span> <span>[</span>\n            <span>configureVueLoader</span><span>(</span><span>)</span><span>,</span>\n        <span>]</span><span>,</span>\n    <span>}</span><span>,</span>\n    plugins<span>:</span> <span>[</span>\n        <span>new</span> <span>WebpackNotifierPlugin</span><span>(</span><span>{</span>title<span>:</span> <span>'Webpack'</span><span>,</span> excludeWarnings<span>:</span> <span>true</span><span>,</span> alwaysNotify<span>:</span> <span>true</span><span>}</span><span>)</span><span>,</span>\n        <span>new</span> <span>VueLoaderPlugin</span><span>(</span><span>)</span><span>,</span>\n    <span>]</span>\n<span>}</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.common.js baseConfig</h5></aside></div></section></div></div><div><div><p>Every­thing here is pret­ty stan­dard web­pack fare, but note that we alias&nbsp;<kbd>vue$</kbd>&nbsp;to&nbsp;<kbd>vue/dist/vue.esm.js</kbd>&nbsp;so that we can get the&nbsp;<span>ES<span>2015</span></span>&nbsp;mod­ule ver­sion of&nbsp;Vue.</p><p>We use the&nbsp;<a href=\"http://www.npmjs.com/package/webpack-notifier\" target=\"_blank\" rel=\"noreferrer noopener\">Web­pac­kNo­ti­fier­Plu­g­in</a>&nbsp;to let us know the sta­tus of our builds in a&nbsp;friend­ly&nbsp;way.</p></div></div><div><div><p><strong><span>LEGA­CY</span>&nbsp;<span>CONFIG</span></strong></p><p>The&nbsp;<kbd>legacyConfig</kbd>&nbsp;is for build­ing&nbsp;<span>ES<span>5</span></span>&nbsp;lega­cy JavaScript with the appro­pri­ate polyfills:</p></div></div><div><div><section><div><pre><code><span>// Legacy webpack config</span>\n<span>const</span> legacyConfig <span>=</span> <span>{</span>\n    module<span>:</span> <span>{</span>\n        rules<span>:</span> <span>[</span>\n            <span>configureBabelLoader</span><span>(</span>Object<span>.</span><span>values</span><span>(</span>pkg<span>.</span>browserslist<span>.</span>legacyBrowsers<span>)</span><span>)</span><span>,</span>\n        <span>]</span><span>,</span>\n    <span>}</span><span>,</span>\n    plugins<span>:</span> <span>[</span>\n        <span>new</span> <span>CopyWebpackPlugin</span><span>(</span>\n            settings<span>.</span>copyWebpackConfig\n        <span>)</span><span>,</span>\n        <span>new</span> <span>ManifestPlugin</span><span>(</span>\n            <span>configureManifest</span><span>(</span><span>'manifest-legacy.json'</span><span>)</span>\n        <span>)</span><span>,</span>\n    <span>]</span>\n<span>}</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.common.js legacyConfig</h5></aside></div></section></div></div><div><div><p>Note that we pass in&nbsp;<kbd>pkg.browserslist.legacyBrowsers</kbd>&nbsp;to&nbsp;<kbd>configureBabelLoader()</kbd>, and&nbsp;we pass in<kbd>'manifest-legacy.json'</kbd>&nbsp;to&nbsp;<kbd>configureManifest()</kbd>.</p><p>We also include the&nbsp;<a href=\"http://github.com/webpack-contrib/copy-webpack-plugin\" target=\"_blank\" rel=\"noreferrer noopener\">Copy­Web­pack­Plu­g­in</a>&nbsp;in this build, so that we only copy the files defined in&nbsp;<kbd>settings.copyWebpackConfig</kbd>&nbsp;once.</p></div></div><div><div><p><strong><span>MOD­ERN</span>&nbsp;<span>CONFIG</span></strong></p><p>The&nbsp;<kbd>modernConfig</kbd>&nbsp;is for build­ing mod­ern&nbsp;<span>ES<span>2015</span></span>&nbsp;JavaScript mod­ules with­out the&nbsp;cruft:<br></p></div></div><div><div><section><div><pre><code><span>// Modern webpack config</span>\n<span>const</span> modernConfig <span>=</span> <span>{</span>\n    module<span>:</span> <span>{</span>\n        rules<span>:</span> <span>[</span>\n            <span>configureBabelLoader</span><span>(</span>Object<span>.</span><span>values</span><span>(</span>pkg<span>.</span>browserslist<span>.</span>modernBrowsers<span>)</span><span>)</span><span>,</span>\n        <span>]</span><span>,</span>\n    <span>}</span><span>,</span>\n    plugins<span>:</span> <span>[</span>\n        <span>new</span> <span>ManifestPlugin</span><span>(</span>\n            <span>configureManifest</span><span>(</span><span>'manifest.json'</span><span>)</span>\n        <span>)</span><span>,</span>\n    <span>]</span>\n<span>}</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.common.js modernConfig</h5></aside></div></section></div></div><div><div><p>Note that we pass in&nbsp;<kbd>pkg.browserslist.modernBrowsers</kbd>&nbsp;to&nbsp;<kbd>configureBabelLoader()</kbd>, and&nbsp;we pass in<kbd>'manifest.json'</kbd>&nbsp;to&nbsp;<kbd>configureManifest()</kbd>.</p></div></div><div><div><p><strong><span>MODULE</span>.<span>EXPORTS</span></strong></p><p>Final­ly, the&nbsp;<kbd>module.exports</kbd>&nbsp;uses the&nbsp;<a href=\"http://www.npmjs.com/package/webpack-merge\" target=\"_blank\" rel=\"noreferrer noopener\">web­pack-merge</a>&nbsp;pack­age to merge the con­figs togeth­er, and returns an object that is used by the&nbsp;<kbd>webpack.dev.js</kbd>&nbsp;and&nbsp;<kbd>webpack.prod.js</kbd>.</p></div></div><div><div><section><div><pre><code><span>// Common module exports</span>\n<span>// noinspection WebpackConfigHighlighting</span>\nmodule<span>.</span>exports <span>=</span> <span>{</span>\n    <span>'legacyConfig'</span><span>:</span> <span>merge</span><span>(</span>\n        legacyConfig<span>,</span>\n        baseConfig<span>,</span>\n    <span>)</span><span>,</span>\n    <span>'modernConfig'</span><span>:</span> <span>merge</span><span>(</span>\n        modernConfig<span>,</span>\n        baseConfig<span>,</span>\n    <span>)</span><span>,</span>\n<span>}</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.common.js module.exports</h5></aside></div></section></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/an-annotated-webpack-4-config-for-frontend-web-development#annotated-webpack-dev-js\"><i></i><span>LINK</span></a></span>ANNOTATED WEBPACK.DEV.JS</h3><p>Now let’s have a&nbsp;look at our&nbsp;<kbd>webpack.dev.js</kbd>&nbsp;con­fig file that has all of the set­tings that are used for devel­op­men­tal builds while we’re work­ing on the project. It gets merged with the set­tings in&nbsp;<kbd>webpack.common.js</kbd>&nbsp;to form a&nbsp;com­plete web­pack configuration.</p></div></div><div><div><section><div><pre><code><span>// webpack.dev.js - developmental builds</span>\n<span>const</span> LEGACY_CONFIG <span>=</span> <span>'legacy'</span><span>;</span>\n<span>const</span> MODERN_CONFIG <span>=</span> <span>'modern'</span><span>;</span>\n\n<span>// node modules</span>\n<span>const</span> merge <span>=</span> <span>require</span><span>(</span><span>'webpack-merge'</span><span>)</span><span>;</span>\n<span>const</span> path <span>=</span> <span>require</span><span>(</span><span>'path'</span><span>)</span><span>;</span>\n<span>const</span> sane <span>=</span> <span>require</span><span>(</span><span>'sane'</span><span>)</span><span>;</span>\n<span>const</span> webpack <span>=</span> <span>require</span><span>(</span><span>'webpack'</span><span>)</span><span>;</span>\n\n<span>// webpack plugins</span>\n<span>const</span> Dashboard <span>=</span> <span>require</span><span>(</span><span>'webpack-dashboard'</span><span>)</span><span>;</span>\n<span>const</span> DashboardPlugin <span>=</span> <span>require</span><span>(</span><span>'webpack-dashboard/plugin'</span><span>)</span><span>;</span>\n<span>const</span> dashboard <span>=</span> <span>new</span> <span>Dashboard</span><span>(</span><span>)</span><span>;</span>\n\n<span>// config files</span>\n<span>const</span> common <span>=</span> <span>require</span><span>(</span><span>'./webpack.common.js'</span><span>)</span><span>;</span>\n<span>const</span> pkg <span>=</span> <span>require</span><span>(</span><span>'./package.json'</span><span>)</span><span>;</span>\n<span>const</span> settings <span>=</span> <span>require</span><span>(</span><span>'./webpack.settings.js'</span><span>)</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.dev.js preamble</h5></aside></div></section></div></div><div><div><p>In the pre­am­ble we again pull in the Node pack­ages we need, and the web­pack plu­g­ins we use. We then import our&nbsp;<kbd>webpack.settings.js</kbd>&nbsp;as&nbsp;<kbd>settings</kbd>&nbsp;so we can access the set­tings there, and also&nbsp;import our&nbsp;<kbd>package.json</kbd>&nbsp;as&nbsp;<kbd>pkg</kbd>&nbsp;to access a&nbsp;few set­tings there as&nbsp;well.<br></p><p>We also import our&nbsp;<kbd>webpack.common.js</kbd>&nbsp;com­mon web­pack con­fig that we’ll merge our dev set­tings&nbsp;with.</p></div></div><div><div><p><strong><span>CON­FIG­U­RA­TION</span>&nbsp;<span>FUNCTIONS</span></strong></p><p>Here’s what the&nbsp;<kbd>configureDevServer()</kbd>&nbsp;looks like:</p></div></div><div><div><section><div><pre><code><span>// Configure the webpack-dev-server</span>\n<span>const</span> <span>configureDevServer</span> <span>=</span> <span>(</span>buildType<span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>return</span> <span>{</span>\n        <span>public</span><span>:</span> settings<span>.</span>devServerConfig<span>.</span><span>public</span><span>(</span><span>)</span><span>,</span>\n        contentBase<span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> settings<span>.</span>paths<span>.</span>templates<span>)</span><span>,</span>\n        host<span>:</span> settings<span>.</span>devServerConfig<span>.</span><span>host</span><span>(</span><span>)</span><span>,</span>\n        port<span>:</span> settings<span>.</span>devServerConfig<span>.</span><span>port</span><span>(</span><span>)</span><span>,</span>\n        https<span>:</span> <span>!</span><span>!</span><span>parseInt</span><span>(</span>settings<span>.</span>devServerConfig<span>.</span><span>https</span><span>(</span><span>)</span><span>)</span><span>,</span>\n        quiet<span>:</span> <span>true</span><span>,</span>\n        hot<span>:</span> <span>true</span><span>,</span>\n        hotOnly<span>:</span> <span>true</span><span>,</span>\n        overlay<span>:</span> <span>true</span><span>,</span>\n        stats<span>:</span> <span>'errors-only'</span><span>,</span>\n        watchOptions<span>:</span> <span>{</span>\n            poll<span>:</span> <span>!</span><span>!</span><span>parseInt</span><span>(</span>settings<span>.</span>devServerConfig<span>.</span><span>poll</span><span>(</span><span>)</span><span>)</span><span>,</span>\n        <span>}</span><span>,</span>\n        headers<span>:</span> <span>{</span>\n            <span>'Access-Control-Allow-Origin'</span><span>:</span> <span>'*'</span>\n        <span>}</span><span>,</span>\n        <span>// Use sane to monitor all of the templates files and sub-directories</span>\n        before<span>:</span> <span>(</span>app<span>,</span> server<span>)</span> <span>=&gt;</span> <span>{</span>\n            <span>const</span> watcher <span>=</span> <span>sane</span><span>(</span>path<span>.</span><span>join</span><span>(</span>__dirname<span>,</span> settings<span>.</span>paths<span>.</span>templates<span>)</span><span>,</span> <span>{</span>\n                glob<span>:</span> <span>[</span><span>'**/*'</span><span>]</span><span>,</span>\n                poll<span>:</span> <span>!</span><span>!</span><span>parseInt</span><span>(</span>settings<span>.</span>devServerConfig<span>.</span><span>poll</span><span>(</span><span>)</span><span>)</span><span>,</span>\n            <span>}</span><span>)</span><span>;</span>\n            watcher<span>.</span><span>on</span><span>(</span><span>'change'</span><span>,</span> <span>function</span><span>(</span>filePath<span>,</span> root<span>,</span> stat<span>)</span> <span>{</span>\n                console<span>.</span><span>log</span><span>(</span><span>'  File modified:'</span><span>,</span> filePath<span>)</span><span>;</span>\n                server<span>.</span><span>sockWrite</span><span>(</span>server<span>.</span>sockets<span>,</span> <span>\"content-changed\"</span><span>)</span><span>;</span>\n            <span>}</span><span>)</span><span>;</span>\n        <span>}</span><span>,</span>\n    <span>}</span><span>;</span>\n<span>}</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.dev.js configureDevServer()</h5></aside></div></section></div></div><div><div><p>When we do a&nbsp;pro­duc­tion build, web­pack bun­dles up all of our var­i­ous assets and saves them to the file sys­tem. By con­trast, when we’re work­ing on a&nbsp;project in local dev, we use a&nbsp;devel­op­ment build via&nbsp;<a href=\"http://github.com/webpack/webpack-dev-server\" target=\"_blank\" rel=\"noreferrer noopener\">web­pack-dev-serv­er</a>&nbsp;that:</p><ul><li>Spins up a&nbsp;local&nbsp;<a href=\"http://expressjs.com/\" target=\"_blank\" rel=\"noreferrer noopener\">Express</a>&nbsp;web serv­er that serves our assets</li><li>Builds our assets in mem­o­ry rather than to the file sys­tem, for&nbsp;speed</li><li>Will rebuild assets like JavaScript,&nbsp;<span>CSS</span>, Vue com­po­nents, etc. as we change them and inject them into the web­page via&nbsp;<a href=\"http://webpack.js.org/concepts/hot-module-replacement/\" target=\"_blank\" rel=\"noreferrer noopener\">Hot Mod­ule Replace­ment (<span>HMR</span>)</a>&nbsp;with­out a&nbsp;page reload</li><li>Will reload the page when we make changes to our templates</li></ul><p>This is akin to a&nbsp;much more sophis­ti­cat­ed vari­ant of&nbsp;<a href=\"http://browsersync.io/\" target=\"_blank\" rel=\"noreferrer noopener\">Browser­sync</a>, and great­ly speeds development.</p><p>The only slight­ly unusu­al thing here is we use&nbsp;<a href=\"http://www.npmjs.com/package/sane\" target=\"_blank\" rel=\"noreferrer noopener\">Sane</a>&nbsp;to mon­i­tor files that aren’t run through web­pack (in this case, our tem­plates), to do a&nbsp;full page reload when­ev­er one of them is changed.</p><p>Note that con­fig for the&nbsp;<kbd>webpack-dev-server</kbd>&nbsp;again comes from our&nbsp;<kbd>webpack.settings.js</kbd>&nbsp;file. The defaults are prob­a­bly okay for many peo­ple, but&nbsp;I&nbsp;use&nbsp;<a href=\"http://laravel.com/docs/5.7/homestead\" target=\"_blank\" rel=\"noreferrer noopener\">Lar­avel Home­stead</a>&nbsp;for local dev, as dis­cussed in the&nbsp;<a href=\"https://nystudio107.com/blog/local-development-with-vagrant-homestead\">Local Devel­op­ment with Vagrant / Home­stead</a>&nbsp;arti­cle. This means I&nbsp;run all devel­op­ment tool­ing inside of my Home­stead&nbsp;<span>VM</span>.</p><p>So instead of hard-cod­ing the local devel­op­ment envi­ron­ment in my&nbsp;<kbd>webpack.settings.js</kbd>&nbsp;file&nbsp;(since it can vary from per­son to per­son work­ing on a&nbsp;team), the&nbsp;<kbd>webpack.settings.js</kbd>&nbsp;can read from from an option­al&nbsp;<kbd>.env</kbd>&nbsp;file for your own par­tic­u­lar&nbsp;<kbd>devServer</kbd>&nbsp;config:</p></div></div><div><div><section><div><pre><code><span># webpack example settings for Homestead/Vagrant</span>\n<span>DEVSERVER_PUBLIC</span><span>=</span><span>\"http://192.168.10.10:8080\"</span>\n<span>DEVSERVER_HOST</span><span>=</span><span>\"0.0.0.0\"</span>\n<span>DEVSERVER_POLL</span><span>=</span><span>1</span>\n<span>DEVSERVER_PORT</span><span>=</span><span>8080</span>\n<span>DEVSERVER_HTTPS</span><span>=</span><span>0</span></code></pre><aside><h5><i></i>&nbsp;.env file DEVSERVER settings</h5></aside></div></section></div></div><div><div><p>You may use some­thing dif­fer­ent, so change the set­tings as appro­pri­ate in your&nbsp;<kbd>.env</kbd>&nbsp;file as need­ed. The idea behind&nbsp;<a href=\"http://www.npmjs.com/package/dotenv\" target=\"_blank\" rel=\"noreferrer noopener\">dotenv</a>&nbsp;is that we put any­thing spe­cif­ic to an envi­ron­ment in the&nbsp;<kbd>.env</kbd>&nbsp;file, and we&nbsp;<strong>do not</strong>&nbsp;check it in to our git repo.&nbsp;If the&nbsp;<kbd>.env</kbd>&nbsp;file isn’t present, that’s fine, it just uses default values:</p></div></div><div><div><section><div><pre><code>devServerConfig<span>:</span> <span>{</span>\n    <span>public</span><span>:</span> <span>(</span><span>)</span> <span>=&gt;</span> process<span>.</span>env<span>.</span>DEVSERVER_PUBLIC <span>||</span> <span>\"http://localhost:8080\"</span><span>,</span>\n    host<span>:</span> <span>(</span><span>)</span> <span>=&gt;</span> process<span>.</span>env<span>.</span>DEVSERVER_HOST <span>||</span> <span>\"localhost\"</span><span>,</span>\n    poll<span>:</span> <span>(</span><span>)</span> <span>=&gt;</span> process<span>.</span>env<span>.</span>DEVSERVER_POLL <span>||</span> <span>false</span><span>,</span>\n    port<span>:</span> <span>(</span><span>)</span> <span>=&gt;</span> process<span>.</span>env<span>.</span>DEVSERVER_PORT <span>||</span> <span>8080</span><span>,</span>\n    https<span>:</span> <span>(</span><span>)</span> <span>=&gt;</span> process<span>.</span>env<span>.</span>DEVSERVER_HTTPS <span>||</span> <span>false</span><span>,</span>\n<span>}</span><span>,</span></code></pre><aside><h5><i></i>&nbsp;webpack.settings.js devServerConfig defaults</h5></aside></div></section></div></div><div><div><p>Next up is the&nbsp;<kbd>configureImageLoader()</kbd>:</p></div></div><div><div><section><div><pre><code><span>// Configure Image loader</span>\n<span>const</span> <span>configureImageLoader</span> <span>=</span> <span>(</span>buildType<span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>if</span> <span>(</span>buildType <span>===</span> LEGACY_CONFIG<span>)</span> <span>{</span>\n        <span>return</span> <span>{</span>\n            test<span>:</span> <span>/\\.(png|jpe?g|gif|svg|webp)$/i</span><span>,</span>\n            use<span>:</span> <span>[</span>\n                <span>{</span>\n                    loader<span>:</span> <span>'file-loader'</span><span>,</span>\n                    options<span>:</span> <span>{</span>\n                        name<span>:</span> <span>'img/[name].[hash].[ext]'</span>\n                    <span>}</span>\n                <span>}</span>\n            <span>]</span>\n        <span>}</span><span>;</span>\n    <span>}</span>\n    <span>if</span> <span>(</span>buildType <span>===</span> MODERN_CONFIG<span>)</span> <span>{</span>\n        <span>return</span> <span>{</span>\n            test<span>:</span> <span>/\\.(png|jpe?g|gif|svg|webp)$/i</span><span>,</span>\n            use<span>:</span> <span>[</span>\n                <span>{</span>\n                    loader<span>:</span> <span>'file-loader'</span><span>,</span>\n                    options<span>:</span> <span>{</span>\n                        name<span>:</span> <span>'img/[name].[hash].[ext]'</span>\n                    <span>}</span>\n                <span>}</span>\n            <span>]</span>\n        <span>}</span><span>;</span>\n    <span>}</span>\n<span>}</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.dev.js configureImageLoader()</h5></aside></div></section></div></div><div><div><p>We pass in the&nbsp;<kbd>buildType</kbd>&nbsp;so that we can return dif­fer­ent results depend­ing on whether it is a&nbsp;lega­cy or mod­ern build. In this case, we return the same con­fig, but it’s very con­ceiv­able that might change.<br></p><p>It’s impor­tant to note that this is only for images that are includ­ed in our web­pack build; many oth­er images will be com­ing from else­where (a&nbsp;<span>CMS</span>&nbsp;sys­tem, an asset man­age­ment sys­tem,&nbsp;etc.).</p><p>To let web­pack know about an image, you import it into your JavaScript:</p></div></div><div><div><section><div><pre><code><span>import</span> Icon <span>from</span> <span>'./icon.png'</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;Importing images</h5></aside></div></section></div></div><div><div><p>Check out the&nbsp;<a href=\"http://webpack.js.org/guides/asset-management/#loading-images\" target=\"_blank\" rel=\"noreferrer noopener\">Load­ing Images</a>&nbsp;sec­tion of the web­pack docs&nbsp;for more details on&nbsp;this.</p><p>Next up is our&nbsp;<kbd>configurePostcssLoader()</kbd>:</p></div></div><div><div><section><div><pre><code><span>// Configure the Postcss loader</span>\n<span>const</span> <span>configurePostcssLoader</span> <span>=</span> <span>(</span>buildType<span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>// Don't generate CSS for the legacy config in development</span>\n    <span>if</span> <span>(</span>buildType <span>===</span> LEGACY_CONFIG<span>)</span> <span>{</span>\n        <span>return</span> <span>{</span>\n            test<span>:</span> <span>/\\.(pcss|css)$/</span><span>,</span>\n            loader<span>:</span> <span>'ignore-loader'</span>\n        <span>}</span><span>;</span>\n    <span>}</span>\n    <span>if</span> <span>(</span>buildType <span>===</span> MODERN_CONFIG<span>)</span> <span>{</span>\n        <span>return</span> <span>{</span>\n            test<span>:</span> <span>/\\.(pcss|css)$/</span><span>,</span>\n            use<span>:</span> <span>[</span>\n                <span>{</span>\n                    loader<span>:</span> <span>'style-loader'</span><span>,</span>\n                <span>}</span><span>,</span>\n                <span>{</span>\n                    loader<span>:</span> <span>'vue-style-loader'</span><span>,</span>\n                <span>}</span><span>,</span>\n                <span>{</span>\n                    loader<span>:</span> <span>'css-loader'</span><span>,</span>\n                    options<span>:</span> <span>{</span>\n                        importLoaders<span>:</span> <span>2</span><span>,</span>\n                        sourceMap<span>:</span> <span>true</span>\n                    <span>}</span>\n                <span>}</span><span>,</span>\n                <span>{</span>\n                    loader<span>:</span> <span>'resolve-url-loader'</span>\n                <span>}</span><span>,</span>\n                <span>{</span>\n                    loader<span>:</span> <span>'postcss-loader'</span><span>,</span>\n                    options<span>:</span> <span>{</span>\n                        sourceMap<span>:</span> <span>true</span>\n                    <span>}</span>\n                <span>}</span>\n            <span>]</span>\n        <span>}</span><span>;</span>\n    <span>}</span>\n<span>}</span><span>;</span></code></pre></div></section></div></div><div><div><p>We use&nbsp;<a href=\"http://postcss.org/\" target=\"_blank\" rel=\"noreferrer noopener\">PostC­SS</a>&nbsp;to process all of our&nbsp;<span>CSS</span>, includ­ing&nbsp;<a href=\"http://tailwindcss.com/docs/what-is-tailwind/\" target=\"_blank\" rel=\"noreferrer noopener\">Tail­wind&nbsp;<span>CSS</span></a>. I&nbsp;think of it as the Babel of&nbsp;<span>CSS</span>, in that it com­piles all sorts of advanced&nbsp;<span>CSS</span>&nbsp;func­tion­al­i­ty down to plain old&nbsp;<span>CSS</span>&nbsp;that your browsers can understand.</p><p>It’s impor­tant to note that for web­pack load­ers, they are processed in reverse order that they are listed:</p><ul><li><strong><a href=\"http://github.com/postcss/postcss-loader\" target=\"_blank\" rel=\"noreferrer noopener\">postc­ss-loader</a></strong> — Loads and process­es files as PostCSS</li><li><strong><a href=\"http://www.npmjs.com/package/resolve-url-loader\" target=\"_blank\" rel=\"noreferrer noopener\">resolve-url-loader</a></strong> — Rewrites any&nbsp;<kbd>url()</kbd>s in our&nbsp;<span>CSS</span>&nbsp;to pub­lic path relative</li><li><strong><a href=\"http://github.com/webpack-contrib/css-loader\" target=\"_blank\" rel=\"noreferrer noopener\">css-loader</a></strong> — Resolves all of our&nbsp;<span>CSS</span>&nbsp;<kbd>@import</kbd>&nbsp;and&nbsp;<kbd>url()</kbd>s</li><li><strong><a href=\"http://github.com/vuejs/vue-style-loader\" target=\"_blank\" rel=\"noreferrer noopener\">vue-style-loader</a></strong> — Injects all of our&nbsp;<span>CSS</span>&nbsp;from&nbsp;<kbd>.vue</kbd>&nbsp;Sin­gle File Com­po­nents linline</li><li><strong><a href=\"http://github.com/webpack-contrib/style-loader\" target=\"_blank\" rel=\"noreferrer noopener\">style-loader</a></strong> — Injects all of our&nbsp;<span>CSS</span>&nbsp;into the doc­u­ment inline in&nbsp;<kbd>&lt;style&gt;&lt;/style&gt;</kbd>&nbsp;tags</li></ul><p>Remem­ber, since this is what we do in local devel­op­ment, we don’t need to do any­thing fan­cy in terms of extract­ing all of our&nbsp;<span>CSS</span>&nbsp;out into a&nbsp;min­i­mized file. Instead, we just let the&nbsp;<kbd>style-loader</kbd>&nbsp;inline it all in our document.</p><p>The&nbsp;<kbd>webpack-dev-server</kbd>&nbsp;will use Hot Mod­ule Replace­ment (<span>HMR</span>) for our&nbsp;<span>CSS</span>, so any time we change any­thing, it rebuilds our&nbsp;<span>CSS</span>&nbsp;and re-injects it auto­mat­i­cal­ly. It’s some­what magical.</p><p>We tell web­pack about our&nbsp;<span>CSS</span>&nbsp;by includ­ing&nbsp;it:</p></div></div><div><div><section><div><pre><code><span>import</span> styles <span>from</span> <span>'../css/app.pcss'</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;importing styles</h5></aside></div></section></div></div><div><div><p>This is dis­cussed in detail in the&nbsp;<a href=\"http://webpack.js.org/guides/asset-management/#loading-css\" target=\"_blank\" rel=\"noreferrer noopener\">Load­ing&nbsp;<span>CSS</span></a>&nbsp;sec­tion of the web­pack&nbsp;docs.</p><p>We do this from our&nbsp;<kbd>App.js</kbd>&nbsp;entry point; think of this as the PostC­SS entry point. The&nbsp;<kbd>app.pcss</kbd>&nbsp;file&nbsp;<kbd>@import</kbd>s all of the&nbsp;<span>CSS</span>&nbsp;that our project uses; this will be cov­ered in detail lat­er&nbsp;on.&nbsp;</p></div></div><div><div><p><strong><span>MODULE</span>.<span>EXPORTS</span></strong></p><p>Final­ly, the&nbsp;<kbd>module.exports</kbd>&nbsp;uses the&nbsp;<a href=\"http://www.npmjs.com/package/webpack-merge\" target=\"_blank\" rel=\"noreferrer noopener\">web­pack-merge</a>&nbsp;pack­age to merge the&nbsp;<kbd>common.legacyConfig</kbd>&nbsp;from the&nbsp;<kbd>webpack.common.js</kbd>&nbsp;with our dev lega­cy con­fig, and the&nbsp;<kbd>common.modernConfig</kbd>&nbsp;with our dev mod­ern config:</p></div></div><div><div><section><div><pre><code><span>// Development module exports</span>\nmodule<span>.</span>exports <span>=</span> <span>[</span>\n    <span>merge</span><span>(</span>\n        common<span>.</span>legacyConfig<span>,</span>\n        <span>{</span>\n            output<span>:</span> <span>{</span>\n                filename<span>:</span> path<span>.</span><span>join</span><span>(</span><span>'./js'</span><span>,</span> <span>'[name]-legacy.[hash].js'</span><span>)</span><span>,</span>\n                publicPath<span>:</span> settings<span>.</span>devServerConfig<span>.</span><span>public</span><span>(</span><span>)</span> <span>+</span> <span>'/'</span><span>,</span>\n            <span>}</span><span>,</span>\n            mode<span>:</span> <span>'development'</span><span>,</span>\n            devtool<span>:</span> <span>'inline-source-map'</span><span>,</span>\n            devServer<span>:</span> <span>configureDevServer</span><span>(</span>LEGACY_CONFIG<span>)</span><span>,</span>\n            module<span>:</span> <span>{</span>\n                rules<span>:</span> <span>[</span>\n                    <span>configurePostcssLoader</span><span>(</span>LEGACY_CONFIG<span>)</span><span>,</span>\n                    <span>configureImageLoader</span><span>(</span>LEGACY_CONFIG<span>)</span><span>,</span>\n                <span>]</span><span>,</span>\n            <span>}</span><span>,</span>\n            plugins<span>:</span> <span>[</span>\n                <span>new</span> <span>webpack<span>.</span>HotModuleReplacementPlugin</span><span>(</span><span>)</span><span>,</span>\n            <span>]</span><span>,</span>\n        <span>}</span>\n    <span>)</span><span>,</span>\n    <span>merge</span><span>(</span>\n        common<span>.</span>modernConfig<span>,</span>\n        <span>{</span>\n            output<span>:</span> <span>{</span>\n                filename<span>:</span> path<span>.</span><span>join</span><span>(</span><span>'./js'</span><span>,</span> <span>'[name].[hash].js'</span><span>)</span><span>,</span>\n                publicPath<span>:</span> settings<span>.</span>devServerConfig<span>.</span><span>public</span><span>(</span><span>)</span> <span>+</span> <span>'/'</span><span>,</span>\n            <span>}</span><span>,</span>\n            mode<span>:</span> <span>'development'</span><span>,</span>\n            devtool<span>:</span> <span>'inline-source-map'</span><span>,</span>\n            devServer<span>:</span> <span>configureDevServer</span><span>(</span>MODERN_CONFIG<span>)</span><span>,</span>\n            module<span>:</span> <span>{</span>\n                rules<span>:</span> <span>[</span>\n                    <span>configurePostcssLoader</span><span>(</span>MODERN_CONFIG<span>)</span><span>,</span>\n                    <span>configureImageLoader</span><span>(</span>MODERN_CONFIG<span>)</span><span>,</span>\n                <span>]</span><span>,</span>\n            <span>}</span><span>,</span>\n            plugins<span>:</span> <span>[</span>\n                <span>new</span> <span>webpack<span>.</span>HotModuleReplacementPlugin</span><span>(</span><span>)</span><span>,</span>\n                <span>new</span> <span>DashboardPlugin</span><span>(</span>dashboard<span>.</span>setData<span>)</span><span>,</span>\n            <span>]</span><span>,</span>\n        <span>}</span>\n    <span>)</span><span>,</span>\n<span>]</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.dev.js module.exports</h5></aside></div></section></div></div><div><div><p>By return­ing an array in our&nbsp;<kbd>module.exports</kbd>, we’re telling web­pack that we have more than one com­pile that needs to be done: one for our lega­cy build, and anoth­er for our mod­ern&nbsp;build.</p><p>Note that for the lega­cy build, we out­put processed JavaScript as&nbsp;<kbd>[name]-legacy.[hash].js</kbd>, where­as the mod­ern build out­puts it as&nbsp;<kbd>[name].[hash].js</kbd>.</p><p>By set­ting the&nbsp;<kbd>mode</kbd>&nbsp;to&nbsp;<kbd>'development'</kbd>&nbsp;we’re telling web­pack that this is a&nbsp;<a href=\"http://webpack.js.org/concepts/mode/\" target=\"_blank\" rel=\"noreferrer noopener\">devel­op­ment build</a>.</p><p>By set­ting&nbsp;<kbd>devtool</kbd>&nbsp;to&nbsp;<kbd>'inline-source-map'</kbd>&nbsp;we’re ask­ing for our&nbsp;<kbd>.map</kbd>s for our&nbsp;<span>CSS</span>/​JavaScript to be&nbsp;<a href=\"http://webpack.js.org/configuration/devtool/\" target=\"_blank\" rel=\"noreferrer noopener\">inlined into the files them­selves</a>. This makes the files huge, but it’s con­ve­nient for debug­ging purposes.</p><p>The&nbsp;<a href=\"http://webpack.js.org/plugins/hot-module-replacement-plugin/\" target=\"_blank\" rel=\"noreferrer noopener\">webpack.HotModuleReplacementPlugin</a>&nbsp;enables sup­port for Hot Mod­ule Replace­ment (<span>HMR</span>) on the web­pack side of things.</p><p>The&nbsp;<a href=\"http://github.com/FormidableLabs/webpack-dashboard\" target=\"_blank\" rel=\"noreferrer noopener\">Dash­board­Plu­g­in</a>&nbsp;plu­g­in lets us feel like an astro­naut with a&nbsp;fan­cy web­pack build&nbsp;<span>HUD</span>:</p></div></div><div><div><section><div><figure><div><div><picture><source data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x699_crop_center-center_100_line/webpack-dashboard-plugin.png.webp 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x578_crop_center-center_100_line/webpack-dashboard-plugin.png.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x447_crop_center-center_100_line/webpack-dashboard-plugin.png.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x335_crop_center-center_100_line/webpack-dashboard-plugin.png.webp 576w\" type=\"image/webp\"><img src=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQAAAQABAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADASIAAhEBAxEB%2F8QAFgABAQEAAAAAAAAAAAAAAAAAAgEG%2F8QAGxAAAwACAwAAAAAAAAAAAAAAAAERAjFCYXH%2FxAAUAQEAAAAAAAAAAAAAAAAAAAAA%2F8QAFBEBAAAAAAAAAAAAAAAAAAAAAP%2FaAAwDAQACEQMRAD8Ay2Tt6C4tOlfL0IH%2F2Q%3D%3D\" data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x699_crop_center-center_100_line/webpack-dashboard-plugin.png 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x578_crop_center-center_100_line/webpack-dashboard-plugin.png 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x447_crop_center-center_100_line/webpack-dashboard-plugin.png 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x335_crop_center-center_100_line/webpack-dashboard-plugin.png 576w\" data-lowsrc=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQAAAQABAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADASIAAhEBAxEB%2F8QAFgABAQEAAAAAAAAAAAAAAAAAAgEG%2F8QAGxAAAwACAwAAAAAAAAAAAAAAAAERAjFCYXH%2FxAAUAQEAAAAAAAAAAAAAAAAAAAAA%2F8QAFBEBAAAAAAAAAAAAAAAAAAAAAP%2FaAAwDAQACEQMRAD8Ay2Tt6C4tOlfL0IH%2F2Q%3D%3D\" alt=\"Webpack Dashboard Plugin\" height=\"auto\" width=\"900\"></picture></div></div></figure><figcaption><p>web­pack DashboardPlugin</p></figcaption></div></section></div></div><div><div><p>I’ve found the Dash­board­Plu­g­in devel­op­ment&nbsp;<span>HUD</span>&nbsp;to be sig­nif­i­cant­ly more use­ful than the default web­pack progress scroll.</p><p>And that’s it, we now have a&nbsp;nice devel­op­ment build for our projects; check out the&nbsp;<a href=\"http://www.youtube.com/watch?v=9-n2Ah0aowo\" target=\"_blank\" rel=\"noreferrer noopener\">Hot Mod­ule Replace­ment video</a>&nbsp;for an exam­ple of this in action:<br></p></div></div><section><div><div><iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/9-n2Ah0aowo\" frameborder=\"0\" allow=\"autoplay; encrypted-media\" allowfullscreen=\"\"></iframe></div></div></section><div><div><h3><span><a href=\"https://nystudio107.com/blog/an-annotated-webpack-4-config-for-frontend-web-development#annotated-webpack-prod-js\"><i></i><span>LINK</span></a></span>ANNOTATED WEBPACK.PROD.JS</h3><p>Now let’s have a&nbsp;look at our&nbsp;<kbd>webpack.prod.js</kbd>&nbsp;con­fig file that has all of the set­tings that are used for pro­duc­tion builds while we’re work­ing on the project. It gets merged with the set­tings in&nbsp;<kbd>webpack.common.js</kbd>&nbsp;to form a&nbsp;com­plete web­pack configuration.</p></div></div><div><div><section><div><pre><code><span>// webpack.prod.js - production builds</span>\n<span>const</span> LEGACY_CONFIG <span>=</span> <span>'legacy'</span><span>;</span>\n<span>const</span> MODERN_CONFIG <span>=</span> <span>'modern'</span><span>;</span>\n\n<span>// node modules</span>\n<span>const</span> git <span>=</span> <span>require</span><span>(</span><span>'git-rev-sync'</span><span>)</span><span>;</span>\n<span>const</span> glob <span>=</span> <span>require</span><span>(</span><span>'glob-all'</span><span>)</span><span>;</span>\n<span>const</span> merge <span>=</span> <span>require</span><span>(</span><span>'webpack-merge'</span><span>)</span><span>;</span>\n<span>const</span> moment <span>=</span> <span>require</span><span>(</span><span>'moment'</span><span>)</span><span>;</span>\n<span>const</span> path <span>=</span> <span>require</span><span>(</span><span>'path'</span><span>)</span><span>;</span>\n<span>const</span> webpack <span>=</span> <span>require</span><span>(</span><span>'webpack'</span><span>)</span><span>;</span>\n\n<span>// webpack plugins</span>\n<span>const</span> BundleAnalyzerPlugin <span>=</span> <span>require</span><span>(</span><span>'webpack-bundle-analyzer'</span><span>)</span><span>.</span>BundleAnalyzerPlugin<span>;</span>\n<span>const</span> CleanWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>'clean-webpack-plugin'</span><span>)</span><span>;</span>\n<span>const</span> CreateSymlinkPlugin <span>=</span> <span>require</span><span>(</span><span>'create-symlink-webpack-plugin'</span><span>)</span><span>;</span>\n<span>const</span> CriticalCssPlugin <span>=</span> <span>require</span><span>(</span><span>'critical-css-webpack-plugin'</span><span>)</span><span>;</span>\n<span>const</span> HtmlWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>'html-webpack-plugin'</span><span>)</span><span>;</span>\n<span>const</span> ImageminWebpWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>'imagemin-webp-webpack-plugin'</span><span>)</span><span>;</span>\n<span>const</span> MiniCssExtractPlugin <span>=</span> <span>require</span><span>(</span><span>'mini-css-extract-plugin'</span><span>)</span><span>;</span>\n<span>const</span> OptimizeCSSAssetsPlugin <span>=</span> <span>require</span><span>(</span><span>'optimize-css-assets-webpack-plugin'</span><span>)</span><span>;</span>\n<span>const</span> PurgecssPlugin <span>=</span> <span>require</span><span>(</span><span>'purgecss-webpack-plugin'</span><span>)</span><span>;</span>\n<span>const</span> SaveRemoteFilePlugin <span>=</span> <span>require</span><span>(</span><span>'save-remote-file-webpack-plugin'</span><span>)</span><span>;</span>\n<span>const</span> TerserPlugin <span>=</span> <span>require</span><span>(</span><span>'terser-webpack-plugin'</span><span>)</span><span>;</span>\n<span>const</span> WebappWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>'webapp-webpack-plugin'</span><span>)</span><span>;</span>\n<span>const</span> WhitelisterPlugin <span>=</span> <span>require</span><span>(</span><span>'purgecss-whitelister'</span><span>)</span><span>;</span>\n<span>const</span> WorkboxPlugin <span>=</span> <span>require</span><span>(</span><span>'workbox-webpack-plugin'</span><span>)</span><span>;</span>\n\n<span>// config files</span>\n<span>const</span> common <span>=</span> <span>require</span><span>(</span><span>'./webpack.common.js'</span><span>)</span><span>;</span>\n<span>const</span> pkg <span>=</span> <span>require</span><span>(</span><span>'./package.json'</span><span>)</span><span>;</span>\n<span>const</span> settings <span>=</span> <span>require</span><span>(</span><span>'./webpack.settings.js'</span><span>)</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.prod.js preamble</h5></aside></div></section></div></div><div><div><p>In the pre­am­ble we again&nbsp;pull in the Node pack­ages we need, and the web­pack plu­g­ins we use. We then import our&nbsp;<kbd>webpack.settings.js</kbd>&nbsp;as&nbsp;<kbd>settings</kbd>&nbsp;so we can access the set­tings there, and also&nbsp;import our&nbsp;<kbd>package.json</kbd>&nbsp;as&nbsp;<kbd>pkg</kbd>&nbsp;to access a&nbsp;few set­tings there as&nbsp;well.&nbsp;</p><p>We also import our&nbsp;<kbd>webpack.common.js</kbd>&nbsp;com­mon web­pack con­fig that we’ll merge our dev set­tings&nbsp;with.<br></p></div></div><div><div><p><strong><span>TAIL­WIND</span>&nbsp;<span>EXTRACTOR</span></strong></p><p>This class is a&nbsp;cus­tom&nbsp;<a href=\"http://www.purgecss.com/\" target=\"_blank\" rel=\"noreferrer noopener\">PurgeC­SS</a>&nbsp;extrac­tor for&nbsp;<a href=\"http://tailwindcss.com/docs/what-is-tailwind/\" target=\"_blank\" rel=\"noreferrer noopener\">Tail­wind&nbsp;<span>CSS</span></a>&nbsp;that allows spe­cial char­ac­ters in class&nbsp;names.</p></div></div><div><div><section><div><pre><code><span>// Custom PurgeCSS extractor for Tailwind that allows special characters in</span>\n<span>// class names.</span>\n<span>//</span>\n<span>// https://github.com/FullHuman/purgecss#extractor</span>\n<span>class</span> <span>TailwindExtractor</span> <span>{</span>\n    <span>static</span> <span>extract</span><span>(</span>content<span>)</span> <span>{</span>\n        <span>return</span> content<span>.</span><span>match</span><span>(</span><span>/[A-Za-z0-9-_:\\/]+/g</span><span>)</span> <span>||</span> <span>[</span><span>]</span><span>;</span>\n    <span>}</span>\n<span>}</span></code></pre><aside><h5><i></i>&nbsp;Custom PurgeCSS extractor for Tailwind CSS</h5></aside></div></section></div></div><div><div><p>This is tak­en from the&nbsp;<a href=\"http://tailwindcss.com/docs/controlling-file-size/#removing-unused-css-with-purgecss\" target=\"_blank\" rel=\"noreferrer noopener\">Remov­ing unused&nbsp;<span>CSS</span>&nbsp;with PurgeC­SS</a>&nbsp;sec­tion of the Tail­wind&nbsp;<span>CSS</span>&nbsp;docs. See below for details on how this extrac­tor works with PurgeC­SS to mag­i­cal­ly make your&nbsp;<span>CSS</span>&nbsp;svelte and&nbsp;tidy.</p></div></div><div><div><p><strong><span>CON­FIG­U­RA­TION</span>&nbsp;<span>FUNCTIONS</span></strong></p><p>Here’s what the&nbsp;<kbd>configureBanner()</kbd>&nbsp;looks like:</p></div></div><div><div><section><div><pre><code><span>// Configure file banner</span>\n<span>const</span> <span>configureBanner</span> <span>=</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>return</span> <span>{</span>\n        banner<span>:</span> <span>[</span>\n            <span>'/*!'</span><span>,</span>\n            <span>' * @project        '</span> <span>+</span> settings<span>.</span>name<span>,</span>\n            <span>' * @name           '</span> <span>+</span> <span>'[filebase]'</span><span>,</span>\n            <span>' * @author         '</span> <span>+</span> pkg<span>.</span>author<span>.</span>name<span>,</span>\n            <span>' * @build          '</span> <span>+</span> <span>moment</span><span>(</span><span>)</span><span>.</span><span>format</span><span>(</span><span>'llll'</span><span>)</span> <span>+</span> <span>' ET'</span><span>,</span>\n            <span>' * @release        '</span> <span>+</span> git<span>.</span><span>long</span><span>(</span><span>)</span> <span>+</span> <span>' ['</span> <span>+</span> git<span>.</span><span>branch</span><span>(</span><span>)</span> <span>+</span> <span>']'</span><span>,</span>\n            <span>' * @copyright      Copyright (c) '</span> <span>+</span> <span>moment</span><span>(</span><span>)</span><span>.</span><span>format</span><span>(</span><span>'YYYY'</span><span>)</span> <span>+</span> <span>' '</span> <span>+</span> settings<span>.</span>copyright<span>,</span>\n            <span>' *'</span><span>,</span>\n            <span>' */'</span><span>,</span>\n            <span>''</span>\n        <span>]</span><span>.</span><span>join</span><span>(</span><span>'\\n'</span><span>)</span><span>,</span>\n        raw<span>:</span> <span>true</span>\n    <span>}</span><span>;</span>\n<span>}</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.prod.js configureBanner()</h5></aside></div></section></div></div><div><div><p>This sim­ply adds a&nbsp;ban­ner with project name, file name, author, and git infor­ma­tion for each file we&nbsp;build.</p><p>Next up is the&nbsp;<kbd>configureBundleAnalyzer()</kbd>:</p></div></div><div><div><section><div><pre><code><span>// Configure Bundle Analyzer</span>\n<span>const</span> <span>configureBundleAnalyzer</span> <span>=</span> <span>(</span>buildType<span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>if</span> <span>(</span>buildType <span>===</span> LEGACY_CONFIG<span>)</span> <span>{</span>\n        <span>return</span> <span>{</span>\n            analyzerMode<span>:</span> <span>'static'</span><span>,</span>\n            reportFilename<span>:</span> <span>'report-legacy.html'</span><span>,</span>\n        <span>}</span><span>;</span>\n    <span>}</span>\n    <span>if</span> <span>(</span>buildType <span>===</span> MODERN_CONFIG<span>)</span> <span>{</span>\n        <span>return</span> <span>{</span>\n            analyzerMode<span>:</span> <span>'static'</span><span>,</span>\n            reportFilename<span>:</span> <span>'report-modern.html'</span><span>,</span>\n        <span>}</span><span>;</span>\n    <span>}</span>\n<span>}</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.prod.js configureBundleAnalyzer()</h5></aside></div></section></div></div><div><div><p>This uses the&nbsp;<a href=\"http://www.npmjs.com/package/webpack-bundle-analyzer\" target=\"_blank\" rel=\"noreferrer noopener\">Web­pack­Bundle­An­a­lyz­er</a>&nbsp;plu­g­in to gen­er­ate a&nbsp;report for both our mod­ern and lega­cy bun­dle builds that results in a&nbsp;self-con­tained inter­ac­tive&nbsp;<span>HTML</span>&nbsp;page that allows you to explore what exact­ly is in the bun­dle that has been gen­er­at­ed by webpack.</p></div></div><div><div><section><div><figure><div><div data-expand=\"-1\"><picture><source data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/webpack-bundle-analyzer.jpg.webp 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/webpack-bundle-analyzer.jpg.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/webpack-bundle-analyzer.jpg.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/webpack-bundle-analyzer.jpg.webp 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/webpack-bundle-analyzer.jpg.webp 368w\" type=\"image/webp\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/webpack-bundle-analyzer.jpg.webp 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/webpack-bundle-analyzer.jpg.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/webpack-bundle-analyzer.jpg.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/webpack-bundle-analyzer.jpg.webp 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/webpack-bundle-analyzer.jpg.webp 368w\"><img src=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQAAAQABAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADASIAAhEBAxEB%2F8QAFgABAQEAAAAAAAAAAAAAAAAABAUG%2F8QAHxAAAQQCAgMAAAAAAAAAAAAAAgABAxEEMRIyInGx%2F8QAFQEBAQAAAAAAAAAAAAAAAAAAAgP%2FxAAZEQADAQEBAAAAAAAAAAAAAAABAgMABCH%2F2gAMAwEAAhEDEQA%2FANEMUnKyGMhbbMW0LOwinPxGrG%2BLPpWZeqNB2H0%2F1T5KMvuNKMSBv%2F%2FZ\" data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/webpack-bundle-analyzer.jpg 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/webpack-bundle-analyzer.jpg 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/webpack-bundle-analyzer.jpg 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/webpack-bundle-analyzer.jpg 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/webpack-bundle-analyzer.jpg 368w\" data-lowsrc=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQAAAQABAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADASIAAhEBAxEB%2F8QAFgABAQEAAAAAAAAAAAAAAAAABAUG%2F8QAHxAAAQQCAgMAAAAAAAAAAAAAAgABAxEEMRIyInGx%2F8QAFQEBAQAAAAAAAAAAAAAAAAAAAgP%2FxAAZEQADAQEBAAAAAAAAAAAAAAABAgMABCH%2F2gAMAwEAAhEDEQA%2FANEMUnKyGMhbbMW0LOwinPxGrG%2BLPpWZeqNB2H0%2F1T5KMvuNKMSBv%2F%2FZ\" alt=\"Webpack Bundle Analyzer\" height=\"auto\" width=\"100%\" sizes=\"100vw\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/webpack-bundle-analyzer.jpg 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/webpack-bundle-analyzer.jpg 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/webpack-bundle-analyzer.jpg 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/webpack-bundle-analyzer.jpg 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/webpack-bundle-analyzer.jpg 368w\"></picture></div></div></figure><figcaption><p>Web­pack Bun­dle Ana­lyz­er output</p></figcaption></div></section></div></div><div><div><p>I’ve found it to be very use­ful to help me keep my bun­dle sizes down, and under­stand exact­ly what web­pack is build­ing, so I’ve made it part of my pro­duc­tion build process.</p><p>Next up is the&nbsp;<kbd>configureCriticalCss()</kbd>:</p></div></div><div><div><section><div><pre><code><span>// Configure Critical CSS</span>\n<span>const</span> <span>configureCriticalCss</span> <span>=</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>return</span> <span>(</span>settings<span>.</span>criticalCssConfig<span>.</span>pages<span>.</span><span>map</span><span>(</span><span>(</span>row<span>)</span> <span>=&gt;</span> <span>{</span>\n            <span>const</span> criticalSrc <span>=</span> settings<span>.</span>urls<span>.</span>critical <span>+</span> row<span>.</span>url<span>;</span>\n            <span>const</span> criticalDest <span>=</span> settings<span>.</span>criticalCssConfig<span>.</span>base <span>+</span> row<span>.</span>template <span>+</span> settings<span>.</span>criticalCssConfig<span>.</span>suffix<span>;</span>\n            <span>let</span> criticalWidth <span>=</span> settings<span>.</span>criticalCssConfig<span>.</span>criticalWidth<span>;</span>\n            <span>let</span> criticalHeight <span>=</span> settings<span>.</span>criticalCssConfig<span>.</span>criticalHeight<span>;</span>\n            <span>// Handle Google AMP templates</span>\n            <span>if</span> <span>(</span>row<span>.</span>template<span>.</span><span>indexOf</span><span>(</span>settings<span>.</span>criticalCssConfig<span>.</span>ampPrefix<span>)</span> <span>!==</span> <span>-</span><span>1</span><span>)</span> <span>{</span>\n                criticalWidth <span>=</span> settings<span>.</span>criticalCssConfig<span>.</span>ampCriticalWidth<span>;</span>\n                criticalHeight <span>=</span> settings<span>.</span>criticalCssConfig<span>.</span>ampCriticalHeight<span>;</span>\n            <span>}</span>\n            console<span>.</span><span>log</span><span>(</span><span>\"source: \"</span> <span>+</span> criticalSrc <span>+</span> <span>\" dest: \"</span> <span>+</span> criticalDest<span>)</span><span>;</span>\n            <span>return</span> <span>new</span> <span>CriticalCssPlugin</span><span>(</span><span>{</span>\n                base<span>:</span> <span>'./'</span><span>,</span>\n                src<span>:</span> criticalSrc<span>,</span>\n                dest<span>:</span> criticalDest<span>,</span>\n                extract<span>:</span> <span>false</span><span>,</span>\n                inline<span>:</span> <span>false</span><span>,</span>\n                minify<span>:</span> <span>true</span><span>,</span>\n                width<span>:</span> criticalWidth<span>,</span>\n                height<span>:</span> criticalHeight<span>,</span>\n            <span>}</span><span>)</span>\n        <span>}</span><span>)</span>\n    <span>)</span><span>;</span>\n<span>}</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.prod.js configureCriticalCss()</h5></aside></div></section></div></div><div><div><p>This uses the&nbsp;<a href=\"http://www.npmjs.com/package/critical-css-webpack-plugin\" target=\"_blank\" rel=\"noreferrer noopener\">Crit­i­calC­ss­Plu­g­in</a>&nbsp;to gen­er­ate Crit­i­calC­SS for our web­site by chunk­ing through the&nbsp;<kbd>settings.criticalCssConfig.pages</kbd>&nbsp;from our&nbsp;<kbd>webpack.settings.js</kbd>.</p><p>Note that if the page passed in has&nbsp;<kbd>settings.criticalCssConfig.ampPrefix</kbd>&nbsp;any­where in its name, it gen­er­ates Crit­i­calC­SS for the entire web­page (not just the above the fold con­tent) by pass­ing in a&nbsp;very large height.</p><p>I won’t go into too much detail on Crit­i­calC­SS here; check out the&nbsp;<a href=\"https://nystudio107.com/blog/implementing-critical-css\">Imple­ment­ing Crit­i­cal&nbsp;<span>CSS</span>&nbsp;on your web­site</a>&nbsp;arti­cle&nbsp;for more infor­ma­tion on CriticalCSS.</p><p>Next up is the&nbsp;<kbd>configureCleanWebpack()</kbd>:</p></div></div><div><div><section><div><pre><code><span>// Configure Clean webpack</span>\n<span>const</span> <span>configureCleanWebpack</span> <span>=</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>return</span> <span>{</span>\n        root<span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> settings<span>.</span>paths<span>.</span>dist<span>.</span>base<span>)</span><span>,</span>\n        verbose<span>:</span> <span>true</span><span>,</span>\n        dry<span>:</span> <span>false</span>\n    <span>}</span><span>;</span>\n<span>}</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.prod.js configureCleanWebpack()</h5></aside></div></section></div></div><div><div><p>This just uses the&nbsp;<a href=\"http://github.com/johnagan/clean-webpack-plugin\" target=\"_blank\" rel=\"noreferrer noopener\">Clean­Web­pack­Plu­g­in</a>&nbsp;to delete the build direc­to­ry in&nbsp;<kbd>settings.paths.dist.base</kbd>&nbsp;from our&nbsp;<kbd>webpack.settings.js</kbd>.</p><p>Next up is&nbsp;<kbd>configureHtml()</kbd>:</p></div></div><div><div><section><div><pre><code><span>// Configure Html webpack</span>\n<span>const</span> <span>configureHtml</span> <span>=</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>return</span> <span>{</span>\n        templateContent<span>:</span> <span>''</span><span>,</span>\n        filename<span>:</span> <span>'webapp.html'</span><span>,</span>\n        inject<span>:</span> <span>false</span><span>,</span>\n    <span>}</span><span>;</span>\n<span>}</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.prod.js configureHtml()</h5></aside></div></section></div></div><div><div><p>This uses the&nbsp;<a href=\"http://webpack.js.org/plugins/html-webpack-plugin/\" target=\"_blank\" rel=\"noreferrer noopener\">Html­Web­pack­Plu­g­in</a>&nbsp;in con­junc­tion with the&nbsp;<a href=\"http://github.com/brunocodutra/webapp-webpack-plugin\" target=\"_blank\" rel=\"noreferrer noopener\">Webap­p­Web­pack­Plu­g­in</a>&nbsp;(see below) to gen­er­ate the&nbsp;<span>HTML</span>&nbsp;for our fav­i­cons. Note that we pass in an emp­ty string in&nbsp;<kbd>templateContent</kbd>&nbsp;so that the out­put is just the raw out­put from the WebappWebpackPlugin.</p><p>Next up is the&nbsp;<kbd>configureImageLoader()</kbd>:</p></div></div><div><div><section><div><pre><code><span>// Configure Image loader</span>\n<span>const</span> <span>configureImageLoader</span> <span>=</span> <span>(</span>buildType<span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>if</span> <span>(</span>buildType <span>===</span> LEGACY_CONFIG<span>)</span> <span>{</span>\n        <span>return</span> <span>{</span>\n            test<span>:</span> <span>/\\.(png|jpe?g|gif|svg|webp)$/i</span><span>,</span>\n            use<span>:</span> <span>[</span>\n                <span>{</span>\n                    loader<span>:</span> <span>'file-loader'</span><span>,</span>\n                    options<span>:</span> <span>{</span>\n                        name<span>:</span> <span>'img/[name].[hash].[ext]'</span>\n                    <span>}</span>\n                <span>}</span>\n            <span>]</span>\n        <span>}</span><span>;</span>\n    <span>}</span>\n    <span>if</span> <span>(</span>buildType <span>===</span> MODERN_CONFIG<span>)</span> <span>{</span>\n        <span>return</span> <span>{</span>\n            test<span>:</span> <span>/\\.(png|jpe?g|gif|svg|webp)$/i</span><span>,</span>\n            use<span>:</span> <span>[</span>\n                <span>{</span>\n                    loader<span>:</span> <span>'file-loader'</span><span>,</span>\n                    options<span>:</span> <span>{</span>\n                        name<span>:</span> <span>'img/[name].[hash].[ext]'</span>\n                    <span>}</span>\n                <span>}</span><span>,</span>\n                <span>{</span>\n                    loader<span>:</span> <span>'img-loader'</span><span>,</span>\n                    options<span>:</span> <span>{</span>\n                        plugins<span>:</span> <span>[</span>\n                            <span>require</span><span>(</span><span>'imagemin-gifsicle'</span><span>)</span><span>(</span><span>{</span>\n                                interlaced<span>:</span> <span>true</span><span>,</span>\n                            <span>}</span><span>)</span><span>,</span>\n                            <span>require</span><span>(</span><span>'imagemin-mozjpeg'</span><span>)</span><span>(</span><span>{</span>\n                                progressive<span>:</span> <span>true</span><span>,</span>\n                                arithmetic<span>:</span> <span>false</span><span>,</span>\n                            <span>}</span><span>)</span><span>,</span>\n                            <span>require</span><span>(</span><span>'imagemin-optipng'</span><span>)</span><span>(</span><span>{</span>\n                                optimizationLevel<span>:</span> <span>5</span><span>,</span>\n                            <span>}</span><span>)</span><span>,</span>\n                            <span>require</span><span>(</span><span>'imagemin-svgo'</span><span>)</span><span>(</span><span>{</span>\n                                plugins<span>:</span> <span>[</span>\n                                    <span>{</span>convertPathData<span>:</span> <span>false</span><span>}</span><span>,</span>\n                                <span>]</span>\n                            <span>}</span><span>)</span><span>,</span>\n                        <span>]</span>\n                    <span>}</span>\n                <span>}</span>\n            <span>]</span>\n        <span>}</span><span>;</span>\n    <span>}</span>\n<span>}</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.prod.js configureImageLoader()</h5></aside></div></section></div></div><div><div><p>We pass in the&nbsp;<kbd>buildType</kbd>&nbsp;so that we can return dif­fer­ent results depend­ing on whether it is a&nbsp;lega­cy or mod­ern build. In this case, we run images through a&nbsp;vari­ety of image opti­miza­tions via&nbsp;<a href=\"http://www.npmjs.com/package/img-loader\" target=\"_blank\" rel=\"noreferrer noopener\">img-loader</a>&nbsp;for the mod­ern&nbsp;build.</p><p>We only do this for the mod­ern build, because there’s no sense in spend­ing the time to opti­mize the images for both the mod­ern and the lega­cy builds (the images are the same for&nbsp;both).</p><p>It’s impor­tant to note that this is only for images that are includ­ed in our web­pack build; many oth­er images will be com­ing from else­where (a&nbsp;<span>CMS</span>&nbsp;sys­tem, an asset man­age­ment sys­tem,&nbsp;etc.).</p><p>To let web­pack know about an image, you import it into your JavaScript:</p></div></div><div><div><section><div><pre><code><span>import</span> Icon <span>from</span> <span>'./icon.png'</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;Importing images</h5></aside></div></section></div></div><div><div><p>Check out the&nbsp;<a href=\"http://webpack.js.org/guides/asset-management/#loading-images\" target=\"_blank\" rel=\"noreferrer noopener\">Load­ing Images</a>&nbsp;sec­tion of the web­pack docs&nbsp;for more details on&nbsp;this.</p><p>Next up is our&nbsp;<kbd>configureOptimization()</kbd>:</p></div></div><div><div><section><div><pre><code><span>// Configure optimization</span>\n<span>const</span> <span>configureOptimization</span> <span>=</span> <span>(</span>buildType<span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>if</span> <span>(</span>buildType <span>===</span> LEGACY_CONFIG<span>)</span> <span>{</span>\n        <span>return</span> <span>{</span>\n            splitChunks<span>:</span> <span>{</span>\n                cacheGroups<span>:</span> <span>{</span>\n                    <span>default</span><span>:</span> <span>false</span><span>,</span>\n                    common<span>:</span> <span>false</span><span>,</span>\n                    styles<span>:</span> <span>{</span>\n                        name<span>:</span> settings<span>.</span>vars<span>.</span>cssName<span>,</span>\n                        test<span>:</span> <span>/\\.(pcss|css|vue)$/</span><span>,</span>\n                        chunks<span>:</span> <span>'all'</span><span>,</span>\n                        enforce<span>:</span> <span>true</span>\n                    <span>}</span>\n                <span>}</span>\n            <span>}</span><span>,</span>\n            minimizer<span>:</span> <span>[</span>\n                <span>new</span> <span>TerserPlugin</span><span>(</span>\n                    <span>configureTerser</span><span>(</span><span>)</span>\n                <span>)</span><span>,</span>\n                <span>new</span> <span>OptimizeCSSAssetsPlugin</span><span>(</span><span>{</span>\n                    cssProcessorOptions<span>:</span> <span>{</span>\n                        map<span>:</span> <span>{</span>\n                            inline<span>:</span> <span>false</span><span>,</span>\n                            annotation<span>:</span> <span>true</span><span>,</span>\n                        <span>}</span><span>,</span>\n                        safe<span>:</span> <span>true</span><span>,</span>\n                        discardComments<span>:</span> <span>true</span>\n                    <span>}</span><span>,</span>\n                <span>}</span><span>)</span>\n            <span>]</span>\n        <span>}</span><span>;</span>\n    <span>}</span>\n    <span>if</span> <span>(</span>buildType <span>===</span> MODERN_CONFIG<span>)</span> <span>{</span>\n        <span>return</span> <span>{</span>\n            minimizer<span>:</span> <span>[</span>\n                <span>new</span> <span>TerserPlugin</span><span>(</span>\n                    <span>configureTerser</span><span>(</span><span>)</span>\n                <span>)</span><span>,</span>\n            <span>]</span>\n        <span>}</span><span>;</span>\n    <span>}</span>\n<span>}</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.prod.js configureOptimization()</h5></aside></div></section></div></div><div><div><p>This is where we con­fig­ure the&nbsp;<a href=\"http://webpack.js.org/configuration/optimization/\" target=\"_blank\" rel=\"noreferrer noopener\">web­pack pro­duc­tion opti­miza­tion</a>. For the lega­cy build only (there’s no sense in doing it twice), we use the&nbsp;<a href=\"http://github.com/webpack-contrib/mini-css-extract-plugin\">MiniC­s­sEx­tract­Plu­g­in</a>&nbsp;to extract all of the&nbsp;<span>CSS</span>&nbsp;used project-wide into a&nbsp;sin­gle file. If you’ve used web­pack before, you might have used the Extract­TextPlu­g­in to do this in the past; no&nbsp;more.</p><p>We then also use the&nbsp;<a href=\"http://github.com/NMFR/optimize-css-assets-webpack-plugin\" target=\"_blank\" rel=\"noreferrer noopener\">Opti­mizeC­SSAs­set­sPlu­g­in</a>&nbsp;to opti­mize the result­ing&nbsp;<span>CSS</span>&nbsp;by remov­ing dupli­cate rules, and min­i­miz­ing the&nbsp;<span>CSS</span>&nbsp;via&nbsp;<kbd>cssnano</kbd>.</p><p>Final­ly, we set the JavaScript min­i­miz­er to be the&nbsp;<a href=\"http://github.com/webpack-contrib/terser-webpack-plugin\" target=\"_blank\" rel=\"noreferrer noopener\">Terser­Plu­g­in</a>; this is because the&nbsp;<a href=\"http://github.com/webpack-contrib/uglifyjs-webpack-plugin/releases/tag/v2.0.0\" target=\"_blank\" rel=\"noreferrer noopener\">Ugli­fyJs­Plu­g­in no longer sup­ports</a>&nbsp;min­i­miz­ing&nbsp;<span>ES<span>2015</span></span>+ JavaScript. And since we’re gen­er­at­ing mod­ern&nbsp;<span>ES<span>2015</span></span>+ bun­dles, we need&nbsp;it.</p><p>Next up is the&nbsp;<kbd>configurePostcssLoader()</kbd>:</p></div></div><div><div><section><div><pre><code><span>// Configure Postcss loader</span>\n<span>const</span> <span>configurePostcssLoader</span> <span>=</span> <span>(</span>buildType<span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>if</span> <span>(</span>buildType <span>===</span> LEGACY_CONFIG<span>)</span> <span>{</span>\n        <span>return</span> <span>{</span>\n            test<span>:</span> <span>/\\.(pcss|css)$/</span><span>,</span>\n            use<span>:</span> <span>[</span>\n                MiniCssExtractPlugin<span>.</span>loader<span>,</span>\n                <span>{</span>\n                    loader<span>:</span> <span>'css-loader'</span><span>,</span>\n                    options<span>:</span> <span>{</span>\n                        importLoaders<span>:</span> <span>2</span><span>,</span>\n                        sourceMap<span>:</span> <span>true</span>\n                    <span>}</span>\n                <span>}</span><span>,</span>\n                <span>{</span>\n                    loader<span>:</span> <span>'resolve-url-loader'</span>\n                <span>}</span><span>,</span>\n                <span>{</span>\n                    loader<span>:</span> <span>'postcss-loader'</span><span>,</span>\n                    options<span>:</span> <span>{</span>\n                        sourceMap<span>:</span> <span>true</span>\n                    <span>}</span>\n                <span>}</span>\n            <span>]</span>\n        <span>}</span><span>;</span>\n    <span>}</span>\n    <span>// Don't generate CSS for the modern config in production</span>\n    <span>if</span> <span>(</span>buildType <span>===</span> MODERN_CONFIG<span>)</span> <span>{</span>\n        <span>return</span> <span>{</span>\n            test<span>:</span> <span>/\\.(pcss|css)$/</span><span>,</span>\n            loader<span>:</span> <span>'ignore-loader'</span>\n        <span>}</span><span>;</span>\n    <span>}</span>\n<span>}</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.prod.js configurePostcssLoader()</h5></aside></div></section></div></div><div><div><p>This looks very sim­i­lar to the dev ver­sion of&nbsp;<kbd>configurePostcssLoader()</kbd>, except that for our final loader,&nbsp;we use the&nbsp;<a href=\"http://github.com/webpack-contrib/mini-css-extract-plugin\" target=\"_blank\" rel=\"noreferrer noopener\">MiniCssExtractPlugin.loader</a>&nbsp;to extract all of our&nbsp;<span>CSS</span>&nbsp;into a&nbsp;sin­gle&nbsp;file.</p><p>We do this only for the lega­cy build, since there’s no sense in doing it for each build (the&nbsp;<span>CSS</span>&nbsp;is the same). We use the&nbsp;<a href=\"http://www.npmjs.com/package/ignore-loader\" target=\"_blank\" rel=\"noreferrer noopener\">ignore-loader</a>&nbsp;for mod­ern builds, so a&nbsp;loader exists for our .css&nbsp;<span>&amp;</span>&nbsp;.pcss files, but it does nothing.</p><p>As men­tioned ear­li­er, we use&nbsp;<a href=\"http://postcss.org/\" target=\"_blank\" rel=\"noreferrer noopener\">PostC­SS</a>&nbsp;to process all of our&nbsp;<span>CSS</span>, includ­ing&nbsp;<a href=\"http://tailwindcss.com/docs/what-is-tailwind/\" target=\"_blank\" rel=\"noreferrer noopener\">Tail­wind&nbsp;<span>CSS</span></a>. I&nbsp;think of it as the Babel of&nbsp;<span>CSS</span>, in that it com­piles all sorts of advanced&nbsp;<span>CSS</span>&nbsp;func­tion­al­i­ty down to plain old&nbsp;<span>CSS</span>&nbsp;that your browsers can understand.</p><p>Again, it’s impor­tant to note that for web­pack load­ers, they are processed in reverse order that they are listed:</p><ul><li><strong><a href=\"http://github.com/postcss/postcss-loader\" target=\"_blank\" rel=\"noreferrer noopener\">postc­ss-loader</a></strong> — Loads and process­es files as PostCSS</li><li><strong><a href=\"http://www.npmjs.com/package/resolve-url-loader\" target=\"_blank\" rel=\"noreferrer noopener\">resolve-url-loader</a></strong> — Rewrites any&nbsp;<kbd>url()</kbd>s in our&nbsp;<span>CSS</span>&nbsp;to pub­lic path relative</li><li><strong><a href=\"http://github.com/webpack-contrib/css-loader\" target=\"_blank\" rel=\"noreferrer noopener\">css-loader</a></strong> — Resolves all of our&nbsp;<span>CSS</span>&nbsp;<kbd>@import</kbd>&nbsp;and&nbsp;<kbd>url()</kbd>s</li><li><strong><a href=\"http://github.com/webpack-contrib/mini-css-extract-plugin\" target=\"_blank\" rel=\"noreferrer noopener\">MiniCssExtractPlugin.loader</a></strong> — Extracts all of our pro­duc­tion&nbsp;<span>CSS</span>&nbsp;to a&nbsp;sin­gle&nbsp;file</li></ul><p>Since this is a&nbsp;pro­duc­tion build, we pull out all of the&nbsp;<span>CSS</span>&nbsp;used every­where with the&nbsp;<kbd>MiniCssExtractPlugin.loader</kbd>, and save it to a&nbsp;sin­gle&nbsp;<kbd>.css</kbd>&nbsp;file. The&nbsp;<span>CSS</span>&nbsp;also gets min­i­mized, and opti­mized for production.</p><p>We tell web­pack about our&nbsp;<span>CSS</span>&nbsp;by includ­ing&nbsp;it:</p></div></div><div><div><section><div><pre><code><span>import</span> styles <span>from</span> <span>'../css/app.pcss'</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;importing styles</h5></aside></div></section></div></div><div><div><p>This is dis­cussed in detail in the&nbsp;<a href=\"http://webpack.js.org/guides/asset-management/#loading-css\" target=\"_blank\" rel=\"noreferrer noopener\">Load­ing&nbsp;<span>CSS</span></a>&nbsp;sec­tion of the web­pack&nbsp;docs.</p><p>We do this from our&nbsp;<kbd>App.js</kbd>&nbsp;entry point; think of this as the PostC­SS entry point. The&nbsp;<kbd>app.pcss</kbd>&nbsp;file&nbsp;<kbd>@import</kbd>s all of the&nbsp;<span>CSS</span>&nbsp;that our project uses; this will be cov­ered in detail lat­er&nbsp;on.</p><p>Next up is the&nbsp;<kbd>configurePurgeCss()</kbd>:</p></div></div><div><div><section><div><pre><code><span>// Configure PurgeCSS</span>\n<span>const</span> <span>configurePurgeCss</span> <span>=</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>let</span> paths <span>=</span> <span>[</span><span>]</span><span>;</span>\n    <span>// Configure whitelist paths</span>\n    <span>for</span> <span>(</span><span>const</span> <span>[</span>key<span>,</span> value<span>]</span> <span>of</span> Object<span>.</span><span>entries</span><span>(</span>settings<span>.</span>purgeCssConfig<span>.</span>paths<span>)</span><span>)</span> <span>{</span>\n        paths<span>.</span><span>push</span><span>(</span>path<span>.</span><span>join</span><span>(</span>__dirname<span>,</span> value<span>)</span><span>)</span><span>;</span>\n    <span>}</span>\n\n    <span>return</span> <span>{</span>\n        paths<span>:</span> glob<span>.</span><span>sync</span><span>(</span>paths<span>)</span><span>,</span>\n        whitelist<span>:</span> <span>WhitelisterPlugin</span><span>(</span>settings<span>.</span>purgeCssConfig<span>.</span>whitelist<span>)</span><span>,</span>\n        whitelistPatterns<span>:</span> settings<span>.</span>purgeCssConfig<span>.</span>whitelistPatterns<span>,</span>\n        extractors<span>:</span> <span>[</span>\n            <span>{</span>\n                extractor<span>:</span> TailwindExtractor<span>,</span>\n                extensions<span>:</span> settings<span>.</span>purgeCssConfig<span>.</span>extensions\n            <span>}</span>\n        <span>]</span>\n    <span>}</span><span>;</span>\n<span>}</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.prod.js configurePurgeCss()</h5></aside></div></section></div></div><div><div><p><a href=\"http://tailwindcss.com/docs/what-is-tailwind/\" target=\"_blank\" rel=\"noreferrer noopener\">Tail­wind&nbsp;<span>CSS</span></a>&nbsp;is a&nbsp;fan­tas­tic util­i­ty-first&nbsp;<span>CSS</span>&nbsp;frame­work that allows for rapid pro­to­typ­ing because in local devel­op­ment, you rarely have to actu­al­ly write any&nbsp;<span>CSS</span>. Instead, you just use the pro­vid­ed util­i­ty&nbsp;<span>CSS</span>&nbsp;classes.</p><p>The down­side is that the result­ing&nbsp;<span>CSS</span>&nbsp;can be a&nbsp;lit­tle large. This is where&nbsp;<a href=\"http://www.purgecss.com/\" target=\"_blank\" rel=\"noreferrer noopener\">PurgeC­SS</a>&nbsp;comes in. It will parse through all of your&nbsp;<span>HTML</span>/​template/​Vue/​whatever files, and strip out any unused&nbsp;<span>CSS</span>.</p><p>The sav­ings can be dra­mat­ic; Tail­wind&nbsp;<span>CSS</span>&nbsp;and PurgeC­SS are a&nbsp;match made in heav­en. We talked about this in depth on the&nbsp;<a href=\"http://devmode.fm/episodes/tailwind-css-utility-first-css-with-adam-watham\" target=\"_blank\" rel=\"noreferrer noopener\">Tail­wind&nbsp;<span>CSS</span>&nbsp;util­i­ty-first&nbsp;<span>CSS</span>&nbsp;with Adam Wathan</a>&nbsp;podcast.</p><p>It iter­ates through all of the path globs in&nbsp;<kbd>settings.purgeCssConfig.paths</kbd>&nbsp;look­ing for&nbsp;<span>CSS</span>&nbsp;rules to keep; any&nbsp;<span>CSS</span>rules not found get stripped out of our result­ing&nbsp;<span>CSS</span>&nbsp;build.</p><p>We also use the&nbsp;<a href=\"http://www.npmjs.com/package/purgecss-whitelister\" target=\"_blank\" rel=\"noreferrer noopener\">Whitelis­ter­Plu­g­in</a>&nbsp;to make it easy to whitelist entire files or even globs when we know we don’t want cer­tain&nbsp;<span>CSS</span>&nbsp;stripped. The&nbsp;<span>CSS</span>&nbsp;rules in&nbsp;all of the files that match our&nbsp;<kbd>settings.purgeCssConfig.whitelist</kbd>&nbsp;are whitelist­ed, and nev­er stripped from the result­ing&nbsp;build.</p><p>Next up is&nbsp;<kbd>configureTerser()</kbd>:</p></div></div><div><div><section><div><pre><code><span>// Configure terser</span>\n<span>const</span> <span>configureTerser</span> <span>=</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>return</span> <span>{</span>\n        cache<span>:</span> <span>true</span><span>,</span>\n        parallel<span>:</span> <span>true</span><span>,</span>\n        sourceMap<span>:</span> <span>true</span>\n    <span>}</span><span>;</span>\n<span>}</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.prod.js configureTerser()</h5></aside></div></section></div></div><div><div><p>This just con­fig­ures some set­tings used by the&nbsp;<a href=\"http://github.com/webpack-contrib/terser-webpack-plugin\" target=\"_blank\" rel=\"noreferrer noopener\">Terser­Plu­g­in</a>&nbsp;that min­i­mizes both our lega­cy and mod­ern JavaScript code.</p><p>Next up is the&nbsp;<kbd>configureWebApp()</kbd>:</p></div></div><div><div><section><div><pre><code><span>// Configure Webapp webpack</span>\n<span>const</span> <span>configureWebapp</span> <span>=</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>return</span> <span>{</span>\n        logo<span>:</span> settings<span>.</span>webappConfig<span>.</span>logo<span>,</span>\n        prefix<span>:</span> settings<span>.</span>webappConfig<span>.</span>prefix<span>,</span>\n        cache<span>:</span> <span>false</span><span>,</span>\n        inject<span>:</span> <span>'force'</span><span>,</span>\n        favicons<span>:</span> <span>{</span>\n            appName<span>:</span> pkg<span>.</span>name<span>,</span>\n            appDescription<span>:</span> pkg<span>.</span>description<span>,</span>\n            developerName<span>:</span> pkg<span>.</span>author<span>.</span>name<span>,</span>\n            developerURL<span>:</span> pkg<span>.</span>author<span>.</span>url<span>,</span>\n            path<span>:</span> settings<span>.</span>paths<span>.</span>dist<span>.</span>base<span>,</span>\n        <span>}</span>\n    <span>}</span><span>;</span>\n<span>}</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.prod.js configureWebApp()</h5></aside></div></section></div></div><div><div><p>This uses the&nbsp;<a href=\"http://www.npmjs.com/package/webapp-webpack-plugin\" target=\"_blank\" rel=\"noreferrer noopener\">Webap­p­Web­pack­Plu­g­in</a>&nbsp;to gen­er­ate all of our site fav­i­cons in a&nbsp;myr­i­ad of for­mats, as well as our webapp&nbsp;<kbd>manifest.json</kbd>&nbsp;and oth­er&nbsp;<span>PWA</span>&nbsp;niceties.</p><p>It works in con­junc­tion with the&nbsp;<a href=\"http://webpack.js.org/plugins/html-webpack-plugin/\" target=\"_blank\" rel=\"noreferrer noopener\">Html­Web­pack­Plu­g­in</a>&nbsp;to also out­put a&nbsp;<kbd>webapp.html</kbd>&nbsp;file that con­tains links to all of the gen­er­at­ed fav­i­cons and asso­ci­at­ed files, for inclu­sion in our&nbsp;<span>HTML</span>&nbsp;page’s&nbsp;<kbd>&lt;head&gt;&lt;/head&gt;</kbd>.</p><p>Next up is the&nbsp;<kbd>configureWorkbox()</kbd>:</p></div></div><div><div><section><div><pre><code><span>// Configure Workbox service worker</span>\n<span>const</span> <span>configureWorkbox</span> <span>=</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>let</span> config <span>=</span> settings<span>.</span>workboxConfig<span>;</span>\n\n    <span>return</span> config<span>;</span>\n<span>}</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.prod.js configureWorkbox()</h5></aside></div></section></div></div><div><div><p>We use Google’s&nbsp;<a href=\"http://developers.google.com/web/tools/workbox/modules/workbox-webpack-plugin\" target=\"_blank\" rel=\"noreferrer noopener\">Work­boxWeb­pack­Plu­g­in</a>&nbsp;to gen­er­ate a&nbsp;<a href=\"http://developers.google.com/web/fundamentals/primers/service-workers/\" target=\"_blank\" rel=\"noreferrer noopener\">Ser­vice Work­er</a>&nbsp;for our web­site. It’s beyond the scope of this arti­cle explain what a&nbsp;Ser­vice Work­er is, but you can check out the&nbsp;<a href=\"http://devmode.fm/episodes/going-offline-service-workers-with-jeremy-keith\" target=\"_blank\" rel=\"noreferrer noopener\">Going Offline: Ser­vice Work­ers with Jere­my Kei­th</a>&nbsp;pod­cast for a&nbsp;primer.</p><p>The con­fig­u­ra­tion all comes from the&nbsp;<kbd>settings.workboxConfig</kbd>&nbsp;object in our&nbsp;<kbd>webpack.settings.js</kbd>. In addi­tion to pre-caching all of the assets in our mod­ern build&nbsp;<kbd>manifest.json</kbd>, we also include a&nbsp;<kbd>workbox-catch-handler.js</kbd>&nbsp;to con­fig­ure it to use a&nbsp;<a href=\"http://developers.google.com/web/tools/workbox/guides/advanced-recipes#provide_a_fallback_response_to_a_route\" target=\"_blank\" rel=\"noreferrer noopener\">fall­back response catch-all route</a>.</p></div></div><div><div><section><div><pre><code><span>// fallback URLs</span>\n<span>const</span> FALLBACK_HTML_URL <span>=</span> <span>'/offline.html'</span><span>;</span>\n<span>const</span> FALLBACK_IMAGE_URL <span>=</span> <span>'/offline.svg'</span><span>;</span>\n\n<span>// This \"catch\" handler is triggered when any of the other routes fail to</span>\n<span>// generate a response.</span>\n<span>// https://developers.google.com/web/tools/workbox/guides/advanced-recipes#provide_a_fallback_response_to_a_route</span>\nworkbox<span>.</span>routing<span>.</span><span>setCatchHandler</span><span>(</span><span>(</span><span>{</span>event<span>,</span> request<span>,</span> url<span>}</span><span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>// Use event, request, and url to figure out how to respond.</span>\n    <span>// One approach would be to use request.destination, see</span>\n    <span>// https://medium.com/dev-channel/service-worker-caching-strategies-based-on-request-types-57411dd7652c</span>\n    <span>switch</span> <span>(</span>request<span>.</span>destination<span>)</span> <span>{</span>\n        <span>case</span> <span>'document'</span><span>:</span>\n            <span>return</span> caches<span>.</span><span>match</span><span>(</span>FALLBACK_HTML_URL<span>)</span><span>;</span>\n            <span>break</span><span>;</span>\n\n        <span>case</span> <span>'image'</span><span>:</span>\n            <span>return</span> caches<span>.</span><span>match</span><span>(</span>FALLBACK_IMAGE_URL<span>)</span><span>;</span>\n            <span>break</span><span>;</span>\n\n        <span>default</span><span>:</span>\n            <span>// If we don't have a fallback, just return an error response.</span>\n            <span>return</span> Response<span>.</span><span>error</span><span>(</span><span>)</span><span>;</span>\n    <span>}</span>\n<span>}</span><span>)</span><span>;</span>\n\n<span>// Use a stale-while-revalidate strategy for all other requests.</span>\nworkbox<span>.</span>routing<span>.</span><span>setDefaultHandler</span><span>(</span>\n    workbox<span>.</span>strategies<span>.</span><span>staleWhileRevalidate</span><span>(</span><span>)</span>\n<span>)</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;workbox-catch-handler.js</h5></aside></div></section></div></div><div><div><p><strong><span>MODULE</span>.<span>EXPORTS</span></strong></p><p>Final­ly, the&nbsp;<kbd>module.exports</kbd>&nbsp;uses the&nbsp;<a href=\"http://www.npmjs.com/package/webpack-merge\" target=\"_blank\" rel=\"noreferrer noopener\">web­pack-merge</a>&nbsp;to merge the&nbsp;<kbd>common.legacyConfig</kbd>&nbsp;from the&nbsp;<kbd>webpack.common.js</kbd>&nbsp;with our pro­duc­tion lega­cy con­fig, and the&nbsp;<kbd>common.modernConfig</kbd>&nbsp;with our pro­duc­tion mod­ern config:</p></div></div><div><div><section><div><pre><code><span>// Production module exports</span>\nmodule<span>.</span>exports <span>=</span> <span>[</span>\n    <span>merge</span><span>(</span>\n        common<span>.</span>legacyConfig<span>,</span>\n        <span>{</span>\n            output<span>:</span> <span>{</span>\n                filename<span>:</span> path<span>.</span><span>join</span><span>(</span><span>'./js'</span><span>,</span> <span>'[name]-legacy.[chunkhash].js'</span><span>)</span><span>,</span>\n            <span>}</span><span>,</span>\n            mode<span>:</span> <span>'production'</span><span>,</span>\n            devtool<span>:</span> <span>'source-map'</span><span>,</span>\n            optimization<span>:</span> <span>configureOptimization</span><span>(</span>LEGACY_CONFIG<span>)</span><span>,</span>\n            module<span>:</span> <span>{</span>\n                rules<span>:</span> <span>[</span>\n                    <span>configurePostcssLoader</span><span>(</span>LEGACY_CONFIG<span>)</span><span>,</span>\n                    <span>configureImageLoader</span><span>(</span>LEGACY_CONFIG<span>)</span><span>,</span>\n                <span>]</span><span>,</span>\n            <span>}</span><span>,</span>\n            plugins<span>:</span> <span>[</span>\n                <span>new</span> <span>CleanWebpackPlugin</span><span>(</span>settings<span>.</span>paths<span>.</span>dist<span>.</span>clean<span>,</span>\n                    <span>configureCleanWebpack</span><span>(</span><span>)</span>\n                <span>)</span><span>,</span>\n                <span>new</span> <span>MiniCssExtractPlugin</span><span>(</span><span>{</span>\n                    path<span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> settings<span>.</span>paths<span>.</span>dist<span>.</span>base<span>)</span><span>,</span>\n                    filename<span>:</span> path<span>.</span><span>join</span><span>(</span><span>'./css'</span><span>,</span> <span>'[name].[chunkhash].css'</span><span>)</span><span>,</span>\n                <span>}</span><span>)</span><span>,</span>\n                <span>new</span> <span>PurgecssPlugin</span><span>(</span>\n                    <span>configurePurgeCss</span><span>(</span><span>)</span>\n                <span>)</span><span>,</span>\n                <span>new</span> <span>webpack<span>.</span>BannerPlugin</span><span>(</span>\n                    <span>configureBanner</span><span>(</span><span>)</span>\n                <span>)</span><span>,</span>\n                <span>new</span> <span>HtmlWebpackPlugin</span><span>(</span>\n                    <span>configureHtml</span><span>(</span><span>)</span>\n                <span>)</span><span>,</span>\n                <span>new</span> <span>WebappWebpackPlugin</span><span>(</span>\n                    <span>configureWebapp</span><span>(</span><span>)</span>\n                <span>)</span><span>,</span>\n                <span>new</span> <span>CreateSymlinkPlugin</span><span>(</span>\n                    settings<span>.</span>createSymlinkConfig<span>,</span>\n                    <span>true</span>\n                <span>)</span><span>,</span>\n                <span>new</span> <span>SaveRemoteFilePlugin</span><span>(</span>\n                    settings<span>.</span>saveRemoteFileConfig\n                <span>)</span><span>,</span>\n                <span>new</span> <span>BundleAnalyzerPlugin</span><span>(</span>\n                    <span>configureBundleAnalyzer</span><span>(</span>LEGACY_CONFIG<span>)</span><span>,</span>\n                <span>)</span><span>,</span>\n            <span>]</span><span>.</span><span>concat</span><span>(</span>\n                <span>configureCriticalCss</span><span>(</span><span>)</span>\n            <span>)</span>\n        <span>}</span>\n    <span>)</span><span>,</span>\n    <span>merge</span><span>(</span>\n        common<span>.</span>modernConfig<span>,</span>\n        <span>{</span>\n            output<span>:</span> <span>{</span>\n                filename<span>:</span> path<span>.</span><span>join</span><span>(</span><span>'./js'</span><span>,</span> <span>'[name].[chunkhash].js'</span><span>)</span><span>,</span>\n            <span>}</span><span>,</span>\n            mode<span>:</span> <span>'production'</span><span>,</span>\n            devtool<span>:</span> <span>'source-map'</span><span>,</span>\n            optimization<span>:</span> <span>configureOptimization</span><span>(</span>MODERN_CONFIG<span>)</span><span>,</span>\n            module<span>:</span> <span>{</span>\n                rules<span>:</span> <span>[</span>\n                    <span>configurePostcssLoader</span><span>(</span>MODERN_CONFIG<span>)</span><span>,</span>\n                    <span>configureImageLoader</span><span>(</span>MODERN_CONFIG<span>)</span><span>,</span>\n                <span>]</span><span>,</span>\n            <span>}</span><span>,</span>\n            plugins<span>:</span> <span>[</span>\n                <span>new</span> <span>webpack<span>.</span>optimize<span>.</span>ModuleConcatenationPlugin</span><span>(</span><span>)</span><span>,</span>\n                <span>new</span> <span>webpack<span>.</span>BannerPlugin</span><span>(</span>\n                    <span>configureBanner</span><span>(</span><span>)</span>\n                <span>)</span><span>,</span>\n                <span>new</span> <span>ImageminWebpWebpackPlugin</span><span>(</span><span>)</span><span>,</span>\n                <span>new</span> <span>WorkboxPlugin<span>.</span>GenerateSW</span><span>(</span>\n                    <span>configureWorkbox</span><span>(</span><span>)</span>\n                <span>)</span><span>,</span>\n                <span>new</span> <span>BundleAnalyzerPlugin</span><span>(</span>\n                    <span>configureBundleAnalyzer</span><span>(</span>MODERN_CONFIG<span>)</span><span>,</span>\n                <span>)</span><span>,</span>\n            <span>]</span>\n        <span>}</span>\n    <span>)</span><span>,</span>\n<span>]</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.prod.js module.exports</h5></aside></div></section></div></div><div><div><p>By return­ing an array in our&nbsp;<kbd>module.exports</kbd>, we’re telling web­pack that we have more than one com­pile that needs to be done: one for our lega­cy build, and anoth­er for our mod­ern&nbsp;build.</p><p>Note that for the lega­cy build, we out­put processed JavaScript as&nbsp;<kbd>[name]-legacy.[hash].js</kbd>, where­as the mod­ern build out­puts it as&nbsp;<kbd>[name].[hash].js</kbd>.</p><p>By set­ting the&nbsp;<kbd>mode</kbd>&nbsp;to&nbsp;<kbd>'production'</kbd>&nbsp;we’re telling web­pack that this is a&nbsp;<a href=\"http://webpack.js.org/concepts/mode/\" target=\"_blank\" rel=\"noreferrer noopener\">pro­duc­tion build</a>. This enables a&nbsp;num­ber of set­tings appro­pri­ate for a&nbsp;pro­duc­tion&nbsp;build.</p><p>By set­ting&nbsp;<kbd>devtool</kbd>&nbsp;to&nbsp;<kbd>'source-map'</kbd>&nbsp;we’re ask­ing for our&nbsp;<kbd>.map</kbd>s for our&nbsp;<span>CSS</span>/​JavaScript to be&nbsp;<a href=\"http://webpack.js.org/configuration/devtool/\" target=\"_blank\" rel=\"noreferrer noopener\">gen­er­at­ed as sep­a­rate .map files</a>. This makes it eas­i­er for us to debug live pro­duc­tion web­sites with­out adding the file size of our assets.</p><p>There are a&nbsp;cou­ple of web­pack plu­g­ins used here that we haven’t cov­ered already:</p><ul><li><strong><a href=\"http://www.npmjs.com/package/create-symlink-webpack-plugin\" target=\"_blank\" rel=\"noreferrer noopener\">Cre­ateSym­linkPlu­g­in</a></strong> — this is a&nbsp;plu­g­in I&nbsp;cre­at­ed to allow for sym­link cre­ation as part of the build process. I&nbsp;use it to sym­link the gen­er­at­ed&nbsp;<kbd>favicon.ico</kbd>&nbsp;to&nbsp;<kbd>/favicon.ico</kbd>&nbsp;because many web browsers look for in the web&nbsp;root.</li><li><strong><a href=\"http://www.npmjs.com/package/save-remote-file-webpack-plugin\" target=\"_blank\" rel=\"noreferrer noopener\">SaveR­e­mote­File­Plu­g­in</a></strong> — this is a&nbsp;plu­g­in I&nbsp;cre­at­ed to down­load remote files and emit them as part of the web­pack build process. I&nbsp;use this for down­load­ing and serv­ing up Google’s&nbsp;<kbd>analytics.js</kbd>&nbsp;locally.</li><li><strong><a href=\"http://www.npmjs.com/package/imagemin-webp-webpack-plugin\" target=\"_blank\" rel=\"noreferrer noopener\">Imagem­inWebp­Web­pack­Plu­g­in</a></strong> — this plu­g­in cre­ates&nbsp;<kbd>.webp</kbd>&nbsp;vari­ants of all of the&nbsp;<span>JPEG</span>&nbsp;and&nbsp;<span>PNG</span>&nbsp;files that your project imports</li></ul><p>And that’s it, we now have a&nbsp;nice pro­duc­tion build for our projects with all of the bells&nbsp;<span>&amp;</span>&nbsp;whistles.</p></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/an-annotated-webpack-4-config-for-frontend-web-development#tailwind-css-post-css-config\"><i></i><span>LINK</span></a></span>TAILWIND CSS &amp; POSTCSS CONFIG</h3><p>To make web­pack build Tail­wind&nbsp;<span>CSS</span>&nbsp;and the rest of our&nbsp;<span>CSS</span>&nbsp;prop­er­ly, we need to do a&nbsp;lit­tle set­up. Cred­it to my part­ner in crime, Jonathan Melville, for work­ing this aspect of the build out.&nbsp;First we need a&nbsp;<kbd>postcss.config.js</kbd>&nbsp;file:</p></div></div><div><div><section><div><pre><code>module<span>.</span>exports <span>=</span> <span>{</span>\n    plugins<span>:</span> <span>[</span>\n        <span>require</span><span>(</span><span>'postcss-import'</span><span>)</span><span>,</span>\n        <span>require</span><span>(</span><span>'postcss-extend'</span><span>)</span><span>,</span>\n        <span>require</span><span>(</span><span>'postcss-simple-vars'</span><span>)</span><span>,</span>\n        <span>require</span><span>(</span><span>'postcss-nested-ancestors'</span><span>)</span><span>,</span>\n        <span>require</span><span>(</span><span>'postcss-nested'</span><span>)</span><span>,</span>\n        <span>require</span><span>(</span><span>'postcss-hexrgba'</span><span>)</span><span>,</span>\n        <span>require</span><span>(</span><span>'autoprefixer'</span><span>)</span><span>,</span>\n        <span>require</span><span>(</span><span>'tailwindcss'</span><span>)</span><span>(</span><span>'./tailwind.config.js'</span><span>)</span>\n    <span>]</span>\n<span>}</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;postcss.config.js</h5></aside></div></section></div></div><div><div><p>This can be stored in the project root; PostC­SS will look for it auto­mat­i­cal­ly as part of the build process, and apply the PostC­SS plu­g­ins we’ve spec­i­fied. Note this is where we include the&nbsp;<kbd>tailwind.config.js</kbd>&nbsp;file to make it part of the build process.</p></div></div><div><div><p>Final­ly, our&nbsp;<span>CSS</span>&nbsp;entry point&nbsp;<kbd>app.pcss</kbd>&nbsp;looks some­thing like&nbsp;this:</p></div></div><div><div><section><div><pre><code><span>/**\n * app.css\n *\n * The entry point for the css.\n *\n */</span>\n\n<span>/**\n * This injects Tailwind's base styles, which is a combination of\n * Normalize.css and some additional base styles.\n *\n * You can see the styles here:\n * https://github.com/tailwindcss/tailwindcss/blob/master/css/preflight.css\n */</span>\n <span><span>@import</span> <span>\"tailwindcss/preflight\"</span><span>;</span></span>\n\n<span>/**\n * This injects any component classes registered by plugins.\n *\n */</span>\n<span><span>@import</span> <span>'tailwindcss/components'</span><span>;</span></span>\n\n<span>/**\n * Here we add custom component classes; stuff we want loaded\n * *before* the utilities so that the utilities can still\n * override them.\n *\n */</span>\n<span><span>@import</span> <span>'./components/global.pcss'</span><span>;</span></span>\n<span><span>@import</span> <span>'./components/typography.pcss'</span><span>;</span></span>\n<span><span>@import</span> <span>'./components/webfonts.pcss'</span><span>;</span></span>\n\n<span>/**\n * This injects all of Tailwind's utility classes, generated based on your\n * config file.\n *\n */</span>\n<span><span>@import</span> <span>'tailwindcss/utilities'</span><span>;</span></span>\n\n<span>/**\n * Include styles for individual pages\n *\n */</span>\n<span><span>@import</span> <span>'./pages/homepage.pcss'</span><span>;</span></span>\n\n<span>/**\n * Include vendor css.\n *\n */</span>\n <span><span>@import</span> <span>'vendor.pcss'</span><span>;</span></span></code></pre><aside><h5><i></i>&nbsp;app.pcss</h5></aside></div></section></div></div><div><div><p>Obvi­ous­ly, tai­lor it to include what­ev­er components/​pages that you use for your cus­tom&nbsp;<span>CSS</span>.</p></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/an-annotated-webpack-4-config-for-frontend-web-development#post-build-project-tree\"><i></i><span>LINK</span></a></span>POST-BUILD PROJECT TREE</h3><p>Here’s what our project tree looks like post-build:</p></div></div><div><div><section><div><pre><code>├── example.env\n├── package.json\n├── postcss.config.js\n├── src\n│   ├── css\n│   │   ├── app.pcss\n│   │   ├── components\n│   │   │   ├── global.pcss\n│   │   │   ├── typography.pcss\n│   │   │   └── webfonts.pcss\n│   │   ├── pages\n│   │   │   └── homepage.pcss\n│   │   └── vendor.pcss\n│   ├── fonts\n│   ├── img\n│   │   └── favicon-src.png\n│   ├── js\n│   │   ├── app.js\n│   │   └── workbox-catch-handler.js\n│   └── vue\n│       └── Confetti.vue\n├── tailwind.config.js\n├── templates\n├── web\n│   ├── dist\n│   │   ├── criticalcss\n│   │   │   └── index_critical.min.css\n│   │   ├── css\n│   │   │   ├── styles.d833997e3e3f91af64e7.css\n│   │   │   └── styles.d833997e3e3f91af64e7.css.map\n│   │   ├── img\n│   │   │   └── favicons\n│   │   │       ├── android-chrome-144x144.png\n│   │   │       ├── android-chrome-192x192.png\n│   │   │       ├── android-chrome-256x256.png\n│   │   │       ├── android-chrome-36x36.png\n│   │   │       ├── android-chrome-384x384.png\n│   │   │       ├── android-chrome-48x48.png\n│   │   │       ├── android-chrome-512x512.png\n│   │   │       ├── android-chrome-72x72.png\n│   │   │       ├── android-chrome-96x96.png\n│   │   │       ├── apple-touch-icon-114x114.png\n│   │   │       ├── apple-touch-icon-120x120.png\n│   │   │       ├── apple-touch-icon-144x144.png\n│   │   │       ├── apple-touch-icon-152x152.png\n│   │   │       ├── apple-touch-icon-167x167.png\n│   │   │       ├── apple-touch-icon-180x180.png\n│   │   │       ├── apple-touch-icon-57x57.png\n│   │   │       ├── apple-touch-icon-60x60.png\n│   │   │       ├── apple-touch-icon-72x72.png\n│   │   │       ├── apple-touch-icon-76x76.png\n│   │   │       ├── apple-touch-icon.png\n│   │   │       ├── apple-touch-icon-precomposed.png\n│   │   │       ├── apple-touch-startup-image-1182x2208.png\n│   │   │       ├── apple-touch-startup-image-1242x2148.png\n│   │   │       ├── apple-touch-startup-image-1496x2048.png\n│   │   │       ├── apple-touch-startup-image-1536x2008.png\n│   │   │       ├── apple-touch-startup-image-320x460.png\n│   │   │       ├── apple-touch-startup-image-640x1096.png\n│   │   │       ├── apple-touch-startup-image-640x920.png\n│   │   │       ├── apple-touch-startup-image-748x1024.png\n│   │   │       ├── apple-touch-startup-image-750x1294.png\n│   │   │       ├── apple-touch-startup-image-768x1004.png\n│   │   │       ├── browserconfig.xml\n│   │   │       ├── coast-228x228.png\n│   │   │       ├── favicon-16x16.png\n│   │   │       ├── favicon-32x32.png\n│   │   │       ├── favicon.ico\n│   │   │       ├── firefox_app_128x128.png\n│   │   │       ├── firefox_app_512x512.png\n│   │   │       ├── firefox_app_60x60.png\n│   │   │       ├── manifest.json\n│   │   │       ├── manifest.webapp\n│   │   │       ├── mstile-144x144.png\n│   │   │       ├── mstile-150x150.png\n│   │   │       ├── mstile-310x150.png\n│   │   │       ├── mstile-310x310.png\n│   │   │       ├── mstile-70x70.png\n│   │   │       ├── yandex-browser-50x50.png\n│   │   │       └── yandex-browser-manifest.json\n│   │   ├── js\n│   │   │   ├── analytics.45eff9ff7d6c7c1e3c3d4184fdbbed90.js\n│   │   │   ├── app.30334b5124fa6e221464.js\n│   │   │   ├── app.30334b5124fa6e221464.js.map\n│   │   │   ├── app-legacy.560ef247e6649c0c24d0.js\n│   │   │   ├── app-legacy.560ef247e6649c0c24d0.js.map\n│   │   │   ├── confetti.1152197f8c58a1b40b34.js\n│   │   │   ├── confetti.1152197f8c58a1b40b34.js.map\n│   │   │   ├── confetti-legacy.8e9093b414ea8aed46e5.js\n│   │   │   ├── confetti-legacy.8e9093b414ea8aed46e5.js.map\n│   │   │   ├── precache-manifest.f774c437974257fc8026ca1bc693655c.js\n│   │   │   ├── styles-legacy.d833997e3e3f91af64e7.js\n│   │   │   ├── styles-legacy.d833997e3e3f91af64e7.js.map\n│   │   │   ├── vendors~confetti~vue.03b9213ce186db5518ea.js\n│   │   │   ├── vendors~confetti~vue.03b9213ce186db5518ea.js.map\n│   │   │   ├── vendors~confetti~vue-legacy.e31223849ab7fea17bb8.js\n│   │   │   ├── vendors~confetti~vue-legacy.e31223849ab7fea17bb8.js.map\n│   │   │   └── workbox-catch-handler.js\n│   │   ├── manifest.json\n│   │   ├── manifest-legacy.json\n│   │   ├── report-legacy.html\n│   │   ├── report-modern.html\n│   │   ├── webapp.html\n│   │   └── workbox-catch-handler.js\n│   ├── favicon.ico -<span>&gt;</span> dist/img/favicons/favicon.ico\n│   ├── index.php\n│   ├── offline.html\n│   ├── offline.svg\n│   └── sw.js\n├── webpack.common.js\n├── webpack.dev.js\n├── webpack.prod.js\n├── webpack.settings.js\n└── yarn.lock</code></pre><aside><h5><i></i>&nbsp;Post-Build Project Tree</h5></aside></div></section></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/an-annotated-webpack-4-config-for-frontend-web-development#injecting-script-css-tags-in-your-html\"><i></i><span>LINK</span></a></span>INJECTING SCRIPT &amp; CSS TAGS IN YOUR HTML</h3><p>With the web­pack con­fig shown here,&nbsp;<kbd>&lt;script&gt;</kbd>&nbsp;and&nbsp;<kbd>&lt;style&gt;</kbd>&nbsp;tags&nbsp;do not get inject­ed into your&nbsp;<span>HTML</span>&nbsp;as part of the pro­duc­tion build. The set­up uses&nbsp;<a href=\"http://craftcms.com/\" target=\"_blank\" rel=\"noreferrer noopener\">Craft&nbsp;<span>CMS</span></a>, which has a&nbsp;tem­plat­ing sys­tem, and we inject the tags using the&nbsp;<a href=\"http://github.com/nystudio107/craft-twigpack\" target=\"_blank\" rel=\"noreferrer noopener\">Twig­pack plu­g­in</a>.</p><p>If you’re not using Craft&nbsp;<span>CMS</span>&nbsp;or a&nbsp;sys­tem that has a&nbsp;tem­plat­ing engine, and want these tags inject­ed into your&nbsp;<span>HTML</span>, you’ll want to use the&nbsp;<a href=\"http://github.com/jantimon/html-webpack-plugin\" target=\"_blank\" rel=\"noreferrer noopener\">Html­Web­pack­Plu­g­in</a>&nbsp;to do that for you. This plu­g­in is already includ­ed, you’d just need to add a&nbsp;lit­tle con­fig to tell it to inject the tags into your&nbsp;<span>HTML</span>.</p></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/an-annotated-webpack-4-config-for-frontend-web-development#craft-cms-3-integration-with-the-twigpack-plugin\"><i></i><span>LINK</span></a></span>CRAFT CMS 3 INTEGRATION WITH THE TWIGPACK PLUGIN</h3><p>If you’re not using&nbsp;<a href=\"http://craftcms.com/\" target=\"_blank\" rel=\"noreferrer noopener\">Craft&nbsp;<span>CMS</span>&nbsp;<span>3</span>,</a>&nbsp;you can safe­ly skip this sec­tion. It just pro­vides some use­ful inte­gra­tion information.</p></div></div><div><div><section><div><figure><div><div data-expand=\"-1\"><picture><source data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/twigpack-plugin-logo-lg.jpg.webp 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/twigpack-plugin-logo-lg.jpg.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/twigpack-plugin-logo-lg.jpg.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/twigpack-plugin-logo-lg.jpg.webp 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/twigpack-plugin-logo-lg.jpg.webp 368w\" type=\"image/webp\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/twigpack-plugin-logo-lg.jpg.webp 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/twigpack-plugin-logo-lg.jpg.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/twigpack-plugin-logo-lg.jpg.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/twigpack-plugin-logo-lg.jpg.webp 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/twigpack-plugin-logo-lg.jpg.webp 368w\"><img src=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQAAAQABAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADAREAAhEBAxEB%2F8QAFgABAQEAAAAAAAAAAAAAAAAAAAMG%2F8QAGhAAAgMBAQAAAAAAAAAAAAAAAQIAAwQiMf%2FEABYBAQEBAAAAAAAAAAAAAAAAAAACA%2F%2FEABkRAAMAAwAAAAAAAAAAAAAAAAABAgMhIv%2FaAAwDAQACEQMRAD8A3ehnWomv2Z5XSnkqEm9jOztUDYOoxOnPQtJPRWaEiAf%2F2Q%3D%3D\" data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/twigpack-plugin-logo-lg.jpg 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/twigpack-plugin-logo-lg.jpg 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/twigpack-plugin-logo-lg.jpg 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/twigpack-plugin-logo-lg.jpg 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/twigpack-plugin-logo-lg.jpg 368w\" data-lowsrc=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQAAAQABAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADAREAAhEBAxEB%2F8QAFgABAQEAAAAAAAAAAAAAAAAAAAMG%2F8QAGhAAAgMBAQAAAAAAAAAAAAAAAQIAAwQiMf%2FEABYBAQEBAAAAAAAAAAAAAAAAAAACA%2F%2FEABkRAAMAAwAAAAAAAAAAAAAAAAABAgMhIv%2FaAAwDAQACEQMRAD8A3ehnWomv2Z5XSnkqEm9jOztUDYOoxOnPQtJPRWaEiAf%2F2Q%3D%3D\" alt=\"Twigpack Plugin Logo Lg\" height=\"auto\" width=\"100%\" sizes=\"100vw\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/twigpack-plugin-logo-lg.jpg 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/twigpack-plugin-logo-lg.jpg 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/twigpack-plugin-logo-lg.jpg 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/twigpack-plugin-logo-lg.jpg 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/twigpack-plugin-logo-lg.jpg 368w\"></picture><img src=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQAAAQABAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADAREAAhEBAxEB%2F8QAFgABAQEAAAAAAAAAAAAAAAAAAAMG%2F8QAGhAAAgMBAQAAAAAAAAAAAAAAAQIAAwQiMf%2FEABYBAQEBAAAAAAAAAAAAAAAAAAACA%2F%2FEABkRAAMAAwAAAAAAAAAAAAAAAAABAgMhIv%2FaAAwDAQACEQMRAD8A3ehnWomv2Z5XSnkqEm9jOztUDYOoxOnPQtJPRWaEiAf%2F2Q%3D%3D\"></div></div></figure></div></section></div></div><div><div><p>I wrote a&nbsp;free&nbsp;plu­g­in called&nbsp;<a href=\"http://github.com/nystudio107/craft-twigpack\" target=\"_blank\" rel=\"noreferrer noopener\">Twig­pack</a>&nbsp;that makes it easy to inte­grate our fan­cy web­pack build set­up with Craft&nbsp;<span>CMS</span>&nbsp;<span>3</span>.</p><p>It han­dles access­ing the&nbsp;<kbd>manifest.json</kbd>&nbsp;files to inject entry points into your Twig&nbsp;tem­plates, and it even han­dles pat­terns for doing the legacy/​modern mod­ule injec­tion, asyn­chro­nous&nbsp;<span>CSS</span>&nbsp;load­ing, and a&nbsp;whole lot&nbsp;more.</p><p>It’ll make work­ing with the web­pack&nbsp;<span>4</span>&nbsp;con­fig pre­sent­ed here very simple.</p><p>To include the&nbsp;<span>CSS</span>, I&nbsp;do:</p></div></div><div><div><section><div><pre><code><span><span>&lt;!--# if expr=\"$HTTP_COOKIE=/critical\\-css\\=1/\" --&gt;</span></span>\n    <span><span><span>{{</span></span> <span>craft</span><span>.</span><span>twigpack</span><span>.</span><span>includeCssModule</span><span>(</span><span><span>\"</span>styles.css<span>\"</span></span><span>,</span> <span>false</span><span>)</span> <span><span>}}</span></span></span>\n<span><span>&lt;!--# else --&gt;</span>\n    <span><span><span>&lt;</span>script</span><span>&gt;</span></span><span>\n        Cookie<span>.</span><span>set</span><span>(</span><span>\"critical-css\"</span><span>,</span> <span>'1'</span><span>,</span> <span>{</span> expires<span>:</span> <span>\"7D\"</span><span>,</span> secure<span>:</span> <span>true</span> <span>}</span><span>)</span><span>;</span>\n    </span><span><span><span>&lt;/</span>script</span><span>&gt;</span></span></span>\n    <span><span><span>{{</span></span> <span>craft</span><span>.</span><span>twigpack</span><span>.</span><span>includeCriticalCssTags</span><span>(</span><span>)</span> <span><span>}}</span></span></span>\n\n    <span><span><span>{{</span></span> <span>craft</span><span>.</span><span>twigpack</span><span>.</span><span>includeCssModule</span><span>(</span><span><span>\"</span>styles.css<span>\"</span></span><span>,</span> <span>true</span><span>)</span> <span><span>}}</span></span></span>\n    <span><span><span>{{</span></span> <span>craft</span><span>.</span><span>twigpack</span><span>.</span><span>includeCssRelPreloadPolyfill</span><span>(</span><span>)</span> <span><span>}}</span></span></span>\n<span><span>&lt;!--# endif --&gt;</span></span></code></pre><aside><h5><i></i>&nbsp;Including CSS with Twigpack</h5></aside></div></section></div></div><div><div><p>The&nbsp;<kbd>&lt;!--# --&gt;</kbd>&nbsp;<span>HTML</span>&nbsp;com­ments are&nbsp;<a href=\"http://nginx.org/en/docs/http/ngx_http_ssi_module.html\" target=\"_blank\" rel=\"noreferrer noopener\">Nginx Servi­er Side Includes</a>&nbsp;direc­tives. The pat­tern is that if the&nbsp;<kbd>critical-css</kbd>cook­ie is set, the user has already vis­it­ed our web­site in the last&nbsp;<span>7</span>&nbsp;days, so their brows­er should have the site&nbsp;<span>CSS</span>cached, and we just serve up the site&nbsp;<span>CSS</span>&nbsp;normally.</p><p>If the&nbsp;<kbd>critical-css</kbd>&nbsp;cook­ie is not set, we set the cook­ie via&nbsp;<a href=\"http://www.npmjs.com/package/tiny-cookie\" target=\"_blank\" rel=\"noreferrer noopener\">Tiny Cook­ie</a>,&nbsp;include our Crit­i­cal&nbsp;<span>CSS</span>, and load the site&nbsp;<span>CSS</span>&nbsp;asyn­chro­nous­ly. See the&nbsp;<a href=\"https://nystudio107.com/blog/implementing-critical-css\">Imple­ment­ing Crit­i­cal&nbsp;<span>CSS</span>&nbsp;on your web­site</a>&nbsp;arti­cle for details on Crit­i­cal&nbsp;<span>CSS</span>.</p><p>To serve up our JavaScript, we just&nbsp;do:</p></div></div><div><div><section><div><pre><code><span><span><span>{{</span></span> <span>craft</span><span>.</span><span>twigpack</span><span>.</span><span>includeSafariNomoduleFix</span><span>(</span><span>)</span> <span><span>}}</span></span></span>\n<span><span><span>{{</span></span> <span>craft</span><span>.</span><span>twigpack</span><span>.</span><span>includeJsModule</span><span>(</span><span><span>\"</span>app.js<span>\"</span></span><span>,</span> <span>true</span><span>)</span> <span><span>}}</span></span></span></code></pre><aside><h5><i></i>&nbsp;Including JavaScript with Twigpack</h5></aside></div></section></div></div><div><div><p>The sec­ond true para­me­ter tells it to load the JavaScript async as a&nbsp;mod­ule, so the result­ing&nbsp;<span>HTML</span>&nbsp;looks like&nbsp;this:</p></div></div><div><div><section><div><pre><code><span>&lt;</span>script<span>&gt;</span>\n<span>!</span><span>function</span><span>(</span><span>)</span><span>{</span><span>var</span> e<span>=</span>document<span>,</span>t<span>=</span>e<span>.</span><span>createElement</span><span>(</span><span>\"script\"</span><span>)</span><span>;</span><span>if</span><span>(</span><span>!</span><span>(</span><span>\"noModule\"</span><span>in</span> t<span>)</span><span>&amp;&amp;</span><span>\"onbeforeload\"</span><span>in</span> t<span>)</span><span>{</span><span>var</span> n<span>=</span><span>!</span><span>1</span><span>;</span>e<span>.</span><span>addEventListener</span><span>(</span><span>\"beforeload\"</span><span>,</span><span>function</span><span>(</span>e<span>)</span><span>{</span><span>if</span><span>(</span>e<span>.</span>target<span>===</span>t<span>)</span>n<span>=</span><span>!</span><span>0</span><span>;</span><span>else</span> <span>if</span><span>(</span><span>!</span>e<span>.</span>target<span>.</span><span>hasAttribute</span><span>(</span><span>\"nomodule\"</span><span>)</span><span>||</span><span>!</span>n<span>)</span><span>return</span><span>;</span>e<span>.</span><span>preventDefault</span><span>(</span><span>)</span><span>}</span><span>,</span><span>!</span><span>0</span><span>)</span><span>,</span>t<span>.</span>type<span>=</span><span>\"module\"</span><span>,</span>t<span>.</span>src<span>=</span><span>\".\"</span><span>,</span>e<span>.</span>head<span>.</span><span>appendChild</span><span>(</span>t<span>)</span><span>,</span>t<span>.</span><span>remove</span><span>(</span><span>)</span><span>}</span><span>}</span><span>(</span><span>)</span><span>;</span>\n<span>&lt;</span><span>/</span>script<span>&gt;</span>\n<span>&lt;</span>script type<span>=</span><span>\"module\"</span> src<span>=</span><span>\"http://example.test/dist/js/app.273e88e73566fecf20de.js\"</span><span>&gt;</span><span>&lt;</span><span>/</span>script<span>&gt;</span>\n<span>&lt;</span>script nomodule src<span>=</span><span>\"http://example.test/dist/js/app-legacy.95d36ead9190c0571578.js\"</span><span>&gt;</span><span>&lt;</span><span>/</span>script<span>&gt;</span></code></pre><aside><h5><i></i>&nbsp;HTML result of the JavaScript</h5></aside></div></section></div></div><div><div><p>See the&nbsp;<a href=\"http://github.com/nystudio107/craft-twigpack\" target=\"_blank\" rel=\"noreferrer noopener\">Twig­pack doc­u­men­ta­tion</a>&nbsp;for details</p><p>Here’s my full&nbsp;<kbd>config/twigpack.php file</kbd>&nbsp;that I&nbsp;use; note that it has local set­tings for run­ning inside of my Home­stead&nbsp;<span>VM</span>. Your set­tings may differ:</p></div></div><div><div><section><div><pre><code><span>return</span> <span>[</span>\n    <span>// Global settings</span>\n    <span>'*'</span> <span>=</span><span>&gt;</span> <span>[</span>\n        <span>// If `devMode` is on, use webpack-dev-server to all for HMR (hot module reloading)</span>\n        <span>'useDevServer'</span> <span>=</span><span>&gt;</span> <span>false</span><span>,</span>\n        <span>// The JavaScript entry from the manifest.json to inject on Twig error pages</span>\n        <span>'errorEntry'</span> <span>=</span><span>&gt;</span> <span>''</span><span>,</span>\n        <span>// Manifest file names</span>\n        <span>'manifest'</span> <span>=</span><span>&gt;</span> <span>[</span>\n            <span>'legacy'</span> <span>=</span><span>&gt;</span> <span>'manifest-legacy.json'</span><span>,</span>\n            <span>'modern'</span> <span>=</span><span>&gt;</span> <span>'manifest.json'</span><span>,</span>\n        <span>]</span><span>,</span>\n        <span>// Public server config</span>\n        <span>'server'</span> <span>=</span><span>&gt;</span> <span>[</span>\n            <span>'manifestPath'</span> <span>=</span><span>&gt;</span> <span>'/dist/'</span><span>,</span>\n            <span>'publicPath'</span> <span>=</span><span>&gt;</span> <span>'/'</span><span>,</span>\n        <span>]</span><span>,</span>\n        <span>// webpack-dev-server config</span>\n        <span>'devServer'</span> <span>=</span><span>&gt;</span> <span>[</span>\n            <span>'manifestPath'</span> <span>=</span><span>&gt;</span> <span>'http://localhost:8080/'</span><span>,</span>\n            <span>'publicPath'</span> <span>=</span><span>&gt;</span> <span>'http://localhost:8080/'</span><span>,</span>\n        <span>]</span><span>,</span>\n        <span>// Local files config</span>\n        <span>'localFiles'</span> <span>=</span><span>&gt;</span> <span>[</span>\n            <span>'basePath'</span> <span>=</span><span>&gt;</span> <span>'@webroot/'</span><span>,</span>\n            <span>'criticalPrefix'</span> <span>=</span><span>&gt;</span> <span>'dist/criticalcss/'</span><span>,</span>\n            <span>'criticalSuffix'</span> <span>=</span><span>&gt;</span> <span>'_critical.min.css'</span><span>,</span>\n        <span>]</span><span>,</span>\n    <span>]</span><span>,</span>\n    <span>// Live (production) environment</span>\n    <span>'live'</span> <span>=</span><span>&gt;</span> <span>[</span>\n    <span>]</span><span>,</span>\n    <span>// Staging (pre-production) environment</span>\n    <span>'staging'</span> <span>=</span><span>&gt;</span> <span>[</span>\n    <span>]</span><span>,</span>\n    <span>// Local (development) environment</span>\n    <span>'local'</span> <span>=</span><span>&gt;</span> <span>[</span>\n        <span>// If `devMode` is on, use webpack-dev-server to all for HMR (hot module reloading)</span>\n        <span>'useDevServer'</span> <span>=</span><span>&gt;</span> <span>true</span><span>,</span>\n        <span>// The JavaScript entry from the manifest.json to inject on Twig error pages</span>\n        <span>'errorEntry'</span> <span>=</span><span>&gt;</span> <span>'app.js'</span><span>,</span>\n        <span>// webpack-dev-server config</span>\n        <span>'devServer'</span> <span>=</span><span>&gt;</span> <span>[</span>\n            <span>'manifestPath'</span> <span>=</span><span>&gt;</span> <span>'http://localhost:8080/'</span><span>,</span>\n            <span>'publicPath'</span> <span>=</span><span>&gt;</span> <span>'http://192.168.10.10:8080/'</span><span>,</span>\n        <span>]</span><span>,</span>\n    <span>]</span><span>,</span>\n<span>]</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;config/twigpack.php Twigpack settings</h5></aside></div></section></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/an-annotated-webpack-4-config-for-frontend-web-development#wrapping-up\"><i></i><span>LINK</span></a></span>WRAPPING UP!</h3><p>Well, that was quite a&nbsp;deep dive! When I&nbsp;first start­ed delv­ing into web­pack, I&nbsp;soon real­ized that it’s a&nbsp;tremen­dous­ly pow­er­ful tool, with very deep func­tion­al­i­ty. How deep you go depends on how far you want to&nbsp;dive.</p></div></div><div><div><section><div><figure><div><div data-expand=\"-1\"><picture><source data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/webpack-deep-dive.jpg.webp 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/webpack-deep-dive.jpg.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/webpack-deep-dive.jpg.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/webpack-deep-dive.jpg.webp 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/webpack-deep-dive.jpg.webp 368w\" type=\"image/webp\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/webpack-deep-dive.jpg.webp 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/webpack-deep-dive.jpg.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/webpack-deep-dive.jpg.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/webpack-deep-dive.jpg.webp 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/webpack-deep-dive.jpg.webp 368w\"><img src=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQAAAQABAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADASIAAhEBAxEB%2F8QAFgABAQEAAAAAAAAAAAAAAAAABQED%2F8QAHxAAAQQCAgMAAAAAAAAAAAAAAQACAwQFNBFyIUFh%2F8QAFAEBAAAAAAAAAAAAAAAAAAAABP%2FEABgRAAIDAAAAAAAAAAAAAAAAAAABEhNh%2F9oADAMBAAIRAxEAPwAnGZ21Naa2STz6AaDyssll7UU74hMXj6ETS24uwUubUnYpdzhoapTw%2F9k%3D\" data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/webpack-deep-dive.jpg 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/webpack-deep-dive.jpg 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/webpack-deep-dive.jpg 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/webpack-deep-dive.jpg 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/webpack-deep-dive.jpg 368w\" data-lowsrc=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQAAAQABAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADASIAAhEBAxEB%2F8QAFgABAQEAAAAAAAAAAAAAAAAABQED%2F8QAHxAAAQQCAgMAAAAAAAAAAAAAAQACAwQFNBFyIUFh%2F8QAFAEBAAAAAAAAAAAAAAAAAAAABP%2FEABgRAAIDAAAAAAAAAAAAAAAAAAABEhNh%2F9oADAMBAAIRAxEAPwAnGZ21Naa2STz6AaDyssll7UU74hMXj6ETS24uwUubUnYpdzhoapTw%2F9k%3D\" alt=\"Webpack Deep Dive\" height=\"auto\" width=\"100%\" sizes=\"100vw\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/webpack-deep-dive.jpg 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/webpack-deep-dive.jpg 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/webpack-deep-dive.jpg 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/webpack-deep-dive.jpg 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/webpack-deep-dive.jpg 368w\"></picture></div></div></figure></div></section></div></div><div><div><p>For the com­plete source code for every­thing pre­sent­ed here, check out the&nbsp;<strong><a href=\"http://github.com/nystudio107/annotated-webpack-4-config\" target=\"_blank\" rel=\"noreferrer noopener\">anno­tat­ed-web­pack-<span>4</span>-con­fig</a></strong>&nbsp;github repo.</p><p>Hope­ful­ly this was help­ful to you, enjoy your jour­ney, and go build some­thing awesome!</p></div></div><aside><div><div><h3>FURTHER READING</h3><ul><li><a href=\"https://nystudio107.com/blog/a-gulp-workflow-for-frontend-development-automation\">A Gulp Workflow for Frontend Development Automation</a></li><li><a href=\"https://nystudio107.com/blog/image-optimization-project-results\">Post-Mortem: Applied Image Optimization</a></li><li><a href=\"https://nystudio107.com/blog/handling-errors-gracefully-in-craft-cms\">Handling Errors Gracefully in Craft CMS</a></li></ul></div></div></aside>","filePath":"pages/JavaScript/.md","_id":"JCM4VXPmawG7iIaX","dateUpdated":1541515569593}
{"date":{"$$date":1542213039412},"title":"Introduction to Sets in JavaScript","sourceUrl":"https://alligator.io/js/sets-introduction/","path":"ES6/","category":"ES6","tags":["ES6"," Sets"],"author":"","excerpt":"Sets are a new object type with ES6 (ES2015) that allow to create collections of unique values. The values in a set can be either simple primitives like strings or integers, but more complex object types like object literals or arrays can also be part of a set.","dateCreated":1542212538792,"coverImage":"","type":"Post","frontmatter":"---\npath: 'ES6/'\ndate: 'Wed Nov 14 2018 21:59:10 GMT+0530 (India Standard Time)'\ntitle: 'Introduction to Sets in JavaScript'\ntags: ['ES6','Sets']\ncategory: 'ES6'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://alligator.io/js/sets-introduction/'\ntype: 'Post'\n---\n    ","htmlCode":"<div itemprop=\"articleSection\"><p>Sets are a new object type with ES6 (ES2015) that allow to create collections of unique values. The values in a set can be either simple primitives like strings or integers, but more complex object types like object literals or arrays can also be part of a set.</p><p>Here’s a simple example showing off a basic set and a few of the available methods on it like <em>add</em>, <em>size</em>, <em>has</em>, <em>forEach</em>, <em>delete</em> and <em>clear</em>:</p><pre><code><span>let</span> animals = <span>new</span> <span>Set</span>();\n\nanimals.add(<span>'🐷'</span>);\nanimals.add(<span>'🐼'</span>);\nanimals.add(<span>'🐢'</span>);\nanimals.add(<span>'🐿'</span>);\n<span>console</span>.log(animals.size); <span>// 4</span>\nanimals.add(<span>'🐼'</span>);\n<span>console</span>.log(animals.size); <span>// 4</span>\n\n<span>console</span>.log(animals.has(<span>'🐷'</span>)); <span>// true</span>\nanimals.delete(<span>'🐷'</span>);\n<span>console</span>.log(animals.has(<span>'🐷'</span>)); <span>// false</span>\n\nanimals.forEach(<span><span>animal</span> =&gt;</span> {\n  <span>console</span>.log(<span>`Hey <span>${animal}</span>!`</span>);\n});\n\n<span>// Hey 🐼!</span>\n<span>// Hey 🐢!</span>\n<span>// Hey 🐿!</span>\n\nanimals.clear();\n<span>console</span>.log(animals.size); <span>// 0</span></code></pre><div><h4>🏋️‍♂️ Recommended course <sub>⤵</sub></h4><a href=\"https://ES6.io/friend/ALLIGATOR\" rel=\"nofollow\">Wes Bos' ES6 for Everyone!</a></div><hr><p>Here’s another example where we pass-in an array to initialize the set. Notice how the initializing array gets deconstructed, but an array added added later stays in the form of an array:</p><pre><code><span>let</span> myAnimals = <span>new</span> <span>Set</span>([<span>'🐷'</span>, <span>'🐢'</span>, <span>'🐷'</span>, <span>'🐷'</span>]);\n\nmyAnimals.add([<span>'🐨'</span>, <span>'🐑'</span>]);\nmyAnimals.add({ <span>name</span>: <span>'Rud'</span>, <span>type</span>: <span>'🐢'</span> });\n<span>console</span>.log(myAnimals.size); <span>// 4</span>\n\nmyAnimals.forEach(<span><span>animal</span> =&gt;</span> {\n  <span>console</span>.log(animal);\n});\n\n\n<span>// 🐷</span>\n<span>// 🐢</span>\n<span>// [\"🐨\", \"🐑\"]</span>\n<span>// Object { name: \"Rud\", type: \"🐢\" }</span></code></pre><hr><p>Strings are a valid iterable so they can also be passed-in to initialize a set:</p><pre><code><span>console</span>.log(<span>'Only unique characters will be in this set.'</span>.length); <span>// 43</span>\n\n<span>let</span> sentence = <span>new</span> <span>Set</span>(<span>'Only unique characters will be in this set.'</span>);\n<span>console</span>.log(sentence.size); <span>// 18</span></code></pre><hr><p>On top of using <em>forEach</em> on a set, <a href=\"/js/for-of-for-in-loops/\">for…of</a> loops can also be used to iterate over sets:</p><pre><code><span>let</span> moreAnimals = <span>new</span> <span>Set</span>([<span>'🐺'</span>, <span>'🐴'</span>, <span>'🐕'</span>, <span>'🐇'</span>]);\n\n<span>for</span> (<span>let</span> animal <span>of</span> moreAnimals) {\n  <span>console</span>.log(<span>`Howdy <span>${ animal }</span>`</span>);\n}\n\n<span>// Howdy 🐺</span>\n<span>// Howdy 🐴</span>\n<span>// Howdy 🐕</span>\n<span>// Howdy 🐇</span></code></pre><h2><a href=\"#keys-and-values\" aria-label=\"Anchor\" data-anchorjs-icon=\"\"></a>Keys and Values</h2><p>Sets also have the <em>keys</em> and <em>values</em> methods, with <strong>keys</strong> being an alias for <strong>values</strong>, so both methods do exactly the same thing. Using either of these methods returns a new iterator object with the values of the set in the same order in which they were added to the set. Here’s an example:</p><pre><code><span>let</span> partyItems = <span>new</span> <span>Set</span>([<span>'🍕'</span>, <span>'🍾'</span>, <span>'🎊'</span>]);\n<span>let</span> items = partyItems.values();\n\n<span>console</span>.log(items.next());\n<span>console</span>.log(items.next());\n<span>console</span>.log(items.next());\n<span>console</span>.log(items.next().done);\n\n<span>// Object {</span>\n<span>//   done: false,</span>\n<span>//   value: \"🍕\"</span>\n<span>// }</span>\n\n<span>// Object {</span>\n<span>//   done: false,</span>\n<span>//   value: \"🍾\"</span>\n<span>// }</span>\n\n<span>// Object {</span>\n<span>//   done: false,</span>\n<span>//   value: \"🎊\"</span>\n<span>// }</span>\n\n<span>// true</span></code></pre><h2><a href=\"#see-also\" aria-label=\"Anchor\" data-anchorjs-icon=\"\"></a>See also</h2><ul><li><a href=\"/js/maps-introduction/\">Introduction to Maps</a></li></ul></div>","filePath":"pages/ES6/.md","_id":"Kmva6UW87I1oH3Fw","dateUpdated":1542213039412}
{"date":{"$$date":1542208454707},"title":"Testing Classes & Pipes","sourceUrl":"https://codecraft.tv/courses/angular/unit-testing/classes-and-pipes/","path":"Angular/Angular/","category":"Angular","tags":["Angular"," TDD"],"author":"Asim","excerpt":"","dateCreated":1542207583221,"coverImage":"","type":"Post","frontmatter":"---\npath: 'Angular/'\ndate: 'Wed Nov 14 2018 20:41:37 GMT+0530 (India Standard Time)'\ntitle: 'Testing Classes & Pipes'\ntags: ['Angular','TDD']\ncategory: 'Angular'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://codecraft.tv/courses/angular/unit-testing/classes-and-pipes/'\ntype: 'Post'\n---\n    ","htmlCode":"<div>\n                <div>\n\n<ul>\n<li><a href=\"#_learning_objectives\">Learning Objectives</a></li>\n<li><a href=\"#_sample_class_test_suite\">Sample class &amp; test suite</a></li>\n<li><a href=\"#_setup_teardown\">Setup &amp; teardown</a></li>\n<li><a href=\"#_creating_test_specs\">Creating test specs</a></li>\n<li><a href=\"#_running_the_tests\">Running the&nbsp;tests</a></li>\n<li><a href=\"#_pipes\">Pipes</a></li>\n<li><a href=\"#_summary\">Summary</a></li>\n<li><a href=\"#_listing\">Listing</a></li>\n</ul>\n</div>\n<div>\n<h2><a href=\"#_learning_objectives\">Learning Objectives</a></h2>\n<div>\n<div>\n<ul>\n<li>\n<p>How to&nbsp;unit test an&nbsp;instance of&nbsp;a class.</p>\n</li>\n</ul>\n</div>\n</div>\n</div>\n<div>\n<h2><a href=\"#_sample_class_test_suite\">Sample class &amp; test suite</a></h2>\n<div>\n<div>\n<p>We’ll start our unit testing journey with all you will ever need to&nbsp;know, how to&nbsp;test a&nbsp;<code>class</code>.</p>\n</div>\n<div><h4>Tip</h4><div>\nEverything in&nbsp;Angular is an&nbsp;instance of&nbsp;a class, be it a&nbsp;Component, Directive, Pipe and&nbsp;so on. So once you know how to&nbsp;test a&nbsp;basic class you can test everything.\n</div></div>\n<div>\n<p>Let’s imagine we have a&nbsp;simple class called <code>AuthService</code> it’s something we want to&nbsp;provide to&nbsp;Angulars DI framework but that doesn’t play a&nbsp;part in&nbsp;how we want to&nbsp;test it.</p>\n</div>\n<div>\n<div>Listing 1. app/auth.service.ts</div>\n<div>\n<pre><span></span><a data-original-title=\"Copied!\">Copy</a><code data-lang=\"typescript\"><span></span><span>export</span> <span>class</span> <span>AuthService</span> <span>{</span>\n  <span>isAuthenticated</span><span>()</span><span>:</span> <span>boolean</span> <span>{</span>\n    <span>return</span> <span>!!</span><span>localStorage</span><span>.</span><span>getItem</span><span>(</span><span>'token'</span><span>);</span>\n  <span>}</span>\n<span>}</span></code></pre>\n</div>\n</div>\n<div>\n<p>It has one function called <code>isAuthenticated</code> which returns <code>true</code> if there is a&nbsp;token stored in&nbsp;the browsers <code>localStorage</code>.</p>\n</div>\n<div>\n<p>To&nbsp;test this class we create a&nbsp;test file called <code>auth.service.spec.ts</code> that sits next to&nbsp;our <code>auth.service.ts</code> file, like so:</p>\n</div>\n<div>\n<div>Listing 2. app/auth.service.spec.ts</div>\n<div>\n<pre><span></span><a data-original-title=\"Copied!\">Copy</a><code data-lang=\"typescript\"><span></span><span>import</span> <span>{</span><span>AuthService</span><span>}</span> <span>from</span> <span>'./auth.service'</span><span>;</span> <i data-value=\"1\"></i><b>(1)</b>\n\n<span>describe</span><span>(</span><span>'Service: Auth'</span><span>,</span> <span>()</span> <span>=&gt;</span> <span>{</span> <i data-value=\"2\"></i><b>(2)</b>\n<span>});</span></code></pre>\n</div>\n</div>\n<div>\n<table>\n<tbody><tr>\n<td><i data-value=\"1\"></i><b>1</b></td>\n<td>We first import the&nbsp;<code>AuthService</code> class we want to&nbsp;run our tests against.</td>\n</tr>\n<tr>\n<td><i data-value=\"2\"></i><b>2</b></td>\n<td>We add a&nbsp;<code>describe</code> test suite function to&nbsp;hold all our individual test specs.</td>\n</tr>\n</tbody></table>\n</div>\n</div>\n</div>\n<div>\n<h2><a href=\"#_setup_teardown\">Setup &amp; teardown</a></h2>\n<div>\n<div>\n<p>We want to&nbsp;run our test specs against <em>fresh</em> instances of&nbsp;<code>AuthService</code> so we use the&nbsp;<code>beforeEach</code> and&nbsp;<code>afterEach</code> functions to&nbsp;setup and&nbsp;clean instances like so:</p>\n</div>\n<div>\n<div>Listing 3. app/auth.service.spec.ts</div>\n<div>\n<pre><span></span><a data-original-title=\"Copied!\">Copy</a><code data-lang=\"typescript\"><span></span><span>describe</span><span>(</span><span>'Service: Auth'</span><span>,</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n  <span>let</span> <span>service</span>: <span>AuthService</span><span>;</span>\n\n  <span>beforeEach</span><span>(()</span> <span>=&gt;</span> <span>{</span> <i data-value=\"1\"></i><b>(1)</b>\n    <span>service</span> <span>=</span> <span>new</span> <span>AuthService</span><span>();</span>\n  <span>});</span>\n\n  <span>afterEach</span><span>(()</span> <span>=&gt;</span> <span>{</span> <i data-value=\"2\"></i><b>(2)</b>\n    <span>service</span> <span>=</span> <span>null</span><span>;</span>\n    <span>localStorage</span><span>.</span><span>removeItem</span><span>(</span><span>'token'</span><span>);</span>\n  <span>});</span>\n<span>});</span></code></pre>\n</div>\n</div>\n<div>\n<table>\n<tbody><tr>\n<td><i data-value=\"1\"></i><b>1</b></td>\n<td>Before each test spec is run we create a&nbsp;new instance of&nbsp;<code>AuthService</code> and&nbsp;store on&nbsp;the <code>service</code> variable.</td>\n</tr>\n<tr>\n<td><i data-value=\"2\"></i><b>2</b></td>\n<td>After each test spec is finished we null out our <code>service</code> and&nbsp;also remove any tokens we stored in&nbsp;localStorage.</td>\n</tr>\n</tbody></table>\n</div>\n</div>\n</div>\n<div>\n<h2><a href=\"#_creating_test_specs\">Creating test specs</a></h2>\n<div>\n<div>\n<p>Now we create some test specs, the&nbsp;first spec I&nbsp;want to&nbsp;create should check if the&nbsp;<code>isAuthenticated</code> function returns <code>true</code> when there is a&nbsp;token.</p>\n</div>\n<div>\n<div>\n<pre><span></span><a data-original-title=\"Copied!\">Copy</a><code data-lang=\"typescript\"><span></span><span>it</span><span>(</span><span>'should return true from isAuthenticated when there is a token'</span><span>,</span> <span>()</span> <span>=&gt;</span> <span>{</span> <i data-value=\"1\"></i><b>(1)</b>\n  <span>localStorage</span><span>.</span><span>setItem</span><span>(</span><span>'token'</span><span>,</span> <span>'1234'</span><span>);</span> <i data-value=\"2\"></i><b>(2)</b>\n  <span>expect</span><span>(</span><span>service</span><span>.</span><span>isAuthenticated</span><span>()).</span><span>toBeTruthy</span><span>();</span> <i data-value=\"3\"></i><b>(3)</b>\n<span>});</span></code></pre>\n</div>\n</div>\n<div>\n<table>\n<tbody><tr>\n<td><i data-value=\"1\"></i><b>1</b></td>\n<td>We pass to&nbsp;the <code>it</code> function a&nbsp;human readable description of&nbsp;what we are testing. This is shown in&nbsp;the test report and&nbsp;makes it easy to&nbsp;understand what feature isn’t working.</td>\n</tr>\n<tr>\n<td><i data-value=\"2\"></i><b>2</b></td>\n<td>We setup some <em>spec only</em> data in&nbsp;local storage which should trigger the&nbsp;effect we want.</td>\n</tr>\n<tr>\n<td><i data-value=\"3\"></i><b>3</b></td>\n<td>We test an&nbsp;expectation that the&nbsp;<code>service.isAuthenticated()</code> function returns something that resolves to&nbsp;<code>true</code>.</td>\n</tr>\n</tbody></table>\n</div>\n<div>\n<p>We also want to&nbsp;test the&nbsp;reverse case, when there is no token the&nbsp;function should return <code>false</code>:</p>\n</div>\n<div>\n<div>\n<pre><span></span><a data-original-title=\"Copied!\">Copy</a><code data-lang=\"typescript\"><span></span><span>it</span><span>(</span><span>'should return false from isAuthenticated when there is no token'</span><span>,</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n  <span>expect</span><span>(</span><span>service</span><span>.</span><span>isAuthenticated</span><span>()).</span><span>toBeFalsy</span><span>();</span>\n<span>});</span></code></pre>\n</div>\n</div>\n<div>\n<p>We <em>know</em> that in&nbsp;this function the&nbsp;<code>token</code> isn’t set since we make sure to&nbsp;clear out the&nbsp;token in&nbsp;the <code>afterEach</code> function.</p>\n</div>\n<div>\n<p>We now test an&nbsp;expectation that the&nbsp;<code>service.isAuthenticated()</code> function returns something that resolves to&nbsp;<code>false</code>.</p>\n</div>\n</div>\n</div>\n<div>\n<h2><a href=\"#_running_the_tests\">Running the&nbsp;tests</a></h2>\n<div>\n<div>\n<p>To&nbsp;run our tests we simply open up the&nbsp;<abbr>HTML</abbr> file in&nbsp;the browser, you can just click the&nbsp;plunker link and&nbsp;make sure to&nbsp;press run in&nbsp;the toolbar.</p>\n</div>\n<div>\n<div>\n<img src=\"/assets/images/courses/angular/13.unit-testing/class-suite-pass.png\" alt=\"class suite pass\">\n</div>\n</div>\n</div>\n</div>\n<div>\n<h2><a href=\"#_pipes\">Pipes</a></h2>\n<div>\n<div>\n<p>Pipes are by&nbsp;far the&nbsp;simplest part of&nbsp;Angular, they can be implemented as&nbsp;a class with one function and&nbsp;therefore can be tested with <em>just</em> Jasmine and&nbsp;the knowledge we’ve gained so far.</p>\n</div>\n<div>\n<p>In&nbsp;the section on&nbsp;pipes we built one called <code>DefaultPipe</code>, this pipe lets us provide default values for&nbsp;variables in&nbsp;templates like so:</p>\n</div>\n<div>\n<div>\n<pre><span></span><a data-original-title=\"Copied!\">Copy</a>{{ image | default:\"<a href=\"http://example.com/default-image.png\" rel=\"nofollow\"><span>http</span><span>://</span><span>example</span><span>.</span><span>com</span><span>/</span><span>default</span><span>-</span><span>image</span><span>.</span><span>png</span></a>\" }}</pre>\n</div>\n</div>\n<div>\n<p>The&nbsp;code for&nbsp;this pipe looked like so:</p>\n</div>\n<div>\n<div>\n<pre><span></span><a data-original-title=\"Copied!\">Copy</a><code data-lang=\"typescript\"><span></span><span>import</span> <span>{</span><span>Pipe</span><span>,</span> <span>PipeTransform</span><span>}</span> <span>from</span> <span>'@angular/core'</span><span>;</span>\n\n<span>@Pipe</span><span>({</span>\n  <span>name</span><span>:</span> <span>'default'</span>\n<span>})</span>\n<span>export</span> <span>class</span> <span>DefaultPipe</span> <span>implements</span> <span>PipeTransform</span> <span>{</span>\n\n  <span>transform</span><span>(</span><span>value</span>: <span>string</span><span>,</span> <span>fallback</span>: <span>string</span><span>,</span> <span>forceHttps</span>: <span>boolean</span> <span>=</span> <span>false</span><span>)</span><span>:</span> <span>string</span> <span>{</span>\n    <span>let</span> <span>image</span> <span>=</span> <span>\"\"</span><span>;</span>\n    <span>if</span> <span>(</span><span>value</span><span>)</span> <span>{</span>\n      <span>image</span> <span>=</span> <span>value</span><span>;</span>\n    <span>}</span> <span>else</span> <span>{</span>\n      <span>image</span> <span>=</span> <span>fallback</span><span>;</span>\n    <span>}</span>\n    <span>if</span> <span>(</span><span>forceHttps</span><span>)</span> <span>{</span>\n      <span>if</span> <span>(</span><span>image</span><span>.</span><span>indexOf</span><span>(</span><span>\"https\"</span><span>)</span> <span>==</span> <span>-</span><span>1</span><span>)</span> <span>{</span>\n        <span>image</span> <span>=</span> <span>image</span><span>.</span><span>replace</span><span>(</span><span>\"http\"</span><span>,</span> <span>\"https\"</span><span>);</span>\n      <span>}</span>\n    <span>}</span>\n    <span>return</span> <span>image</span><span>;</span>\n  <span>}</span>\n<span>}</span></code></pre>\n</div>\n</div>\n<div>\n<p>Our starting test suite file looks like so:</p>\n</div>\n<div>\n<div>\n<pre><span></span><a data-original-title=\"Copied!\">Copy</a><code data-lang=\"typescript\"><span></span><span>describe</span><span>(</span><span>'Pipe: Default'</span><span>,</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n  <span>let</span> <span>pipe</span>: <span>DefaultPipe</span><span>;</span>\n\n  <span>beforeEach</span><span>(()</span> <span>=&gt;</span> <span>{</span>\n    <span>pipe</span> <span>=</span> <span>new</span> <span>DefaultPipe</span><span>();</span>\n  <span>});</span>\n<span>});</span></code></pre>\n</div>\n</div>\n<div>\n<p>In&nbsp;our setup function we create an&nbsp;instance of&nbsp;our pipe class.</p>\n</div>\n<div>\n<p>Pipe classes have one function called <code>transform</code> so in&nbsp;order to&nbsp;test pipes we just need to&nbsp;test this one function, passing inputs and&nbsp;expecting outputs.</p>\n</div>\n<div>\n<p>Our first test spec checks to&nbsp;see that if the&nbsp;pipe doesn’t recieve an&nbsp;input it returns the&nbsp;default value, like so:</p>\n</div>\n<div>\n<div>\n<pre><span></span><a data-original-title=\"Copied!\">Copy</a><code data-lang=\"typescript\"><span></span><span>it</span><span>(</span><span>'providing no value returns fallback'</span><span>,</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n  <span>expect</span><span>(</span><span>pipe</span><span>.</span><span>transform</span><span>(</span><span>''</span><span>,</span> <span>'<a href=\"http://place-hold.it/300\" rel=\"nofollow\"><span>http</span><span>://</span><span>place</span><span>-</span><span>hold</span><span>.</span><span>it</span><span>/</span><span>300</span></a>'</span><span>)).</span><span>toBe</span><span>(</span><span>'<a href=\"http://place-hold.it/300\" rel=\"nofollow\"><span>http</span><span>://</span><span>place</span><span>-</span><span>hold</span><span>.</span><span>it</span><span>/</span><span>300</span></a>'</span><span>);</span>\n<span>});</span></code></pre>\n</div>\n</div>\n<div>\n<p>We pass in&nbsp;empty string as&nbsp;the input to&nbsp;the transform function and&nbsp;therefore it returns the&nbsp;second argument back to&nbsp;us.</p>\n</div>\n<div>\n<p>For&nbsp;testing pipes there isn’t much else to&nbsp;it, we simply check the&nbsp;various inputs and&nbsp;expected ouputs of&nbsp;our transform function.</p>\n</div>\n<div><h4>Note</h4><div>\nIn&nbsp;order to&nbsp;run this test spec file in&nbsp;our test Plunker remember to&nbsp;add it to&nbsp;the list of&nbsp;test spec files in&nbsp;the <code><em>spec_files</em></code> array.\n</div></div>\n<div><h4>Tip</h4><div>\nIf your <em>Pipe</em> requires dependencies to&nbsp;be injected into the&nbsp;constructor it might be better to&nbsp;use the&nbsp;<em>Angular Test Bed</em> which we cover later on&nbsp;in this section.\n</div></div>\n</div>\n</div>\n<div>\n<h2><a href=\"#_summary\">Summary</a></h2>\n<div>\n<div>\n<p>That’s it really, we can test any <em>isolated</em> class that doesn’t require anything else with a&nbsp;simple jasmine spec file, nothing more complex required.</p>\n</div>\n<div>\n<p>Since everything in&nbsp;Angular is represented as&nbsp;classes, we could stop here&nbsp;— you have most of&nbsp;the tools already to&nbsp;write tests for&nbsp;directives, components, pipes and&nbsp;so on.</p>\n</div>\n<div>\n<p>However our code often requires <em>other</em> code to&nbsp;work, it has dependencies. So how we write <em>isolated</em> tests for&nbsp;pieces of&nbsp;code which by&nbsp;nature are not isolated and&nbsp;need dependencies is the&nbsp;topic of&nbsp;the next lecture.</p>\n</div>\n</div>\n</div>\n<div>\n<h2><a href=\"#_listing\">Listing</a></h2>\n<div>\n<div>\n<div>Listing 4. auth.service.ts</div>\n<div>\n<pre><span></span><a data-original-title=\"Copied!\">Copy</a><code data-lang=\"typescript\"><span></span><span>export</span> <span>class</span> <span>AuthService</span> <span>{</span>\n  <span>isAuthenticated</span><span>()</span><span>:</span> <span>boolean</span> <span>{</span>\n    <span>return</span> <span>!!</span><span>localStorage</span><span>.</span><span>getItem</span><span>(</span><span>'token'</span><span>);</span>\n  <span>}</span>\n<span>}</span></code></pre>\n</div>\n</div>\n<div>\n<div>Listing 5. auth.service.spec.ts</div>\n<div>\n<pre><span></span><a data-original-title=\"Copied!\">Copy</a><code data-lang=\"typescript\"><span></span><span>import</span> <span>{</span><span>AuthService</span><span>}</span> <span>from</span> <span>'./auth.service'</span><span>;</span>\n\n<span>describe</span><span>(</span><span>'Service: Auth'</span><span>,</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n\n  <span>let</span> <span>service</span>: <span>AuthService</span><span>;</span>\n\n  <span>beforeEach</span><span>(()</span> <span>=&gt;</span> <span>{</span>\n    <span>service</span> <span>=</span> <span>new</span> <span>AuthService</span><span>();</span>\n  <span>});</span>\n\n  <span>afterEach</span><span>(()</span> <span>=&gt;</span> <span>{</span>\n    <span>service</span> <span>=</span> <span>null</span><span>;</span>\n    <span>localStorage</span><span>.</span><span>removeItem</span><span>(</span><span>'token'</span><span>);</span>\n  <span>});</span>\n\n  <span>it</span><span>(</span><span>'should return true from isAuthenticated when there is a token'</span><span>,</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n    <span>localStorage</span><span>.</span><span>setItem</span><span>(</span><span>'token'</span><span>,</span> <span>'1234'</span><span>);</span>\n    <span>expect</span><span>(</span><span>service</span><span>.</span><span>isAuthenticated</span><span>()).</span><span>toBeTruthy</span><span>();</span>\n  <span>});</span>\n\n  <span>it</span><span>(</span><span>'should return false from isAuthenticated when there is no token'</span><span>,</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n    <span>expect</span><span>(</span><span>service</span><span>.</span><span>isAuthenticated</span><span>()).</span><span>toBeFalsy</span><span>();</span>\n  <span>});</span>\n\n<span>});</span></code></pre>\n</div>\n</div>\n<div>\n<div>Listing 6. default.pipe.ts</div>\n<div>\n<pre><span></span><a data-original-title=\"Copied!\">Copy</a><code data-lang=\"typescript\"><span></span><span>import</span> <span>{</span><span>Pipe</span><span>,</span> <span>PipeTransform</span><span>}</span> <span>from</span> <span>'@angular/core'</span><span>;</span>\n\n<span>@Pipe</span><span>({</span>\n  <span>name</span><span>:</span> <span>'default'</span>\n<span>})</span>\n<span>export</span> <span>class</span> <span>DefaultPipe</span> <span>implements</span> <span>PipeTransform</span> <span>{</span>\n\n  <span>transform</span><span>(</span><span>value</span>: <span>string</span><span>,</span> <span>fallback</span>: <span>string</span><span>,</span> <span>forceHttps</span>: <span>boolean</span> <span>=</span> <span>false</span><span>)</span><span>:</span> <span>string</span> <span>{</span>\n    <span>let</span> <span>image</span> <span>=</span> <span>\"\"</span><span>;</span>\n    <span>if</span> <span>(</span><span>value</span><span>)</span> <span>{</span>\n      <span>image</span> <span>=</span> <span>value</span><span>;</span>\n    <span>}</span> <span>else</span> <span>{</span>\n      <span>image</span> <span>=</span> <span>fallback</span><span>;</span>\n    <span>}</span>\n    <span>if</span> <span>(</span><span>forceHttps</span><span>)</span> <span>{</span>\n      <span>if</span> <span>(</span><span>image</span><span>.</span><span>indexOf</span><span>(</span><span>\"https\"</span><span>)</span> <span>==</span> <span>-</span><span>1</span><span>)</span> <span>{</span>\n        <span>image</span> <span>=</span> <span>image</span><span>.</span><span>replace</span><span>(</span><span>\"http\"</span><span>,</span> <span>\"https\"</span><span>);</span>\n      <span>}</span>\n    <span>}</span>\n    <span>return</span> <span>image</span><span>;</span>\n  <span>}</span>\n<span>}</span></code></pre>\n</div>\n</div>\n<div>\n<div>Listing 7. default.pipe.spec.ts</div>\n<div>\n<pre><span></span><a data-original-title=\"Copied!\">Copy</a><code data-lang=\"typescript\"><span></span><span>/* tslint:disable:no-unused-variable */</span>\n\n<span>import</span> <span>{</span><span>DefaultPipe</span><span>}</span> <span>from</span> <span>'./default.pipe'</span><span>;</span>\n\n<span>describe</span><span>(</span><span>'Pipe: Default'</span><span>,</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n  <span>let</span> <span>pipe</span>: <span>DefaultPipe</span><span>;</span>\n\n  <span>beforeEach</span><span>(()</span> <span>=&gt;</span> <span>{</span>\n    <span>pipe</span> <span>=</span> <span>new</span> <span>DefaultPipe</span><span>();</span>\n  <span>});</span>\n\n  <span>it</span><span>(</span><span>'providing no value returns fallback'</span><span>,</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n    <span>expect</span><span>(</span><span>pipe</span><span>.</span><span>transform</span><span>(</span><span>''</span><span>,</span> <span>'<a href=\"http://place-hold.it/300\" rel=\"nofollow\"><span>http</span><span>://</span><span>place</span><span>-</span><span>hold</span><span>.</span><span>it</span><span>/</span><span>300</span></a>'</span><span>)).</span><span>toBe</span><span>(</span><span>'<a href=\"http://place-hold.it/300\" rel=\"nofollow\"><span>http</span><span>://</span><span>place</span><span>-</span><span>hold</span><span>.</span><span>it</span><span>/</span><span>300</span></a>'</span><span>);</span>\n  <span>});</span>\n\n  <span>it</span><span>(</span><span>'providing a value returns value'</span><span>,</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n    <span>expect</span><span>(</span><span>pipe</span><span>.</span><span>transform</span><span>(</span><span>'<a href=\"http://place-hold.it/300\" rel=\"nofollow\"><span>http</span><span>://</span><span>place</span><span>-</span><span>hold</span><span>.</span><span>it</span><span>/</span><span>300</span></a>'</span><span>,</span> <span>'fallback'</span><span>)).</span><span>toBe</span><span>(</span><span>'<a href=\"http://place-hold.it/300\" rel=\"nofollow\"><span>http</span><span>://</span><span>place</span><span>-</span><span>hold</span><span>.</span><span>it</span><span>/</span><span>300</span></a>'</span><span>);</span>\n  <span>});</span>\n\n  <span>it</span><span>(</span><span>'asking for https returns https'</span><span>,</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n    <span>expect</span><span>(</span><span>pipe</span><span>.</span><span>transform</span><span>(</span><span>''</span><span>,</span> <span>'<a href=\"http://place-hold.it/300\" rel=\"nofollow\"><span>http</span><span>://</span><span>place</span><span>-</span><span>hold</span><span>.</span><span>it</span><span>/</span><span>300</span></a>'</span><span>,</span> <span>true</span><span>)).</span><span>toBe</span><span>(</span><span>'<a href=\"https://place-hold.it/300\" rel=\"nofollow\"><span>https</span><span>://</span><span>place</span><span>-</span><span>hold</span><span>.</span><span>it</span><span>/</span><span>300</span></a>'</span><span>);</span>\n  <span>});</span>\n<span>});</span></code></pre>\n</div>\n</div>\n</div>\n</div>\n\n      </div>","filePath":"pages/Angular/.md","_id":"Kn4xqbXiEFoM7Hfx","dateUpdated":1542208454708}
{"date":{"$$date":1542296773815},"title":"From JavaScript to TypeScript, Pt. IIA: Using Classes, Interfaces, & Mixins","sourceUrl":"https://scotch.io/tutorials/from-javascript-to-typescript-pt-iia-using-classes-interfaces-mixins","path":"TypeScript/TypeScript/TypeScript/TypeScript/TypeScript/","category":"TypeScript","tags":["TypeScript"],"author":"Peleke Sengstacke","excerpt":"","dateCreated":1542296478479,"coverImage":"","type":"Post","frontmatter":"---\npath: 'TypeScript/'\ndate: 'Thu Nov 15 2018 21:12:28 GMT+0530 (India Standard Time)'\ntitle: 'From JavaScript to TypeScript, Pt. IIA: Using Classes, Interfaces, & Mixins'\ntags: ['TypeScript']\ncategory: 'TypeScript'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://scotch.io/tutorials/from-javascript-to-typescript-pt-iia-using-classes-interfaces-mixins'\ntype: 'Post'\n---\n    ","htmlCode":"<div>\n<p>One of TypeScript's main selling points is that it allows developers to use something like classes and interfaces to write a fundamentally prototype-based language. </p>\n<p>I say <em>something like</em>, because TypeScript cannot, and does not, add <em>true</em> class-oriented capabilities to the language, which can make for some surprising gotchas. Still, its remarkably clean syntax does a good job of cleaning up the visual cacophany of working with prototypes.</p>\n<p>After this article, you'll be able to:</p><div><h3>Table of Contents</h3><ul><li><a href=\"#toc-using-classes\">\nUsing Classes\n</a></li><li><a href=\"#toc-using-interfaces\">\nUsing Interfaces\n</a></li><li><a href=\"#toc-using-classes-to-create-mixins\">\nUsing Classes to Create Mixins\n</a></li><li><a href=\"#toc-conclusion\">\nConclusion\n</a></li></ul></div>\n<ul>\n<li>Use <strong>classes</strong>&nbsp;to easily create similar objects;</li>\n<li>Use <strong>interfaces</strong> to describe and enforce the shape and behavior of different classes; and</li>\n<li>Combine classes and interfaces to create robust, self-documentining components.</li>\n</ul>\n<p>I assume you're using Node to run the samples; I'm running v6.0.0.</p>\n\n<div>\n<div></div>\n</div>\n<p>I've uploaded all of the code for this article to <a href=\"https://github.com/Peleke/oop_in_typescript/tree/master\">my repository on GitHub</a>. If you don't want to type, clone it down, and run:</p>\n<p><code>git checkout Part_2A-Using_Classes_and_Interfaces</code></p>\n<p>If you're on Windows, you should be able to just run <code>tsc</code>. You'll get a frightening bundle of errors, but you can safely ignore them.</p>\n<p>If you're on Mac or *nix, you'll still run <code>tsc</code>, but you can also pipe the errors to nowhere if you'd like:</p>\n<pre data-title=\"bash\"><code><span><span><span># Compile all TS files, and silence irrelevant errors.</span></span></span>\n<span><span>tsc</span></span> --target ES5 <span>&gt;</span> /dev/null <span><span>2</span></span><span>&gt;</span><span>&amp;</span><span><span>1</span></span></code></pre>\n<p>Either way, you should end up with a folder called <code>built</code>, which contains the compiled JavaScript.</p>\n<h2>\n<a href=\"#toc-using-classes\">Using Classes</a>\n</h2>\n<p>The syntax for TypeScript's classes is almost identical to that of JavaScript's native classes, which we'll take as our starting point.</p>\n<pre data-title=\"javascript\"><code><span><span><span>\"use strict\"</span></span></span><span>;</span>\n\n<span><span><span>// ListComponent maintains a list of things that a user can</span></span></span>\n<span><span><span>//   add to and delete from. This is a pure JavaScript class.</span></span></span>\n<span><span><span><span><span>class</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>ListComponent</span></span></span></span></span><span><span> </span></span><span>{</span>\n\n    <span><span><span>constructor</span></span></span> <span>(</span><span>)</span> <span>{</span>\n        <span><span><span>this</span></span></span><span>.</span>things <span>=</span> <span>[</span><span>]</span><span>;</span> \n    <span>}</span>\n\n<span>}</span>\n\n<span><span><span>// A ListItem is a wrapper around the items in our list.</span></span></span>\n<span><span><span>//   This is also pure JavaScript, for now.</span></span></span>\n<span><span><span><span><span>class</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>ListItem</span></span></span></span></span><span><span> </span></span><span>{</span>\n\n    <span><span><span>constructor</span></span></span> <span>(</span>name<span>)</span> <span>{</span>\n        <span><span><span>this</span></span></span><span>.</span>name <span>=</span> name<span>;</span>\n    <span>}</span>\n\n<span>}</span></code></pre>\n<p>These are perfectly valid JavaScript classes, but ut you'll get errors if you run them through the TypeScript transpiler:</p>\n<p><img alt=\"Property does not exist errors\" data-src=\"https://i.imgsafe.org/655cdb1.png\" src=\"https://i.imgsafe.org/655cdb1.png\" data-was-processed=\"true\"></p>\n\n<div>\n<div></div>\n</div>\n<p>This is one of the few places where the TypeScript compiler will reject raw JavaScript. Let's find out what's wrong, and fix it.</p>\n<h3>Class Properties</h3>\n<p>In JavaScript, classes can only contain method definitions. Adding properties is a syntax error. </p>\n<p>In TypeScript, you <em>must</em> add instance properties if you assign to them using <code>this</code>. Otherwise, your code won't compile.</p>\n<pre data-title=\"typescript\"><code><span><span><span>// list_classes.ts</span></span></span>\n<span><span>\n</span></span><span><span><span>\"use strict\"</span></span></span><span>;</span>\n\n<span><span><span><span><span>class</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>ListComponent</span></span></span></span></span><span><span> </span></span><span>{</span>\n\n    <span><span><span>// Adding a property is as simpleas adding its name and type</span></span></span>\n    <span><span><span>//   at the top of the class.</span></span></span>\n    things <span>:</span> <span><span><span>Array</span></span></span><span>&lt;</span>ListItem<span>&gt;</span><span>;</span> <span><span><span>// Or -- things : ListItem[];</span></span></span>\n\n    <span><span><span>constructor</span></span></span> <span>(</span><span>)</span> <span>{</span>\n        <span><span><span>this</span></span></span><span>.</span>things <span>=</span> <span>[</span><span>]</span><span>;</span> \n    <span>}</span>\n\n<span>}</span>\n\n<span><span><span><span><span>class</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>ListItem</span></span></span></span></span><span><span> </span></span><span>{</span>\n\n    name <span>:</span> <span>string</span><span>;</span>\n\n    <span><span><span>constructor</span></span></span> <span>(</span>name<span>)</span> <span>{</span>\n        <span><span><span>this</span></span></span><span>.</span>name <span>=</span> name<span>;</span>\n    <span>}</span>\n\n<span>}</span></code></pre>\n<p>You'll need to add a property for every instance variable you plan to access with <code>this</code>. </p>\n<p>Create a new <code>ListItem</code>, and print its name:</p>\n<pre data-title=\"typescript\"><code><span><span><span>const</span></span></span> item <span>=</span> <span><span><span>new</span></span></span> <span>ListItem</span><span>(</span><span><span><span>'Thing to Do'</span></span></span><span>)</span><span>;</span>\n<span><span><span>console</span></span></span><span>.</span><span>log</span><span>(</span>item<span>.</span>name<span>)</span><span>;</span> <span><span><span>// 'Thing to Do'</span></span></span></code></pre>\n<p>. . . And that does away with the first of our errors.</p><style>\n.ml-subscribe-form-1112154 {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background: radial-gradient(at top left,#e5d0ad,#d2af73);\n    margin-bottom: 35px;\n    margin-left: -120px;\n    margin-right: -120px;\n    color: #eee;\n    text-align: center;\n    padding-left: 20px;\n    padding-right: 20px;\n    padding-top: 30px;\n    padding-bottom: 30px;\n}\n\n.ml-subscribe-form-1112154 h4 {\n    font-size: 22px;\n    color: #eee;\n    margin-bottom: 20px;\n}\n</style>\n<div>\n<div>\n<div>\n<div>\n<h3>Scotch Newsletter</h3>\n<p>Join 100,000 subscribers. Get weekly dev news and tutorials.</p>\n<form action=\"https://app.mailerlite.com/webforms/submit/c7r3j6\" data-code=\"c7r3j6\" method=\"post\" target=\"_blank\">\n<style type=\"text/css\">\n              .ml_message_wrapper {\n                position: absolute !important;\n                left: -9999px !important;\n              }\n            </style>\n<div aria-label=\"Please leave the following field empty\">\n<input type=\"text\" tabindex=\"-1\" value=\"\" placeholder=\"Message\" autocomplete=\"off\" title=\"message\">\n<input type=\"text\" tabindex=\"-1\" value=\"\" placeholder=\"Email\" autocomplete=\"off\" title=\"email\">\n<input type=\"text\" tabindex=\"-1\" value=\"\" placeholder=\"Name\" autocomplete=\"off\" title=\"name\">\n</div>\n<div>\n<div>\n<input type=\"email\" data-inputmask=\"\" value=\"\" placeholder=\"Email\" aria-label=\"Your Email\">\n<div>\n📧\n</div>\n</div>\n<div>\n<button type=\"submit\">Subscribe</button>\n<button disabled=\"\" type=\"button\">\n🌟 Magic ✨\n</button>\n</div>\n</div>\n<style type=\"text/css\">\n              .ml-form-recaptcha {\n                margin-bottom: 20px;\n              }\n\n              .ml-form-recaptcha.ml-error iframe {\n                border: solid 1px #ff0000;\n              }\n            </style>\n<input type=\"hidden\" value=\"1\">\n</form>\n</div>\n<div>\n<div>\n<h3>Thank you!</h3>\n<p>You have successfully joined the Scotchy super duper web dev awesome mailing list.<br><br></p>\n</div>\n</div>\n</div>\n</div>\n</div>\n<script>\n    function ml_webform_success_1112154() {\n        document.querySelector('.ml-subscribe-form-1112154 .row-success').style.display = 'block';\n        document.querySelector('.ml-subscribe-form-1112154 .row-form').style.display = 'none';\n        // var $ = ml_jQuery || jQuery;\n        // $('.ml-subscribe-form-1112154 .row-success').show();\n        // $('.ml-subscribe-form-1112154 .row-form').hide();\n      }\n  </script>\n<img data-src=\"https://track.mailerlite.com/webforms/o/1112154/c7r3j6?vaa4d608450783acdc64d5338ff94f6d5\" width=\"1\" height=\"1\" border=\"0\" src=\"https://track.mailerlite.com/webforms/o/1112154/c7r3j6?vaa4d608450783acdc64d5338ff94f6d5\" data-was-processed=\"true\">\n<h3>Access Modifiers</h3>\n<p>We could also have declared our instance variables with the <code>public</code> keyword:</p>\n<pre data-title=\"typescript\"><code><span><span><span>// list_classes_public.ts</span></span></span>\n<span><span>\n</span></span><span><span><span>\"use strict\"</span></span></span><span>;</span>\n\n<span><span><span><span><span>class</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>ListComponent</span></span></span></span></span><span><span> </span></span><span>{</span>\n\n    <span>public</span> things <span>:</span> <span><span><span>Array</span></span></span><span>&lt;</span>ListItem<span>&gt;</span><span>;</span> <span><span><span>// Or -- things : ListItem[];</span></span></span>\n\n    <span><span><span>constructor</span></span></span> <span>(</span><span>)</span> <span>{</span>\n        <span><span><span>this</span></span></span><span>.</span>things <span>=</span> <span>[</span><span>]</span><span>;</span> \n    <span>}</span>\n\n<span>}</span>\n\n<span><span><span><span><span>class</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>ListItem</span></span></span></span></span><span><span> </span></span><span>{</span>\n\n    <span>public</span> name <span>:</span> <span>string</span><span>;</span>\n\n    <span><span><span>constructor</span></span></span> <span>(</span>name<span>)</span> <span>{</span>\n        <span><span><span>this</span></span></span><span>.</span>name <span>=</span> name<span>;</span>\n    <span>}</span>\n\n<span>}</span></code></pre>\n<p>The <code>public</code> keyword is called an <strong>access modifier</strong>, and tells the compiler how much of the code should be able to use the property it prefixes.</p>\n<p>TypeScript provides two access modifiers:</p>\n<ol>\n<li><code>public</code>. You can read or write <em>public</em> properties from anywhere. These behave identically to object properties in vanilla JavaScript.</li>\n<li><code>private</code>. You can <em>only</em> read or write a <em>private</em> property from <em>inside of the class</em> that \"owns\" the property. </li>\n</ol>\n<p>In other words, you can use private properties to implement methods inside of your class, but you can't touch them from outside.</p>\n<p>Private properties help improve consistency and code safety, because the only place you can use them is from <em>within</em> the class. Outsiders can't muck with your data from elsewhere.</p>\n<p>Let's see what happens if we declare our <code>things</code> and <code>name</code> properties <code>private</code>.</p>\n<pre data-title=\"typescript\"><code><span><span><span>// list_classes_private.ts</span></span></span>\n<span><span>\n</span></span><span><span><span>\"use strict\"</span></span></span><span>;</span>\n\n<span><span><span>// ListComponent maintains a list of things that a user can</span></span></span>\n<span><span><span>//   add to and delete from. This is a pure JavaScript class.</span></span></span>\n<span><span><span><span><span>class</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>ListComponent</span></span></span></span></span><span><span> </span></span><span>{</span>\n\n  <span>private</span> things <span>:</span> <span><span><span>Array</span></span></span><span>&lt;</span>ListItem<span>&gt;</span><span>;</span>\n\n    <span><span><span>constructor</span></span></span> <span>(</span><span>)</span> <span>{</span>\n        <span><span><span>this</span></span></span><span>.</span>things <span>=</span> <span>[</span><span>]</span><span>;</span> \n    <span>}</span>\n\n<span>}</span>\n\n<span><span><span>// A ListItem is a wrapper around the items in our list.</span></span></span>\n<span><span><span>//   This is also pure JavaScript, for now.</span></span></span>\n<span><span><span><span><span>class</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>ListItem</span></span></span></span></span><span><span> </span></span><span>{</span>\n\n  <span>private</span> name <span>:</span> <span>string</span><span>;</span>\n\n    <span><span><span>constructor</span></span></span> <span>(</span>name<span>)</span> <span>{</span>\n        <span><span><span>this</span></span></span><span>.</span>name <span>=</span> name<span>;</span>\n    <span>}</span>\n\n<span>}</span>\n\n<span><span><span>const</span></span></span> item <span>=</span> <span><span><span>new</span></span></span> <span>ListItem</span><span>(</span><span><span><span>'Thing to Do'</span></span></span><span>)</span><span>;</span>\n<span><span><span>console</span></span></span><span>.</span><span>log</span><span>(</span>item<span>.</span>name<span>)</span><span>;</span> <span><span><span>// Property 'name' is private</span></span></span></code></pre>\n<p>The classes are still valid, but you'll notice that the last line causes a compiler error. TypeScript reports: <em>Property 'name' is private and only accessible within the class 'ListItem'.</em></p>\n<p>The most idiomatic way to fix this would be to provide a <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/get\">getter</a>.</p>\n<pre data-title=\"typescript\"><code><span><span><span>\"use strict\"</span></span></span><span>;</span>\n\n<span><span><span><span><span>class</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>ListComponent</span></span></span></span></span><span><span> </span></span><span>{</span>\n\n  <span><span><span>// We have to rename the private property so we can name</span></span></span>\n  <span><span><span>//   our \"get\" method \"things\". </span></span></span>\n  <span>private</span> _things <span>:</span> <span><span><span>Array</span></span></span><span>&lt;</span>ListItem<span>&gt;</span><span>;</span>\n\n    <span><span><span>constructor</span></span></span> <span>(</span><span>)</span> <span>{</span>\n        <span><span><span>this</span></span></span><span>.</span>_things <span>=</span> <span>[</span><span>]</span><span>;</span> \n    <span>}</span>\n\n    <span><span><span>// Adds a \"getter\", which returns the private property.</span></span></span>\n    <span>get</span> <span>things</span> <span>(</span><span>)</span> <span>:</span> <span><span><span>Array</span></span></span><span>&lt;</span>ListItem<span>&gt;</span> <span>{</span> <span><span><span>return</span></span></span> <span><span><span>this</span></span></span><span>.</span>_things<span>;</span> <span>}</span>\n\n<span>}</span>\n\n<span><span><span><span><span>class</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>ListItem</span></span></span></span></span><span><span> </span></span><span>{</span>\n\n  <span>private</span> _name <span>:</span> <span>string</span><span>;</span>\n\n    <span><span><span>constructor</span></span></span> <span>(</span>name<span>)</span> <span>{</span>\n        <span><span><span>this</span></span></span><span>.</span>_name <span>=</span> name<span>;</span>\n    <span>}</span>\n\n    <span>get</span> <span>name</span> <span>(</span><span>)</span> <span>:</span> <span>string</span> <span>{</span> <span><span><span>return</span></span></span> <span><span><span>this</span></span></span><span>.</span>_name<span>;</span> <span>}</span>\n\n<span>}</span>\n\n<span><span><span>const</span></span></span> item <span>=</span> <span><span><span>new</span></span></span> <span>ListItem</span><span>(</span><span><span><span>'Thing to Do'</span></span></span><span>)</span><span>;</span>\n<span><span><span>console</span></span></span><span>.</span><span>log</span><span>(</span>item<span>.</span>name<span>)</span><span>;</span> <span><span><span>// 'Thing to Do'</span></span></span></code></pre>\n<p>If you're not familiar with <code>get</code> methods, check the documentation. Conceptually, they're just functions that JavaScript calls when you access a property with the same name as the get method.</p>\n<p>There are two things to notice.</p>\n<ol>\n<li>We've renamed our <code>things</code> property to <code>_things</code>, and our <code>name</code> property to <code>_name</code>; and</li>\n<li>We've added methods called <code>get things</code> and <code>get name</code>.</li>\n</ol>\n<p>We've renamed our properties from <code>thing</code> and <code>name</code> to <code>_thing</code> and <code>_name</code> so we can name our get methods sensibly. There's nothing special about the underscore prefix -- you could have renamed the private properties <code>list_of_things</code> and <code>silicon_unicorn</code>, if you'd wanted -- but using an underscore-prefixed identifier for private members and exposing them via an unprefixed getter is a convenient convention.</p>\n<p>Renaming the properties lets us preserve our public interface: The rest of our code doesn't even know we've started using getters under the hood.</p>\n<p>If you're wondering why we'd go through all this trouble in the first place, try setting the value of <code>item.name</code>:</p>\n<pre data-title=\"typescript\"><code><span><span><span>// list_item_private_getter.ts</span></span></span>\n\nitem<span>.</span>name <span>=</span> <span><span><span>'Thing Done'</span></span></span><span>;</span>\n<span><span><span>console</span></span></span><span>.</span><span>log</span><span>(</span>item<span>.</span>name<span>)</span><span>;</span> <span><span><span>// TypeError: Cannot set property name of #&lt;ListItem&gt; which only has a getter</span></span></span></code></pre>\n<p>You'll notice that the TypeScript compiles just fine, but that JavaScript throws at runtime when you try to change the <code>name</code> property. </p>\n<p>This is the main advantage to exposing private properties via getters: <em>It prevents them from being set by clients</em>. </p>\n<p>You can also define a <code>set</code> method, which allows you to change the name of <code>item</code> as we just attempted. This sometimes makes sense. If you're going to do it that way, though, you can usually get away with avoiding getters/setters altogether, and just declare your properties public.</p>\n<p>As a general rule, declaring variables private and exposing them via a getter, but providing <em>no</em> setter, is a good pattern. If you need a setter, provide one. But don't do so unless you have a very good reason: You should generally keep your objects as close to immutable as possible.</p>\n<h4>Hiding Implementations with Private Methods</h4>\n<p>TypeScript also allows you to declare private methods.</p>\n<p>Let's say we want to validate a user before s/he can add items to a list, but we don't want the validation method available outside the class. Easy: We'd declare it <code>private</code>, which will produce compile-time warnings if we try to access it directly.</p>\n<pre data-title=\"typescript\"><code><span><span><span>// list_classes_private_methods.ts</span></span></span>\n<span><span>\n</span></span><span><span><span>\"use strict\"</span></span></span><span>;</span>\n\n<span><span><span><span><span>class</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>ListComponent</span></span></span></span></span><span><span> </span></span><span>{</span>\n\n  <span>private</span> _things <span>:</span> <span><span><span>Array</span></span></span><span>&lt;</span>ListItem<span>&gt;</span><span>;</span>\n\n    <span><span><span>constructor</span></span></span> <span>(</span><span>)</span> <span>{</span>\n        <span><span><span>this</span></span></span><span>.</span>_things <span>=</span> <span>[</span><span>]</span><span>;</span> \n    <span>}</span>\n\n    <span>get</span> <span>things</span> <span>(</span><span>)</span> <span>:</span> <span><span><span>Array</span></span></span><span>&lt;</span>ListItem<span>&gt;</span> <span>{</span> <span><span><span>return</span></span></span> <span><span><span>this</span></span></span><span>.</span>_things<span>;</span> <span>}</span>\n\n    <span>get</span> <span>length</span> <span>(</span><span>)</span> <span>:</span> <span>number</span> <span>{</span> <span><span><span>return</span></span></span> <span><span><span>this</span></span></span><span>.</span>_things<span>.</span>length<span>;</span> <span>}</span>\n\n    <span>add</span> <span>(</span>item <span>:</span> ListItem<span>,</span> <span><span>password</span></span> <span>:</span> <span>string</span><span>)</span> <span>:</span> <span>boolean</span> <span>{</span>\n      <span><span><span>if</span></span></span> <span>(</span><span><span><span>this</span></span></span><span>.</span><span>validate</span><span>(</span>password<span>)</span><span>)</span> <span>{</span>\n        <span><span><span>this</span></span></span><span>.</span>_things<span>.</span><span>push</span><span>(</span>item<span>)</span><span>;</span>\n        <span><span><span>return</span></span></span> <span><span><span>true</span></span></span><span>;</span>\n      <span>}</span> <span><span><span>else</span></span></span>\n        <span><span><span>return</span></span></span> <span><span><span>false</span></span></span>\n    <span>}</span>\n\n    <span>private</span> <span>validate</span> <span>(</span>password <span>:</span> <span>string</span><span>)</span> <span>:</span> <span>boolean</span> <span>{</span>\n      <span><span><span>if</span></span></span> <span>(</span>password <span>===</span> <span><span><span>'12345'</span></span></span><span>)</span>\n        <span><span><span>return</span></span></span> <span><span><span>true</span></span></span>\n    <span><span><span>else</span></span></span>\n      <span><span><span>return</span></span></span> <span><span><span>false</span></span></span>\n    <span>}</span>\n\n<span>}</span>\n\n<span><span><span><span><span>class</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>ListItem</span></span></span></span></span><span><span> </span></span><span>{</span>\n\n  <span>private</span> _name <span>:</span> <span>string</span><span>;</span>\n\n    <span><span><span>constructor</span></span></span> <span>(</span>name<span>)</span> <span>{</span>\n        <span><span><span>this</span></span></span><span>.</span>_name <span>=</span> name<span>;</span>\n    <span>}</span>\n\n    <span>get</span> <span>name</span> <span>(</span><span>)</span> <span>:</span> <span>string</span> <span>{</span> <span><span><span>return</span></span></span> <span><span><span>this</span></span></span><span>.</span>_name<span>;</span> <span>}</span>\n\n<span>}</span>\n\n<span><span><span>const</span></span></span> <span>PASS</span> <span>=</span> <span><span><span>'12345'</span></span></span><span>;</span> \n\n<span><span><span>const</span></span></span> item <span>=</span> <span><span><span>new</span></span></span> <span>ListItem</span><span>(</span><span><span><span>'Thing to Do'</span></span></span><span>)</span><span>;</span>\n<span><span><span>const</span></span></span> list_one <span>=</span> <span><span><span>new</span></span></span> <span>ListComponent</span><span>(</span><span>)</span><span>;</span>\n<span><span><span>const</span></span></span> list_two <span>=</span> <span><span><span>new</span></span></span> <span>ListComponent</span><span>(</span><span>)</span><span>;</span>\n\n<span><span><span>console</span></span></span><span>.</span><span>log</span><span>(</span>list_one<span>.</span><span>add</span><span>(</span>item<span>,</span> <span>PASS</span><span>)</span><span>)</span><span>;</span> <span><span><span>// true</span></span></span>\n<span><span><span>console</span></span></span><span>.</span><span>log</span><span>(</span>list_one<span>.</span>length<span>)</span><span>;</span> <span><span><span>// 1</span></span></span>\n\n<span><span><span>console</span></span></span><span>.</span><span>log</span><span>(</span>list_two<span>.</span><span>add</span><span>(</span>item<span>,</span> <span><span><span>'WRONG password'</span></span></span><span>)</span><span>)</span><span>;</span> <span><span><span>// false</span></span></span>\n<span><span><span>console</span></span></span><span>.</span><span>log</span><span>(</span>list_two<span>.</span>length<span>)</span><span>;</span> <span><span><span>// 0</span></span></span>\n\n<span><span><span>// console.log(list_one.validate('12345')); // Compiler error</span></span></span></code></pre>\n<p>If you try to run <code>list_one.validate('12345')</code>, you'll get a compiler error.</p>\n<h3>Subclasses</h3>\n<p>TypeScript also lets you use subclasses, just as does vanilla JavaScript:</p>\n<pre data-title=\"typescript\"><code><span><span><span>\"use strict\"</span></span></span><span>;</span> \n\n<span><span><span><span><span>class</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>CompletedListItem</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>extends</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>ListItem</span></span></span></span></span><span><span> </span></span><span>{</span>\n\n    completed <span>:</span> <span>boolean</span><span>;</span>\n\n    <span><span><span>constructor</span></span></span> <span>(</span>name <span>:</span> <span>string</span><span>)</span> <span>{</span>\n        <span><span><span>super</span></span></span><span>(</span>name<span>)</span><span>;</span>\n        <span><span><span>this</span></span></span><span>.</span>completed <span>=</span> <span><span><span>true</span></span></span><span>;</span>\n    <span>}</span>\n\n<span>}</span></code></pre>\n<p>There isn't much more to say about subclasses in TypeScript. For details as to how it all works under the hood, check out my articles on JavaScript's classes; and for some thoughts on designing with subclasses, read the article accompanying this one, on <a href=\"\">Designing with Classes &amp; Interfaces</a>.</p>\n<h3>Property Shorthand</h3>\n<p>Finally, TypeScript offers a shorthand for creating and assigning properties.</p>\n<pre data-title=\"typescript\"><code><span><span><span>\"use strict\"</span></span></span><span>;</span>\n\n<span><span><span><span><span>class</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>Person</span></span></span></span></span><span><span> </span></span><span>{</span>\n\n    <span><span><span>constructor</span></span></span> <span>(</span><span>public</span> first_name <span>:</span> <span>string</span><span>,</span> <span>public</span> last_name <span>:</span> <span>string</span><span>)</span> <span>{</span> <span>}</span>\n\n<span>}</span></code></pre>\n<p>This code is equivalent to:</p>\n<pre data-title=\"typescript\"><code><span><span><span>\"use strict\"</span></span></span><span>;</span>\n\n<span><span><span><span><span>class</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>Person</span></span></span></span></span><span><span> </span></span><span>{</span>\n\n    <span>public</span> first_name <span>:</span> <span>string</span><span>;</span>\n    <span>public</span> last_name <span>:</span> <span>string</span><span>;</span>\n\n    <span><span><span>constructor</span></span></span> <span>(</span>first_name <span>:</span> <span>string</span><span>,</span> last_name <span>:</span> last_name<span>)</span> <span>{</span> <span>}</span>\n\n<span>}</span></code></pre>\n<p>Using this shorthand, we can rewrite our <code>ListComponent</code> like this:</p>\n<pre data-title=\"typescript\"><code><span><span><span>// list_classes_shorthand.ts</span></span></span>\n<span><span>\n</span></span><span><span><span>\"use strict\"</span></span></span><span>;</span>\n\n<span><span><span><span><span>class</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>ListComponent</span></span></span></span></span><span><span> </span></span><span>{</span>\n\n    <span><span><span>constructor</span></span></span> <span>(</span><span>private</span> _things <span>:</span> ListItem<span>[</span><span>]</span><span>)</span> <span>{</span> <span>}</span>\n\n    <span>get</span> <span>things</span> <span>(</span><span>)</span> <span>:</span> ListItem<span>[</span><span>]</span> <span>{</span> <span><span><span>return</span></span></span> <span><span><span>this</span></span></span><span>.</span>_things<span>;</span> <span>}</span>\n\n<span>}</span>\n\n<span><span><span><span><span>class</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>ListItem</span></span></span></span></span><span><span> </span></span><span>{</span>\n\n    <span><span><span>constructor</span></span></span> <span>(</span><span>private</span> _name<span>)</span> <span>{</span> <span>}</span>\n\n    <span>get</span> <span>name</span> <span>(</span><span>)</span> <span>:</span> <span>string</span> <span>{</span> <span><span><span>return</span></span></span> <span><span><span>this</span></span></span><span>.</span>_name<span>;</span> <span>}</span>\n\n<span>}</span>\n\n<span><span><span>const</span></span></span> item <span>=</span> <span><span><span>new</span></span></span> <span>ListItem</span><span>(</span><span><span><span>'Thing to Do'</span></span></span><span>)</span><span>;</span>\n<span><span><span>console</span></span></span><span>.</span><span>log</span><span>(</span>item<span>.</span>name<span>)</span><span>;</span> <span><span><span>// Property 'name' is private</span></span></span>\n\nitem<span>.</span>name <span>=</span> <span><span><span>'Fish'</span></span></span><span>;</span>\n<span><span><span>console</span></span></span><span>.</span><span>log</span><span>(</span>item<span>.</span>name<span>)</span><span>;</span> <span><span><span>// </span></span></span></code></pre>\n<h3>A Word of Caution</h3>\n<p>TypeScript's <code>private</code> access modifier is handy, but it is <em>just</em> syntactical sugar. Its compile-time checks against your code do <em>not</em> prevent other code, or even your code, from accessing private properties at runtime.</p>\n<p>As an example, while <code>list_one.validate('12345')</code> generates a compiler error, <code>list_one['validate']('12345')</code> does <em>not</em>. That'll actually work just fine.</p>\n<p> When you use bracket notaton, JavaScript first evaluates the expression inside of the brackets, and then attempts to access the property on the object with the name of the result. In contrast, TypeScript can analyze direct property access, as in <code>list_one.validate</code>, without the intermediate step of evaluating an expression.</p>\n<p>It's just a guess, but I reckon the transpiler doesn't guard against such evaluated property accesses because it would be unreliable: In general, the value of an expression is constrained by its runtime context, which can't be fully determined at compile-time.</p>\n<p>The takeaway is twofold:</p>\n<ol>\n<li>While the private modifier is handy, it can't <em>guarantee</em> privacy, and you shoudn't rely on it to do so; and</li>\n<li>TypeScript's OOP sugar is <em>just</em> sugar. You can still add and delete methods, see and access <code>private</code> properties, and do other such blasphemy at runtime, if you're clever enough.</li>\n</ol>\n<p>If you <em>absolutely need</em> private data in your classes, you may be better off using closures, or using <a href=\"http://exploringjs.com/es6/ch_classes.html#sec_private-data-for-classes\">one of the several techniques Dr Rauschmayer discusses in Exploring ES6</a>.</p>\n<h2>\n<a href=\"#toc-using-interfaces\">Using Interfaces</a>\n</h2>\n<p>Classes collect a set of properties and methods into a blueprint you to create objects that differ in state, but otherwise share the same capabilities and shape.</p>\n<p>Interfaces allow you to collect a set of properties and behaviors into a blueprint that classes can promise they'll <strong>implement</strong>, but <em>do not</em> define those properties, nor provide definitions for the methods.</p>\n<p>TypeScript uses interfaces for two things: To guarantee that objects created from an implementing class will have a certain <strong>shape</strong>, or that they'll expose a certain <strong>API</strong> -- or list of public methods. Each implementing class gets to decide how it will implement that API.</p>\n<p>That's all a little abstract, so let's frame it with an example. </p>\n<h3>Enforcing Shape</h3>\n<p>The <strong>shape</strong> of an object is the set of data that it contains. To expect an object to have a certain shape is to expect it to hold certain data. We expect a User object to have a <code>name</code> and an <code>email</code>, for example. These two properties are part of the User object's shape. </p>\n<p>An <strong>interface</strong> is a tool for enforcing a particular shape. If a class implements an interface, it <em>must</em> contain the instance variables and methods listed in the interface. </p>\n<p>Creating an interface is much the same as creating a class, except you use the <code>interface</code> keyword instead of <code>class</code>. Otherwise, you list properties and their types identically:</p>\n<pre data-title=\"typescript\"><code><span><span><span>// interfaces.ts</span></span></span>\n<span><span><span>\"use strict\"</span></span></span><span>;</span>\n\n<span>interface</span> <span>User</span> <span>{</span>\n    <span><span>name</span></span> <span>:</span> <span>string</span><span>;</span>\n    email <span>:</span> <span>string</span><span>;</span>\n<span>}</span></code></pre>\n<p>Any object that implements the <code>User</code> interface <em>must</em> have a <code>name</code> and <code>email</code> property, or the TypeScript compiler will scream at us with an \"Interface not implemented properly\" error.</p>\n<p>Using an interface is like creating a subclass, but you use <code>implements</code> in place of <code>extends</code>.</p>\n<pre><code><span><span>// interfaces.ts</span></span>\n\n<span><span><span><span>class</span></span></span><span> </span><span><span><span>RegisteredUser</span></span></span><span> </span><span><span><span>implements</span></span></span><span> </span><span><span><span>User</span></span></span><span> </span></span>{\n\n  <span><span>// Shorthand</span></span>\n  constructor (<span><span>public</span></span> name : string, <span><span>public</span></span> email : string) { }\n\n}</code></pre><p>We can also specify certain properties as optional. If we want to add a <code>avatar</code> property but acknowledge that users don't <em>have</em> to have a picture, you mark the property with a question mark.</p>\n<pre data-title=\"typescript\"><code><span><span><span>// interfaces_optional.ts</span></span></span>\n<span><span>\n</span></span><span><span><span>\"use strict\"</span></span></span><span>;</span>\n\n<span>interface</span> <span>User</span> <span>{</span>\n    <span><span>name</span></span> <span>:</span> <span>string</span><span>;</span>\n    email <span>:</span> <span>string</span><span>;</span>\n    avatar<span>?</span> <span>:</span> <span><span>Object</span></span><span>;</span>\n<span>}</span>\n\n<span><span><span><span><span>class</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>RegisteredUser</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>implements</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>User</span></span></span></span></span><span><span> </span></span><span>{</span>\n\n  <span><span><span>constructor</span></span></span> <span>(</span><span>public</span> name <span>:</span> <span>string</span><span>,</span> <span>public</span> email <span>:</span> <span>string</span><span>)</span> <span>{</span> <span>}</span>\n\n<span>}</span>\n\n<span><span><span><span><span>class</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>ImageUser</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>implements</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>User</span></span></span></span></span><span><span> </span></span><span>{</span>\n\n  <span><span><span>constructor</span></span></span> <span>(</span><span>public</span> name <span>:</span> <span>string</span><span>,</span>\n               <span>public</span> email <span>:</span> <span>string</span><span>,</span>\n               <span>public</span> avatar <span>:</span> Object<span>)</span> <span>{</span> <span>}</span>\n\n<span>}</span></code></pre>\n<h3>Method Signatures</h3>\n<p>Interfaces also allow you to specify <em>methods</em> that a class must implement, while allowing the classes themselves decide on the implementation details.</p>\n<p>Including method signatures in an interface is as simple as adding a function signature to the interface.</p>\n<pre data-title=\"typescript\"><code><span><span><span>// interfaces_methods.ts</span></span></span>\n<span><span>\n</span></span><span><span><span>\"use strict\"</span></span></span><span>;</span>\n\n<span>interface</span> <span>User</span> <span>{</span>\n    <span><span><span>// PROPERTIES</span></span></span>\n    name <span>:</span> <span>string</span><span>;</span>\n    email <span>:</span> <span>string</span><span>;</span>\n    avatar<span>?</span> <span>:</span> <span><span>Object</span></span><span>;</span>\n\n  <span><span><span>// API</span></span></span>\n  <span>print</span> <span>(</span><span>)</span> <span>:</span> <span><span><span>void</span></span></span><span>;</span>\n<span>}</span>\n\n<span><span><span><span><span>class</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>RegisteredUser</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>implements</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>User</span></span></span></span></span><span><span> </span></span><span>{</span>\n\n  <span><span><span>constructor</span></span></span> <span>(</span><span>public</span> name <span>:</span> <span>string</span><span>,</span> <span>public</span> email <span>:</span> <span>string</span><span>)</span> <span>{</span> <span>}</span>\n\n  <span>print</span> <span>(</span><span>)</span> <span>:</span> <span><span><span>void</span></span></span> <span>{</span>\n    <span><span><span>console</span></span></span><span>.</span><span>log</span><span>(</span><span><span><span><span>`Name: </span></span></span><span><span><span><span><span><span>${</span></span></span></span></span><span><span><span><span><span><span><span>this</span></span></span></span></span></span></span><span><span><span><span><span>.</span></span></span></span></span><span><span><span><span>name</span></span></span></span><span><span><span><span><span>}</span></span></span></span></span></span><span><span><span> | Email: </span></span></span><span><span><span><span><span><span>${</span></span></span></span></span><span><span><span><span><span><span><span>this</span></span></span></span></span></span></span><span><span><span><span><span>.</span></span></span></span></span><span><span><span><span>email</span></span></span></span><span><span><span><span><span>}</span></span></span></span></span></span><span><span><span> | No avatar.`</span></span></span></span><span>)</span><span>;</span>\n  <span>}</span>\n\n<span>}</span>\n\n<span><span><span><span><span>class</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>ImageUser</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>implements</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>User</span></span></span></span></span><span><span> </span></span><span>{</span>\n\n  <span><span><span>constructor</span></span></span> <span>(</span><span>public</span> name <span>:</span> <span>string</span><span>,</span>\n               <span>public</span> email <span>:</span> <span>string</span><span>,</span>\n               <span>public</span> avatar <span>:</span> Object<span>)</span> <span>{</span> <span>}</span>\n\n  <span>print</span> <span>(</span><span>)</span> <span>:</span> <span><span><span>void</span></span></span> <span>{</span>\n    <span><span><span>console</span></span></span><span>.</span><span>log</span><span>(</span><span><span><span><span>`Name: </span></span></span><span><span><span><span><span><span>${</span></span></span></span></span><span><span><span><span><span><span><span>this</span></span></span></span></span></span></span><span><span><span><span><span>.</span></span></span></span></span><span><span><span><span>name</span></span></span></span><span><span><span><span><span>}</span></span></span></span></span></span><span><span><span> | Email: </span></span></span><span><span><span><span><span><span>${</span></span></span></span></span><span><span><span><span><span><span><span>this</span></span></span></span></span></span></span><span><span><span><span><span>.</span></span></span></span></span><span><span><span><span>email</span></span></span></span><span><span><span><span><span>}</span></span></span></span></span></span><span><span><span> | Has avatar.`</span></span></span></span><span>)</span><span>;</span>\n  <span>}</span>\n\n<span>}</span>\n\n<span><span><span>const</span></span></span> user <span>=</span> <span><span><span>new</span></span></span> <span>RegisteredUser</span><span>(</span><span><span><span>'Peleke'</span></span></span><span>,</span> <span><span><span>'resil.design@gmail.com'</span></span></span><span>)</span><span>;</span>\nuser<span>.</span><span>print</span><span>(</span><span>)</span><span>;</span></code></pre>\n<p>Three things to notice.</p>\n<ol>\n<li>If you omit <code>print</code> in either class, you'll get a compiler error;</li>\n<li>If you declare <code>print</code> with the wrong type in either class, you'll get a compiler error; and</li>\n<li>Each class implements <code>print</code> <em>differently</em>. </li>\n</ol>\n<p>This last point is important. Different classes will often expose the same abstract behavior -- <code>User</code>s of all types should be able to <code>print</code> themselves for instance -- but, in general, they might want to do things differently. </p>\n<p>Interfaces <em>describe</em> such behavior in the abstract, but allow their implementing classes to <em>define</em> that behavior as they see fit.</p>\n<h2>\n<a href=\"#toc-using-classes-to-create-mixins\">Using Classes to Create Mixins</a>\n</h2>\n<p>Occasionally, we want classes to expose some API that would be best expressed in terms of an interface -- say, <code>Printable</code>, or <code>Identifiable</code> -- but which they'll all implement in the same way.</p>\n<p>One possibility is to create subclasses, but this approach fails on two major fronts.</p>\n<ol>\n<li>Classes can only inherit from a single parent class. If we need to implement multiple sets of behavior -- <em>both</em> <code>Printable</code> and <code>Identifiable</code>, for instance -- then subclassing doesn't work.</li>\n<li>If the objects that need to implement the interfaces aren't closely related, subclassing is the wrong abstraction. To have a <code>Book</code> and <code>Person</code> both inherit from an <code>Identifiable</code> base class because they both have an ID makes no sense from the standpoint of building a class hierarchy.</li>\n</ol>\n<p>The correct abstraction in this case is the interface. But writing the same implementation in <em>each</em> class that implements it is suboptimal. On</p>\n<p>one hand, it's more typing. And typing sucks. More seriously, writing the same code in several places is brittle, and if you ever need to change what you intend to be a common implementation, you'll have to rewrite the code in every class that implements the interface. </p>\n<p>What we'd want is a way to create an interface that allows us to include implementations. Languages like <a href=\"http://docs.groovy-lang.org/next/html/documentation/core-traits.html\">Groovy</a> solve the problem directly with <em>traits</em> -- in effect, interfaces that can host default method implementations. </p>\n<p>JavaScript doesn't directly support traits,but has made use of the <a href=\"https://api.jquery.com/jquery.extend/\">mixin pattern</a> for quite some time to achieve the same ends. TypeScript provides a little sugar to create mixins by using <em>classes</em> with the <em>implements</em> keyword.</p>\n<h3>Partial Classes</h3>\n<p>Creating a class to use as a mixin is almost identical to creating an interface. There are two differences:</p>\n<ol>\n<li>You use the <code>class</code> keyword, instead of <code>interface</code>; and</li>\n<li>You include method definitions.</li>\n</ol>\n<pre data-title=\"typescript\"><code><span><span><span>// mixins.ts</span></span></span>\n<span><span>\n</span></span><span><span><span>\"use strict\"</span></span></span><span>;</span>\n\n<span><span><span><span><span>class</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>Printable</span></span></span></span></span><span><span> </span></span><span>{</span>\n\n    text <span>:</span> <span>string</span><span>;</span>\n\n    <span>print</span> <span>(</span><span>)</span> <span>:</span> <span><span><span>void</span></span></span> <span>{</span>\n        <span><span><span>console</span></span></span><span>.</span><span>log</span><span>(</span><span><span><span>this</span></span></span><span>.</span>text<span>)</span><span>;</span>\n    <span>}</span>\n\n<span>}</span>\n\n<span><span><span><span><span>class</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>Identifiable</span></span></span></span></span><span><span> </span></span><span>{</span>\n\n    name <span>:</span> <span>string</span><span>;</span>\n    id <span>:</span> <span>number</span><span>;</span>\n\n    <span>identify</span> <span>(</span><span>)</span> <span>:</span> <span><span><span>void</span></span></span> <span>{</span>\n        <span><span><span>console</span></span></span><span>.</span><span>log</span><span>(</span><span><span><span><span>`My name is </span></span></span><span><span><span><span><span><span>${</span></span></span></span></span><span><span><span><span><span><span><span>this</span></span></span></span></span></span></span><span><span><span><span><span>.</span></span></span></span></span><span><span><span><span>name</span></span></span></span><span><span><span><span><span>}</span></span></span></span></span></span><span><span><span>, and my ID is </span></span></span><span><span><span><span><span><span>${</span></span></span></span></span><span><span><span><span><span><span><span>this</span></span></span></span></span></span></span><span><span><span><span><span>.</span></span></span></span></span><span><span><span><span>id</span></span></span></span><span><span><span><span><span>}</span></span></span></span></span></span><span><span><span>`</span></span></span></span><span>)</span><span>;</span>\n    <span>}</span>\n<span>}</span>\n\n<span><span><span><span><span>class</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>Book</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>implements</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>Printable</span></span></span></span></span><span><span><span>,</span></span></span><span><span> </span><span><span><span>Identifiable</span></span></span><span> </span></span><span>{</span> <span><span><span>// LINE A</span></span></span>\n\n  name <span>:</span> <span>string</span><span>;</span>\n  id <span>:</span> <span>number</span><span>;</span>\n\n  text <span>:</span> <span>string</span><span>;</span>\n\n    <span><span><span>constructor</span></span></span> <span>(</span>name <span>:</span> <span>string</span><span>,</span> id <span>:</span> <span>number</span><span>,</span> text <span>:</span> <span>string</span><span>)</span> <span>{</span>\n        <span><span><span>this</span></span></span><span>.</span>name <span>=</span> name<span>;</span>\n        <span><span><span>this</span></span></span><span>.</span>id <span>=</span> id<span>;</span>\n\n        <span><span><span>this</span></span></span><span>.</span>text <span>=</span> text<span>;</span>\n    <span>}</span>\n\n    <span><span><span>// DUMMY methods to satisfy the compiler. If we don't have these, TS</span></span></span>\n    <span><span><span>//   will complain with \"Interface not implemented properly\".</span></span></span>\n    <span><span><span>// Printable </span></span></span>\n    <span>print</span> <span>(</span><span>)</span> <span>:</span> <span><span><span>void</span></span></span> <span>{</span> <span>}</span>\n\n    <span><span><span>// Identifiable</span></span></span>\n    <span>identify</span> <span>(</span><span>)</span> <span>:</span> <span><span><span>void</span></span></span> <span>{</span> <span>}</span>\n\n<span>}</span>\n<span>applyMixins</span><span>(</span>Book<span>,</span> <span>[</span>Printable<span>,</span> Identifiable<span>]</span><span>)</span><span>;</span>\n\n<span><span><span>const</span></span></span> bad_novel <span>=</span> <span><span><span>new</span></span></span> <span>Book</span><span>(</span><span><span><span>'A Buncha Nonsense'</span></span></span><span>,</span> <span><span><span>2190</span></span></span><span>,</span> <span><span><span>'This book/Is awful. FIN'</span></span></span><span>)</span><span>;</span>\nbad_novel<span>.</span><span>print</span><span>(</span><span>)</span><span>;</span>\n\n<span><span><span>// NECESSARY EVIL :: </span></span></span>\n<span><span><span>//  From TS docs :: http://www.typescriptlang.org/docs/handbook/mixins.html</span></span></span>\n<span><span><span><span><span>function</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>applyMixins</span></span></span></span></span><span><span><span>(</span></span></span><span><span><span><span>derivedCtor</span></span></span></span><span><span><span><span><span>:</span></span></span></span></span><span><span><span><span> </span></span></span></span><span><span><span><span><span>any</span></span></span></span></span><span><span><span><span><span>,</span></span></span></span></span><span><span><span><span> baseCtors</span></span></span></span><span><span><span><span><span>:</span></span></span></span></span><span><span><span><span> </span></span></span></span><span><span><span><span><span>any</span></span></span></span></span><span><span><span><span><span>[</span></span></span></span></span><span><span><span><span><span>]</span></span></span></span></span><span><span><span>)</span></span></span><span><span> </span></span><span>{</span>\n    baseCtors<span>.</span><span>forEach</span><span>(</span><span><span><span><span>baseCtor</span></span></span><span> </span></span><span><span><span>=&gt;</span></span></span> <span>{</span>\n        <span><span>Object</span></span><span>.</span><span>getOwnPropertyNames</span><span>(</span>baseCtor<span>.</span>prototype<span>)</span><span>.</span><span>forEach</span><span>(</span><span><span><span><span>name</span></span></span><span> </span></span><span><span><span>=&gt;</span></span></span> <span>{</span>\n            derivedCtor<span>.</span>prototype<span>[</span>name<span>]</span> <span>=</span> baseCtor<span>.</span>prototype<span>[</span>name<span>]</span><span>;</span>\n        <span>}</span><span>)</span><span>;</span>\n    <span>}</span><span>)</span><span>;</span>\n<span>}</span></code></pre>\n<p>Notice that these \"mixin classes\" do <em>not</em> contain constructors. That means you can't instantiate them. Instead, you'll use them purely to collect method definitions and property signatures. </p>\n<p>Note <strong>Line A</strong>. The reason we can get away with something as weird as implementing a class is because TypeScript treats classes that you implement as interfaces. In other words, it checks that the implementing class contains the same method signatures and instance variables as the \"class\" you're implementing, but ignores method implementations. We'll see how to get them back in a minute.</p>\n<p>Once you've defined your mixin classes, you create your extending class using <code>implements</code>. And, just as you do when implementing a normal interface, you provide an implementation for the methods that it exposes. </p>\n<p>The only difference is that, here, we implement a no-op, <em>dummy</em> implementation. This is for two reasons. If we don't do this, the compiler will complain that our class doesn't implement its interfaces properly.</p>\n<p>Of course, we don't want the no-op. We want the method definition inside the partial class. To apply this, we have to use a helper function provided in the <a href=\"http://www.typescriptlang.org/docs/handbook/mixins.html\">TypeScript documentation</a>: <code>applyMixins</code>. It replaces your dummy implementations with the real ones in your partial classes. You'll have to use <code>applyMixins</code> for every mixin class you create. </p>\n<p>If you decide to use mixins, I recommend collecting all the <code>applyMixins</code> calls into their own module, or at least into their own chunk of the program. That way you can keep track of where the magic happens.</p>\n<p>Frankly, I find all this to be more trouble than it's worth. But you'll see this pattern in the wild, whether you use it or not, so it's important to know that it's available.</p>\n<h2>\n<a href=\"#toc-conclusion\">Conclusion</a>\n</h2>\n<p>In this article, you've seen how to:</p>\n<ul>\n<li>Build classes with access modifiers;</li>\n<li>Use interfaces to define the \"shape\" of a class's data;</li>\n<li>Use interfaces for modular development of a class's API; and</li>\n<li>Create mixins using partial classes as interfaces.</li>\n</ul>\n<p>As you can imagine, TypeScript's classes, interfaces, and mixins are powerful tools for defining complex behaviors and hierarchies. If you'd like to take a deeper dive into the details of how classes work under the hood, read up on <a href=\"https://scotch.io/tutorials/better-javascript-with-es6-pt-ii-a-deep-dive-into-classes\">\"Class\" &amp; Prototypes</a>.</p>\n<p>In the companion to this article, Part IIB, we'll take a look at some terminology and desgn principles from the world of OOP; and after that, we'll dive into TypeScript's Types &amp; Generics. </p>\n<p>As always, feel free to leave questions in the comments, or shoot them to me on Twitter (<a href=\"https://twitter.com/PelekeS\">@PelekeS</a>).</p>\n</div>","filePath":"pages/TypeScript/.md","_id":"QUMDNj724mb9DATT","dateUpdated":1542296773815}
{"title":"Building forms using React — everything you need to know","sourceUrl":"https://www.codementor.io/blizzerand/building-forms-using-react-everything-you-need-to-know-iz3eyoq4y","path":"React/React/React/React/Building forms using React — everything you need to know","category":"React","tags":["React"," Form"],"excerpt":"test","date":{"$$date":1539094456041},"coverImage":"https://reactjs.org/docs/forms.html","type":"Post","frontmatter":"---\npath: \"JavaScript/\"\ndate: \"\"\ntitle: \"rererer\"\ntags: [\"JavaScript\",\"ES6\"]\ncategory: \"JavaScript\"\ncategoryColor: \"#F3C610\"\nexcerpt: \"\"\ncoverImage: \"\"\nsourceUrl: \"\"\ntype: \"Post\"\n---\n    ","filePath":"pages/JavaScript/.md","markdownCode":"Forms are integral to any modern application. They serve as a basic medium for users to interact with your app. Developers rely on forms for everything: securely logging in the user, searching and filtering the product list, booking a product, and building a cart, etc. More complex applications built for enterprises are usually more form-intensive, with the input fields spanning over multiple tabs. On top of that, you have to consider the validation logic that needs to be deployed.\n\nIn this tutorial, we're going to look at how React handles forms. We'll cover not just the basics, but also form validation and best practices too — even experienced developers get certain details wrong.\n\nLet's get started.\n\n[](#creating-a-form-controlled-component-vs-uncontrolled-component)Creating a Form — Controlled Component vs. Uncontrolled Component\n------------------------------------------------------------------------------------------------------------------------------------\n\nReact offers a stateful, reactive approach to building forms. Unlike other DOM elements, HTML form elements work differently in React. The form data, for instance, is usually handled by the component rather than the DOM, and is usually implemented using controlled components. The image below perfectly describes how controlled components work in React.\n\n![react.png](https://process.filestackapi.com/cache=expiry:max/Qb7pi8kTzenybAUcijaB)\n\nThe form’s structure is similar to those of the usual HTML forms. However, each input element gets a component of its own, which we call dumb components. The container component is responsible for maintaining the state. The difference is, we're using a callback function to handle form events and then using the container’s state to store the form data. This gives your component better control over the form control elements and the form data.\n\nThe callback function is triggered on events, including change of form control values, or on form submission. The function then pushes the form values into the local state of the component and the data is then said to be controlled by the component. Because we are using the value attribute on the form element, the value displayed will be the value of `this.state.value`.\n\nThere is another technique, popularly known as uncontrolled components, for creating input forms. This is more like traditional HTML forms because the input form data is stored inside the DOM and not within the component. Elements like `<input>`and `<textarea>` maintain their own state, which they update when the input values change. You can query the DOM for the value of an input field using a ref.\n\nHere is an example from the [official docs](https://reactjs.org/docs/uncontrolled-components.html) that demonstrate how uncontrolled components work.\n\n```javascript\n class NameForm extends Component {\n  constructor(props) {\n    super(props);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleSubmit(e) {\n    alert('The value is: ' + this.input.value);\n    e.preventDefault();\n  }\n\n  render() {\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <label>\n          Name:\n          <input type=\"text\" ref={(input) => this.input = input} />\n        </label>\n        <input type=\"submit\" value=\"Submit\" />\n      </form>\n    );\n  }\n}\n\n\n```\n\nHere, the `<input>` component is responsible for storing its state. The ref attribute creates a reference to the DOM node accessible and you can pull this value when you need it — when you're about to submit the form in the example.\n\nReact recommends using controlled components over refs to implement forms. Refs offer a backdoor to the DOM, which might tempt you to use it to do things the jQuery way. Controlled components, on the other hand, are more straightforward — the form data is handled by a React component. However, if you want to integrate React with a non-React project, or create a quick and easy form for some reason, you can use a `ref`. The rest of this tutorial is going to focus on controlled components.\n\n[](#react-form-demo)React Form Demo\n-----------------------------------\n\nHere is the codesandobx demo for the form that we’ll be creating today.  \n@[React Form Demo](http://codesandbox.io/embed/x8omy0p9z)\n\nYou can also grab a copy of the code from [my GitHub repo](https://github.com/blizzerand/react-forms). Clone the repo, run `npm install`, and then run `npm start`.\n\n[](#structuring-a-form)Structuring a Form\n-----------------------------------------\n\nReact's composition model lets you organize your code into smaller reusable components. Each component exists as an independent functional unit and an hierarchy of components can be used to represent a specific feature. This structure works particularly well with forms. You can create custom components for `<input>`, `<textarea>`, `<select>`, etc. and reuse them to compose a `FormContainer` component.\n\nNote: although it could be tempting to use a form library instead, chances are high that you might come across obstacles when you need to add custom behavior and validation. Creating a reusable form component from scratch will help you bolster your understanding of React forms.\n\n```javascript\nimport React, { Component } from 'react';  \nimport './styles.css';  \nimport FormContainer from './containers/FormContainer';\n\nclass App extends Component {  \n  render() {\n    return (\n      <div className=\"container\">\n        <h3>React Form</h3>\n        <FormContainer />\n      </div>\n    );\n  }\n}\n\nexport default App; \n\n```\n\nFormContainer is a container component that renders all of the form elements and handles all of the business logic. We call it a container component because it takes care of updating the state of the form, handling form submission, and making API calls/dispatching Redux actions. The dumb components or presentational components are concerned with how things look and contain the actual DOM markup. These components receive data and callbacks exclusively as props. I've covered more about it on my [Stateful vs. Stateless components in React](https://code.tutsplus.com/tutorials/stateful-vs-stateless-functional-components-in-react--cms-29541) tutorial.\n\nLet's move on and create a container:\n\n```javascript\nimport React, {Component} from 'react';  \n\n/* Import Components */\nimport CheckBox from '../components/CheckBox';  \nimport Input from '../components/Input';  \nimport TextArea from '../components/TextArea';  \nimport Select from '../components/Select';\nimport Button from '../components/Button'\n\nclass FormContainer extends Component {  \n  constructor(props) {\n    super(props);\n\n    this.state = {\n      newUser: {\n        name: '',\n        email: '',\n        age: '',\n        gender: '',\n        expertise: '',\n        about: ''\n\n      },\n\n      genderOptions: ['Male', 'Female', 'Others'],\n      skillOptions: ['Programming', 'Development', 'Design', 'Testing']\n\n    }\n    this.handleFormSubmit = this.handleFormSubmit.bind(this);\n    this.handleClearForm = this.handleClearForm.bind(this);\n  }\n\n  /* This life cycle hook gets executed when the component mounts */\n\n  handleFormSubmit() {\n    // Form submission logic\n  }\n  handleClearForm() {\n    // Logic for resetting the form\n  }\n  render() {\n    return (\n      <form className=\"container\" onSubmit={this.handleFormSubmit}>\n\n        <Input /> {/* Name of the user */}\n        <Input /> {/* Input for Age */} \n        <Select /> {/* Gender Selection */}\n        <CheckBox /> {/* List of Skills (eg. Programmer, developer) */}\n        <TextArea /> {/* About you */}\n        <Button /> { /*Submit */ }\n        <Button /> {/* Clear the form */}\n      </form>\n    );\n  }\n}\n\nexport default FormContainer;\n}\n\n```\n\nFirst, we've imported the dumb components from the components directory. The components include `<Input>`, `<Select>`, `<CheckBox>`, `<TextArea>`, and `<Button>`.\n\nThen, we have initiated the state for storing the user data and the UI data. Two methods — `handleFormSubmit()` and `handleClearForm()` — have been created to handle the form logic. The render method renders all of the input fields and buttons required for our sign up form.\n\n[](#composing-the-dumb-components)Composing the Dumb Components\n---------------------------------------------------------------\n\nWe've laid out the structure of the form. Next, we need to compose the child components. Let's go through the components one by one.\n\n[](#input)<Input />\n-------------------\n\nThe `<Input />` component displays a one-line input field. The input type could be either text or number. Let's have a look at the props that we need to create an `<Input />` component.\n\n*   `type` — The `type` prop determines whether the input field rendered is of type, text, or number. For instance, if the value of `type` is equal to number, then `<input type=\"number\" />` will be rendered. Otherwise, `<input type=\"text\" />` gets rendered.\n*   `title` — The value of the title prop will be displayed as a label of that particular field.\n*   `name` — This is the name attribute for the input.\n*   `value` — The value (either text or number) that should be displayed inside the input field. You can use this prop to give default value.\n*   `placeholder` — An optional string that you can pass so that the input field displays a placeholder text.\n*   `handleChange` — A control function that gets triggered when the input control element's value changes. The function then updates the state of the parent component and passes the new value through the value prop.\n\nHere's the code for the `<Input/>` component. Note that we're using stateless functional components here.\n\n```javascript\nconst Input = (props) => {\n    return (  \n  <div className=\"form-group\">\n    <label htmlFor={props.name} className=\"form-label\">{props.title}</label>\n    <input\n      className=\"form-input\"\n      id={props.name}\n      name={props.name}\n      type={props.type}\n      value={props.value}\n      onChange={props.handleChange}\n      placeholder={props.placeholder} \n    />\n  </div>\n)\n}\n\nexport default Input;\n\n```\n\nYou can further expand the list of possible attributes and add them as props. Here is what the component's declaration looks like:\n\n```javascript\n<Input type={'text'}\n               title= {'Full Name'} \n               name= {'name'}\n               value={this.state.newUser.name} \n               placeholder = {'Enter your name'}\n               handleChange = {this.handleFullName}\n               /> {/* Name of the user */}\n               \n\n```\n\nThe `handleChange` callback takes care of updating the state and the updated value propagates through `props.value`. I am going to name the callback function as `handleFullName`.\n\n```javascript\n/* FormContainer.jsx */\n\n//...\n  handleFullName(e) {\n   let value = e.target.value;\n   this.setState( prevState => ({ newUser : \n        {...prevState.newUser, name: value\n        }\n      }))\n  }\n//...\n\n```\n\nThe `setState` accepts either an object or an updater function with the following signature.\n\n```\n(prevState, props) => stateChange\n\n```\n\nThe `prevState` object holds the up-to-date value of the previous state. We are going to merge the updated values with the previous state.\n\n_Note_: in JavaScript, class methods are not bound by default. You will need to bind it manually. What does that mean? You will need to add a binding into the constructor for each class method and the binding will look like this:\n\n```\nthis.handleFullName = this.handleFullName.bind(this)\n\n```\n\nAlternatively, you can use [class fields](https://github.com/tc39/proposal-class-fields) to do binding outside the constructor. The feature is still in experimental phase, so you will need to install the babel plugin [transform-class-properties to support it](https://babeljs.io/docs/plugins/transform-class-properties/).\n\nThe next input field is going to be for age. The logic of the `handleAge` will be similar to that of the `handleFullName` method.\n\n```\n/* FormContainer.jsx */\n\nhandleAge(e) {\n       let value = e.target.value;\n   this.setState( prevState => ({ newUser : \n        {...prevState.newUser, age: value\n        }\n      }), () => console.log(this.state.newUser))\n  }\n\n```\n\nThis method updates the state of this.state.newUser.age. Although this approach is okay, you can refactor the code and create a generic handler method that works for all `<Input />` components.\n\n```\n/* FormContainer.jsx */\n\nhandleInput(e) {\n     let value = e.target.value;\n     let name = e.target.name;\n     this.setState( prevState => {\n        return { \n           newUser : {\n                    ...prevState.newUser, [name]: value\n                   }\n        }\n     }, () => console.log(this.state.newUser)\n     )\n }\n\n```\n\n`handleInput()` will replace both `handleFullName()` and `handleAge()`. The only change we've made is to extract the value of name from form variable and then use that data to set the state. So, the value of the name prop should be same as the key of the property in the state.\n\nNext up, `<Select />`.\n\n[](#select)<Select />\n---------------------\n\nThe `<Select />` component displays a list of drop-down items. Usually, there will be a placeholder text or a default value for the drop-down. Here are the props for the `<Select />`:\n\n*   `title` — The value of the title prop be displayed as label of the `<select>` element.\n*   `name` — The name attribute for the `<select>` element.\n*   `options` — An array of available options. For instance, we are using the `<select />` to display a drop-down list of gender options.\n*   `value` — The value prop can be used to set the default value of the field.\n*   `placeholder` — A short string that populates the first `<option>` tag.\n*   `handleChange` — A control function that gets triggered when the input control element's value changes. The function then updates the state of the parent component and passes the new value through the value prop.\n\nLet's have a look at the actual code for the `<Select />` component.\n\n```javascript\n/*Select.jsx*/\n\nconst Select = (props) => {\n    return(\n        <div className=\"form-group\">\n            <label htmlFor={props.name}> {props.title} </label>\n            <select\n              name={props.name}\n              value={props.value}\n              onChange={props.handleChange}\n              >\n              <option value=\"\" disabled>{props.placeholder}</option>\n              {props.options.map(option => {\n                return (\n                  <option\n                    key={option}\n                    value={option}\n                    label={option}>{option}\n                  </option>\n                );\n              })}\n            </select>\n      </div>)\n}\n\nexport default Select;\n\n```\n\nThe first option tag is populated with the placeholder string. The rest of the options are mapped from the array that we passed on as props. While using the map method to iterate through DOM elements, remember to add a `key` attribute that's unique. This helps React keep track of DOM updates. If you leave out the `key` attribute, you will see a warning in your browser and might encounter performance issues down the road.\n\nNow, let's have a look at the callback function. The logic for method is similar to that of the generic handleInput that we created earlier. We can actually plug in that handler method as a prop and everything should work as expected.\n\n```javascript\n<Select title={'Gender'}\n       name={'gender'}\n       options = {this.state.genderOptions} \n       value = {this.state.newUser.gender}\n       placeholder = {'Select Gender'}\n       handleChange = {this.handleInput}\n/> {/* Age Selection */}\n\n```\n\n[](#checkbox)<CheckBox/>\n------------------------\n\nCheckboxes might appear a bit more complicated because arrays are involved. But both `<CheckBox>` and `<Select>` are similar in terms of props. The major difference lies in how the state is updated. Let's have a look at the props first.\n\n*   `title` — Already covered.\n*   `name` — Already covered.\n*   `options` — An array of available options. The array is usually composed of strings that end up being the label and the value of each checkbox.\n*   `selectedOptions` — An array of selected values. If the user had selected certain choices beforehand, the selectedOptions array would be populated with those values. This is synonymous to the <Select /> component's value prop.\n*   `handleChange` — Already covered.\n\nHere's the CheckBox component.\n\n```javascript\n/* CheckBox.jsx */\n\nconst CheckBox = (props) => {\n\n    return( <div>\n    <label for={props.name} className=\"form-label\">{props.title}</label>\n    <div className=\"checkbox-group\">\n      {props.options.map(option => {\n        return (\n          <label key={option}>\n            <input\n              className=\"form-checkbox\"\n              id = {props.name}\n              name={props.name}\n              onChange={props.handleChange}\n              value={option}\n              checked={ props.selectedOptions.indexOf(option) > -1 }\n              type=\"checkbox\" /> {option}\n          </label>\n        );\n      })}\n    </div>\n  </div>\n);\n\n}\n\n```\n\nThe line `checked={ props.selectedOptions.indexOf(option) > -1 }` might be confusing if you've never used JavaScript's `indexOf` method before. `indexOf` checks whether a particular item exists within an array and returns its index. Assuming that option holds a string, it checks whether the string exists within the `selectedOptions` and if the item doesn't exist in the array, it will return -1. This is the easiest way to populate values to a checkbox group in a form.\n\nSince we need to push an array into the state, which is more complicated than the usual `handleInput()`, let's create a new method for handling checkboxes.\n\n```javascript\nhandleSkillsCheckBox(e) {\n\n    const newSelection = e.target.value;\n    let newSelectionArray;\n\n    if(this.state.newUser.skills.indexOf(newSelection) > -1) {\n      newSelectionArray = this.state.newUser.skills.filter(s => s !== newSelection)\n    } else {\n      newSelectionArray = [...this.state.newUser.skills, newSelection];\n    }\n\n      this.setState( prevState => ({ newUser:\n        {...prevState.newUser, skills: newSelectionArray }\n      })\n      )\n}\n\n```\n\nThe user can interact with the checkbox in two ways — check an item, or uncheck an existing item. This user interaction corresponds to two actions — adding an item into the array, or removing an existing item from the array.\n\nThe `newSelection` variable has the value of the newly selected (or deselected) item. We compare it with the existing selection of items stored at `this.state.newUser.skills`. We're again going to rely on `indexOf` to check whether the string stored in `newSelection` is already of the array.  \nIf it's part of the array, the condition falls true and the new selection item is filtered out and stored in newSelection. Otherwise, the newSelection item is concatenated into the array using spread operator.\n\nFinally, the state is updated using `this.setState`.\n\n[](#textarea)<TextArea />\n-------------------------\n\nI am going to leave this as an exercise for the reader. This is fairly similar to the `<Input />` component that we created earlier. The `<textarea />` element should accept additional props for rows and columns. The code for the `TextArea` component is available in the sandbox demo for reference.\n\n[](#button)<Button />\n---------------------\n\nButtons are easiest of the lot. You can keep the `<Button />` component fairly simple and easy. Here is are the list of props that a button requires:\n\n*   `title` — Text for the button.\n*   `action` — Callback function\n*   `style` — Style objects can be passed as props.\n\nHere's the `<Button/>` in action:\n\n```javascript\n/*Button.jsx */\nconst Button = (props) => {\n    console.log(props.style);\n    return(\n        <button \n            style= {props.style} \n            onClick= {props.action}>    \n            {props.title} \n        </button>)\n}\n\nexport default Button;\n\n```\n\n[](#form-actions-handleclearform-and-handleformsubmit)Form Actions — `handleClearForm` and `handleFormSubmit`\n-------------------------------------------------------------------------------------------------------------\n\nWe've nearly reached the end of the tunnel. The last step is to compose the form actions. Since the FormContainer component maintains the state, the form action methods will go there.\n\nThe `handleClearForm` method will clear the state and set it back to its initial values.\n\n```javascript\nhandleClearForm(e) {\n\n      e.preventDefault();\n      this.setState({ \n        newUser: {\n          name: '',\n          age: '',\n          gender: '',\n          skills: [],\n          about: ''\n        },\n      })\n  }\n\n```\n\nThe line `e.preventDefault()` prevents the page from being refreshed on form submission, which is the default form behavior.\n\nThe `handleFormSubmit()` method takes care of making AJAX requests to the server. The data that needs to be sent is available at this.state.newUser. There are many libraries that you can use to make AJAX calls. I am going to use fetch here.\n\n```javascript\nhandleFormSubmit(e) {\n    e.preventDefault();\n    let userData = this.state.newUser;\n\n    fetch('http://example.com',{\n        method: \"POST\",\n        body: JSON.stringify(userData),\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n      }).then(response => {\n        response.json().then(data =>{\n          console.log(\"Successful\" + data);\n        })\n    })\n  }   \n\n```\n\nThat's it!\n\n[](#summary)Summary\n-------------------\n\nIn this article, we've covered everything that you need to know about building forms in React. React has component-based architecture and the components are meant to be reusable. We've gone ahead and created components for the input elements, such as: `<input/>`, `<select />`, `<textArea/>`, etc. You can further customize the components according to your requirements by passing more props.\n\nI hope you've had a good read. What are your thoughts about building forms using React? If you have anything to share, let us know in the comments.","_id":"RnFGXODGFlwDUYjI"}
{"title":"Understanding React Higher-Order Components by Example","sourceUrl":"https://levelup.gitconnected.com/understanding-react-higher-order-components-by-example-95e8c47c8006","path":"React/React/","category":"React","tags":["React"," HOC"],"excerpt":"Build a React higher-order component step-by-step to understand how to implement the HOC pattern","date":{"$$date":1542039476957},"coverImage":"","type":"Post","frontmatter":"---\npath: \"React/\"\ndate: \"2018-10-15\"\ntitle: \"Understanding React Higher-Order Components by Example\"\ntags: [\"React\",\"HOC\"]\ncategory: \"React\"\ncategoryColor: \"#F3C610\"\nexcerpt: \"Build a React higher-order component step-by-step to understand how to implement the HOC pattern\"\ncoverImage: \"\"\nsourceUrl: \"https://levelup.gitconnected.com/understanding-react-higher-order-components-by-example-95e8c47c8006\"\ntype: \"Post\"\n---\n    ","filePath":"pages/React/.md","_id":"ViCaT7Hot8Og0292","htmlCode":"<div><h1>Build a React higher-order component step-by-step to understand how to implement the HOC&nbsp;pattern<br></h1><p>In this tutorial we will cover the concepts needed to build your own higher-order components (HOC). We will implement a HOC to save React state to <code>localStorage</code>, called <code>withStorage</code>, that will allow you to inject the functionality into components without needing to duplicate the logic across your entire application.</p><blockquote>If you’re interested in see the same example in render props, check out <a data-=\"\">this article</a></blockquote></div><div><h3>An introduction to&nbsp;HOC</h3><p>A higher-order component in React is a pattern used to share common functionality between components without repeating code. A higher-order component is actually not a component though, <span data-creator-=\"\">it is a function</span>. A HOC function takes a component as an argument and returns a component. It transforms a component into another component and adds additional data or functionality. In short:</p><pre>const NewComponent = (BaseComponent) =&gt; {<br>  // ... create new component from old one and update<br>  return UpdatedComponent<br>}</pre><p>Two HOC’s implementations that you may be familiar with in the React ecosystem are <code>connect</code> from Redux and <code>withRouter</code> from React Router. The <code>connect</code> function from Redux is used to give components access to the global state in the Redux store, and it passes these values to the component as props. The <code>withRouter</code> function injects the router information and functionality into the component, enabling the developer access or change the route.</p></div><div><h3>The higher-order component pattern</h3><p>A higher-order component is a function that takes a component as an argument and returns a component. This means that a HOC will always have a form similar to the follow:</p><pre><code><span>import</span> React <span>from</span> <span>'react'</span>;<br><br><span>const</span> higherOrderComponent = <span>(<span>WrappedComponent</span>) =&gt;</span> {<br>  <span><span>class</span> <span>HOC</span> <span>extends</span> <span>React</span>.<span>Component</span> </span>{<br>    render() {<br>      <span>return</span> <span><span>&lt;<span>WrappedComponent</span> /&gt;</span>;</span><br><span>    }</span><br><span>  }</span><br><span>    </span><br><span>  return HOC;</span><br><span>};</span></code></pre><p>The <code>higherOrderComponent</code> is a function that takes a component called <code>WrappedComponent</code> as an argument. We create a new component called <code>HOC</code> which returns the <code>&lt;WrappedComponent/&gt;</code> from its <code>render</code> function. While this actually adds no functionality in the trivial example, it depicts the common pattern that every HOC function will follow. We can invoke the HOC as follows:</p><pre>const SimpleHOC = <code>higherOrderComponent</code>(MyComponent);</pre><h3>A basic HOC by&nbsp;example</h3><p>Now we will extend our basic higher-order component pattern to inject data into our wrapped.</p><p>Our team has actually figured out the <code>secretToLife</code> which turns out to be the number <code>42</code>. Some of our components need to share this information, and we can create a HOC called <code>withSecretToLife</code> to pass it as a prop to our components.</p><pre><code><span>import</span> React <span>from</span> <span>'react'</span>;<br><br><span>const</span> withSecretToLife = <span>(<span>WrappedComponent</span>) =&gt;</span> {<br>  <span><span>class</span> <span>HOC</span> <span>extends</span> <span>React</span>.<span>Component</span> </span>{<br>    render() {<br>      <span>return</span> (<br>        <span><span>&lt;<span>WrappedComponent</span></span></span><br><span><span>          {<span>...this.props</span>}</span></span><br><span><span>          <span>secretToLife</span>=<span>{42}</span></span></span><br><span><span>        /&gt;</span></span><br><span>      );</span><br><span>    }</span><br><span>  }</span><br><span>    </span><br><span>  return HOC;</span><br><span>};</span><br><br><span>export default withSecretToLife;</span></code></pre><p>Notice that this HOC is almost identical to our basic pattern. All we have done is add a prop <code>secretToLife={42}</code>, which allows the wrapped component to access the value by calling <code>this.props.secretToLife</code>.</p><p>The other addition is that we spread the props passed to the component. This ensures that any other props that are passed to the wrapped component will be accessible via <code>this.props</code> in the same manner they would be called if the component was not passed through our higher-order component function.</p><pre><code><span>import</span> React <span>from</span> <span>'react'</span>;<br><span>import</span> withSecretToLife <span>from</span> <span>'components/withSecretToLife'</span>;<br><br><span>const</span> DisplayTheSecret = <span><span>props</span> =&gt;</span> (<br>  <span><span>&lt;<span>div</span>&gt;</span></span><br><span>    The secret to life is {props.secretToLife}.</span><br><span>  <span>&lt;/<span>div</span>&gt;</span></span><br>);<br><br><span>const</span> WrappedComponent = withSecretToLife(DisplayTheSecret);<br><br><span>export</span> <span>default</span> WrappedComponent;</code></pre><p>Our <code>WrappedComponent</code>, which is just an enhanced version of <code>&lt;DisplayTheSecret/&gt;</code>, will allow us to access <code>secretToLife</code> as a prop.</p><h3>A practical HOC by&nbsp;example</h3><p>Now that we have a solid grasp on the fundamental pattern for HOC, we can build one that is practical for a real application. A higher-order component has access to all the default React API, including <code>state</code> and the lifecycle methods.</p><p>The functionality of our <code>withStorage</code> HOC will be to save/load the state of a component, allowing us to quickly access and render it on a page load.</p><pre><code><span>import</span> React <span>from</span> <span>'react'</span>;<br><br><span>const</span> withStorage = <span>(<span>WrappedComponent</span>) =&gt;</span> {<br>  <span><span>class</span> <span>HOC</span> <span>extends</span> <span>React</span>.<span>Component</span> </span>{<br>    state = {<br>      <span>localStorageAvailable</span>: <span>false</span>, <br>    };<br>  <br>    componentDidMount() {<br>       <span>this</span>.checkLocalStorageExists();<br>    }<br>  <br>    checkLocalStorageExists() {<br>      <span>const</span> testKey = <span>'test'</span>;<br><br>      <span>try</span> {<br>          localStorage.setItem(testKey, testKey);<br>          localStorage.removeItem(testKey);<br>          <span>this</span>.setState({ <span>localStorageAvailable</span>: <span>true</span> });<br>      } <span>catch</span>(e) {<br>          <span>this</span>.setState({ <span>localStorageAvailable</span>: <span>false</span> });<br>      } <br>    }<br>  <br>    load = <span>(<span>key</span>) =&gt;</span> {<br>      <span>if</span> (<span>this</span>.state.localStorageAvailable) {<br>        <span>return</span> localStorage.getItem(key); <br>      }<br>      <br>      <span>return</span> <span>null</span>;<br>    }<br>    <br>    save = <span>(<span>key, data</span>) =&gt;</span> {<br>      <span>if</span> (<span>this</span>.state.localStorageAvailable) {<br>        localStorage.setItem(key, data);<br>      }<br>    }<br>    <br>    remove = <span>(<span>key</span>) =&gt;</span> {<br>      <span>if</span> (<span>this</span>.state.localStorageAvailable) {<br>        localStorage.removeItem(key);<br>      }<br>    }<br>    <br>    render() {<br>      <span>return</span> (<br>        <span><span>&lt;<span>WrappedComponent</span></span></span><br><span><span>          <span>load</span>=<span>{this.load}</span></span></span><br><span><span>          <span>save</span>=<span>{this.save}</span></span></span><br><span><span>          <span>remove</span>=<span>{this.remove}</span></span></span><br><span><span>          {<span>...this.props</span>}</span></span><br><span><span>        /&gt;</span></span><br><span>      );</span><br><span>    }</span><br><span>  }</span><br><span>    </span><br><span>  return HOC; </span><br><span>}</span><br><br><span>export default withStorage;</span></code></pre><p>At the top of <code>withStorage</code> we have a single item in the component’s state which tracks if <code>localStorage</code> is available in the given browser. We use the <code>componentDidMount</code> lifecycle hook which will check if localStorage exists in the <code>checkLocalStorageExists</code> function. Here it will test saving an item and set the state to true if it succeeds.</p><p>We also add three functions to our HOC — <code>load</code>, <code>save</code>, and <code>remove</code>. These are used to directly access the <code>localStorage</code> API if it is available. Our three functions on the HOC are passed to our wrapped component to be consumed there.</p><p>Now we will create a new component to be wrapped in our <code>withStorage</code> HOC. It will be used to display a user’s username and favorite movie. However, the API call to get this information takes a very long time. We can also assume that these values will never change once set.</p><p>To ensure we have a great user experience, we will make this API call only if the values haven’t been saved. Then every time the user returns to the page, they can access the data immediately instead of waiting for our API to return.</p><pre><code><span>import</span> React <span>from</span> <span>'react'</span>;<br><span>import</span> withStorage <span>from</span> <span>'components/withStorage'</span>;<br><br><span><span>class</span> <span>ComponentNeedingStorage</span> <span>extends</span> <span>React</span>.<span>Component</span> </span>{<br>  state = {<br>    <span>username</span>: <span>''</span>,<br>    <span>favoriteMovie</span>: <span>''</span>,<br>  }<br><br>  componentDidMount() {<br>    <span>const</span> username = <span>this</span>.props.load(<span>'username'</span>);<br>    <span>const</span> favoriteMovie = <span>this</span>.props.load(<span>'favoriteMovie'</span>);<br>    <br>    <span>if</span> (!username || !favoriteMovie) {<br>      <span>// This will come from the parent component</span><br><span>      // and would be passed when we spread props {...this.props}</span><br><span>      this.props.reallyLongApiCall()</span><br><span>        .then((user) =&gt; {</span><br><span>          this.props.save('username', user.username) || '';</span><br><span>          this.props.save('favoriteMovie', user.favoriteMovie) || '';</span><br><span>          this.setState({</span><br><span>            username: user.username,</span><br><span>            favoriteMovie: user.favoriteMovie,</span><br><span>          });</span><br><span>        }); </span><br><span>    } else {</span><br><span>      this.setState({ username, favoriteMovie })</span><br><span>    }</span><br><span>  }</span><br><br><span>  render() {</span><br><span>    const { username, favoriteMovie } = this.state;</span><br><span>    </span><br><span>    if (!username || !favoriteMovie) {</span><br><span>      return &lt;div&gt;Loading...&lt;/div&gt;; </span><br><span>    }</span><br><span>    </span><br><span>    return (</span><br><span>      &lt;div&gt;</span><br><span>        My username is {username}, and I love to watch {favoriteMovie}.</span><br><span>      &lt;/div&gt;</span><br><span>    )</span><br><span>  }</span><br><span>}</span><br><br><span>const WrappedComponent = withStorage(ComponentNeedingStorage);</span><br><br><span>export default WrappedComponent;</span></code></pre><p>Inside the <code>componentDidMount</code> of our wrapped component, we first try to access the <code>username</code> and <code>favoriteMovie</code> from <code>localStorage</code>. If the values do not exist, we make our expensive API call named <code>this.props.reallyLongApiCall</code>. Once this function returns, we save the username and favorite to <code>localStorage</code> and update the component’s state to display them on the screen.</p><h3>Higher-order component considerations</h3><ul><li>A HOC should be a pure function with no side-effects. It should not make any modifications and just compose the original component by wrapping it in another component.</li><li>Do not use HOC’s in the render method of a component. Access the HOC outside the component definition.</li><li>Static methods must be copied over to still have access to them. A simple way to do this is the <code>hoist-non-react-statics</code> package.</li><li>Refs are not passed through.</li></ul></div>","author":"","dateUpdated":1542039476957}
{"date":"2018-11-14T14:59:40.122Z","title":"From JavaScript to TypeScript Pt. I: Types & Variables","sourceUrl":"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-boolean","path":"JavaScript/","category":"JavaScript","tags":["JavaScript"," ES6"],"author":"Peleke Sengstacke (@PelekeS)","excerpt":"","dateCreated":1542204079230,"coverImage":"","type":"Post","frontmatter":"---\npath: 'JavaScript/'\ndate: 'Wed Nov 14 2018 20:29:40 GMT+0530 (India Standard Time)'\ntitle: 'From JavaScript to TypeScript Pt. I: Types & Variables'\ntags: ['JavaScript','ES6']\ncategory: 'JavaScript'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-boolean'\ntype: 'Post'\n---\n    ","htmlCode":"<p>Object-oriented programming (OOP) has been one of the most influential paradigms in the development of modern programming practices. If you've ever thought in terms of classes or inheritance, you prove the point: Those ideas have their origins in classical OOP.</p><blockquote><p><span>TypeScript</span>&nbsp;is a language that adds object-oriented syntactical sugar to JavaScript</p></blockquote><p>Object-oriented programming has been&nbsp;<em>so</em>&nbsp;influential that many can't imagine doing things any other way. TypeScript's very existence is testament to this fact: It provides classically object-oriented syntax for a language that supports almost no classical object-oriented features.</p><div><h3>Table of Contents</h3><ul><li><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-setting-up\">Setting Up</a></li><li><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-types\">Types</a></li><li><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-the-purpose-of-types\">The Purpose of Types</a></li><li><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-typescript-s-basic-types\">TypeScript's Basic Types</a></li><li><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-boolean\">Boolean</a></li><li><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-number\">Number</a></li><li><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-string\">String</a></li><li><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-array\">Array</a></li><li><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-tuples\">Tuples</a></li><li><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-enum\">Enum</a></li><li><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-any\">Any</a></li><li><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-void\">Void</a></li><li><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-return-types\">Return Types</a></li><li><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-the-last-type-functions\">The Last Type: Functions</a></li><li><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-conclusion\">Conclusion</a></li></ul></div><p><span>Make no mistake: TypeScript does not add true classes, interfaces, or generics.</span>&nbsp;Just some sugar to make it easier if you think that way. Regardless, it's a good introduction to the concepts of OOP for people whose background is mostly in JavaScript.</p><div><div></div></div><p>This series has two goals:</p><ol><li>Cover the essentials of TypeScript, for JavaScripters with an OOP background; and</li><li>Cover the essentials of OOP, in the context of TypeScript, for JavaScripters with no formal exposure to it.</li></ol><p>Those in the first group should find it easy to map the concepts we discuss to the syntax we'll see. Those in the latter group should find it easy to focus on the concepts without getting distracted by substantially different syntax.</p><p>We'll ease into it, and start in familiar territory. After reading this article, you'll be able to:</p><ol><li>Define&nbsp;<em>type</em>, as it relates to the JavaScript environment;</li><li>List TypeScript's built-in types, and identify where they differ from JavaScript's;</li><li>Declare variables with the proper types and access modifiers; and</li><li>Annotate functions with the proper argument and return types.</li></ol><h2><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-setting-up\">Setting Up</a></h2><p>To get started, you'll need to install TypeScript (TS). In this article, we'll be using&nbsp;<a href=\"https://nodejs.org/en/\">Node.js</a>, v5.11.0, and NPM, v3.8.6. You can also get TS bundled with&nbsp;<a href=\"https://www.visualstudio.com/en-us/visual-studio-homepage-vs.aspx\">Visual Studio 2015</a>, if you prefer.</p><p>To install TypeScript, run:</p><pre data-title=\"bash\"><code><span>npm</span> <span>install</span> --global typescript</code></pre><p>This installs a command-line tool,&nbsp;<code>tsc</code>, which you use to transpile TS to JavaScript.</p><p>Create a new directory somewhere: We'll save and compile our TS examples here.</p><pre data-title=\"bash\"><code><span># This creates a new directory in your home folder.</span>\n<span># Feel free to do this somewhere else.</span>\n<span>cd</span> <span>&amp;&amp;</span> <span>mkdir</span> ts_examples</code></pre><p>While simple, I've collected all of the examples in a&nbsp;<a href=\"https://github.com/Peleke/oop_in_typescript\">GitHub repo</a>. If you don't want to type, run:</p><div><div></div></div><pre data-title=\"javascript\"><code>git clone https<span>:</span><span>/</span><span>/</span>github<span>.</span>com<span>/</span>Peleke<span>/</span>oop_in_typescript\ngit checkout Part_1<span>-</span>Types</code></pre><p>. . . And you're good to go.</p><h2><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-types\">Types</a></h2><p>The word&nbsp;<span>type</span>&nbsp;means different things in different contexts. In general,&nbsp;<em>types</em>&nbsp;are a way of classifying data structures based on the kind of information they can contain, and what you can do with it.</p><h3>Types in JavaScript</h3><p>In JavaScript,&nbsp;<a href=\"https://www.ecma-international.org/ecma-262/6.0/#sec-ecmascript-data-types-and-values\">clause 6 of the ECMAScript specification</a>&nbsp;defines the following types:</p><ul><li>Undefined;</li><li>Null;</li><li>Boolean;</li><li>String;</li><li>Symbol;</li><li>Number; and</li><li>Object.</li></ul><p>To say a variable is of a certain type is to say two things:</p><ol><li>That it supports all the operations of that type; and</li><li>That its internal representation is distinct from that of the other types.</li></ol><p>At the level of applications programming, we're only concerned with the first point.</p><pre data-title=\"javascript\"><code><span>\"use strict\"</span><span>;</span>\n\n<span>const</span> name     <span>=</span> <span>\"Peleke\"</span><span>;</span>      <span>// name has type string</span>\n<span>const</span> nothing <span>=</span> <span>null</span><span>;</span>              <span>// nothing has type null -- kind of*</span>\n<span>const</span> nemo     <span>=</span> undefined<span>;</span>   <span>// nemo has type undefined</span>\n<span>const</span> obj          <span>=</span> <span>{</span> <span>}</span><span>;</span>                <span>// obj has type object</span>\n\n<span>// * Brendan Eich made a mistake in the 10-day whirlwind of putting together JavaScript.</span>\n<span>//      typeof null returns \"object\", but it's not an object, and this is a bug.</span>\n<span>//      Under the hood, null /is/ its own primitive type -- Null. You just can't tell.</span>\n<span>//      For more: http://www.2ality.com/2013/10/typeof-null.html</span></code></pre><p>Of course, if you've spent more than a few minutes writing JavaScript, you'll know that this is mostly trivia. We don't annotate types in JavaScript, and we can assign values of different types to the same variables through the lifetime of our program.</p><div><div><div><div><h3>Scotch Newsletter</h3><p>Join 100,000 subscribers. Get weekly dev news and tutorials.</p><form action=\"https://app.mailerlite.com/webforms/submit/c7r3j6\" data-code=\"c7r3j6\" method=\"post\" target=\"_blank\"><div aria-label=\"Please leave the following field empty\"><input type=\"text\" tabindex=\"-1\" value=\"\" placeholder=\"Message\" autocomplete=\"off\" title=\"message\">&nbsp;<input type=\"text\" tabindex=\"-1\" value=\"\" placeholder=\"Email\" autocomplete=\"off\" title=\"email\">&nbsp;<input type=\"text\" tabindex=\"-1\" value=\"\" placeholder=\"Name\" autocomplete=\"off\" title=\"name\"></div><div><div><input type=\"email\" data-inputmask=\"\" value=\"\" placeholder=\"Email\" aria-label=\"Your Email\"><div>📧</div></div><div><button type=\"submit\">SUBSCRIBE</button></div></div></form></div></div></div></div><p>As far as we're concerned, if an object has the properties and methods we need it to, we don't&nbsp;<em>care</em>&nbsp;what the underlying type is. If it behaves properly, it's good enough. The rest is an implementation detail.</p><p>This is sometimes called&nbsp;<span><a href=\"https://en.wikipedia.org/wiki/Duck_typing#Overview\">duck-typing</a></span>: If it walks like a duck, and it quacks like a duck, it's probably okay if we eat it treat it like a duck.</p><h2><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-the-purpose-of-types\">The Purpose of Types</a></h2><p>Languages like Java and Haskell are&nbsp;<span>statically typed</span>. That means that, before they run your program, they'll check to make sure that you get strings where you expect strings, numbers where you expect numbers, and mongeese where you expect mongeese. If you pass a mongoose to a function that expects a string, it'll complain, and you'll have to fix it before your program will compile.</p><p>The point of all that trouble is to let you know when you've written code that might break&nbsp;<em>before</em>&nbsp;you run it. After all, if you write a function that expects a string, and you give it a mongoose, chances are good it's not going to know what to do with it.</p><pre data-title=\"java\"><code>\n<span>private</span> <span>boolean</span> <span>screamName</span><span>(</span>String name<span>)</span> <span>{</span>\n    <span>return</span> name<span>.</span><span>toUpperCase</span><span>(</span><span>)</span><span>;</span>\n<span>}</span>\n\n<span>// Mongeese don't like to be capitalized.</span>\n<span>//   Fortunately, the compiler prevents this from building.</span>\n<span>tameMongoose</span><span>(</span><span>new</span> <span>Mongoose</span><span>(</span><span>)</span><span>)</span><span>;</span> </code></pre><p>In JavaScript, we'd just go ahead and pass the mongoose along and cross our fingers. If it's got a&nbsp;<code>toUpperCase</code>, it works. If not, our program dies. Devil's gambit.</p><pre data-title=\"javascript\"><code><span>\"use strict\"</span><span>;</span>\n\n<span>const</span> sweet_mongoose <span>=</span> <span>{</span> <span>}</span><span>;</span>\n<span>const</span> savage_mongoose <span>=</span> <span>{</span><span>}</span><span>;</span>\n\nsweet_mongoose<span>.</span>name <span>=</span> <span>\"sweetheart\"</span><span>;</span>\nsavage_mongoose<span>.</span>name <span>=</span> <span>\"savage\"</span><span>;</span>\n\nsweet_mongoose<span>.</span><span>toUpperCase</span> <span>=</span> <span>function</span> <span>(</span><span>)</span> <span>{</span> <span>return</span> <span>this</span><span>.</span>name<span>.</span><span>toUpperCase</span><span>(</span><span>)</span><span>;</span> <span>}</span>\n\n<span>function</span> <span>screamName</span> <span>(</span>name<span>)</span> <span>{</span>\n  <span>return</span> name<span>.</span><span>toUpperCase</span><span>(</span><span>)</span><span>;</span>\n<span>}</span>\n\n<span>screamName</span><span>(</span>sweet_mongoose<span>)</span><span>;</span> <span>// What a SWEETHEART.</span>\n<span>screamName</span><span>(</span>savage_mongoose<span>)</span><span>;</span> <span>// Kills program with a TypeError. Cold-blooded.</span></code></pre><p>The idea behind all this is that a value's type can be conceived of as a sort of&nbsp;<em>interface</em>. In other words, a object's type reveals what you can and cannot do with it. Attempting to do something with an object that doesn't make sense for its type -- like capitalizing a number -- is a programmer error that a type-aware compiler can catch ahead of time.</p><p>Therein lies one of the benefits: We trade runtime errors for compile-time warnings. By contrast, dynamic languages eschew compile-time safety checks in favor of greater flexibility and programmer productivity.</p><p>Obviously, neither system is perfect:</p><ol><li>In our Java function, what if the mongoose&nbsp;<em>did</em>&nbsp;have a&nbsp;<code>toUpperCase</code>&nbsp;method that behaved as desired? Then we'd have to do some finaggling just to get our program to compile.</li><li>In Javascript, what if we get an object with the function we expect, but different behavior? An Observable and an RSS feed have very different&nbsp;<code>subscribe</code>&nbsp;methods. We'll obviously notice an error, but there's a substantial chance the program would&nbsp;<em>execute</em>&nbsp;-- just not&nbsp;<em>correctly</em>.</li></ol><p>That said:</p><ol><li>Types are a form of&nbsp;<a href=\"https://en.wikipedia.org/wiki/Self-documenting_code\">self-documenting code</a>.</li><li>Certain type errors are easy to catch at compile time, but nonobvious at runtime.</li><li>Types help with the design of function compositions and complex reactive streams.</li></ol><p>Do we&nbsp;<em>need</em>&nbsp;static typing? Obviously not. JavaScript doesn't have it, and the Internet works fine.</p><p>Do we&nbsp;<em>benefit</em>&nbsp;from it? Maybe. It's powerful in languages like Java. It's&nbsp;<em>exceedingly</em>powerful in certain statically-typed functional languages, like ML, Haskell, and Scala.</p><blockquote><p>TypeScript takes the stance that we unequivocally&nbsp;<em>do</em>&nbsp;benefit from static typing, allowing you to declare your variables with any of a handful of built-in types.</p></blockquote><h2><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-typescript-s-basic-types\">TypeScript's Basic Types</a></h2><p>TypeScript exposes nine types for us to work with. Whether you use them or not is up to you:&nbsp;<span>Type annotations are always optional in TypeScript</span>.</p><ol><li>Boolean;</li><li>Number;</li><li>String;</li><li>Array;</li><li>Tuple;</li><li>Enum;</li><li>Any;</li><li>Void;</li><li>Function.</li></ol><p>We'll start with the first eight, and circle back to the last one a bit later.</p><h2><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-boolean\">Boolean</a></h2><p>In TypeScript, you declare variables as in JavaScript, with a colon and type after the variable name. Booleans behave as usual.</p><p><span>Type Keyword</span>&nbsp;:&nbsp;<code>boolean</code></p><pre data-title=\"typescript\"><code><span>\"use strict\"</span><span>;</span>\n\n<span>const</span> lie <span>:</span> <span>boolean</span> <span>=</span> <span>false</span><span>,</span>\n       truth <span>:</span> <span>boolean</span> <span>=</span> <span>true</span><span>;</span></code></pre><p>Save that in a file called&nbsp;<code>boolean.ts</code>, then run&nbsp;<code>tsc boolean.ts</code>. It'll create a file called&nbsp;<code>boolean.js</code>, Open it up to see some sweet, sweet vanilla JavaScript:</p><pre data-title=\"javascript\"><code><span>\"use strict\"</span><span>;</span>\n<span>var</span> lie <span>=</span> <span>false</span><span>,</span> truth <span>=</span> <span>true</span><span>;</span></code></pre><h2><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-number\">Number</a></h2><p>TypeScript's Number type is synonymous with JavaScript's Number type. If youre curious, JavaScript numbers are an&nbsp;<a href=\"https://en.wikipedia.org/wiki/Double-precision_floating-point_format#IEEE_754_double-precision_binary_floating-point_format:_binary64\">IEEE 64-bit binary format double precision floating point values</a>. Or, you know, just numbers.</p><p><span>Type Keyword</span>&nbsp;:&nbsp;<code>number</code></p><pre data-title=\"typescript\"><code><span>\"use strict\"</span><span>;</span>\n\n<span>const</span> pi <span>:</span> <span>number</span> <span>=</span> <span>3.14159</span><span>;</span></code></pre><h2><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-string\">String</a></h2><p>As with Number, TypeScript's String is synonymous with JavaScript's underlying String type.</p><p><span>Type Keyword</span>&nbsp;:&nbsp;<code>string</code></p><pre data-title=\"typescript\"><code><span>\"use strict\"</span><span>;</span>\n\n<span>const</span> tree_of_knowledge <span>:</span> <span>string</span> <span>=</span> <span>\"Yggdrasil\"</span><span>;</span></code></pre><h2><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-array\">Array</a></h2><p>TypeScript treats arrays as their own type, and requires that you declare the type of what's inside of them, as well.</p><p>** Type Keywords **</p><ol><li>Array&lt;[ Item Type]&gt;</li><li>[]</li></ol><p>There are two syntaxes for arrays.</p><pre data-title=\"typescript\"><code><span>\"use strict\"</span><span>;</span>\n\n<span>// The item type, T, followed by brackets means, \"an array whose items are of type T.\"</span>\n<span>const</span> divine_lovers <span>:</span> <span>string</span><span>[</span><span>]</span> <span>=</span> <span>[</span><span>\"Zeus\"</span><span>,</span> <span>\"Aphrodite\"</span><span>]</span><span>;</span>\n\n<span>// Writing Array&lt;[Item Type]&gt; means the same thing.</span>\n<span>const</span> digits <span>:</span> <span>Array</span><span>&lt;</span><span>number</span><span>&gt;</span> <span>=</span> <span>[</span><span>143219876</span><span>,</span> <span>112347890</span><span>]</span><span>;</span>\n\n<span>// But this doesn't work. Hm. . . </span>\n<span>const</span> only_strings <span>:</span> <span>string</span><span>[</span><span>]</span> <span>=</span> <span>[</span><span>]</span><span>;</span>\nonly_strings<span>.</span><span>push</span><span>(</span><span>\"This Works!\"</span><span>)</span>\nonly_strings<span>.</span><span>push</span><span>(</span><span>42</span><span>)</span><span>;</span> <span>// This doesn't.</span></code></pre><p>Well. That's annoying.</p><p>We can't put&nbsp;<code>42</code>&nbsp;into&nbsp;<code>only_strings</code>&nbsp;because we declared that it can only contain items of type&nbsp;<code>string</code>. This is an example of TypeScript's compile-time complaints in action.</p><p>We'll see how to fix this shortly. But first -- tuples!</p><h2><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-tuples\">Tuples</a></h2><p>Tuples are another collection data type. They're useful for collecting a known number of items into an array-like structure. You can declare each item to be of a specific type.</p><p>** Type Keyword ** : [(Item Type), . . . , (Item Type)]</p><pre data-title=\"typescript\"><code><span>\"use strict\"</span><span>;</span>\n\n<span>// [Date, Month, Year] :: Triplet of numbers</span>\n<span>let</span> date_triplet <span>:</span> <span>[</span><span>number</span><span>,</span> <span>number</span><span>,</span> <span>number</span><span>]</span><span>;</span>\ndate_triplet <span>=</span> <span>[</span><span>31</span><span>,</span> <span>6</span><span>,</span> <span>2016</span><span>]</span><span>;</span>\n\n<span>// [Name, Age]</span>\n<span>let</span> athena <span>:</span> <span>[</span><span>string</span><span>,</span> <span>number</span><span>]</span><span>;</span>\nathena <span>=</span> <span>[</span><span>'Athena'</span><span>,</span> <span>9386</span><span>]</span><span>;</span>\n\n<span>// You retrieve items with indexes, as with arrays. </span>\n<span>//  TS remembers the type for you.</span>\n<span>var</span> name <span>:</span> <span>string</span> <span>=</span> athena<span>[</span><span>0</span><span>]</span><span>;</span>\n<span>const</span> age <span>:</span> <span>number</span> <span>=</span> athena<span>[</span><span>1</span><span>]</span><span>;</span>\n\n<span>// But:</span>\nname  <span>=</span> athena<span>[</span><span>1</span><span>]</span><span>;</span> <span>// No dice. We're writing TypeScript now.</span></code></pre><p>So . . . What are tuples useful for?</p><p>Good question. JavaScript is the only language I write without native tuples, but I rarely use them elsewhere. Occasionally, I use them to group related data that isn't liable to change:</p><pre data-title=\"typescript\"><code><span>\"use strict\"</span><span>;</span>\n\n<span>//The Big Three of Powerlifting</span>\n<span>let</span> big_three <span>:</span> <span>[</span><span>string</span><span>,</span> <span>string</span><span>,</span> <span>string</span><span>]</span><span>;</span>\nbig_three <span>=</span> <span>[</span><span>'Squat'</span><span>,</span> <span>'Deadlift'</span><span>,</span> <span>'Bench Press'</span><span>]</span></code></pre><p>. . . But in general, I use a Map or Set instead.</p><h2><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-enum\">Enum</a></h2><p>Enums allow you to associate names with intever values. The name comes from the fact that they're&nbsp;<span>*enum</span>erable*.</p><p>Creating a enum effectively creates a new type keyword, which you use like any other type.</p><pre data-title=\"typescript\"><code><span>\"use strict\"</span><span>;</span>\n\n<span>// This is an example from the TypeScript docs.</span>\n<span>//    http://bit.ly/1XQjl2Y</span>\n<span>enum</span> Color <span>{</span> Red<span>,</span> Green<span>,</span> Blue <span>}</span><span>;</span>\n<span>const</span> red <span>:</span> Color <span>=</span> Color<span>.</span>Red<span>;</span>\n\n<span>// Enums are like associative arrays. Each enum constant is associated with an index, starting at 0.</span>\n<span>console</span><span>.</span><span>log</span><span>(</span>Color<span>[</span><span>0</span><span>]</span><span>)</span><span>;</span> <span>// 'Red'</span>\n\n<span>// You can start from any number instead of zero, if you want.</span>\n<span>//    Note that indexing a non-existent enum constant returns undefined,</span>\n<span>//    but doesn't throw an error.</span>\n<span>enum</span> RomanceLanguages <span>{</span> Spanish <span>=</span> <span>1</span><span>,</span> French<span>,</span> Italian<span>,</span> Romanian<span>,</span> Portuguese <span>}</span><span>;</span>\n<span>console</span><span>.</span><span>log</span><span>(</span>RomanceLanguages<span>[</span><span>4</span><span>]</span><span>)</span><span>;</span> <span>// 'Romanian'</span>\n<span>console</span><span>.</span><span>log</span><span>(</span>RomanceLanguages<span>[</span><span>0</span><span>]</span><span>)</span><span>;</span> <span>// undefined </span></code></pre><p><a href=\"http://www.2ality.com/2014/12/es6-symbols.html\">Symbols provide an interesting alternative to enums</a>.</p><h2><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-any\">Any</a></h2><p>Any is more or less what it sounds like: A type that accepts&nbsp;<em>any</em>&nbsp;value. In some sense, it's a way to opt out of type checking. It also allows us to declare mixed collections.</p><p>** Type Keyword ** :&nbsp;<code>any</code></p><pre data-title=\"typescript\"><code><span>\"use strict\"</span><span>;</span>\n\n<span>let</span> mystery <span>:</span> <span>any</span> <span>=</span> <span>4</span><span>;</span> <span>// number</span>\nmystery <span>=</span> <span>\"four\"</span><span>;</span> <span>// string -- no error</span>\n\n<span>const</span> not_only_strings <span>:</span> <span>any</span><span>[</span><span>]</span> <span>=</span> <span>[</span><span>]</span><span>;</span>\nnot_only_strings<span>.</span><span>push</span><span>(</span><span>\"This Works!\"</span><span>)</span>\nnot_only_strings<span>.</span><span>push</span><span>(</span><span>42</span><span>)</span><span>;</span> <span>// This does too.</span></code></pre><h2><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-void\">Void</a></h2><p>Finally, we have Void. This is the typeclass associated with the values&nbsp;<code>undefined</code>&nbsp;or&nbsp;<code>null</code>. Unlike the other types, you won't use this to declare variables.</p><p>It's not that you&nbsp;<em>can't</em>. Just that, if you do, you can only set that varible to&nbsp;<code>null</code>&nbsp;or&nbsp;<code>undefined</code>.</p><pre data-title=\"typescript\"><code><span>\"use strict\"</span><span>;</span>\n\n<span>let</span> the_void <span>:</span> <span>void</span> <span>=</span> undefined<span>;</span>\nthe_void <span>=</span> <span>null</span><span>;</span>\n\nthe_void <span>=</span> <span>\"nothing\"</span><span>;</span> <span>// Error.</span></code></pre><p>The main reason&nbsp;<code>void</code>&nbsp;exists is to mark functions without return statements.</p><p>Speaking of which, it's about time we talk about functions.</p><h2><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-return-types\">Return Types</a></h2><p>TypeScript allows you to mark the type of the value that a function returns.</p><p>Just as a variable's type indicates what sort of data the variable contains, a function's return type indicates what sort of data it returns.</p><p>All the types we've seen so far are valid return types. In particuar, you'll use&nbsp;<code>void</code>almost exclusively as the return type of a function with no&nbsp;<code>return</code>&nbsp;statement.</p><p>You denote a return type the same way you denote a variable type: With a colon and a type keyword, this time after the arguments list.</p><pre data-title=\"javascript\"><code><span>\"use strict\"</span><span>;</span>\n\n<span>function</span> <span>capitalizeName</span> <span>(</span>name <span>:</span> string<span>)</span> <span>:</span> string <span>{</span>\n  <span>return</span> name<span>.</span><span>toUpperCase</span><span>(</span><span>)</span><span>;</span>\n<span>}</span>\n\n<span>// Shoutout to @achm4m0 (Alberto) for notifying me of an error here!</span>\nconsole<span>.</span><span>log</span><span>(</span><span>capitalizeName</span><span>(</span><span>'geronimo'</span><span>)</span><span>)</span><span>;</span> <span>// 'GERONIMO'</span>\n\n<span>// But:</span>\nconsole<span>.</span><span>log</span><span>(</span><span>capitalizeName</span><span>(</span><span>42</span><span>)</span><span>)</span><span>;</span> <span>// Error; 42 isn't a string.</span>\n\n<span>// TypeScript checks at compile-time if you're returning the right type.</span>\n<span>function</span> <span>even_broken</span> <span>(</span>num <span>:</span> number<span>)</span> <span>:</span> boolean <span>{</span>\n   <span>return</span> <span>(</span>num <span>%</span> <span>2</span><span>)</span><span>;</span> <span>// WRONG. This will cause a compile-time error.</span>\n<span>}</span>\n\n<span>function</span> <span>even</span> <span>(</span>num <span>:</span> number<span>)</span> <span>:</span> boolean <span>{</span>\n   <span>return</span> <span>(</span>num <span>%</span> <span>2</span> <span>==</span> <span>0</span><span>)</span><span>;</span> <span>// Much better; this works.</span>\n<span>}</span></code></pre><p>Note that you can also mark argument types as you would that of normal variables.</p><p>Notifications like the one we get for&nbsp;<code>even_broken</code>&nbsp;are pretty helpful during development.</p><h2><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-the-last-type-functions\">The Last Type: Functions</a></h2><p>One of JavaScript's greatest strengths is that it treats functions as first class citizens. This means we can pass them as arguments and return them from functions ike any other value. How does TypeScript handle that?</p><p>Simple. Function name; parenthetical list of typed arguments; fat arrow; return type.</p><pre data-title=\"typescript\"><code><span>\"use strict\"</span><span>;</span>\n\n<span>let</span> multiply <span>:</span> <span>(</span>first <span>:</span> <span>number</span><span>,</span> second <span>:</span> <span>number</span><span>)</span> <span>=&gt;</span> <span>number</span><span>;</span>\n<span>multiply</span> <span>=</span> <span>function</span> <span>(</span>first<span>,</span> second<span>)</span> <span>{</span>\n  <span>return</span> first <span>*</span> second<span>;</span>\n<span>}</span></code></pre><p>This example illustrates that you can annotate your functions types before defining them.</p><p>The same pattern applies if you're returning a function. In that case, though, you wrap the type of the function you return -- that is, everything after the fat arrow -- in parentheses.</p><pre data-title=\"typescript\"><code><span>\"use strict\"</span><span>;</span>\n\n<span>let</span> multiplyFirst <span>:</span> <span>(</span> first <span>:</span> <span>number</span><span>)</span> <span>=&gt;</span> <span>(</span><span>(</span>second <span>:</span> <span>number</span><span>)</span> <span>=&gt;</span> <span>number</span><span>)</span><span>;</span>\n<span>multiplyFirst</span> <span>=</span> <span>function</span> <span>(</span>first<span>)</span> <span>{</span>\n  <span>return</span> <span>function</span> <span>(</span>num<span>)</span> <span>{</span>\n    <span>return</span> first <span>*</span> num<span>;</span>\n  <span>}</span>\n<span>}</span> \n\n<span>console</span><span>.</span><span>log</span><span>(</span><span>multiply</span><span>(</span><span>5</span><span>,</span> <span>2</span><span>)</span><span>)</span><span>;</span> <span>// '10'</span>\n<span>console</span><span>.</span><span>log</span><span>(</span><span>multiplyFirst</span><span>(</span><span>9</span><span>)</span><span>(</span><span>2</span><span>)</span><span>)</span><span>;</span> <span>// '18'</span></code></pre><p>Newcomers to static typing often find variable types annoying. Function types are where they start to get nauseated.</p><p>This is actually the typing feature I use most in TypeScript. Somewhat ironically, that's because of my background in functional programming, not OOP, and that remains the context in which I find it most useful.</p><p>Annotating functions that return&nbsp;<code>string</code>&nbsp;or&nbsp;<code>number</code>&nbsp;is easy, and beneficial largely for the purpose of self-documentation.</p><p>On the other hand, writing function type annotations is an integral, active part of my design process when I work with&nbsp;<a href=\"http://reactivex.io/\">Rx streams</a>&nbsp;and complex [function compositions](<a href=\"https://en.wikipedia.org/wiki/Function_composition_(computer_science)\">https://en.wikipedia.org/wiki/Function_composition_(computer_science)</a>.</p><h2><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-conclusion\">Conclusion</a></h2><p>By now, you should feel like you've started getting your hands dirty with TypeScript. You've seen:</p><ol><li>How to transpile TS files on the command line;</li><li>How types in TS compare to JavaScript's;</li><li>All of the types TS has to offer; and</li><li>How to annotate function types.</li></ol><p>You should also feel pretty confident that you can article&nbsp;<em>why</em>&nbsp;we might benefit from all this in the first place.</p><p>Next time, we'll stray a little farther from familiar territory, and explore classes; interfaces; enums; and how to get the most out of them by adapting classical obect-oriented design to our more dynamic environment.</p><p><img data-src=\"https://track.mailerlite.com/webforms/o/1112154/c7r3j6?vaa4d608450783acdc64d5338ff94f6d5\" width=\"1\" height=\"1\" border=\"0\" src=\"https://track.mailerlite.com/webforms/o/1112154/c7r3j6?vaa4d608450783acdc64d5338ff94f6d5\" data-was-processed=\"true\"></p><p>Until then, feel free to drop questions in the comments below, or shoot them to me on Twitter (<a href=\"https://twitter.com/PelekeS\">@PelekeS</a>).</p>","filePath":"pages/JavaScript/.md","_id":"YCEGEz9jziLUA2SW"}
{"date":"2018-11-01T16:02:37.852Z","title":"Delay scroll (and resize) handlers in JavaScript","sourceUrl":"https://dannyvankooten.com/delay-scroll-handlers-javascript/","path":"JavaScript/","category":"JavaScript","tags":["JavaScript"," ES6"],"author":"","excerpt":"","dateCreated":1541088124766,"coverImage":"","type":"Snippet","frontmatter":"---\npath: 'JavaScript/'\ndate: 'Thu Nov 01 2018 21:32:37 GMT+0530 (India Standard Time)'\ntitle: 'Delay scroll (and resize) handlers in JavaScript'\ntags: ['JavaScript','ES6']\ncategory: 'JavaScript'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://dannyvankooten.com/delay-scroll-handlers-javascript/'\ntype: 'Snippet'\n---\n    ","htmlCode":"<p>While working on my newest plugin (<a href=\"http://dannyvankooten.com/wordpress-plugins/scroll-triggered-boxes/\">Scroll Triggered Boxes</a>) I had to attach a handler to the scroll event of the browser window to determine whether a user scrolled down far enough. While the logic for this is pretty simple, I had to put some thought into handling this the correct way.</p><p>Directly attaching a handler to the scroll event is considered bad practice because (depending on the browser) this event can fire&nbsp;<span>many times within a few milliseconds</span>. I did some testing and just logging a message in the scroll handler caused my debugger to crash in Internet Explorer. The sames goes for other events like mousemove, keypress and resize.</p><div><pre><code><span>$</span><span>(</span><span>window</span><span>).</span><span>scroll</span><span>(</span><span>function</span><span>()</span> <span>{</span>\n\t<span>console</span><span>.</span><span>log</span><span>(</span> <span>\"Firing!\"</span> <span>);</span>\n<span>});</span>\n</code></pre></div><p>Even the developers at&nbsp;<a href=\"http://ejohn.org/blog/learning-from-twitter/\">Twitter had an issue with scroll event handlers</a>&nbsp;in the past. They were using infinite scroll and attached their handler directly to the scroll event using jQuery. On top of that, they were running jQuery selector queries&nbsp;<em>every time</em>&nbsp;the event handler fired (without caching them). Enough to make the scrolling experience extremely slow and the site to be unresponsive.</p><h3>The solution: delaying (or polling) your handlers</h3><p>There is a simple solution to this problem: just run your event handlers with a slight delay. This will dramatically cut down on the times your actual callback function is fired. There are multiple ways to go about this but I find a simple timeout the simplest as it requires minimal extra code.</p><div><pre><code><span>var</span> <span>timer</span><span>;</span>\n\n<span>$</span><span>(</span><span>window</span><span>).</span><span>scroll</span><span>(</span><span>function</span><span>()</span> <span>{</span>\n\t<span>if</span><span>(</span><span>timer</span><span>)</span> <span>{</span>\n\t\t<span>window</span><span>.</span><span>clearTimeout</span><span>(</span><span>timer</span><span>);</span>\n\t<span>}</span>\n\n\t<span>timer</span> <span>=</span> <span>window</span><span>.</span><span>setTimeout</span><span>(</span><span>function</span><span>()</span> <span>{</span>\n\t\t<span>// actual callback</span>\n\t\t<span>console</span><span>.</span><span>log</span><span>(</span> <span>\"Firing!\"</span> <span>);</span>\n\t<span>},</span> <span>100</span><span>);</span>\n<span>});</span>\n</code></pre></div><p>This will set a timeout of 100 ms and only then run the actual callback function. If the scroll event is fired again and the 100 ms have not passed yet, it will clear the pending timeout and set a new one. This increased my script performance by about 100% in IE, as my handler was called 10 times less. The same logic can be applied to other events like&nbsp;<em>resize</em>&nbsp;as well.</p><h3>Cache your variables</h3><p>Another optimization you can do is to move as many code outside the callback function as possible. For the scroll triggered boxes plugin, I had to calculate the window height and the height at which a box should be triggered. These heights do not change between firing handlers so I moved it outside the callback.</p><div><pre><code><span>var</span> <span>timer</span><span>;</span>\n<span>var</span> <span>windowHeight</span> <span>=</span> <span>$</span><span>(</span><span>window</span><span>).</span><span>height</span><span>();</span>\n<span>var</span> <span>triggerHeight</span> <span>=</span> <span>0.5</span> <span>*</span> <span>windowHeight</span><span>;</span>\n\n<span>$</span><span>(</span><span>window</span><span>).</span><span>scroll</span><span>(</span><span>function</span><span>()</span> <span>{</span>\n\t<span>if</span><span>(</span><span>timer</span><span>)</span> <span>{</span>\n\t\t<span>window</span><span>.</span><span>clearTimeout</span><span>(</span><span>timer</span><span>);</span>\n\t<span>}</span>\n\n\t<span>timer</span> <span>=</span> <span>window</span><span>.</span><span>setTimeout</span><span>(</span><span>function</span><span>()</span> <span>{</span>\n\n\t\t<span>// this variable changes between callbacks, so we can't cache it</span>\n\t\t<span>var</span> <span>y</span> <span>=</span> <span>$</span><span>(</span><span>window</span><span>).</span><span>scrollTop</span><span>()</span> <span>+</span> <span>windowHeight</span><span>;</span>\n \n\t    <span>if</span><span>(</span><span>y</span> <span>&gt;</span> <span>triggerHeight</span><span>)</span> <span>{</span>\n\t        <span>// ...</span>\n\t    <span>}</span>\n\n\t\t\n\t<span>},</span> <span>100</span><span>);</span>\n<span>});</span>\n</code></pre></div><p>Hope this saves someone a headache! There are various throttle or debounce plugins available for jQuery that do the same thing but in my opinion you don’t really need another dependency for a simple thing as this. As you can see from my code examples, we just added throttling with just 3 or 4 lines of code.</p>","filePath":"pages/JavaScript/.md","_id":"a6x3h5ccMSCKCA1S"}
{"date":"2018-11-01T14:01:36.718Z","title":"Getting Started with React Hooks","sourceUrl":"https://scotch.io/tutorials/getting-started-with-react-hooks","path":"React/","category":"React","tags":["React"," Hooks"],"author":"Chris Sevilleja (@chrisoncode)","excerpt":"","dateCreated":1541079399436,"coverImage":"","type":"Post","frontmatter":"---\npath: 'React/'\ndate: 'Thu Nov 01 2018 19:31:36 GMT+0530 (India Standard Time)'\ntitle: 'Getting Started with React Hooks'\ntags: ['React','Hooks']\ncategory: 'React'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://scotch.io/tutorials/getting-started-with-react-hooks'\ntype: 'Post'\n---\n    ","htmlCode":"<p><a href=\"https://reactjs.org/docs/hooks-intro.html\">React Hooks</a>&nbsp;are a great new feature coming in React 16.7.&nbsp;<a href=\"https://scotch.io/bar-talk/whats-new-in-react-166\">React 16.6</a>&nbsp;brought some awesome new things like&nbsp;<a href=\"https://scotch.io/tutorials/react-166-reactmemo-for-functional-components-rendering-control\">React.memo()</a>&nbsp;and React.lazy and Suspense. The React team isn't stopping there.</p><p>Hooks are a feature that you'll end up using every single day of your React development. You can give them a try&nbsp;<span>in React 16.7.0-alpha right now</span>&nbsp;and are being discussed in&nbsp;<a href=\"https://github.com/reactjs/rfcs/pull/68\">an open RFC</a>. Hooks are great because we get more tools as React developers.</p><p>If you want to use&nbsp;<span>state or lifecycle methods</span>&nbsp;you would normally have to change to using&nbsp;<code>React.Component</code>&nbsp;and classes. Hooks let us use these features&nbsp;<span>in functional components</span>!</p><div><ul><li><a href=\"https://scotch.io/tutorials/getting-started-with-react-hooks#toc-what-are-hooks-\">What are Hooks?</a></li><li><a href=\"https://scotch.io/tutorials/getting-started-with-react-hooks#toc-react-s-state-hook\">React's State Hook</a></li><li><a href=\"https://scotch.io/tutorials/getting-started-with-react-hooks#toc-what-is-this-usestate-syntax-\">What is this useState() syntax?</a></li><li><a href=\"https://scotch.io/tutorials/getting-started-with-react-hooks#toc-what-does-usestate-give-us-\">What does useState() give us?</a></li><li><a href=\"https://scotch.io/tutorials/getting-started-with-react-hooks#toc-what-s-wrong-with-classes-\">What's wrong with classes?</a></li><li><a href=\"https://scotch.io/tutorials/getting-started-with-react-hooks#toc-using-multiple-state-hooks\">Using Multiple State Hooks</a></li><li><a href=\"https://scotch.io/tutorials/getting-started-with-react-hooks#toc-react-s-effect-hook\">React's Effect Hook</a></li><li><a href=\"https://scotch.io/tutorials/getting-started-with-react-hooks#toc-running-an-effect-hook-only-when-something-changes\">Running an Effect Hook only when something changes</a></li><li><a href=\"https://scotch.io/tutorials/getting-started-with-react-hooks#toc-what-about-componentwillunmount-\">What about componentWillUnmount()</a></li><li><a href=\"https://scotch.io/tutorials/getting-started-with-react-hooks#toc-using-state-and-effects-together\">Using State and Effects Together</a></li><li><a href=\"https://scotch.io/tutorials/getting-started-with-react-hooks#toc-conclusion\">Conclusion</a></li></ul></div><h2><a href=\"https://scotch.io/tutorials/getting-started-with-react-hooks#toc-what-are-hooks-\">What are Hooks?</a></h2><p><a href=\"https://reactjs.org/docs/hooks-overview.html\">React Hooks</a>&nbsp;are a way to add&nbsp;<code>React.Component</code>&nbsp;features to&nbsp;<span>functional components</span>. Features like:</p><div><div></div></div><ul><li>State</li><li>Lifecycle</li></ul><blockquote><p>Hooks let you use React's features without classes.</p></blockquote><p>Don't worry though,&nbsp;<span>classes aren't being removed or discouraged</span>. We're being given more ways to code!</p><h2><a href=\"https://scotch.io/tutorials/getting-started-with-react-hooks#toc-react-s-state-hook\">React's State Hook</a></h2><p>Let's say we have a component like this:</p><h4>State in Components</h4><pre data-title=\"javascript\"><code><span>import</span> React<span>,</span> <span>{</span> Component <span>}</span> <span>from</span> <span>'react'</span><span>;</span>\n\n<span>class</span> <span>JustAnotherCounter</span> <span>extends</span> <span>Component</span> <span>{</span>\n  state <span>=</span> <span>{</span>\n    count<span>:</span> <span>0</span>\n  <span>}</span><span>;</span>\n\n  <span>setCount</span> <span>=</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>this</span><span>.</span><span>setState</span><span>(</span><span>{</span> count<span>:</span> <span>this</span><span>.</span>state<span>.</span>count <span>+</span> <span>1</span> <span>}</span><span>)</span><span>;</span>\n  <span>}</span><span>;</span>\n\n  <span>render</span><span>(</span><span>)</span> <span>{</span>\n    <span>return</span> <span>(</span>\n      <span>&lt;</span>div<span>&gt;</span>\n        <span>&lt;</span>h1<span>&gt;</span><span>{</span><span>this</span><span>.</span>state<span>.</span>count<span>}</span><span>&lt;</span><span>/</span>h1<span>&gt;</span>\n\n        <span>&lt;</span>button onClick<span>=</span><span>{</span><span>this</span><span>.</span>setCount<span>}</span><span>&gt;</span>Count Up To The Moon<span>&lt;</span><span>/</span>button<span>&gt;</span>\n      <span>&lt;</span><span>/</span>div<span>&gt;</span>\n    <span>)</span><span>;</span>\n  <span>}</span>\n<span>}</span></code></pre><p>With React Hooks, we are a able to condense that class into this functional component:</p><h4>State with Functional Components and useState</h4><pre data-title=\"javascript\"><code><span>import</span> React<span>,</span> <span>{</span> useState <span>}</span> <span>from</span> <span>'react'</span><span>;</span>\n\n<span>function</span> <span>JustAnotherCounter</span><span>(</span><span>)</span> <span>{</span>\n  <span>const</span> <span>[</span>count<span>,</span> setCount<span>]</span> <span>=</span> <span>useState</span><span>(</span><span>0</span><span>)</span><span>;</span>\n\n  <span>return</span> <span>(</span>\n    <span>&lt;</span>div<span>&gt;</span>\n      <span>&lt;</span>h1<span>&gt;</span><span>{</span>count<span>}</span><span>&lt;</span><span>/</span>h1<span>&gt;</span>\n      <span>&lt;</span>button onClick<span>=</span><span>{</span><span>(</span><span>)</span> <span>=&gt;</span> <span>setCount</span><span>(</span>count <span>+</span> <span>1</span><span>)</span><span>}</span><span>&gt;</span>Count Up To The Moon<span>&lt;</span><span>/</span>button<span>&gt;</span>\n    <span>&lt;</span><span>/</span>div<span>&gt;</span>\n  <span>)</span><span>;</span>\n<span>}</span></code></pre><p>Here's a CodeSandbox for the above example:</p><p></p><div><iframe src=\"https://codesandbox.io/embed/6vmryp2k9z?runonclick=1&amp;codemirror=1\" allowfullscreen=\"\"></iframe></div><p></p><p>Notice how much easier the functional component would be for beginners just learning React.</p><h2><a href=\"https://scotch.io/tutorials/getting-started-with-react-hooks#toc-what-is-this-usestate-syntax-\">What is this useState() syntax?</a></h2><p>You may be unfamiliar with the line with the&nbsp;<code>useState()</code>&nbsp;syntax. This uses&nbsp;<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment\">destructuring assignment</a>&nbsp;for arrays. This is similar to how we would pull props out an object with&nbsp;<code>object destructuring</code>.</p><p>Let's compare object destructuring vs array destructuring to see why the array way is helpful.&nbsp;<span>Object destructuring requires more writing to grab a variable and rename it.</span></p><h4>Object Destructuring</h4><pre data-title=\"javascript\"><code><span>// object destructuring. lots of writing!</span>\n<span>const</span> users <span>=</span> <span>{</span> admin<span>:</span> <span>'chris'</span><span>,</span> user<span>:</span> <span>'nick'</span> <span>}</span><span>;</span>\n\n<span>// grab the admin and user but rename them to SuperAdmin and SuperUser</span>\n<span>const</span> <span>{</span> admin<span>:</span> SuperAdmin<span>,</span> user<span>:</span> SuperUser <span>}</span> <span>=</span> users<span>;</span></code></pre><p>That bottom line can be a bit difficult to read. With array destructuring we just name variables as we get them out of the array.&nbsp;<span>First variable is the first item in the array.</span></p><h4>Array Destructuring</h4><pre data-title=\"javascript\"><code><span>// array destructuring</span>\n<span>const</span> users <span>=</span> <span>[</span><span>'chris'</span><span>,</span> <span>'nick'</span><span>]</span><span>;</span>\n\n<span>// grab in order and rename at the same time</span>\n<span>const</span> <span>[</span>SuperAdmin<span>,</span> SuperUser<span>]</span> <span>=</span> users<span>;</span></code></pre><h2><a href=\"https://scotch.io/tutorials/getting-started-with-react-hooks#toc-what-does-usestate-give-us-\">What does useState() give us?</a></h2><p><code>useState</code>&nbsp;gives us two variables and we can name our two variables whatever we want. Just know that:</p><div><div></div></div><ol><li>The first variable is the&nbsp;<span>value</span>. Similar to&nbsp;<code>this.state</code></li><li>The second variable is a&nbsp;<span>function to update</span>&nbsp;that value. Similar to&nbsp;<code>this.setState</code></li></ol><p>The final part to useState is the argument that we pass to it.&nbsp;<span>The useState argument is the initial state value.</span>&nbsp;In the case of our counter, we started at 0.</p><h2><a href=\"https://scotch.io/tutorials/getting-started-with-react-hooks#toc-what-s-wrong-with-classes-\">What's wrong with classes?</a></h2><p>The React Hooks intro gives a good section on this:&nbsp;<a href=\"https://reactjs.org/docs/hooks-intro.html#classes-confuse-both-people-and-machines\">Classes confuse both people and machines</a>. The gist is classes can sometimes be confusing and can be written any number of ways. Dive into somebody else's project and you could be in for a world of different syntax and style choices.</p><blockquote><p>There are no plans to remove classes support. We just have another way to code</p></blockquote><p>By allowing classes to be converted into smaller functional components, we can even further break out parts of our application into&nbsp;<span>smaller and more focused components</span>.</p><h2><a href=\"https://scotch.io/tutorials/getting-started-with-react-hooks#toc-using-multiple-state-hooks\">Using Multiple State Hooks</a></h2><p>We can even use&nbsp;<code>useState()</code>&nbsp;multiple times in the same function.</p><pre data-title=\"javascript\"><code><span>import</span> React<span>,</span> <span>{</span> useState <span>}</span> <span>from</span> <span>'react'</span><span>;</span>\n\n<span>function</span> <span>AllTheThings</span><span>(</span><span>)</span> <span>{</span>\n  <span>const</span> <span>[</span>count<span>,</span> setCount<span>]</span> <span>=</span> <span>useState</span><span>(</span><span>0</span><span>)</span><span>;</span>\n  <span>const</span> <span>[</span>products<span>,</span> setProducts<span>]</span> <span>=</span> <span>useState</span><span>(</span><span>[</span><span>{</span> name<span>:</span> <span>'Surfboard'</span><span>,</span> price<span>:</span> <span>100</span> <span>}</span><span>]</span><span>)</span><span>;</span>\n  <span>const</span> <span>[</span>coupon<span>,</span> setCoupon<span>]</span> <span>=</span> <span>useState</span><span>(</span><span>null</span><span>)</span><span>;</span>\n\n  <span>return</span> <span>&lt;</span>div<span>&gt;</span><span>{</span><span>/_ use all those things here _/</span><span>}</span><span>&lt;</span><span>/</span>div<span>&gt;</span><span>;</span>\n<span>}</span></code></pre><h2><a href=\"https://scotch.io/tutorials/getting-started-with-react-hooks#toc-react-s-effect-hook\">React's Effect Hook</a></h2><p>The State Hook allows us to use&nbsp;<code>state</code>&nbsp;in React functional components. This gets us a step closer to using functional components over class components. The next part of moving to functional components is lifecycle methods.</p><blockquote><p>Effects are similar to componentDidMount, componentDidUpdate, and componentWillUnmount</p></blockquote><p>This is what the Effect Hook is for. Side-effects are things you want your application to make like:</p><ul><li>Fetching data</li><li>Manually changing the DOM (document title)</li><li>Setting up a subscription</li></ul><blockquote><p>Effects will run after every render, including the first render.</p></blockquote><p>Let's compare a class to a functional component:</p><pre data-title=\"javascript\"><code><span>import</span> React<span>,</span> <span>{</span> Component <span>}</span> <span>from</span> <span>'react'</span><span>;</span>\n\n<span>class</span> <span>DoSomethingCrazy</span> <span>extends</span> <span>Component</span> <span>{</span>\n  <span>componentDidMount</span><span>(</span><span>)</span> <span>{</span>\n    console<span>.</span><span>log</span><span>(</span><span>'i have arrived at the party!'</span><span>)</span><span>;</span>\n    document<span>.</span>title <span>=</span> <span>'preesent'</span><span>;</span>\n  <span>}</span>\n\n  <span>render</span><span>(</span><span>)</span> <span>{</span>\n    <span>return</span> <span>&lt;</span>div<span>&gt;</span>stuff goes here<span>&lt;</span><span>/</span>div<span>&gt;</span><span>;</span>\n  <span>}</span>\n<span>}</span></code></pre><p>When using the the Effect Hook, we use&nbsp;<code>useEffect()</code>:</p><pre data-title=\"javascript\"><code><span>function</span> <span>DoSomethingCrazy</span><span>(</span><span>)</span> <span>{</span>\n  <span>useEffect</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n    console<span>.</span><span>log</span><span>(</span><span>'i have arrived at the party!'</span><span>)</span><span>;</span>\n    document<span>.</span>title <span>=</span> <span>'preesent'</span><span>;</span>\n  <span>}</span><span>)</span><span>;</span>\n\n  <span>return</span> <span>&lt;</span>div<span>&gt;</span>stuff goes here<span>&lt;</span><span>/</span>div<span>&gt;</span><span>;</span>\n<span>}</span></code></pre><p>And the CodeSandbox for this example:</p><p></p><div><iframe src=\"https://codesandbox.io/embed/43mv317k7x?runonclick=1&amp;codemirror=1\" allowfullscreen=\"\"></iframe></div><p></p><p><code>useEffect()</code>&nbsp;is... effectively 😏... similar to&nbsp;<code>componentDidMount</code>&nbsp;and&nbsp;<code>componentDidUpdate</code></p><h2><a href=\"https://scotch.io/tutorials/getting-started-with-react-hooks#toc-running-an-effect-hook-only-when-something-changes\">Running an Effect Hook only when something changes</a></h2><p>Since&nbsp;<code>useEffect()</code>&nbsp;runs every time a component renders, how do we get it to only run once, on mount? The Effect Hook can&nbsp;<span>take a second argument</span>, an array. It will look through the array and&nbsp;<span>only run the effect if one of those values has changed</span>.</p><h4>componentDidMount: Runs once</h4><pre data-title=\"javascript\"><code><span>// only run on mount. pass an empty array</span>\n<span>useEffect</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n  <span>// only runs once</span>\n<span>}</span><span>,</span> <span>[</span><span>]</span><span>)</span><span>;</span></code></pre><h4>componentDidUpdate: Runs on changes</h4><pre data-title=\"javascript\"><code><span>// only run if count changes</span>\n<span>useEffect</span><span>(</span>\n  <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>// run here if count changes</span>\n  <span>}</span><span>,</span>\n  <span>[</span>count<span>]</span>\n<span>)</span><span>;</span></code></pre><h2><a href=\"https://scotch.io/tutorials/getting-started-with-react-hooks#toc-what-about-componentwillunmount-\">What about componentWillUnmount()</a></h2><p>To run something before a component unmounts, we just have to&nbsp;<span>return a function</span>&nbsp;from&nbsp;<code>useEffect()</code></p><pre data-title=\"javascript\"><code><span>useEffect</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n  UsersAPI<span>.</span><span>subscribeToUserLikes</span><span>(</span><span>)</span><span>;</span>\n\n  <span>// unsubscribe</span>\n  <span>return</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n    UsersAPI<span>.</span><span>unsubscribeFromUserLikes</span><span>(</span><span>)</span><span>;</span>\n  <span>}</span><span>;</span>\n<span>}</span><span>)</span><span>;</span></code></pre><h2><a href=\"https://scotch.io/tutorials/getting-started-with-react-hooks#toc-using-state-and-effects-together\">Using State and Effects Together</a></h2><p>There's no problem using them together! Together they can create functional components that work the same as your class components!</p><p>Here's a more real-world example of a component that fetches a list of users from&nbsp;<a href=\"https://developer.github.com/v3/users/\">GitHub API</a>&nbsp;with&nbsp;<code>useEffect()</code>&nbsp;and keeps them using&nbsp;<code>useState()</code>. We'll start by using&nbsp;<code>useState()</code>&nbsp;for users:</p><h4>Using State</h4><pre data-title=\"javascript\"><code><span>import</span> React<span>,</span> <span>{</span> useState <span>}</span> <span>from</span> <span>'react'</span><span>;</span>\n\n<span>function</span> <span>GitHubUsers</span><span>(</span><span>)</span> <span>{</span>\n  <span>const</span> <span>[</span>users<span>,</span> setUsers<span>]</span> <span>=</span> <span>useState</span><span>(</span><span>[</span><span>]</span><span>)</span><span>;</span>\n<span>}</span></code></pre><p>We are setting users as an empty array to start in&nbsp;<code>useState([])</code>. Next, we will bring in the&nbsp;<code>useEffect()</code>&nbsp;hook and use&nbsp;<a href=\"https://scotch.io/tutorials/how-to-use-the-javascript-fetch-api-to-get-data\">fetch</a>&nbsp;to grab data from the GitHub API:</p><h4>Using Effect</h4><pre data-title=\"javascript\"><code><span>import</span> React<span>,</span> <span>{</span> useState <span>}</span> <span>from</span> <span>'react'</span><span>;</span>\n\n<span>function</span> <span>GitHubUsers</span><span>(</span><span>)</span> <span>{</span>\n  <span>const</span> <span>[</span>users<span>,</span> setUsers<span>]</span> <span>=</span> <span>useState</span><span>(</span><span>[</span><span>]</span><span>)</span><span>;</span>\n\n  <span>useEffect</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>fetch</span><span>(</span><span>'https://api.github.com/users'</span><span>)</span>\n      <span>.</span><span>then</span><span>(</span>response <span>=&gt;</span> response<span>.</span><span>json</span><span>(</span><span>)</span><span>)</span>\n      <span>.</span><span>then</span><span>(</span>data <span>=&gt;</span> <span>{</span>\n        <span>setUsers</span><span>(</span>data<span>)</span><span>;</span> <span>// set users in state</span>\n      <span>}</span><span>)</span><span>;</span>\n  <span>}</span><span>,</span> <span>[</span><span>]</span><span>)</span><span>;</span> <span>// empty array because we only run once</span>\n<span>}</span></code></pre><p>Notice we are setting the second argument for&nbsp;<code>useEffect</code>&nbsp;as an empty array so&nbsp;<span>it only runs once</span>. Finally, we will show the list!</p><h4>Displaying Users</h4><pre data-title=\"javascript\"><code><span>import</span> React<span>,</span> <span>{</span> useState<span>,</span> useEffect <span>}</span> <span>from</span> <span>'react'</span><span>;</span>\n<span>import</span> ReactDOM <span>from</span> <span>'react-dom'</span><span>;</span>\n\n<span>function</span> <span>GitHubUsers</span><span>(</span><span>)</span> <span>{</span>\n  <span>// ...other stuff here...</span>\n\n  <span>return</span> <span>(</span>\n    <span>&lt;</span>div className<span>=</span><span>\"section\"</span><span>&gt;</span>\n      <span>{</span>users<span>.</span><span>map</span><span>(</span>user <span>=&gt;</span> <span>(</span>\n        <span>&lt;</span>div key<span>=</span><span>{</span>user<span>.</span>id<span>}</span> className<span>=</span><span>\"card\"</span><span>&gt;</span>\n          <span>&lt;</span>h5<span>&gt;</span><span>{</span>user<span>.</span>login<span>}</span><span>&lt;</span><span>/</span>h5<span>&gt;</span>\n        <span>&lt;</span><span>/</span>div<span>&gt;</span>\n      <span>)</span><span>)</span><span>}</span>\n    <span>&lt;</span><span>/</span>div<span>&gt;</span>\n  <span>)</span><span>;</span>\n<span>}</span></code></pre><p>Not the prettiest but it gets the job done! I've also added&nbsp;<a href=\"https://scotch.io/bar-talk/get-to-know-bulma-my-current-favorite-css-framework\">Bulma</a>&nbsp;so it's somewhat better looking than default. That's what the&nbsp;<code>section</code>&nbsp;and&nbsp;<code>card</code>&nbsp;classes are for:<img alt=\"\" data-src=\"https://scotch-res.cloudinary.com/image/upload/w_auto,q_auto:good,f_auto/v1540658246/giir8zbb1rco8pyzndfb.png\" src=\"https://scotch-res.cloudinary.com/image/upload/w_auto,q_auto:good,f_auto/v1540658246/giir8zbb1rco8pyzndfb.png\" data-was-processed=\"true\"></p><p>Here's the CodeSandbox:</p><p></p><div><iframe src=\"https://codesandbox.io/embed/yq5qowzrvz?runonclick=1&amp;codemirror=1\" allowfullscreen=\"\"></iframe></div><p></p><h2><a href=\"https://scotch.io/tutorials/getting-started-with-react-hooks#toc-conclusion\">Conclusion</a></h2><p>React State and Effect Hooks are wonderful additions to the library and will be tools to make it easier to learn React for new developers. A lot of Vue's success is in its simplicity in creating components. It's just an object.</p><p>Now with React, you don't have to differentiate between \"is it a class?\" or \"should I use a functional component?\"</p>","filePath":"pages/React/.md","_id":"f0fgjHxI6nHUWUEe"}
{"title":"Javascript shorthand for cleaner code","sourceUrl":"http://www.punkchip.com/javascript-shorthand/","path":"JavaScript/JavaScript/JavaScript/JavaScript/","category":"JavaScript","tags":["JavaScript"," ES6"],"author":"","excerpt":"","dateCreated":1540823022753,"coverImage":"","type":"Post","frontmatter":"---\npath: 'JavaScript/'\ndate: 'undefined'\ntitle: 'Javascript shorthand for cleaner code'\ntags: ['JavaScript','ES6']\ncategory: 'JavaScript'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'http://www.punkchip.com/javascript-shorthand/'\ntype: 'Post'\n---\n    ","htmlCode":"<div><div><p>A few ways to save on some bytes in your Javascript code, as well as making it more readable and quicker to write:<span></span></p><h3>Variable increment/decrement/multiply/divide</h3><p>When you want to increase or decrease a number variable by one; instead of this:</p><pre><code>growCount = growCount + 1;\nshrinkCount = shrinkCount - 1;</code></pre><p>You can simply do the following:</p><pre><code>growCount ++;\nshrinkCount --;</code></pre><p>Or to add/subtract/multiply/divide a number to/from/by itself you can do:</p><pre><code>growCout += 100;\nshrinkCount -= 2;\n\nmoreSweets *= 5; // multiply moreSweets by 5\nlessApple /= 2; // divide lessApple by 2\n</code></pre><h3>Ternary operator (conditional)</h3><p>This is a great code saver for when you want to do something if the test is true, else do something else:</p><pre><code>if(myAge &gt; legalAge) {\n    canDrink = true;\n}\nelse {\n    canDrink = false;\n}</code></pre><p>Instead, put the condition before the question mark then the if true statement and false statement after that separated by a colon:</p><pre><code>var canDrink = (myAge &gt; legalAge) ? true : false;</code></pre><div><time>29-05-2010&nbsp;</time>As pointed out in the comments, the above example can be further simplified to&nbsp;<code>var canDrink = myAge &gt; legalAge</code>&nbsp;because it’s returning a boolean.</div><h3>Associative array notation</h3><p>The old school way of setting up an array was to create a named array and then add each named element one by one:</p><pre><code>var skillSet = new Array();\nskillSet['Document language'] = 'HTML5';\nskillSet['Styling language'] = 'CSS3';\nskillSet['Javascript library'] = 'jQuery';\nskillSet['Other'] = 'Usability and accessibility';\n</code></pre><p>A quicker and more readable way is to add the elements at the same time using the object literal notation to become:</p><pre><code>var skillSet = {\n    'Document language' : 'HTML5', \n    'Styling language' : 'CSS3', \n    'Javascript library' : 'jQuery', \n    'Other' : 'Usability and accessibility'\n};</code></pre><p>Don’t forget to omit the final comma otherwise certain browsers will complain.</p><h3>Default assignments</h3><p>The following is useful if you are testing if a variable has previously been set and if not to try something else:</p><pre><code>function displayValues(limit) {\n    var length;\n    if(limit) {\n        length = limit;\n    } else {\n        length = 10;\n    }\n    for(var i = 0; i++; i &lt; = length) {\n        ...\n}</code></pre><p>A shorter way is to use the double pipe. If&nbsp;<code>limit</code>&nbsp;has not been passed to the function then&nbsp;<code>length</code>&nbsp;will be set to the default of 10:</p><pre><code>function displayValues(limit) {\n    var length = limit || 10;\n    for(var i = 0; i &lt; = length; i++) {\n        ...\n}</code></pre><div><time>02-07-2010&nbsp;</time>The variable&nbsp;<code>length</code>&nbsp;will be set to the value of the left operand if it evaluates to true, therefore anything other than the following:<p></p><ul><li>false</li><li>0</li><li>null</li><li>undefined</li><li>empty string</li></ul><p>Otherwise it will be set to the value of the right operand. So this isn’t the right thing to use if you need to explicitly set the length to zero.</p></div></div></div>","filePath":"pages/JavaScript/.md","_id":"fTS4ML697g1E3nkO","date":{"$$date":1541515191445},"dateUpdated":1541515191445}
{"date":"2018-11-06T14:58:32.186Z","title":"A Better package.json for the Frontend","sourceUrl":"https://nystudio107.com/blog/a-better-package-json-for-the-frontend","path":"NPM/","category":"NPM","tags":["Node.js"," NPM"],"author":"Andrew Welch","excerpt":"Fron­tend work­flow tools like gulp are almost manda­to­ry for web­dev these days; here’s what I con­sid­er to be a bet­ter package.json setup","dateCreated":1541516206247,"coverImage":"","type":"Post","frontmatter":"---\npath: 'NPM/'\ndate: 'Tue Nov 06 2018 20:28:32 GMT+0530 (India Standard Time)'\ntitle: 'A Better package.json for the Frontend'\ntags: ['Node.js','NPM']\ncategory: 'NPM'\ncategoryColor: '#F3C610'\nexcerpt: 'Fron­tend work­flow tools like gulp are almost manda­to­ry for web­dev these days; here’s what I con­sid­er to be a bet­ter package.json setup'\ncoverImage: ''\nsourceUrl: 'https://nystudio107.com/blog/a-better-package-json-for-the-frontend'\ntype: 'Post'\n---\n    ","htmlCode":"<div><div><p>If you’re doing web­dev, odds are good you’re using a&nbsp;work­flow tool like&nbsp;<a href=\"http://gulpjs.com/\" target=\"_blank\" rel=\"noreferrer noopener\">Gulp</a>&nbsp;to auto­mate your build process. Whether you’re using&nbsp;<a href=\"http://gulpjs.com/\" target=\"_blank\" rel=\"noreferrer noopener\">Gulp</a>,&nbsp;<a href=\"http://gruntjs.com/\" target=\"_blank\" rel=\"noreferrer noopener\">Grunt</a>,&nbsp;<a href=\"https://webpack.github.io/\" target=\"_blank\" rel=\"noreferrer noopener\">web­pack</a>, or&nbsp;<a href=\"https://medium.freecodecamp.com/why-i-left-gulp-and-grunt-for-npm-scripts-3d6853dd22b8#.o46xqh4pe\" target=\"_blank\" rel=\"noreferrer noopener\">npm scripts</a>,&nbsp;it doesn’t real­ly mat­ter. Use what­ev­er tool works for&nbsp;you.</p></div></div><div><div><blockquote>If you’re not using a workflow automation tool yet, you should be. It’s worth investing the upfront time to get it working, for the time it’ll save you on every project going forward.</blockquote></div></div><div><div><p>I’m cur­rent­ly using Gulp on most projects, so that’s what I’ll be pre­sent­ing here, but the method­olo­gies described&nbsp;work for any of the fron­tend work­flow tools. Check out the&nbsp;<a href=\"https://nystudio107.com/blog/a-gulp-workflow-for-frontend-development-automation\">A&nbsp;Gulp Work­flow for Fron­tend Devel­op­ment Automa­tion</a>&nbsp;arti­cle for more on Gulp, and how it can use the&nbsp;<kbd>package.json</kbd>described in this article.</p><p>The&nbsp;<kbd>package.json</kbd>&nbsp;file&nbsp;is&nbsp;the pack­ag­ing for­mat for&nbsp;<a href=\"https://nodejs.org/\" target=\"_blank\" rel=\"noreferrer noopener\">node.js</a>&nbsp;appli­ca­tions, and Gulp is a&nbsp;node.js appli­ca­tion. But we can also lever­age the&nbsp;<kbd>package.json</kbd>&nbsp;file to encom­pass our entire website.</p><p>In the past, peo­ple were using&nbsp;<a href=\"https://bower.io/\" target=\"_blank\" rel=\"noreferrer noopener\">Bow­er</a>&nbsp;as a&nbsp;fron­tend pack­age man­ag­er for the third par­ty Javscript/​CSS used on their web­sites. The advan­tage of using a&nbsp;pack­age man­ag­er is threefold:</p><ol><li>You&nbsp;have a&nbsp;cen­tral­ized man­i­fest of all of the third par­ty&nbsp;pack­ages&nbsp;your web­site&nbsp;uses</li><li>You can eas­i­ly update to more recent ver­sions of the third par­ty pack­ages your web­site&nbsp;uses</li><li>You are always obtain­ing the pack­ages from their canon­i­cal source</li></ol><p>In the bad old days before Bow­er, peo­ple man­u­al­ly down­loaded their fron­tend pack­ages, which made updat­ing them a&nbsp;pain. So most of the time, it nev­er happened.</p><p>I’ve used Bow­er in the past, but since we’re already using&nbsp;<a href=\"https://www.npmjs.com/\" target=\"_blank\" rel=\"noreferrer noopener\">npm</a>&nbsp;as a&nbsp;pack­age man­ag­er for our node.js pack­ages used by Gulp, why not use it for the fron­tend pack­ages as&nbsp;well?</p></div></div><div><div><blockquote>Using more than one package manager for our website seems silly. I’ve never run into a case where a package is in Bower, but is not in NPM</blockquote></div></div><div><div><p><em>Tan­gent:</em>&nbsp;While I&nbsp;talk about npm through­out the rest of this arti­cle, I’m actu­al­ly using&nbsp;<a href=\"https://yarnpkg.com/\" target=\"_blank\" rel=\"noreferrer noopener\">yarn</a>&nbsp;these days to man­age my npm pack­ages. It uses the exact same&nbsp;<a href=\"https://www.npmjs.com/\" target=\"_blank\" rel=\"noreferrer noopener\">npmjs​.com</a>&nbsp;pack­age reg­istry that npm uses, it just does it bet­ter and faster. And it uses a&nbsp;<kbd>yarn.lock</kbd>&nbsp;file to ensure that the pack­age installs are deter­min­is­tic.&nbsp;I&nbsp;urge you to check&nbsp;it!</p><p>Instead of hav­ing to do&nbsp;<kbd>npm install</kbd>&nbsp;and&nbsp;<kbd>bower install</kbd>&nbsp;to get our project boot­strapped, and then remem­ber­ing to do both&nbsp;<kbd>npm update</kbd>&nbsp;and&nbsp;<kbd>bower update</kbd>&nbsp;to update our pack­ages, we just do&nbsp;<kbd>npm install</kbd>or&nbsp;<kbd>npm update</kbd>. Or if we’re using yarn, we can just do&nbsp;<kbd>yarn</kbd>!&nbsp;Great!</p><p>If you’re not famil­iar with the&nbsp;<kbd>package.json</kbd>&nbsp;for­mat, check out this&nbsp;<a href=\"http://browsenpm.org/package.json\" target=\"_blank\" rel=\"noreferrer noopener\">package.json Inter­ac­tive Guide</a>. While there are many keys in the&nbsp;<kbd>package.json</kbd>&nbsp;that have spe­cial mean­ing, it’s instruc­tive to keep in mind that it’s just&nbsp;<span>JSON</span>. We can add what­ev­er we want to it. So we will! More on that&nbsp;later.</p></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/a-better-package-json-for-the-frontend#package-all-the-things\"><i></i><span>LINK</span></a></span>PACKAGE ALL THE THINGS!</h3><p>For our web­sites, we’ll use the&nbsp;<kbd>devDependencies</kbd>&nbsp;key&nbsp;in our&nbsp;<kbd>package.json</kbd>&nbsp;for node.js pack­ages that Gulp uses&nbsp;via our&nbsp;<kbd>gulpfile.js</kbd>&nbsp;for automat­ing our fron­tend work­flow. Here are the&nbsp;<kbd>devDependencies</kbd>for this very web­site you’re read­ing&nbsp;now:</p></div></div><div><div><section><div><pre><code><span>\"devDependencies\"</span><span>:</span> <span>{</span>\n        <span>\"babel-plugin-transform-runtime\"</span><span>:</span> <span>\"^6.15.0\"</span><span>,</span>\n        <span>\"babel-preset-es2015\"</span><span>:</span> <span>\"^6.16.0\"</span><span>,</span>\n        <span>\"chalk\"</span><span>:</span> <span>\"^1.1.3\"</span><span>,</span>\n        <span>\"critical\"</span><span>:</span> <span>\"^1.1.0\"</span><span>,</span>\n        <span>\"fancy-log\"</span><span>:</span> <span>\"^1.2.0\"</span><span>,</span>\n        <span>\"git-rev-sync\"</span><span>:</span> <span>\"^1.7.1\"</span><span>,</span>\n        <span>\"gulp\"</span><span>:</span> <span>\"^3.9.0\"</span><span>,</span>\n        <span>\"gulp-autoprefixer\"</span><span>:</span> <span>\"^3.1.0\"</span><span>,</span>\n        <span>\"gulp-babel\"</span><span>:</span> <span>\"^6.1.2\"</span><span>,</span>\n        <span>\"gulp-cached\"</span><span>:</span> <span>\"^1.1.1\"</span><span>,</span>\n        <span>\"gulp-concat\"</span><span>:</span> <span>\"^2.6.0\"</span><span>,</span>\n        <span>\"gulp-cssnano\"</span><span>:</span> <span>\"^2.1.2\"</span><span>,</span>\n        <span>\"gulp-debug\"</span><span>:</span> <span>\"^2.1.2\"</span><span>,</span>\n        <span>\"gulp-download\"</span><span>:</span> <span>\"^0.0.1\"</span><span>,</span>\n        <span>\"gulp-favicons\"</span><span>:</span> <span>\"^2.2.6\"</span><span>,</span>\n        <span>\"gulp-filter\"</span><span>:</span> <span>\"^5.0.1\"</span><span>,</span>\n        <span>\"gulp-fontello\"</span><span>:</span> <span>\"^0.4.6\"</span><span>,</span>\n        <span>\"gulp-header\"</span><span>:</span> <span>\"^1.8.7\"</span><span>,</span>\n        <span>\"gulp-if\"</span><span>:</span> <span>\"^2.0.1\"</span><span>,</span>\n        <span>\"gulp-imagemin\"</span><span>:</span> <span>\"^3.1.1\"</span><span>,</span>\n        <span>\"gulp-livereload\"</span><span>:</span> <span>\"^3.8.1\"</span><span>,</span>\n        <span>\"gulp-load-plugins\"</span><span>:</span> <span>\"^1.3.0\"</span><span>,</span>\n        <span>\"gulp-newer\"</span><span>:</span> <span>\"^1.2.0\"</span><span>,</span>\n        <span>\"gulp-plumber\"</span><span>:</span> <span>\"^1.1.0\"</span><span>,</span>\n        <span>\"gulp-print\"</span><span>:</span> <span>\"^2.0.1\"</span><span>,</span>\n        <span>\"gulp-rename\"</span><span>:</span> <span>\"^1.2.2\"</span><span>,</span>\n        <span>\"gulp-replace\"</span><span>:</span> <span>\"0.5.4\"</span><span>,</span>\n        <span>\"gulp-rev\"</span><span>:</span> <span>\"^7.1.0\"</span><span>,</span>\n        <span>\"gulp-sass\"</span><span>:</span> <span>\"^2.1.0\"</span><span>,</span>\n        <span>\"gulp-size\"</span><span>:</span> <span>\"^2.1.0\"</span><span>,</span>\n        <span>\"gulp-sourcemaps\"</span><span>:</span> <span>\"^2.2.1\"</span><span>,</span>\n        <span>\"gulp-streamify\"</span><span>:</span> <span>\"1.0.2\"</span><span>,</span>\n        <span>\"gulp-uglify\"</span><span>:</span> <span>\"^1.5.4\"</span><span>,</span>\n        <span>\"moment\"</span><span>:</span> <span>\"^2.14.1\"</span><span>,</span>\n        <span>\"pa11y\"</span><span>:</span> <span>\"^4.11.0\"</span><span>,</span>\n        <span>\"vinyl-source-stream\"</span><span>:</span> <span>\"^1.1.0\"</span><span>,</span>\n        <span>\"vueify\"</span><span>:</span> <span>\"^8.7.0\"</span>\n    <span>}</span><span>,</span></code></pre><aside><h5><i></i>&nbsp;devDependencies</h5></aside></div></section></div></div><div><div><p>It’s not impor­tant that you know what all of these things are; rather just that you see they are all node.js pack­ages that we use for automat­ing our fron­tend workflow.</p><p>Since we con­sid­er the web­site we’re build­ing&nbsp;<span></span>​<span>“</span>the app”, we’ll use the&nbsp;<kbd>dependencies</kbd>&nbsp;key in our&nbsp;<kbd>package.json</kbd>&nbsp;for the fron­tend pack­ages (JavaScript/​CSS) that we use in-brows­er.&nbsp;Here are the&nbsp;<kbd>dependencies</kbd>&nbsp;for this very web­site you’re read­ing&nbsp;now:</p></div></div><div><div><section><div><pre><code><span>\"dependencies\"</span><span>:</span> <span>{</span>\n        <span>\"fg-loadcss\"</span><span>:</span> <span>\"^1.2.0\"</span><span>,</span>\n        <span>\"flexboxgrid\"</span><span>:</span> <span>\"^6.3.1\"</span><span>,</span>\n        <span>\"fontfaceobserver\"</span><span>:</span> <span>\"^2.0.5\"</span><span>,</span>\n        <span>\"lazysizes\"</span><span>:</span> <span>\"^2.0.6\"</span><span>,</span>\n        <span>\"loadjs\"</span><span>:</span> <span>\"^3.3.1\"</span><span>,</span>\n        <span>\"normalize.css\"</span><span>:</span> <span>\"^5.0.0\"</span><span>,</span>\n        <span>\"picturefill\"</span><span>:</span> <span>\"^3.0.2\"</span><span>,</span>\n        <span>\"prismjs\"</span><span>:</span> <span>\"^1.5.1\"</span><span>,</span>\n        <span>\"tiny-cookie\"</span><span>:</span> <span>\"^1.0.1\"</span><span>,</span>\n        <span>\"vue\"</span><span>:</span> <span>\"^2.2.0\"</span><span>,</span>\n        <span>\"vue-resource\"</span><span>:</span> <span>\"^1.0.3\"</span><span>,</span>\n        <span>\"vue2-autocomplete\"</span><span>:</span> <span>\"git://github.com/nystudio107/vue2-autocomplete.git#master\"</span>\n    <span>}</span><span>,</span></code></pre><aside><h5><i></i>&nbsp;dependencies</h5></aside></div></section></div></div><div><div><p>Boom, that’s it! We do an&nbsp;<kbd>npm install</kbd>&nbsp;or&nbsp;<kbd>yarn</kbd>&nbsp;and all of the third par­ty pack­ages we use to make our web­site — both in-brows­er and for our work­flow automa­tion — are installed!&nbsp;</p><p>You can find the pack­ages on&nbsp;<a href=\"https://www.npmjs.com/\" target=\"_blank\" rel=\"noreferrer noopener\">npmjs​.com</a>, and install them as&nbsp;<kbd>dependencies</kbd>&nbsp;via&nbsp;<kbd>npm install -S &lt;package-name&gt;</kbd>, or install them as&nbsp;<kbd>devDependencies</kbd>&nbsp;via&nbsp;<kbd>npm install -D &lt;package-name&gt;</kbd>.</p><p>If you’re using yarn instead of npm (which you should be!), you can find the pack­ages on&nbsp;<a href=\"https://www.npmjs.com/\" target=\"_blank\" rel=\"noreferrer noopener\">npmjs​.com</a>, and install them as&nbsp;<kbd>dependencies</kbd>&nbsp;via&nbsp;<kbd>yarn add &lt;package-name&gt;</kbd>, or install them as&nbsp;<kbd>devDependencies</kbd>&nbsp;via&nbsp;<kbd>yarn add --dev &lt;package-name&gt;</kbd>.</p><p>Or if you pre­fer, you can just edit your&nbsp;<kbd>package.json</kbd>&nbsp;file your­self, and then do&nbsp;<kbd>npm install</kbd>&nbsp;or&nbsp;<kbd>yarn</kbd>.</p><p>If for some crazy rea­son you run into a&nbsp;sit­u­a­tion where an npm pack­age doesn’t exist for some­thing you want to use, or you’re installing some­thing from a&nbsp;pri­vate git repo, you can always just do this in your&nbsp;<kbd>package.json</kbd>:</p></div></div><div><div><section><div><pre><code><span>\"private-package\"</span><span>:</span> <span>\"git+ssh://git@github.com/yourhandle/private-package.git#master\"</span><span>,</span></code></pre></div></section></div></div><div><div><p>One thing that’s fair­ly crit­i­cal to under­stand­ing how to use npm is the pack­age ver­sion, it’s what appears after the pack­age name in our&nbsp;<kbd>package.json</kbd>&nbsp;file. The ver­sion is expressed as a&nbsp;<a href=\"http://semver.org/\" target=\"_blank\" rel=\"noreferrer noopener\">semver</a>&nbsp;which is just a&nbsp;way to express the ver­sion you want installed, and the thresh­old for new­er ver­sion that it can be updat­ed&nbsp;to.</p><p>For instance, we might want all bug fix ver­sions of of a&nbsp;par­tic­u­lar pack­age, but we don’t want any break­ing changes. Using semver, we can rest easy that when we type&nbsp;<kbd>npm update</kbd>&nbsp;or&nbsp;<kbd>yarn</kbd>, we’ll get only the non-break­ing bug fix or patch ver­sions, and our project won’t blow&nbsp;up.</p><p>I typ­i­cal­ly do&nbsp;<kbd>'^1.0.0'</kbd>&nbsp;for the pack­ages I&nbsp;install, which says&nbsp;<span></span>​<span>“</span>I want all updates up to the next major ver­sion”,&nbsp;<kbd>2.0.0</kbd>&nbsp;in this case); a&nbsp;more com­mon pat­tern is to do&nbsp;<kbd>'~1.0.0'</kbd>&nbsp;(which will give you only patch updates, in this case up to&nbsp;<kbd>1.1.0</kbd>).&nbsp;A&nbsp;great way to learn semver is to check out the&nbsp;<a href=\"https://semver.npmjs.com/\" target=\"_blank\" rel=\"noreferrer noopener\">npm semver cal­cu­la­tor</a>&nbsp;and play around with it a&nbsp;bit. It’s real­ly not hard to learn, and it’s time well-spent.</p><p><em>Tan­gent:</em>&nbsp;We should con­sid­er any­thing we’ve got­ten from a&nbsp;pack­age man­ag­er (whether it is Bow­er or npm or what­ev­er) as&nbsp;<em>read-only.</em>&nbsp;Use your&nbsp;<kbd>gulpfile.js</kbd>&nbsp;to copy or trans­form things from these third-par­ty pack­ages into your web­site. Don’t use them direct­ly, or — gasp — mod­i­fy&nbsp;them.</p></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/a-better-package-json-for-the-frontend#cleaning-up-our-gulpfile-js\"><i></i><span>LINK</span></a></span>CLEANING UP OUR GULPFILE.JS</h3></div></div><div><div><p>With all of these npm pack­ages (aka&nbsp;<em>node mod­ules</em>), our gulp­files tend to end up with a&nbsp;ton of cruft at the top, where we can’t even see our code until we scroll down past&nbsp;a&nbsp;few pages of things like&nbsp;this:</p></div></div><div><div><section><div><pre><code><span>var</span> gulp        <span>=</span> <span>require</span><span>(</span><span>'gulp'</span><span>)</span><span>,</span>\n    sass        <span>=</span> <span>require</span><span>(</span><span>'gulp-sass'</span><span>)</span><span>,</span>\n    rename      <span>=</span> <span>require</span><span>(</span><span>'gulp-rename'</span><span>)</span><span>,</span>\n    cssmin      <span>=</span> <span>require</span><span>(</span><span>'gulp-minify-css'</span><span>)</span><span>,</span>\n    concat      <span>=</span> <span>require</span><span>(</span><span>'gulp-concat'</span><span>)</span><span>,</span>\n    uglify      <span>=</span> <span>require</span><span>(</span><span>'gulp-uglify'</span><span>)</span><span>,</span>\n    jshint      <span>=</span> <span>require</span><span>(</span><span>'gulp-jshint'</span><span>)</span><span>,</span>\n    scsslint    <span>=</span> <span>require</span><span>(</span><span>'gulp-scss-lint'</span><span>)</span><span>,</span>\n    cache       <span>=</span> <span>require</span><span>(</span><span>'gulp-cached'</span><span>)</span><span>,</span>\n    prefix      <span>=</span> <span>require</span><span>(</span><span>'gulp-autoprefixer'</span><span>)</span><span>,</span>\n    browserSync <span>=</span> <span>require</span><span>(</span><span>'browser-sync'</span><span>)</span><span>,</span>\n    reload      <span>=</span> browserSync<span>.</span>reload<span>,</span>\n    size        <span>=</span> <span>require</span><span>(</span><span>'gulp-size'</span><span>)</span><span>,</span>\n    imagemin    <span>=</span> <span>require</span><span>(</span><span>'gulp-imagemin'</span><span>)</span><span>,</span>\n    pngquant    <span>=</span> <span>require</span><span>(</span><span>'imagemin-pngquant'</span><span>)</span><span>,</span>\n    plumber     <span>=</span> <span>require</span><span>(</span><span>'gulp-plumber'</span><span>)</span><span>,</span>\n    deploy      <span>=</span> <span>require</span><span>(</span><span>'gulp-gh-pages'</span><span>)</span><span>,</span>\n    notify      <span>=</span> <span>require</span><span>(</span><span>'gulp-notify'</span><span>)</span><span>,</span>\n    changed     <span>=</span> <span>require</span><span>(</span><span>'gulp-changed'</span><span>)</span><span>,</span>\n    favicons    <span>=</span> <span>require</span><span>(</span><span>'gulp-favicons'</span><span>)</span><span>,</span>\n    fontello    <span>=</span> <span>require</span><span>(</span><span>'gulp-fontello'</span><span>)</span><span>,</span>\n    print       <span>=</span> <span>require</span><span>(</span><span>'gulp-print'</span><span>)</span><span>,</span>\n    replace     <span>=</span> <span>require</span><span>(</span><span>'gulp-replace'</span><span>)</span><span>,</span>\n    csslint     <span>=</span> <span>require</span><span>(</span><span>'gulp-csslint'</span><span>)</span><span>,</span>\n    newer       <span>=</span> <span>require</span><span>(</span><span>'gulp-newer'</span><span>)</span><span>,</span>\n    log         <span>=</span> <span>require</span><span>(</span><span>'fancy-log'</span><span>)</span><span>,</span>\n    chalk       <span>=</span> <span>require</span><span>(</span><span>'chalk'</span><span>)</span><span>,</span>\n    jsonminify <span>=</span> <span>require</span><span>(</span><span>'gulp-jsonminify'</span><span>)</span><span>,</span>\n    critical    <span>=</span> <span>require</span><span>(</span><span>'critical'</span><span>)</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;gulpfile.js require()'s</h5></aside></div></section></div></div><div><div><p>This real­ly is fair­ly point­less, we’re already declar­ing what we want in our&nbsp;<kbd>devDependencies</kbd>.</p><p>Instead, let’s clean it up a&nbsp;bit by using the&nbsp;<a href=\"https://www.npmjs.com/package/gulp-load-plugins\" target=\"_blank\" rel=\"noreferrer noopener\">gulp-load-plu­g­ins</a>&nbsp;Gulp plu­g­in. What it does is it’ll load in your node.js mod­ules name­spaced under the&nbsp;<kbd>$</kbd>&nbsp;vari­able (hel­lo, jQuery!). Since we know we’re using every­thing in&nbsp;<kbd>devDependencies</kbd>&nbsp;for our work­flow automa­tion via Gulp, we can change that raft of&nbsp;<kbd>require()</kbd><span></span>​<span>‘</span>s above into&nbsp;just:</p></div></div><div><div><section><div><pre><code><span>// load all plugins in 'devDependencies' into the variable $</span>\n<span>const</span> $ <span>=</span> <span>require</span><span>(</span><span>'gulp-load-plugins'</span><span>)</span><span>(</span><span>{</span>\n        pattern<span>:</span> <span>[</span><span>'*'</span><span>]</span><span>,</span>\n        scope<span>:</span> <span>[</span><span>'devDependencies'</span><span>]</span>\n    <span>}</span><span>)</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;Using gulp-load-plugins</h5></aside></div></section></div></div><div><div><p>Then to use our node.js mod­ules in our&nbsp;<kbd>gulpfile.js</kbd>, we just access them via the&nbsp;<kbd>$</kbd>&nbsp;vari­able (well, real­ly a&nbsp;<kbd>const</kbd>&nbsp;in this case, but what­ev­er) like&nbsp;this:</p></div></div><div><div><section><div><pre><code>$<span>.</span><span>fancyLog</span><span>(</span><span>\"-&gt; Compiling scss\"</span><span>)</span><span>;</span></code></pre></div></section></div></div><div><div><p>Ahhh, so neat and tidy! Now let’s keep on a&nbsp;roll clean­ing things up!</p></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/a-better-package-json-for-the-frontend#separating-your-data-from-your-code\"><i></i><span>LINK</span></a></span>SEPARATING YOUR DATA FROM YOUR CODE</h3><p>A term all of the cool kids are using these days is&nbsp;<kbd>DRY</kbd>. They don’t mean that your code is bor­ing, they mean that you&nbsp;<strong>D</strong>on’t&nbsp;<strong>R</strong>epeat&nbsp;<strong>Y</strong>our­self. Back in the day, when we’d walk&nbsp;<span>2</span>&nbsp;miles uphill in the snow to get to our bus stop, we just called this mod­u­lar­i­ty or reusability.</p><p>What­ev­er you call it, it’s a&nbsp;good thing. Essen­tial­ly, we want to take the bits of code we write, and re-use them as much as pos­si­ble from project to project. As a&nbsp;step towards this when build­ing web­sites, there’s what I&nbsp;do in my&nbsp;<kbd>gulpfile.js</kbd>:</p></div></div><div><div><section><div><pre><code><span>// package vars</span>\n<span>const</span> pkg <span>=</span> <span>require</span><span>(</span><span>'./package.json'</span><span>)</span><span>;</span></code></pre></div></section></div></div><div><div><p>Now we have access to the entire&nbsp;<kbd>package.json</kbd>&nbsp;data struc­ture in our&nbsp;<kbd>gulpfile.js</kbd>.&nbsp;So what we can do is we can sep­a­rate the code in our&nbsp;<kbd>gulpfile.js</kbd>&nbsp;from the data that it oper­ates&nbsp;on.</p><p>Want to start a&nbsp;new project? Great! All you will have to change is your&nbsp;<kbd>package.json</kbd>&nbsp;to reflect what’s dif­fer­ent about this project… since your&nbsp;<kbd>gulpfile.js</kbd>&nbsp;just oper­ates on the data that’s fed into it via the&nbsp;<kbd>package.json</kbd>, this all just works. And you end up with clean­er, more read­able code,&nbsp;too.</p><p>For instance, we change this:</p></div></div><div><div><section><div><pre><code><span>// scss - build the scss to the build folder, including the required paths, and writing out a sourcemap</span>\ngulp<span>.</span><span>task</span><span>(</span><span>'scss'</span><span>,</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n    $<span>.</span><span>fancyLog</span><span>(</span><span>\"-&gt; Compiling scss:\"</span><span>)</span><span>;</span>\n    <span>return</span> gulp<span>.</span><span>src</span><span>(</span><span>\"./src/scss/style.scss\"</span><span>)</span>\n        <span>.</span><span>pipe</span><span>(</span>$<span>.</span><span>plumber</span><span>(</span><span>{</span> errorHandler<span>:</span> onError <span>}</span><span>)</span><span>)</span>\n        <span>.</span><span>pipe</span><span>(</span>$<span>.</span>sourcemaps<span>.</span><span>init</span><span>(</span><span>{</span>loadMaps<span>:</span> <span>true</span><span>}</span><span>)</span><span>)</span>\n        <span>.</span><span>pipe</span><span>(</span>$<span>.</span><span>sass</span><span>(</span><span>{</span>\n                includePaths<span>:</span> <span>\"./src/scss/\"</span>\n            <span>}</span><span>)</span>\n            <span>.</span><span>on</span><span>(</span><span>'error'</span><span>,</span> $<span>.</span>sass<span>.</span>logError<span>)</span><span>)</span>\n        <span>.</span><span>pipe</span><span>(</span>$<span>.</span><span>cached</span><span>(</span><span>'sass_compile'</span><span>)</span><span>)</span>\n        <span>.</span><span>pipe</span><span>(</span>$<span>.</span><span>autoprefixer</span><span>(</span><span>)</span><span>)</span>\n        <span>.</span><span>pipe</span><span>(</span>$<span>.</span>sourcemaps<span>.</span><span>write</span><span>(</span><span>'./'</span><span>)</span><span>)</span>\n        <span>.</span><span>pipe</span><span>(</span>$<span>.</span><span>size</span><span>(</span><span>{</span> gzip<span>:</span> <span>true</span><span>,</span> showFiles<span>:</span> <span>true</span> <span>}</span><span>)</span><span>)</span>\n        <span>.</span><span>pipe</span><span>(</span>gulp<span>.</span><span>dest</span><span>(</span><span>\"./build/css/\"</span><span>)</span><span>)</span><span>;</span>\n<span>}</span><span>)</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;old-skool</h5></aside></div></section></div></div><div><div><p>Into this:</p></div></div><div><div><section><div><pre><code><span>// scss - build the scss to the build folder, including the required paths, and writing out a sourcemap</span>\ngulp<span>.</span><span>task</span><span>(</span><span>'scss'</span><span>,</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n    $<span>.</span><span>fancyLog</span><span>(</span><span>\"-&gt; Compiling scss: \"</span> <span>+</span> pkg<span>.</span>paths<span>.</span>build<span>.</span>css <span>+</span> pkg<span>.</span>vars<span>.</span>scssName<span>)</span><span>;</span>\n    <span>return</span> gulp<span>.</span><span>src</span><span>(</span>pkg<span>.</span>paths<span>.</span>src<span>.</span>scss <span>+</span> pkg<span>.</span>vars<span>.</span>scssName<span>)</span>\n        <span>.</span><span>pipe</span><span>(</span>$<span>.</span><span>plumber</span><span>(</span><span>{</span> errorHandler<span>:</span> onError <span>}</span><span>)</span><span>)</span>\n        <span>.</span><span>pipe</span><span>(</span>$<span>.</span>sourcemaps<span>.</span><span>init</span><span>(</span><span>{</span>loadMaps<span>:</span> <span>true</span><span>}</span><span>)</span><span>)</span>\n        <span>.</span><span>pipe</span><span>(</span>$<span>.</span><span>sass</span><span>(</span><span>{</span>\n                includePaths<span>:</span> pkg<span>.</span>paths<span>.</span>scss\n            <span>}</span><span>)</span>\n            <span>.</span><span>on</span><span>(</span><span>'error'</span><span>,</span> $<span>.</span>sass<span>.</span>logError<span>)</span><span>)</span>\n        <span>.</span><span>pipe</span><span>(</span>$<span>.</span><span>cached</span><span>(</span><span>'sass_compile'</span><span>)</span><span>)</span>\n        <span>.</span><span>pipe</span><span>(</span>$<span>.</span><span>autoprefixer</span><span>(</span><span>)</span><span>)</span>\n        <span>.</span><span>pipe</span><span>(</span>$<span>.</span>sourcemaps<span>.</span><span>write</span><span>(</span><span>'./'</span><span>)</span><span>)</span>\n        <span>.</span><span>pipe</span><span>(</span>$<span>.</span><span>size</span><span>(</span><span>{</span> gzip<span>:</span> <span>true</span><span>,</span> showFiles<span>:</span> <span>true</span> <span>}</span><span>)</span><span>)</span>\n        <span>.</span><span>pipe</span><span>(</span>gulp<span>.</span><span>dest</span><span>(</span>pkg<span>.</span>paths<span>.</span>build<span>.</span>css<span>)</span><span>)</span><span>;</span>\n<span>}</span><span>)</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;nu-skool</h5></aside></div></section></div></div><div><div><p>Not only are we not hard-cod­ing the file names and paths inline in our&nbsp;<kbd>gulpfile.js</kbd>, we’re not even includ­ing them in our&nbsp;<kbd>gulpfile.js</kbd>&nbsp;at all — they are pulled from our&nbsp;<kbd>package.json</kbd>&nbsp;which defines every­thing that’s unique about this par­tic­u­lar project.</p><p>Pret­ty cool, right? While this isn’t the be-all and end-all of how to do things, it’s worked out well for me. The code is more reusable, and it’s clean­er and eas­i­er to&nbsp;read.</p><p>That’s it folks, hope you found some of this useful!</p></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/a-better-package-json-for-the-frontend#the-full-monty\"><i></i><span>LINK</span></a></span>THE FULL MONTY</h3><p>I’ll include the full&nbsp;<kbd>package.json</kbd>&nbsp;used for this web­site here, to help you get a&nbsp;bet­ter idea how things work under the&nbsp;hood:</p></div></div><div><div><section><div><pre><code><span>{</span>\n    <span>\"name\"</span><span>:</span> <span>\"nystudio107\"</span><span>,</span>\n    <span>\"version\"</span><span>:</span> <span>\"1.0.0\"</span><span>,</span>\n    <span>\"description\"</span><span>:</span> <span>\"Website for nystudio107.com\"</span><span>,</span>\n    <span>\"main\"</span><span>:</span> <span>\"gulpfile.js\"</span><span>,</span>\n    <span>\"author\"</span><span>:</span> <span>\"Andrew Welch, nystudio107 &lt;andrew@nystudio107.com&gt;\"</span><span>,</span>\n    <span>\"copyright\"</span><span>:</span> <span>\"nystudio107\"</span><span>,</span>\n    <span>\"license\"</span><span>:</span> <span>\"UNLICENSED\"</span><span>,</span>\n    <span>\"private\"</span><span>:</span> <span>true</span><span>,</span>\n    <span>\"paths\"</span><span>:</span> <span>{</span>\n        <span>\"src\"</span><span>:</span> <span>{</span>\n            <span>\"base\"</span><span>:</span> <span>\"./src/\"</span><span>,</span>\n            <span>\"css\"</span><span>:</span> <span>\"./src/css/\"</span><span>,</span>\n            <span>\"fontello\"</span><span>:</span> <span>\"./src/fontello/\"</span><span>,</span>\n            <span>\"fonts\"</span><span>:</span> <span>\"./src/fonts/\"</span><span>,</span>\n            <span>\"json\"</span><span>:</span> <span>\"./src/json/\"</span><span>,</span>\n            <span>\"js\"</span><span>:</span> <span>\"./src/js/\"</span><span>,</span>\n            <span>\"img\"</span><span>:</span> <span>\"./src/img/\"</span><span>,</span>\n            <span>\"scss\"</span><span>:</span> <span>\"./src/scss/\"</span>\n        <span>}</span><span>,</span>\n        <span>\"dist\"</span><span>:</span> <span>{</span>\n            <span>\"base\"</span><span>:</span> <span>\"./public/\"</span><span>,</span>\n            <span>\"css\"</span><span>:</span> <span>\"./public/css/\"</span><span>,</span>\n            <span>\"js\"</span><span>:</span> <span>\"./public/js/\"</span><span>,</span>\n            <span>\"fonts\"</span><span>:</span> <span>\"./public/fonts/\"</span><span>,</span>\n            <span>\"img\"</span><span>:</span> <span>\"./public/img/\"</span>\n        <span>}</span><span>,</span>\n        <span>\"build\"</span><span>:</span> <span>{</span>\n            <span>\"base\"</span><span>:</span> <span>\"./build/\"</span><span>,</span>\n            <span>\"css\"</span><span>:</span> <span>\"./build/css/\"</span><span>,</span>\n            <span>\"fontello\"</span><span>:</span> <span>\"./build/fonts/fontello/\"</span><span>,</span>\n            <span>\"fonts\"</span><span>:</span> <span>\"./build/fonts/\"</span><span>,</span>\n            <span>\"js\"</span><span>:</span> <span>\"./build/js/\"</span><span>,</span>\n            <span>\"html\"</span><span>:</span> <span>\"./build/html/\"</span><span>,</span>\n            <span>\"img\"</span><span>:</span> <span>\"./build/img/\"</span>\n        <span>}</span><span>,</span>\n        <span>\"favicon\"</span><span>:</span> <span>{</span>\n            <span>\"src\"</span><span>:</span> <span>\"./src/img/favicon_src.png\"</span><span>,</span>\n            <span>\"dest\"</span><span>:</span> <span>\"./public/img/site/\"</span><span>,</span>\n            <span>\"path\"</span><span>:</span> <span>\"/img/site/\"</span>\n        <span>}</span><span>,</span>\n        <span>\"scss\"</span><span>:</span> <span>[</span><span>]</span><span>,</span>\n        <span>\"templates\"</span><span>:</span> <span>\"./craft/templates/\"</span>\n    <span>}</span><span>,</span>\n    <span>\"urls\"</span><span>:</span> <span>{</span>\n        <span>\"live\"</span><span>:</span> <span>\"https://nystudio107.com/\"</span><span>,</span>\n        <span>\"local\"</span><span>:</span> <span>\"https://nystudio107.dev/\"</span><span>,</span>\n        <span>\"critical\"</span><span>:</span> <span>\"https://nystudio107.com/\"</span>\n    <span>}</span><span>,</span>\n    <span>\"vars\"</span><span>:</span> <span>{</span>\n        <span>\"siteCssName\"</span><span>:</span> <span>\"site.combined.min.css\"</span><span>,</span>\n        <span>\"scssName\"</span><span>:</span> <span>\"style.scss\"</span><span>,</span>\n        <span>\"cssName\"</span><span>:</span> <span>\"style.css\"</span>\n    <span>}</span><span>,</span>\n    <span>\"globs\"</span><span>:</span> <span>{</span>\n        <span>\"distCss\"</span><span>:</span> <span>[</span>\n            <span>\"./node_modules/normalize.css/normalize.css\"</span><span>,</span>\n            <span>\"./node_modules/flexboxgrid/dist/flexboxgrid.min.css\"</span><span>,</span>\n            <span>\"./node_modules/vue2-autocomplete/dist/style/vue2-autocomplete.css\"</span><span>,</span>\n            <span>\"./src/css/prism-theme.css\"</span><span>,</span>\n            <span>\"./build/fonts/fontello/css/fontello-codes.css\"</span><span>,</span>\n            <span>\"./build/css/*.css\"</span><span>,</span>\n            <span>\"./src/css/*.css\"</span>\n        <span>]</span><span>,</span>\n        <span>\"img\"</span><span>:</span> <span>[</span>\n            <span>\"./public/img/\"</span>\n        <span>]</span><span>,</span>\n        <span>\"components\"</span><span>:</span> <span>[</span>\n            <span>\"./src/components/**/*.vue\"</span>\n        <span>]</span><span>,</span>\n        <span>\"fonts\"</span><span>:</span> <span>[</span>\n            <span>\"./build/fonts/fontello/font/*.{eot,ttf,woff,woff2}\"</span><span>,</span>\n            <span>\"./src/fonts/*.{eot,ttf,woff,woff2}\"</span>\n        <span>]</span><span>,</span>\n        <span>\"critical\"</span><span>:</span> <span>[</span>\n            <span>{</span>\n                <span>\"url\"</span><span>:</span> <span>\"\"</span><span>,</span>\n                <span>\"template\"</span><span>:</span> <span>\"index\"</span>\n            <span>}</span><span>,</span>\n            <span>{</span>\n                <span>\"url\"</span><span>:</span> <span>\"blog/stop-using-htaccess-files-no-really\"</span><span>,</span>\n                <span>\"template\"</span><span>:</span> <span>\"blog/_entry\"</span>\n            <span>}</span><span>,</span>\n            <span>{</span>\n                <span>\"url\"</span><span>:</span> <span>\"blog/stop-using-htaccess-files-no-really\"</span><span>,</span>\n                <span>\"template\"</span><span>:</span> <span>\"blog/_amp_entry\"</span>\n            <span>}</span><span>,</span>\n            <span>{</span>\n                <span>\"url\"</span><span>:</span> <span>\"blog\"</span><span>,</span>\n                <span>\"template\"</span><span>:</span> <span>\"blog/index\"</span>\n            <span>}</span><span>,</span>\n            <span>{</span>\n                <span>\"url\"</span><span>:</span> <span>\"blog\"</span><span>,</span>\n                <span>\"template\"</span><span>:</span> <span>\"blog/amp_index\"</span>\n            <span>}</span><span>,</span>\n            <span>{</span>\n                <span>\"url\"</span><span>:</span> <span>\"offline\"</span><span>,</span>\n                <span>\"template\"</span><span>:</span> <span>\"offline\"</span>\n            <span>}</span><span>,</span>\n            <span>{</span>\n                <span>\"url\"</span><span>:</span> <span>\"wordpress\"</span><span>,</span>\n                <span>\"template\"</span><span>:</span> <span>\"wordpress\"</span>\n            <span>}</span><span>,</span>\n            <span>{</span>\n                <span>\"url\"</span><span>:</span> <span>\"404\"</span><span>,</span>\n                <span>\"template\"</span><span>:</span> <span>\"404\"</span>\n            <span>}</span>\n        <span>]</span><span>,</span>\n        <span>\"download\"</span><span>:</span> <span>[</span>\n            <span>{</span>\n                <span>\"url\"</span><span>:</span> <span>\"https://www.google-analytics.com/analytics.js\"</span><span>,</span>\n                <span>\"dest\"</span><span>:</span> <span>\"./public/js/\"</span>\n            <span>}</span><span>,</span>\n            <span>{</span>\n                <span>\"url\"</span><span>:</span> <span>\"https://static.small.chat/messenger.css\"</span><span>,</span>\n                <span>\"dest\"</span><span>:</span> <span>\"./public/css/\"</span>\n            <span>}</span><span>,</span>\n            <span>{</span>\n                <span>\"url\"</span><span>:</span> <span>\"https://static.small.chat/messenger.js\"</span><span>,</span>\n                <span>\"dest\"</span><span>:</span> <span>\"./public/js/\"</span>\n            <span>}</span>\n        <span>]</span><span>,</span>\n        <span>\"distJs\"</span><span>:</span> <span>[</span>\n            <span>\"./build/js/*.js\"</span><span>,</span>\n            <span>\"./node_modules/lazysizes/lazysizes.min.js\"</span><span>,</span>\n            <span>\"./node_modules/lazysizes/plugins/bgset/ls.bgset.min.js\"</span><span>,</span>\n            <span>\"./node_modules/picturefill/dist/picturefill.min.js\"</span><span>,</span>\n            <span>\"./node_modules/vue/dist/vue.min.js\"</span><span>,</span>\n            <span>\"./node_modules/vue2-autocomplete/dist/vue2-autocomplete.js\"</span><span>,</span>\n            <span>\"./node_modules/vue-resource/dist/vue-resource.min.js\"</span>\n        <span>]</span><span>,</span>\n        <span>\"prismJs\"</span><span>:</span> <span>[</span>\n            <span>\"./node_modules/prismjs/prism.js\"</span><span>,</span>\n            <span>\"./node_modules/prismjs/components/prism-markup.js\"</span><span>,</span>\n            <span>\"./node_modules/prismjs/components/prism-apacheconf.js\"</span><span>,</span>\n            <span>\"./node_modules/prismjs/components/prism-css.js\"</span><span>,</span>\n            <span>\"./node_modules/prismjs/components/prism-json.js\"</span><span>,</span>\n            <span>\"./node_modules/prismjs/components/prism-twig.js\"</span><span>,</span>\n            <span>\"./node_modules/prismjs/components/prism-php.js\"</span><span>,</span>\n            <span>\"./node_modules/prismjs/components/prism-bash.js\"</span><span>,</span>\n            <span>\"./node_modules/prismjs/components/prism-javascript.js\"</span><span>,</span>\n            <span>\"./node_modules/prismjs/plugins/line-numbers/prism-line-numbers.min.js\"</span>\n        <span>]</span><span>,</span>\n        <span>\"babelJs\"</span><span>:</span> <span>[</span>\n            <span>\"./src/js/*.js\"</span>\n        <span>]</span><span>,</span>\n        <span>\"inlineJs\"</span><span>:</span> <span>[</span>\n            <span>\"./node_modules/fg-loadcss/src/loadCSS.js\"</span><span>,</span>\n            <span>\"./node_modules/fg-loadcss/src/cssrelpreload.js\"</span><span>,</span>\n            <span>\"./node_modules/fontfaceobserver/fontfaceobserver.js\"</span><span>,</span>\n            <span>\"./node_modules/loadjs/dist/loadjs.min.js\"</span><span>,</span>\n            <span>\"./node_modules/tiny-cookie/tiny-cookie.min.js\"</span><span>,</span>\n            <span>\"./src/js/register-service-worker.js\"</span><span>,</span>\n            <span>\"./src/js/asyncload-blog-fonts.js\"</span><span>,</span>\n            <span>\"./src/js/asyncload-site-fonts.js\"</span>\n        <span>]</span><span>,</span>\n        <span>\"siteIcon\"</span><span>:</span> <span>\"./public/img/site/favicon.*\"</span>\n    <span>}</span><span>,</span>\n    <span>\"dependencies\"</span><span>:</span> <span>{</span>\n        <span>\"fg-loadcss\"</span><span>:</span> <span>\"^1.2.0\"</span><span>,</span>\n        <span>\"flexboxgrid\"</span><span>:</span> <span>\"^6.3.1\"</span><span>,</span>\n        <span>\"fontfaceobserver\"</span><span>:</span> <span>\"^2.0.5\"</span><span>,</span>\n        <span>\"lazysizes\"</span><span>:</span> <span>\"^2.0.6\"</span><span>,</span>\n        <span>\"loadjs\"</span><span>:</span> <span>\"^3.3.1\"</span><span>,</span>\n        <span>\"normalize.css\"</span><span>:</span> <span>\"^5.0.0\"</span><span>,</span>\n        <span>\"picturefill\"</span><span>:</span> <span>\"^3.0.2\"</span><span>,</span>\n        <span>\"prismjs\"</span><span>:</span> <span>\"^1.5.1\"</span><span>,</span>\n        <span>\"tiny-cookie\"</span><span>:</span> <span>\"^1.0.1\"</span><span>,</span>\n        <span>\"vue\"</span><span>:</span> <span>\"^2.2.0\"</span><span>,</span>\n        <span>\"vue-resource\"</span><span>:</span> <span>\"^1.0.3\"</span><span>,</span>\n        <span>\"vue2-autocomplete\"</span><span>:</span> <span>\"git://github.com/nystudio107/vue2-autocomplete.git#master\"</span>\n    <span>}</span><span>,</span>\n    <span>\"devDependencies\"</span><span>:</span> <span>{</span>\n        <span>\"babel-plugin-transform-runtime\"</span><span>:</span> <span>\"^6.15.0\"</span><span>,</span>\n        <span>\"babel-preset-es2015\"</span><span>:</span> <span>\"^6.16.0\"</span><span>,</span>\n        <span>\"chalk\"</span><span>:</span> <span>\"^1.1.3\"</span><span>,</span>\n        <span>\"critical\"</span><span>:</span> <span>\"^1.1.0\"</span><span>,</span>\n        <span>\"fancy-log\"</span><span>:</span> <span>\"^1.2.0\"</span><span>,</span>\n        <span>\"git-rev-sync\"</span><span>:</span> <span>\"^1.7.1\"</span><span>,</span>\n        <span>\"gulp\"</span><span>:</span> <span>\"^3.9.0\"</span><span>,</span>\n        <span>\"gulp-autoprefixer\"</span><span>:</span> <span>\"^3.1.0\"</span><span>,</span>\n        <span>\"gulp-babel\"</span><span>:</span> <span>\"^6.1.2\"</span><span>,</span>\n        <span>\"gulp-cached\"</span><span>:</span> <span>\"^1.1.1\"</span><span>,</span>\n        <span>\"gulp-concat\"</span><span>:</span> <span>\"^2.6.0\"</span><span>,</span>\n        <span>\"gulp-cssnano\"</span><span>:</span> <span>\"^2.1.2\"</span><span>,</span>\n        <span>\"gulp-debug\"</span><span>:</span> <span>\"^2.1.2\"</span><span>,</span>\n        <span>\"gulp-download\"</span><span>:</span> <span>\"^0.0.1\"</span><span>,</span>\n        <span>\"gulp-favicons\"</span><span>:</span> <span>\"^2.2.6\"</span><span>,</span>\n        <span>\"gulp-filter\"</span><span>:</span> <span>\"^5.0.1\"</span><span>,</span>\n        <span>\"gulp-fontello\"</span><span>:</span> <span>\"^0.4.6\"</span><span>,</span>\n        <span>\"gulp-header\"</span><span>:</span> <span>\"^1.8.7\"</span><span>,</span>\n        <span>\"gulp-if\"</span><span>:</span> <span>\"^2.0.1\"</span><span>,</span>\n        <span>\"gulp-imagemin\"</span><span>:</span> <span>\"^3.1.1\"</span><span>,</span>\n        <span>\"gulp-livereload\"</span><span>:</span> <span>\"^3.8.1\"</span><span>,</span>\n        <span>\"gulp-load-plugins\"</span><span>:</span> <span>\"^1.3.0\"</span><span>,</span>\n        <span>\"gulp-newer\"</span><span>:</span> <span>\"^1.2.0\"</span><span>,</span>\n        <span>\"gulp-plumber\"</span><span>:</span> <span>\"^1.1.0\"</span><span>,</span>\n        <span>\"gulp-print\"</span><span>:</span> <span>\"^2.0.1\"</span><span>,</span>\n        <span>\"gulp-rename\"</span><span>:</span> <span>\"^1.2.2\"</span><span>,</span>\n        <span>\"gulp-replace\"</span><span>:</span> <span>\"0.5.4\"</span><span>,</span>\n        <span>\"gulp-rev\"</span><span>:</span> <span>\"^7.1.0\"</span><span>,</span>\n        <span>\"gulp-sass\"</span><span>:</span> <span>\"^2.1.0\"</span><span>,</span>\n        <span>\"gulp-size\"</span><span>:</span> <span>\"^2.1.0\"</span><span>,</span>\n        <span>\"gulp-sourcemaps\"</span><span>:</span> <span>\"^2.2.1\"</span><span>,</span>\n        <span>\"gulp-streamify\"</span><span>:</span> <span>\"1.0.2\"</span><span>,</span>\n        <span>\"gulp-uglify\"</span><span>:</span> <span>\"^1.5.4\"</span><span>,</span>\n        <span>\"moment\"</span><span>:</span> <span>\"^2.14.1\"</span><span>,</span>\n        <span>\"pa11y\"</span><span>:</span> <span>\"^4.11.0\"</span><span>,</span>\n        <span>\"vinyl-source-stream\"</span><span>:</span> <span>\"^1.1.0\"</span><span>,</span>\n        <span>\"vueify\"</span><span>:</span> <span>\"^8.7.0\"</span>\n    <span>}</span><span>,</span>\n    <span>\"scripts\"</span><span>:</span> <span>{</span>\n        <span>\"start\"</span><span>:</span> <span>\"gulp\"</span><span>,</span>\n        <span>\"build\"</span><span>:</span> <span>\"gulp build\"</span>\n    <span>}</span><span>,</span>\n    <span>\"repository\"</span><span>:</span> <span>{</span>\n        <span>\"type\"</span><span>:</span> <span>\"git\"</span><span>,</span>\n        <span>\"url\"</span><span>:</span> <span>\"git@codewhore.com:nystudio107.git\"</span>\n    <span>}</span><span>,</span>\n    <span>\"bugs\"</span><span>:</span> <span>{</span>\n        <span>\"email\"</span><span>:</span> <span>\"andrew@nystudio107.com\"</span>\n    <span>}</span>\n<span>}</span></code></pre><aside><h5><i></i>&nbsp;nystudio107.com package.json</h5></aside></div></section></div></div><aside><div><div><h3>FURTHER READING</h3><ul><li><a href=\"https://nystudio107.com/blog/a-gulp-workflow-for-frontend-development-automation\">A Gulp Workflow for Frontend Development Automation</a></li><li><a href=\"https://nystudio107.com/blog/image-optimization-project-results\">Post-Mortem: Applied Image Optimization</a></li><li><a href=\"https://nystudio107.com/blog/an-annotated-webpack-4-config-for-frontend-web-development\">An Annotated webpack 4 Config for Frontend Web Development</a></li></ul></div></div></aside>","filePath":"pages/NPM/.md","_id":"hmtwJy1n9cN8p5Md"}
{"date":{"$$date":1542210284727},"title":"Angular Pipes: Integrated Unit Testing","sourceUrl":"https://www.amadousall.com/angular-pipes-integrated-unit-testing/","path":"Angular/","category":"Angular","tags":["Angular"," TDD"," Unit Testing"],"author":"Amadou Sall","excerpt":"In my previous blog post, we learned that there were two ways to unit test Angular pipes:","dateCreated":1542209950663,"coverImage":"","type":"Post","frontmatter":"---\npath: 'Angular/'\ndate: 'Wed Nov 14 2018 21:13:12 GMT+0530 (India Standard Time)'\ntitle: 'Angular Pipes: Integrated Unit Testing'\ntags: ['Angular','TDD','Unit Testing']\ncategory: 'Angular'\ncategoryColor: '#F3C610'\nexcerpt: 'In my previous blog post, we learned that there were two ways to unit test Angular pipes:'\ncoverImage: ''\nsourceUrl: 'https://www.amadousall.com/angular-pipes-integrated-unit-testing/'\ntype: 'Post'\n---\n    ","htmlCode":"<ul><li>Isolated tests (without TestBed)</li><li>Integrated tests (with TestBed)</li></ul><p>But we put the focus on isolated tests. I this article, we are going to switch our focus on how to write integrated unit tests for Angular pipes.</p><p>We talk about integrated unit testing when we are testing the pipe in the same condition that it will be used at runtime. This means that we will test it when used inside an Angular component's template.</p><h2>The Pipe Under Test</h2><p>In case, you didn't read my previous blog post, here is the code of the pipe we are going to test. It is a simple pipe that transforms an array to its mean.</p><p><img src=\"https://www.amadousall.com/content/images/2018/02/mean.pipe.ts-1.png\" alt=\"The Mean Pipe\"></p><ol><li>Implement the&nbsp;<code>PipeTransform</code>&nbsp;interface.</li><li>Return the mean of the array of numbers.</li></ol><p>The full source code of this pipe can be found at the&nbsp;<a href=\"https://www.amadousall.com/angular-pipes-integrated-unit-testing/#listing\">end</a>&nbsp;of the article or&nbsp;<a href=\"https://gist.github.com/amadousalldotcom/9bcbbc5ee1745bf10c890a5c423bd477\">here</a>.</p><h2>We Need a Host Component</h2><p>Because we want to write integrated tests for our pipe, we need a component that hosts our pipe. A host component is like any other Angular component. There is nothing specific about it. It is just a way to use the pipe in an Angular component's template.</p><p>The code for the host component is straightforward:</p><p><img src=\"https://www.amadousall.com/content/images/2018/02/host-component.png\" alt=\"The Host Component for the Test\"></p><ol><li>Define property that holds the values to be passed to the pipe</li><li>Display the result of the transformation of those values through the pipe.</li></ol><h2>Setting Up the Integrated Tests!</h2><p><img src=\"https://www.amadousall.com/content/images/2018/02/tests-setup.png\" alt=\"Tests Setup\"></p><ol><li><code>TestBed.configureTestingModule</code>, as its name implies, allows us to create a specific Angular module for testing purposes. It accepts pretty much the same parameters as the&nbsp;<code>NgModule</code>&nbsp;decorator.</li><li>Notice that we wrap the body of our first&nbsp;<code>beforeEach</code>&nbsp;inside a special Angular zone. We do so by calling the&nbsp;<code>async</code>&nbsp;function, one of the many Angular testing utilities. We need this because&nbsp;<code>TestBet.compileComponents</code>&nbsp;is asynchronous. So this ensures that our component's template is compiled beforehand (although technically this is not necessary in this example because our template is inlined).</li><li>A&nbsp;<code>ComponentFixture</code>&nbsp;is a wrapper around our host component. It allows us to interact with the environment of our component like its change detection or its injector.</li><li>The fixture is returned by&nbsp;<code>TestBed.createComponent</code>.</li><li>From the fixture, we can get the&nbsp;<code>DebugElement</code>. The&nbsp;<code>DebugElement</code>&nbsp;is a wrapper around our component's HTML element. It provides more functionality than the native&nbsp;<code>HTMLElement</code>.</li><li>We can also get the real instance of our component from the fixture.</li></ol><p>We made sure that our fixture can be properly instantiated. Now we can start writing real expectations.</p><h2>The Actual Tests</h2><p><img src=\"https://www.amadousall.com/content/images/2018/02/tests.png\" alt=\"The Actual Tests\"></p><ol><li>We start by updating the&nbsp;<code>values</code>&nbsp;property of our component and we call&nbsp;<code>fixture.detectChanges</code>.&nbsp;<code>fixture.detectChanges</code>&nbsp;kicks off change detection for our component. It is necessary if we want our template to reflect the changes we made to the component class.</li><li>Next, we use&nbsp;<code>debugElement.query</code>&nbsp;passing it a predicate&nbsp;<code>By.css('div')</code>. This allows us to target the div element by using its CSS selector.</li><li>From there, we can get the native&nbsp;<code>HTMLDivElement</code>.</li><li>Then we can write our expectations.</li></ol><p>The full source code of this pipe can be found at the&nbsp;<a href=\"https://www.amadousall.com/angular-pipes-integrated-unit-testing/#listing\">end</a>&nbsp;of the article or&nbsp;<a href=\"https://gist.github.com/amadousalldotcom/bcb219ccba19283c08e69198839aedac\">here</a></p><p>In this article, we learned how to write integrated unit tests for our Angular pipes. The setup for this kind of is more complicated than for isolated unit tests. There are also more concepts involved because we need to use Angular testing utilities. But the effort is forth it as integrated unit tests can help us detect bugs that isolated tests cannot reveal.</p><p>Thank you very much for reading!</p><hr><h2>Listing</h2>\n<h3>mean.pipe.ts</h3>\n<pre><code>\nimport { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'mean'\n})\nexport class MeanPipe implements PipeTransform {\n\n  transform(value: number[]): number {\n    if (!Array.isArray(value)) {\n      return value;\n    }\n    if (value.length === 0) {\n      return undefined;\n    }\n    const sum = value.reduce((n: number, m: number) =&gt; n + m, 0);\n    return  sum / value.length;\n  }\n\n}\n</code></pre>\n<h3>mean.pipe.integrated.spec.ts</h3>\n<pre><code>\nimport { MeanPipe } from './mean.pipe';\nimport { async, ComponentFixture, TestBed } from '@angular/core/testing';\nimport { Component, DebugElement } from '@angular/core';\nimport { By } from '@angular/platform-browser';\n\n\n@Component({\n  template: '<div> {{ values | mean }}</div>'\n})\nexport class MeanPipeHostComponent {\n  values: number[];\n}\n\ndescribe('MeanPipe inside a Component', () =&gt; {\n  beforeEach(async(() =&gt; {\n    TestBed\n      .configureTestingModule({\n        declarations: [MeanPipe, MeanPipeHostComponent]\n      })\n      .compileComponents();\n  }));\n\n  let fixture: ComponentFixture<meanpipehostcomponent>;\n  let debugElement: DebugElement;\n\n  let component: MeanPipeHostComponent;\n\n  beforeEach(() =&gt; {\n    fixture = TestBed.createComponent(MeanPipeHostComponent);\n    debugElement = fixture.debugElement;\n    component = fixture.componentInstance;\n  });\n\n  it('should create an instance', () =&gt; {\n    expect(fixture).toBeTruthy();\n  });\n\n  it('should display 1', () =&gt; {\n    component.values = [1, 1];\n    fixture.detectChanges();\n\n    const div: HTMLDivElement = debugElement\n      .query(By.css('div'))\n      .nativeElement;\n\n    expect(div.textContent.trim()).toEqual('1');\n  });\n\n  it('should display 0', () =&gt; {\n    component.values = [1, -1];\n    fixture.detectChanges();\n\n    const div: HTMLDivElement = debugElement\n      .query(By.css('div'))\n      .nativeElement;\n\n    expect(div.textContent.trim()).toEqual('0');\n  });\n\n  it('should display nothing', () =&gt; {\n    component.values = [];\n    fixture.detectChanges();\n\n    const div: HTMLDivElement = debugElement\n      .query(By.css('div'))\n      .nativeElement;\n\n    expect(div.textContent.trim()).toEqual('');\n  });\n});\n</meanpipehostcomponent></code></pre>","filePath":"pages/Angular/.md","_id":"i8rd2DGUSPm38QKv","dateUpdated":1542210284727}
{"date":"2018-11-12T16:52:47.811Z","title":"Creating Layouts with CSS Grid","sourceUrl":"https://www.sitepoint.com/creating-css-grid-layouts/","path":"CSS/","category":"CSS","tags":["css"," Grid"],"author":"","excerpt":"","dateCreated":1542041458708,"coverImage":"","type":"Post","frontmatter":"---\npath: 'CSS/'\ndate: 'Mon Nov 12 2018 22:22:47 GMT+0530 (India Standard Time)'\ntitle: 'Creating Layouts with CSS Grid'\ntags: ['css','Grid']\ncategory: 'CSS'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://www.sitepoint.com/creating-css-grid-layouts/'\ntype: 'Post'\n---\n    ","htmlCode":"<p><em>The following introduction to CSS Grid is an extract from Tiffany’s book, <a href=\"https://www.sitepoint.com/premium/l/css-master2\">CSS Master, 2nd Edition</a>.</em></p>\n<p><strong>CSS Grid is a relatively recent layout specification, shipping in most browsers as of October 2017. Grid allows us to create layouts that were previously impossible, or only possible with lots of DOM operations.</strong></p>\n<p>Keep in mind that the <a href=\"https://www.w3.org/TR/css-grid-1/\">CSS Grid specification</a> is dense, and introduces several new concepts that are quite complex. Consider this an overview rather than a comprehensive look at Grid. Don’t worry, we’ll point you to lots of resources for learning more.</p>\n<h2>The Grid Formatting Context</h2>\n<div><div><span>--ADVERTISEMENT--</span></div>\n\n\n<script src=\"https://play.aniview.com/5858ed930b8ee8851941a7bb/59627b0528a0616e231692a2/SitepointPMP.js\"></script><script>\nvar el = document.getElementById('aniBox');\nvar adBox = document.getElementById('adBox');\n// create an observer instance\nvar observer = new MutationObserver(function(mutations) {\n  mutations.forEach(function(mutation) {\n    if(mutation.attributeName == 'style'){\n      var s = el.getAttribute('style');\n      if(s.search('height: 360px') !=  -1) {\n        adBox.style = 'display: block';\n      }\n      else {\n        adBox.style = 'display: none';\n      }\n}\n  });    \n});\n\n// configuration of the observer:\nvar config = { attributes: true, attributeFilter: ['style']};\n \n// pass in the target node, as well as the observer options\nobserver.observe(el, config);\n</script></div><p>Adding <code>display: grid</code> to an element triggers a grid formatting context for that element and its children. In a grid formatting context, three things happen:</p>\n<ol><li>The element becomes a block-level element that participates in the normal flow.</li>\n<li>Its children—whether elements or text nodes—create block-like, grid-level boxes that can be arranged into rows and columns. Immediate children of a grid container are <strong>grid items</strong>.</li>\n<li>In a horizontal writing mode, each member in a grid row will have the same height as its tallest element (as determined by content), unless an explicit height value is set. When the document uses a vertical writing mode, it takes on the same length as its longest element (as determined by content).</li>\n</ol><div>\n<img src=\"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2018/09/1538097963LayoutDisplayGridBoxes.png\" alt=\"Using display: grid creates a block-level container, and block boxes for its children\" width=\"826\" height=\"538\"><span>Using <code>display: grid</code> creates a block-level container, and block boxes for its children</span>\n</div>\n<p>Using <code>display: inline-grid</code> works similarly. Children of inline-level grid containers create grid-level boxes, but the container itself participates in an inline formatting context.</p>\n<div>\n<img src=\"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2018/09/1538098019LayoutDisplayInlineGridBoxes.png\" alt=\"Using display: inline-grid creates an inline-level box for the container, but block boxes for its children\" width=\"826\" height=\"538\"><span>Using <code>display: inline-grid</code> creates an inline-level box for the container, but block boxes for its children</span>\n</div>\n<p>By themselves, <code>display: grid</code> and <code>display: inline-grid</code> won’t automatically arrange these boxes into rows and columns. We also need to tell the browser where and how to place things.</p>\n<p>Before creating your grid, determine whether you want a fixed number of columns and/or rows, whether you’d like the browser to calculate the number of columns and rows automatically, or whether you’d like a mix of the two. Knowing what kind of grid you want to create determines the approach you’ll take. Let’s look at a few techniques.</p>\n<h2>Defining a Grid Layout</h2>\n<p>After defining a grid container, we’ll need to tell the browser how many rows and columns our grid should contain. We can define the number of rows and columns using the <code>grid-template-rows</code> and <code>grid-template-columns</code> properties. They’re applied to the grid container.</p>\n<p>Both <code>grid-template-rows</code> and <code>grid-template-columns</code> accept what’s known as a <em>track list</em>. The <strong>track list</strong> is a space-separated string that specifies grid line names and sizes of each position in the row or column.</p>\n<p>Each value in a track list creates a new space—a <strong>track</strong>—within the row or column. You can use lengths, flexible length units (discussed later in this chapter), or percentages. You can also use <a href=\"https://www.w3.org/TR/css-sizing-3/#sizing-values\">sizing values</a> such as <code>auto</code>, <code>min-content</code> and <code>max-conent</code>.</p>\n<pre><code>.grid {\n    display: grid;\n    grid-template-columns: 25rem 25rem 25rem;\n    grid-template-rows: 10rem 10rem;\n}\n</code></pre>\n<p>In the code above, we’ve defined a grid with three columns, each <code>25rem</code> units wide and two rows, each <code>10rem</code> units tall. Let’s apply it to the following HTML. Yes, this is all the markup required:</p>\n<pre><code>&lt;div class=\"grid\"&gt;\n    &lt;div&gt;Grid item A&lt;/div&gt;\n    &lt;div&gt;Grid item B&lt;/div&gt;\n    &lt;div&gt;Grid item C&lt;/div&gt;\n    &lt;div&gt;Grid item D&lt;/div&gt;\n    &lt;div&gt;Grid item E&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n<p>Our grid items get organized into the columns and rows shown below.</p>\n<div>\n<img src=\"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2018/09/1538098063LayoutGridFixed1.png\" alt=\"Creating an explicit grid with grid-template-columns and grid-template-rows\" width=\"826\" height=\"538\"><span>Creating an explicit grid with <code>grid-template-columns</code> and <code>grid-template-rows</code></span>\n</div>\n<p>Here, we’ve created a grid of evenly sized rows and columns, but that isn’t a requirement of Grid. Let’s tweak our CSS slightly. We’ll change the value of <code>grid-template-columns</code> to <code>25rem 15rem 25rem</code>:</p>\n<pre><code>.grid {\n    display: grid;\n    grid-template-columns: 25rem 15rem 25rem;\n    grid-template-rows: 10rem 10rem;\n}\n</code></pre>\n<p>Now the second column in our grid is narrower than the first and third.</p>\n<div>\n<img src=\"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2018/09/1538098103LayoutGridFixed2.png\" alt=\"Grid columns and rows don’t have to be the same width\" width=\"826\" height=\"538\"><span>Grid columns and rows don’t have to be the same width</span>\n</div>\n<h2>Explicit Grid versus Implicit Grids</h2>\n<p>In the previous section, we explicitly stated that this grid should have six available grid cells formed by three columns and two rows. This is what’s known as an <strong>explicit grid</strong>. Here, our grid container only has five children. The remaining position is empty. Let’s see what happens when we add more children to the container.</p>\n<div>\n<img src=\"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2018/09/1538098144LayoutGridFixed3.png\" alt=\"When grid items exceed the number of explicitly defined cells, the remaining items are arranged in an implicit grid\" width=\"826\" height=\"538\"><span>When grid items exceed the number of explicitly defined cells, the remaining items are arranged in an implicit grid</span>\n</div>\n<p>Now we have three rows. Notice, however, that our third row is only as tall as its contents and padding. It’s part of the grid because these items are the children of a grid container. Yet the row isn’t explicitly defined by <code>grid-template-rows</code>. What we have instead is an <strong>implicit grid</strong>—an explicit grid with additional grid items that exceed the defined number of explicit grid cells.</p>\n<p>Items within an implicit grid are <code>auto</code> sized by default. Grid items will expand to accommodate their contents, or fill the remaining vertical space in the container—whichever is taller. If, for example, we set the <code>height</code> property of our container to <code>50rem</code>, our implicit grid track will expand to be <code>30rem</code> tall.</p>\n<div>\n<img src=\"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2018/09/1538098186LayoutGridImplicitAuto.png\" alt=\"Implicit grid rows expand to fill the available height of the container\" width=\"826\" height=\"641\"><span>Implicit grid rows expand to fill the available height of the container</span>\n</div>\n<p>If we add enough items to create a fourth row, the height of our implicit grid items will be distributed evenly across the remaining <code>30rem</code> of vertical space in the container. Their computed height will be <code>15rem</code> each.</p>\n<div>\n<img src=\"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2018/09/1538098231LayoutGridImplicitAutoFourRows.png\" alt=\"The height of implicit grid rows will be evenly distributed based on the remaining space in the grid container\" width=\"826\" height=\"641\"><span>The height of implicit grid rows will be evenly distributed based on the remaining space in the grid container</span>\n</div>\n<p>In our original example, we’ve explicitly defined only two rows with a height of <code>10rem</code> each, so our third row defaults to <code>auto</code> sizing. Its height will adjust to the size of its contents and padding.</p>\n<h2>Specifying Track Size for an Implicit Grid</h2>\n<p>It is possible, however, to set a kind of explicit, default height or width for implicit grid items using the <code>grid-auto-rows</code> and <code>grid-auto-columns</code> properties. Let’s update our CSS with <code>grid-auto-rows</code>:</p>\n<pre><code>.grid {\n    display: grid;\n    grid-template-columns: 25rem 15rem 25rem;\n    grid-template-rows: 10rem 10rem;\n    grid-auto-rows: 30rem;\n}\n</code></pre>\n<p>Now items in our third row—and any subsequent rows—will be <code>30rem</code> in height.</p>\n<div>\n<img src=\"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2018/09/1538098282LayoutGridImplicit.png\" alt=\"Using grid-auto-rows to specify the height of implicit grid items\" width=\"826\" height=\"641\"><span>Using <code>grid-auto-rows</code> to specify the height of implicit grid items</span>\n</div>\n<p>There’s one drawback to using the <code>grid-auto-*</code> properties: when the contents of a grid item exceed its dimensions, they will overflow the container (shown below), and may be clipped visually by elements in other rows.</p>\n<div>\n<img src=\"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2018/09/1538098357LayoutGridOverflow.png\" alt=\"Contents of a grid container can overflow the container when using length or percentage units\" width=\"828\" height=\"650\"><span>Contents of a grid container can overflow the container when using length or percentage units</span>\n</div>\n<p>One way to avoid this is to use the <code>minmax()</code> function. Let’s rewrite our CSS to use <code>minmax()</code>:</p>\n<pre><code>.grid {\n    display: grid;\n    grid-template-columns: 25rem 15rem 25rem;\n    grid-template-rows: 10rem 10rem;\n    grid-auto-rows: minmax(30rem, auto);\n}\n</code></pre>\n<p>As you may have guessed from its name, <code>minmax()</code> lets us define the minimum and maximum size of a track. It requires two arguments, the first of which is the minimum desired track size. The second argument is the maximum desired size.</p>\n<p>In this case, our row will be at least <code>30rems</code> high. But since we’ve set our maximum size to <code>auto</code>, our track will expand to accommodate the content of that cell. Arguments for <code>minmax()</code> can be lengths or percentages, or one of the <code>auto</code>, <code>min-content</code>, and <code>max-content</code> keywords. Here, <code>minmax(30rem, max-content)</code> would achieve much the same effect. Flexible units, discussed in the next section, are also valid.</p>\n<p>Lengths and percentages can be used to define track sizes. Using them may mean that the grid items don’t fill the entire width or height of the container. For example, if our grid container is <code>70rem</code> wide, <code>grid-template-columns: 25rem 15rem 25rem;</code> will only fill about 90% of its horizontal space. On the other hand, if our grid container is only <code>50rem</code> wide, the total width of our columns will overflow the container’s bounds.</p>\n<p>One way to avoid this issue is by using <em>flexible length</em> units.</p>\n<h2>Creating Flexible Grids with Flex Units</h2>\n<p><strong>Flexible length</strong> or <strong>flex</strong> units are best understood as fractional units, and are expressed using <code>fr</code>. Flex units indicate to the browser what fraction or proportion of the leftover space in a grid container should be allocated to each grid item. They’re a ratio, not a true length value in the way <code>px</code>, <code>em</code>, or <code>cm</code> are.</p>\n<p>There’s a formula for calculating the used width of an item when using flexible units: <em>(flex × leftover space) &amp;div; sum of all flex factors</em>. If, for instance, our grid container is <code>1000px</code> wide, and the value of <code>grid-template-columns</code> is <code>3fr 2fr 1fr</code>, our columns will be <code>500px</code>, <code>333.33px</code> and <code>133.33px</code> wide. The width of each column is allocated proportionally from the space available, as shown below.</p>\n<div>\n<img src=\"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2018/09/1538098398LayoutGridFlex-1024x661.png\" alt=\"Flexible length units maintain grid proportions, rather than absolute lengths\" width=\"1024\" height=\"661\"><span>Flexible length units maintain grid proportions, rather than absolute lengths</span>\n</div>\n<p>Because these units are ratios and not absolute lengths, <code>grid-template-columns: 2fr 2fr 2fr</code> is equivalent to <code>grid-template-columns: 1fr 1fr 1fr</code>. Both will result in columns of equal width for horizontal writing modes, and rows of equal height for vertical writing modes.</p>\n<p><em>Note: <code>fr</code> units are not true length values. This makes them incompatible with other length units, such as <code>px</code> and <code>rem</code> and width percentages. It also means that you can’t use <code>fr</code> units with the <code>calc()</code> function. For example, <code>calc(1fr - 1rem)</code> is an invalid length value.</em></p>\n<h2>Using the <code>grid-template</code> Shorthand Property</h2>\n<p>We can also indicate the number of rows and columns using the <code>grid-template</code> property. Its syntax is as follows:</p>\n<pre><code>grid-template: [row track list] / <div></div>\n</code></pre>\n<p>Consider this block of CSS:</p>\n<pre><code>.grid {\n    display: grid;\n    grid-template-columns: 25rem 25rem 25rem;\n    grid-template-rows: 10rem 10rem;\n}\n</code></pre>\n<p>We can combine the second and third lines using <code>grid-template</code>:</p>\n<pre><code>.grid {\n    display: grid;\n    grid-template: 10rem 10rem / 25rem 25rem 25rem;\n}\n</code></pre>\n<p>For clarity, however, you may still wish to use the longhand properties.</p>\n<h2>Repeating Rows and Columns</h2>\n<p>In many cases, you’ll want grid columns or rows that repeat automatically; think of a list of store items or recipe search results. Grid offers a syntax for that—the <code>repeat()</code> function:</p>\n<pre><code>.grid {\n    display: grid;\n    grid-template-columns: repeat(3, 1fr);\n}\n</code></pre>\n<p><code>repeat()</code> accepts two arguments:</p>\n<ol><li>the number of times to repeat the track list</li>\n<li>a track list to repeat</li>\n</ol><p>Arguments must be separated by a comma. The first argument may be a positive integer, or the <code>auto-fit</code> or <code>auto-fill</code> keywords. The above CSS produces the following grid. Our <code>1fr</code> track list is repeated three times.</p>\n<div>\n<img src=\"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2018/09/1538098437LayoutGridRepeat1.png\" alt=\"A repeating grid with fr units\" width=\"828\" height=\"470\"><span>A repeating grid with <code>fr</code> units</span>\n</div>\n<p>We could also use a two-column pattern that repeats twice. For example, <code>grid-template-columns: repeat(2, 1fr 3fr);</code> produces a four-column grid. As the image below shows, the first and third columns are one third the width of the second and fourth. In both cases, the value of <code>grid-template-rows</code> is <code>auto</code>.</p>\n<div>\n<img src=\"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2018/09/1538098476LayoutGridRepeat2.png\" alt=\"A repeating two-column grid pattern\" width=\"825\" height=\"591\"><span>A repeating two-column grid pattern</span>\n</div>\n<h3>Repeating Columns with <code>auto-fit</code> or <code>auto-fill</code></h3>\n<p>Both of the preceding examples tell the browser: <em>here’s a track list pattern; please repeat it X number of times</em>. What you may want to tell the browser instead, though, is: <em>please fit as many columns or rows as you can within this grid container</em>. For that, we can use <code>auto-fit</code> or <code>auto-fill</code> as the first argument for <code>repeat()</code>, in combination with <code>minmax()</code>.</p>\n<p>What’s the difference between <code>auto-fit</code> and <code>auto-fill</code>? It’s subtle, but significant.</p>\n<ul><li><code>auto-fill</code> fits as many grid items as it can within a track line, <em>adding anonymous grid tracks</em> if necessary.</li>\n<li><code>auto-fit</code> fits as many grid items as it can within a track line, <em>expanding or collapsing the dimensions of each track</em> if necessary.</li>\n</ul><p>This difference becomes apparent when the grid container’s width exceeds the maximum total width of its grid items. Let’s compare some CSS:</p>\n<pre><code>.grid {\n    display: grid;\n    width: 800px;\n}\n.autofill {\n    grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));\n}\n.autofit {\n    grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));\n}\n</code></pre>\n<p>And let’s apply this CSS to the HTML below:</p>\n<pre><code>&lt;div class=\"grid autofill\"&gt;\n    &lt;div&gt;Grid item A&lt;/div&gt;\n    &lt;div&gt;Grid item B&lt;/div&gt;\n    &lt;div&gt;Grid item C&lt;/div&gt;\n    &lt;div&gt;Grid item D &lt;/div&gt;\n    &lt;div&gt;Grid item E&lt;/div&gt;\n&lt;/div&gt;\n\n&lt;div class=\"grid autofit\"&gt;\n    &lt;div&gt;Grid item A&lt;/div&gt;\n    &lt;div&gt;Grid item B&lt;/div&gt;\n    &lt;div&gt;Grid item C&lt;/div&gt;\n    &lt;div&gt;Grid item D &lt;/div&gt;\n    &lt;div&gt;Grid item E&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n<p>The only difference between these two grid layouts is that one uses <code>auto-fill</code> and the other uses <code>auto-fit</code>. But compare the two grids in the image below.</p>\n<div>\n<img src=\"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2018/09/1538098521LayoutGridAutoFitVsFill.png\" alt=\"Comparing auto-fill with auto-fit\" width=\"895\" height=\"630\"><span>Comparing <code>auto-fill</code> with <code>auto-fit</code></span>\n</div>\n<p>In both grids, the total maximum width of the grid items is less than that of the grid container. However, in the top grid—our <code>auto-fill</code> grid—that excess space is <em>filled in</em> by anonymous grid items.</p>\n<div>\n<img src=\"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2018/09/1538098565LayoutGridAutoFitVsFillDevTools.png\" alt=\"Visualizing the difference between auto-fill to auto-fit with the Firefox grid inspector\" width=\"895\" height=\"630\"><span>Visualizing the difference between <code>auto-fill</code> to <code>auto-fit</code> with the Firefox grid inspector</span>\n</div>\n<p>Compare that to the bottom grid, in which each grid item has been stretched to fit the available space. The image above illustrates what those anonymous grid cells look like using Firefox’s developer tools.</p>\n<p><em>Note: If this still doesn’t make any sense, read Sara Soueidan’s “<a href=\"https://css-tricks.com/auto-sizing-columns-css-grid-auto-fill-vs-auto-fit/\">Auto-Sizing Columns in CSS Grid: <code>auto-fill</code> vs <code>auto-fit</code></a>”. It contains some video examples that illustrate the difference a little bit better than static images can.</em></p>\n<hr><p><em>This is an extract from the book <a href=\"https://www.sitepoint.com/premium/l/css-master2\">CSS Master, 2nd Edition</a>. Up to this point, we’ve covered simple grids that are neatly aligned rows and columns of boxes. The book goes on to explain the far more complex layouts Grid can handle, covering line-based grid placement, named grid areas, how to space grid items, and dealing with images within grids.</em></p>\n<h2>Conclusion</h2>\n<p>CSS Grid is a very dense topic. We’ve really just scratched the surface here. Luckily, there’s a wealth of resources that can help you learn more.</p>\n<p>I believe in reading specifications where possible. In my opinion, the <a href=\"https://www.w3.org/TR/css-grid-1/\">CSS Grid specification</a> is quite readable, and it’s a good place to begin your own explorations of grid layout. But specifications do tend to contain a lot of jargon, because they’re targeted not only at web developers, but also those tasked with implementing the specification in browsers.</p>\n<p>Rachel Andrew’s <a href=\"https://gridbyexample.com/\">Grid by Example</a> was created for a web developer audience. The site includes grid layout tutorials and a collection of common user interface patterns. Be sure to visit the site’s <em>Resources</em> section too. It’s a cornucopia of links that demonstrate what you can do with CSS Grid.</p>\n<p><a href=\"http://labs.jensimmons.com/\">Jen Simmons’</a> Experimental Layout Lab is also chock-full of examples that illustrate Grid’s possibilities. If video is more your style, Simmons’ <a href=\"https://www.youtube.com/channel/UC7TizprGknbDalbHplROtag\">Layout Land</a> YouTube channel includes video walkthroughs of grid and other layout topics.</p>\n<p>When you need more of a cheatsheet-style reference, try “<a href=\"https://css-tricks.com/snippets/css/complete-guide-grid/\">A Complete Guide to Grid</a>”, by CSS-Tricks.</p>","filePath":"pages/CSS/.md","_id":"iJFGYQk4UjfWBV0j"}
{"date":"2018-11-06T15:00:05.227Z","title":"ServiceWorkers and Offline Browsing","sourceUrl":"https://nystudio107.com/blog/service-workers-and-offline-browsing","path":"JavaScript/","category":"JavaScript","tags":["JavaScript"," ServiceWorkers"," Offline Browsing"],"author":"Andrew Welch","excerpt":"Ser­vice­Work­ers pro­vide a way to pro­vide offline brows­ing and instant load­ing (amongst oth­er things).","dateCreated":1541516314377,"coverImage":"","type":"Post","frontmatter":"---\npath: 'JavaScript/'\ndate: 'Tue Nov 06 2018 20:30:05 GMT+0530 (India Standard Time)'\ntitle: 'ServiceWorkers and Offline Browsing'\ntags: ['JavaScript','ServiceWorkers','Offline Browsing']\ncategory: 'JavaScript'\ncategoryColor: '#F3C610'\nexcerpt: 'Ser­vice­Work­ers pro­vide a way to pro­vide offline brows­ing and instant load­ing (amongst oth­er things).'\ncoverImage: ''\nsourceUrl: 'https://nystudio107.com/blog/service-workers-and-offline-browsing'\ntype: 'Post'\n---\n    ","htmlCode":"<div><div><p>Once upon a&nbsp;time, there was a&nbsp;thing called the&nbsp;<a href=\"https://www.html5rocks.com/en/tutorials/appcache/beginner/\" target=\"_blank\" rel=\"noreferrer noopener\">Appli­ca­tion­Cache</a>&nbsp;that was sup­posed to allow for offline brows­ing and instant load­ing of resources&nbsp;by man­ag­ing a&nbsp;local cache. It end­ed up being a&nbsp;good idea, but a&nbsp;lack­lus­ter implementation.</p></div></div><div><div><blockquote>The idea is that we should provide some way to let the user browse our site even if they are offline or on a spotty Internet connection, and also to have a way to identify critical resources that should be cached locally for instant loading.</blockquote></div></div><div><div><p>While it may seem some­what fringe in our increas­ing­ly con­nect­ed world to pro­vide for offline brows­ing, the real­i­ty is that&nbsp;mobile devices account for the major­i­ty of&nbsp;traf­fic to many web­sites, a&nbsp;trend that’s only&nbsp;like­ly to&nbsp;grow in the future. A&nbsp;mobile device may even be a&nbsp;person’s&nbsp;<em>only</em>&nbsp;gate­way to the Inter­net, and mobile devices are used in all sorts of less than ide­al sit­u­a­tions&nbsp;<span>&amp;</span>&nbsp;locations.</p><p>And while web browsers will cache pages that you’ve already vis­it­ed — for a&nbsp;lim­it­ed peri­od of time — they don’t cache pages you haven’t vis­it­ed. The user might be using an inter­ac­tive appli­ca­tion, and we real­ly don’t want to inter­rupt that expe­ri­ence with a&nbsp;<kbd>404 error</kbd>&nbsp;just because they ven­tured to an area of spot­ty or no cel­lu­lar coverage.</p></div></div><div><div><blockquote>Imagine someone is using your online store, and they’ve added a bunch of items to their cart, and tries to check out. Do you want to lose that sale just because they have poor reception?</blockquote></div></div><div><div><p>So what we need is a&nbsp;way to cache vis­it­ed pages/​resources, and also pre-cache pages/​resources they haven’t vis­it­ed, but we think they’ll be like­ly to.&nbsp;It’s even pos­si­ble to do fun things like let them fill out a&nbsp;mul­ti-page form offline, and sync that up with our serv­er once they have an Inter­net con­nec­tion&nbsp;again.</p><p><a href=\"https://developers.google.com/web/fundamentals/getting-started/primers/service-workers\" target=\"_blank\" rel=\"noreferrer noopener\">Ser­vice­Work­ers</a>&nbsp;lets us do all of this and more. What’s pre­sent­ed here is just a&nbsp;small sub­set of what you can do with Ser­vice­Work­ers, and is based on the Fil­a­ment Group’s&nbsp;<a href=\"https://www.filamentgroup.com/lab/modernizing-delivery.html\" target=\"_blank\" rel=\"noreferrer noopener\">Mod­ern­iz­ing our Pro­gres­sive Enhance­ment Deliv­ery</a>&nbsp;arti­cle (which in turn is based on sev­er­al oth­er&nbsp;works).</p></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/service-workers-and-offline-browsing#sent-into-the-coal-mine\"><i></i><span>LINK</span></a></span>SENT INTO THE COAL MINE</h3><p>Patrick Har­ring­ton of&nbsp;<a href=\"https://mildlygeeky.com/\" target=\"_blank\" rel=\"noreferrer noopener\">Mild​lyGeeky​.com</a>&nbsp;is a&nbsp;friend&nbsp;<span>&amp;</span>&nbsp;col­league of mine, but I&nbsp;swear, he treats me like a&nbsp;canary in a&nbsp;coal mine. He point­ed out the Fil­a­ment Group arti­cle to me (which I’d already perused), know­ing full well that by doing so, it’d cause me to&nbsp;<span></span>​<span>“</span>go first” and try to get Ser­vice­Work­ers&nbsp;going.</p></div></div><div><div><section><div><figure><div><div data-expand=\"-1\"><picture><source data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/canary-coalmine.jpg.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/canary-coalmine.jpg.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/canary-coalmine.jpg.webp 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/canary-coalmine.jpg.webp 368w\" type=\"image/webp\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/canary-coalmine.jpg.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/canary-coalmine.jpg.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/canary-coalmine.jpg.webp 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/canary-coalmine.jpg.webp 368w\"><img src=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQAAAQABAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADAREAAhEBAxEB%2F8QAFQABAQAAAAAAAAAAAAAAAAAAAwT%2FxAAeEAACAgICAwAAAAAAAAAAAAABAgADERIEMSEygf%2FEABYBAQEBAAAAAAAAAAAAAAAAAAMCBP%2FEABkRAQEBAQEBAAAAAAAAAAAAAAECABEDEv%2FaAAwDAQACEQMRAD8AJW45dXtyVHYDAS%2FRoo5ogEcHINT0DR12znXHkfYEFT6NL3NXyxwNNf6rNF4Yxp2Ievf%2F2Q%3D%3D\" data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/canary-coalmine.jpg 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/canary-coalmine.jpg 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/canary-coalmine.jpg 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/canary-coalmine.jpg 368w\" data-lowsrc=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQAAAQABAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADAREAAhEBAxEB%2F8QAFQABAQAAAAAAAAAAAAAAAAAAAwT%2FxAAeEAACAgICAwAAAAAAAAAAAAABAgADERIEMSEygf%2FEABYBAQEBAAAAAAAAAAAAAAAAAAMCBP%2FEABkRAQEBAQEBAAAAAAAAAAAAAAECABEDEv%2FaAAwDAQACEQMRAD8AJW45dXtyVHYDAS%2FRoo5ogEcHINT0DR12znXHkfYEFT6NL3NXyxwNNf6rNF4Yxp2Ievf%2F2Q%3D%3D\" alt=\"Canary Coalmine\" height=\"auto\" width=\"100%\" sizes=\"100vw\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/canary-coalmine.jpg 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/canary-coalmine.jpg 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/canary-coalmine.jpg 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/canary-coalmine.jpg 368w\"></picture></div></div></figure></div></section></div></div><div><div><p>He knows me well enough that he can just drop a&nbsp;hint of some­thing inter­est­ing, caus­ing me to dive in head-first — and if the canary lives, then he’ll ven­ture down,&nbsp;too.</p></div></div><div><div><blockquote>I’m happy to report that the canary lived!</blockquote></div></div><div><div><p>Stand­ing on the shoul­ders of giants (read: using their code), I&nbsp;was able to get Ser­vice­Work­ers up and work­ing pret­ty quick­ly on this very web­site. It’s impor­tant to note that Ser­vice­Work­ers are fair­ly new, and cur­rent­ly are&nbsp;<a href=\"http://caniuse.com/#search=ServiceWorkers\" target=\"_blank\" rel=\"noreferrer noopener\">only sup­port­ed</a>&nbsp;by Chrome, Fire­Fox, Opera, and Android browsers. How­ev­er, Microsoft is&nbsp;<a href=\"https://developer.microsoft.com/en-us/microsoft-edge/platform/status/serviceworker/\" target=\"_blank\" rel=\"noreferrer noopener\">work­ing on sup­port</a>, and even Apple may be get­ting on&nbsp;board.</p><p>The nice thing about Ser­vice­Work­ers is that they degrade grace­ful­ly; if the client web brows­er doesn’t sup­port them, no big­gy. They just don’t reap the ben­e­fits, and your web­site con­tin­ues to work normally.</p><p>The&nbsp;<a href=\"https://chrome.google.com/webstore/detail/lighthouse/blipmdconlkpinefehnmjammfjpmpbjk?hl=en\" target=\"_blank\" rel=\"noreferrer noopener\">Light­house</a>&nbsp;Chrome exten­sion can be used to&nbsp;test your web­site to val­i­date your offline brows­ing imple­men­ta­tion, amongst oth­er things.</p></div></div><div><div><section><div><figure><div><div data-expand=\"-1\"><picture><source data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x797_crop_center-center_100_line/lighthouse-report.png.webp 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x659_crop_center-center_100_line/lighthouse-report.png.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x510_crop_center-center_100_line/lighthouse-report.png.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x383_crop_center-center_100_line/lighthouse-report.png.webp 576w\" type=\"image/webp\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x797_crop_center-center_100_line/lighthouse-report.png.webp 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x659_crop_center-center_100_line/lighthouse-report.png.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x510_crop_center-center_100_line/lighthouse-report.png.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x383_crop_center-center_100_line/lighthouse-report.png.webp 576w\"><img src=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQIAOQA5AAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAKABADASIAAhEBAxEB%2F8QAFgABAQEAAAAAAAAAAAAAAAAAAwQG%2F8QAIBAAAQMEAgMAAAAAAAAAAAAAAQAEEQIDBTISEyJxkf%2FEABUBAQEAAAAAAAAAAAAAAAAAAAAB%2F8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAR%2F9oADAMBAAIRAxEAPwDXtsQzx%2FK42t9dVQg%2BRM%2FVXbJIiQQkr1KJtqfaqq6y%2F9k%3D\" data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x797_crop_center-center_100_line/lighthouse-report.png 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x659_crop_center-center_100_line/lighthouse-report.png 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x510_crop_center-center_100_line/lighthouse-report.png 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x383_crop_center-center_100_line/lighthouse-report.png 576w\" data-lowsrc=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQIAOQA5AAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAKABADASIAAhEBAxEB%2F8QAFgABAQEAAAAAAAAAAAAAAAAAAwQG%2F8QAIBAAAQMEAgMAAAAAAAAAAAAAAQAEEQIDBTISEyJxkf%2FEABUBAQEAAAAAAAAAAAAAAAAAAAAB%2F8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAR%2F9oADAMBAAIRAxEAPwDXtsQzx%2FK42t9dVQg%2BRM%2FVXbJIiQQkr1KJtqfaqq6y%2F9k%3D\" alt=\"Lighthouse Report\" height=\"auto\" width=\"1200\" sizes=\"100vw\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x797_crop_center-center_100_line/lighthouse-report.png 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x659_crop_center-center_100_line/lighthouse-report.png 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x510_crop_center-center_100_line/lighthouse-report.png 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x383_crop_center-center_100_line/lighthouse-report.png 576w\"></picture></div></div></figure><figcaption><p>Light­house test­ing tool results for nys​tu​dio<span>107</span>​.com</p></figcaption></div></section></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/service-workers-and-offline-browsing#so-exactly-what-is-a-service-worker\"><i></i><span>LINK</span></a></span>SO EXACTLY WHAT IS A SERVICEWORKER?</h3><p>Ser­vice­Work­ers are writ­ten in JavaScript, and you reg­is­ter them with the brows­er when your web­page loads. They don’t run in the con­text of your web­page, but rather they can be thought of as a&nbsp;script that runs in anoth­er (hid­den) brows­er tab, and act as a&nbsp;go-between for your web­page and the Internet.</p><p>This is pret­ty pow­er­ful stuff, as you can inter­cept or mod­i­fy net­work requests, so&nbsp;<kbd>https</kbd>&nbsp;is&nbsp;<em>required</em>&nbsp;to uti­lize them, to mit­i­gate against&nbsp;<span></span>​<span>“</span>man in the mid­dle” attack vec­tors. They can be used for many oth­er things in addi­tion to&nbsp;<a href=\"https://developers.google.com/web/fundamentals/instant-and-offline/offline-cookbook/\" target=\"_blank\" rel=\"noreferrer noopener\">offline brows­ing&nbsp;<span>&amp;</span>&nbsp;instant load­ing</a>, includ­ing&nbsp;<a href=\"https://developers.google.com/web/updates/2015/03/push-notifications-on-the-open-web\" target=\"_blank\" rel=\"noreferrer noopener\">push noti­fi­ca­tions</a>,&nbsp;<a href=\"https://developers.google.com/web/updates/2015/12/background-sync\" target=\"_blank\" rel=\"noreferrer noopener\">back­ground sync</a>, and so&nbsp;on.</p><p>The cool thing about Ser­vice­Work­ers (and what makes them far more flex­i­ble than the now-dep­re­cat­ed Appli­ca­tion­Cache) is that they don’t define a&nbsp;caching sys­tem, they just&nbsp;<em>pro­vide an&nbsp;<span>API</span></em>&nbsp;that can be used to cre­ate one. This makes them incred­i­bly flex­i­ble and powerful.</p><p>When your web­page loads for the first time, all of the resources load nor­mal­ly, and the Ser­vice­Work­er is reg­is­tered as being used for all of the requests that fall under the&nbsp;<em>scope</em>&nbsp;that you spec­i­fy. Here’s what the code looks like to do&nbsp;that:</p></div></div><div><div><section><div><pre><code><span>if</span> <span>(</span><span>'serviceWorker'</span> <span>in</span> navigator<span>)</span> <span>{</span>\n    window<span>.</span><span>addEventListener</span><span>(</span><span>'load'</span><span>,</span> <span>function</span><span>(</span><span>)</span> <span>{</span>\n        navigator<span>.</span>serviceWorker<span>.</span><span>register</span><span>(</span><span>'/sw.js'</span><span>,</span> <span>{</span>\n            scope<span>:</span> <span>\"/\"</span>\n        <span>}</span><span>)</span><span>.</span><span>then</span><span>(</span><span>function</span><span>(</span>registration<span>)</span> <span>{</span>\n            <span>// Registration was successful</span>\n            console<span>.</span><span>log</span><span>(</span><span>'ServiceWorker registration successful with scope: '</span><span>,</span> registration<span>.</span>scope<span>)</span><span>;</span>\n            <span>// Trim the caches on load</span>\n            navigator<span>.</span>serviceWorker<span>.</span>controller <span>&amp;&amp;</span> navigator<span>.</span>serviceWorker<span>.</span>controller<span>.</span><span>postMessage</span><span>(</span><span>{</span>\n                command<span>:</span> <span>\"trimCaches\"</span>\n            <span>}</span><span>)</span><span>;</span>\n       <span>}</span><span>)</span><span>.</span><span>catch</span><span>(</span><span>function</span><span>(</span>err<span>)</span> <span>{</span>\n            <span>// registration failed :(</span>\n            console<span>.</span><span>log</span><span>(</span><span>'ServiceWorker registration failed: '</span><span>,</span> err<span>)</span><span>;</span>\n        <span>}</span><span>)</span><span>;</span>\n    <span>}</span><span>)</span><span>;</span>\n<span>}</span></code></pre><aside><h5><i></i>&nbsp;register-service-worker.js</h5></aside></div></section></div></div><div><div><p>In the exam­ple above,&nbsp;<kbd>sw.js</kbd>&nbsp;is our Ser­vice­Work­er script. If the brows­er sup­ports Ser­vice­Work­ers, after the web­page has loaded, we attempt to reg­is­ter it with the brows­er. If it suc­ceeds we send a&nbsp;mes­sage to the con­sole, and then&nbsp;<em>post</em>&nbsp;a&nbsp;mes­sage to our ser­vice work­er to send it the&nbsp;<kbd>trimCaches</kbd>command.</p><p>In this exam­ple, we don’t&nbsp;<em>need</em>&nbsp;to explic­it­ly declare the scope our ser­vice work­er should han­dle requests from, because by default it uses the same scope as the loca­tion of our script, which is at the serv­er root. This means that it can han­dle&nbsp;<em>all</em>&nbsp;requests from the website.</p><p>How­ev­er if our script was locat­ed in, say,&nbsp;<kbd>/js/sw.js</kbd>&nbsp;that would give it an implic­it scope of&nbsp;<kbd>/js/</kbd>&nbsp;so it would only han­dle requests from the&nbsp;<kbd>/js/</kbd>&nbsp;direc­to­ry (and every­thing below it). So I&nbsp;decid­ed to explic­it­ly declare it, for clarity’s sake.</p><p>Now that the ser­vice work­er has been reg­is­tered, any fur­ther requests to our domain that fall under the&nbsp;<em>scope</em>&nbsp;we spec­i­fied&nbsp;will be han­dled by it. Our web­page asks for, say,&nbsp;<kbd>site.combined.min.css</kbd>&nbsp;via a&nbsp;<kbd>&lt;link&gt;</kbd>&nbsp;tag, and what hap­pens is our Ser­vice­Work­er gets a&nbsp;chance to field the request, and maybe do some­thing dif­fer­ent with&nbsp;it.</p></div></div><div><div><blockquote>In this context, think of a ServiceWorker as traffic cop that sits between your webpage, and the Internet, deciding what comes and goes.</blockquote></div></div><div><div><p>Using the&nbsp;<a href=\"https://www.filamentgroup.com/sw.js\" target=\"_blank\" rel=\"noreferrer noopener\">Fil­a­ment Group code</a>&nbsp;(which is based on&nbsp;<a href=\"https://www.smashingmagazine.com/2016/02/making-a-service-worker/\" target=\"_blank\" rel=\"noreferrer noopener\">Lyza Dan­ger Gard­ner</a>&nbsp;<span>&amp;</span>&nbsp;<a href=\"https://adactio.com/journal/11730\" target=\"_blank\" rel=\"noreferrer noopener\">Jere­my Keith’s</a>&nbsp;code)&nbsp;as a&nbsp;basis, we spec­i­fy the pages we want to be pre-cached:</p></div></div><div><div><section><div><pre><code><span>const</span> offlinePages <span>=</span> <span>[</span>\n  <span>'/blog/index'</span><span>,</span>\n  <span>'/offline'</span><span>,</span>\n  <span>'/'</span>\n<span>]</span><span>;</span></code></pre></div></section></div></div><div><div><p>And we spec­i­fy the sta­t­ic resources we want pre-cached:</p></div></div><div><div><section><div><pre><code><span>const</span> staticAssets <span>=</span> <span>[</span>\n  <span>'{{ baseUrl }}js/lazysizes.min.js'</span><span>,</span>\n  <span>'{{ baseUrl }}js/prism.min.js'</span><span>,</span>\n  <span>'{{ baseUrl }}js/system.min.js'</span><span>,</span>\n  <span>'{{ baseUrl }}js/vue.min.js'</span><span>,</span>\n  <span>'{{ baseUrl }}js/vue-resource.min.js'</span><span>,</span>\n\n  <span>'{{ baseUrl }}css/site.combined.min.css'</span><span>,</span>\n\n  <span>'{{ baseUrl }}fonts/esfera-webfont.woff2'</span><span>,</span>\n  <span>'{{ baseUrl }}fonts/brandon-regular-webfont.woff2'</span><span>,</span>\n  <span>'{{ baseUrl }}fonts/brandon-bold-webfont.woff2'</span><span>,</span>\n  <span>'{{ baseUrl }}fonts/brandon-regular-italic-webfont.woff2'</span><span>,</span>\n  <span>'{{ baseUrl }}fonts/fontello.woff2'</span><span>,</span>\n  <span>'{{ baseUrl }}fonts/OperatorMonoSSm-Book.woff2'</span><span>,</span>\n  <span>'{{ baseUrl }}fonts/OperatorMonoSSm-BookItalic.woff2'</span><span>,</span>\n\n  <span>'/api/blog.json'</span><span>,</span>\n<span>]</span><span>;</span></code></pre></div></section></div></div><div><div><p>Note that the imple­men­ta­tion used here is just one of many pos­si­ble imple­men­ta­tions; your Ser­vice­Work­er lis­tens to events, and can imple­ment a&nbsp;caching sys­tem (or some­thing else, for that mat­ter) how­ev­er it&nbsp;wants.</p><p>The&nbsp;<kbd>offline</kbd>&nbsp;page just spec­i­fies a&nbsp;fall­back page to use if they are offline, but they haven’t vis­it­ed any pages, so noth­ing is in the&nbsp;cache.</p><p>These dec­la­ra­tions cause our Ser­vice­Work­er to request all of the&nbsp;<kbd>offlinePages</kbd>&nbsp;<span>&amp;</span>&nbsp;<kbd>staticAssets</kbd>&nbsp;when our page loads, even if it didn’t request them explic­it­ly. These requests hap­pen asyn­chro­nous­ly, after our page is loaded, so they don’t impact the page&nbsp;load.<br></p><p>This ensures that all of the con­tent we we want avail­able when our site is offline will be cached local­ly. This also ensures that any­thing we think peo­ple will want to load soon will be instant­ly loaded from our cache. Here’s what it looks&nbsp;like:<br></p></div></div><div><div><section><div><figure><div><div data-expand=\"-1\"><picture><source data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x824_crop_center-center_100_line/service-worker-page-waterfall.png.webp 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x681_crop_center-center_100_line/service-worker-page-waterfall.png.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x527_crop_center-center_100_line/service-worker-page-waterfall.png.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x395_crop_center-center_100_line/service-worker-page-waterfall.png.webp 576w\" type=\"image/webp\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x824_crop_center-center_100_line/service-worker-page-waterfall.png.webp 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x681_crop_center-center_100_line/service-worker-page-waterfall.png.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x527_crop_center-center_100_line/service-worker-page-waterfall.png.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x395_crop_center-center_100_line/service-worker-page-waterfall.png.webp 576w\"><img src=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQIAOQA5AAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAKABADASIAAhEBAxEB%2F8QAFgABAQEAAAAAAAAAAAAAAAAAAQIG%2F8QAHBABAAMAAgMAAAAAAAAAAAAAAQACEQMhEjFx%2F8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH%2FxAAVEQEBAAAAAAAAAAAAAAAAAAAAAf%2FaAAwDAQACEQMRAD8A2tL35R1iWtx55qfPUUA6MkWNze4WP%2F%2FZ\" data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x824_crop_center-center_100_line/service-worker-page-waterfall.png 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x681_crop_center-center_100_line/service-worker-page-waterfall.png 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x527_crop_center-center_100_line/service-worker-page-waterfall.png 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x395_crop_center-center_100_line/service-worker-page-waterfall.png 576w\" data-lowsrc=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQIAOQA5AAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAKABADASIAAhEBAxEB%2F8QAFgABAQEAAAAAAAAAAAAAAAAAAQIG%2F8QAHBABAAMAAgMAAAAAAAAAAAAAAQACEQMhEjFx%2F8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH%2FxAAVEQEBAAAAAAAAAAAAAAAAAAAAAf%2FaAAwDAQACEQMRAD8A2tL35R1iWtx55qfPUUA6MkWNze4WP%2F%2FZ\" alt=\"Service Worker Page Waterfall\" height=\"auto\" width=\"1200\" sizes=\"100vw\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x824_crop_center-center_100_line/service-worker-page-waterfall.png 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x681_crop_center-center_100_line/service-worker-page-waterfall.png 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x527_crop_center-center_100_line/service-worker-page-waterfall.png 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x395_crop_center-center_100_line/service-worker-page-waterfall.png 576w\"></picture></div></div></figure><figcaption><p>Ser­vice­Work­er page load waterfall</p></figcaption></div></section></div></div><div><div><p>Every­thing inside the orange box was loaded by our Ser­vice­Work­er, after our page was ful­ly loaded. Sub­se­quent requests go through the Ser­vice­Work­er, so if the per­son goes offline, all of these pages and resources will be avail­able. And pages we think they are like­ly to vis­it will also be instant­ly loaded from the cache, whether they are online or&nbsp;offline.</p><p>In addi­tion to ensur­ing that the pages&nbsp;<span>&amp;</span>&nbsp;assets we spec­i­fy are cached, our Ser­vice­Work­er also ensures that any pages the user vis­its are cached, too. We can take our site offline with the Chrome devel­op­er tools to sim­u­late what happens:</p></div></div><div><div><section><div><figure><div><div data-expand=\"-1\"><picture><source data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x550_crop_center-center_100_line/service-worker-offline.png.webp 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x455_crop_center-center_100_line/service-worker-offline.png.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x352_crop_center-center_100_line/service-worker-offline.png.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x264_crop_center-center_100_line/service-worker-offline.png.webp 576w\" type=\"image/webp\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x550_crop_center-center_100_line/service-worker-offline.png.webp 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x455_crop_center-center_100_line/service-worker-offline.png.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x352_crop_center-center_100_line/service-worker-offline.png.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x264_crop_center-center_100_line/service-worker-offline.png.webp 576w\"><img src=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQIAOQA5AAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAHABADASIAAhEBAxEB%2F8QAFgABAQEAAAAAAAAAAAAAAAAAAAIG%2F8QAGhAAAwADAQAAAAAAAAAAAAAAAAECERIhE%2F%2FEABQBAQAAAAAAAAAAAAAAAAAAAAD%2FxAAUEQEAAAAAAAAAAAAAAAAAAAAA%2F9oADAMBAAIRAxEAPwDa%2BkOW9VwvMpKlK6AB%2F9k%3D\" data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x550_crop_center-center_100_line/service-worker-offline.png 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x455_crop_center-center_100_line/service-worker-offline.png 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x352_crop_center-center_100_line/service-worker-offline.png 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x264_crop_center-center_100_line/service-worker-offline.png 576w\" data-lowsrc=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQIAOQA5AAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAHABADASIAAhEBAxEB%2F8QAFgABAQEAAAAAAAAAAAAAAAAAAAIG%2F8QAGhAAAwADAQAAAAAAAAAAAAAAAAECERIhE%2F%2FEABQBAQAAAAAAAAAAAAAAAAAAAAD%2FxAAUEQEAAAAAAAAAAAAAAAAAAAAA%2F9oADAMBAAIRAxEAPwDa%2BkOW9VwvMpKlK6AB%2F9k%3D\" alt=\"Service Worker Offline\" height=\"auto\" width=\"1200\" sizes=\"100vw\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x550_crop_center-center_100_line/service-worker-offline.png 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x455_crop_center-center_100_line/service-worker-offline.png 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x352_crop_center-center_100_line/service-worker-offline.png 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x264_crop_center-center_100_line/service-worker-offline.png 576w\"></picture></div></div></figure></div></section></div></div><div><div><p>Notice that the assets are&nbsp;<em>(from Ser­vice­Work­er)</em>&nbsp;and the&nbsp;<em>Time</em>&nbsp;is very quick. We can now browse any of the pages we’ve already vis­it­ed — or that we explic­it­ly cached — even when offline, rather than get­ting the dread­ed dinosaur:</p></div></div><div><div><section><div><figure><div><div data-expand=\"-1\"><picture><source data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x498_crop_center-center_100_line/no-internet-connection.png.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x374_crop_center-center_100_line/no-internet-connection.png.webp 576w\" type=\"image/webp\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x498_crop_center-center_100_line/no-internet-connection.png.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x374_crop_center-center_100_line/no-internet-connection.png.webp 576w\"><img src=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQIAOQA5AAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAKABADASIAAhEBAxEB%2F8QAFgABAQEAAAAAAAAAAAAAAAAAAgEG%2F8QAGxAAAgIDAQAAAAAAAAAAAAAAAQIAERMhMWH%2FxAAUAQEAAAAAAAAAAAAAAAAAAAAA%2F8QAFBEBAAAAAAAAAAAAAAAAAAAAAP%2FaAAwDAQACEQMRAD8A2pfGzC9k3uzGrMTvnglPYoH%2F2Q%3D%3D\" data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x498_crop_center-center_100_line/no-internet-connection.png 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x374_crop_center-center_100_line/no-internet-connection.png 576w\" data-lowsrc=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQIAOQA5AAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAKABADASIAAhEBAxEB%2F8QAFgABAQEAAAAAAAAAAAAAAAAAAgEG%2F8QAGxAAAgIDAQAAAAAAAAAAAAAAAQIAERMhMWH%2FxAAUAQEAAAAAAAAAAAAAAAAAAAAA%2F8QAFBEBAAAAAAAAAAAAAAAAAAAAAP%2FaAAwDAQACEQMRAD8A2pfGzC9k3uzGrMTvnglPYoH%2F2Q%3D%3D\" alt=\"No Internet Connection\" height=\"auto\" width=\"768\" sizes=\"100vw\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x498_crop_center-center_100_line/no-internet-connection.png 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x374_crop_center-center_100_line/no-internet-connection.png 576w\"></picture></div></div></figure><figcaption><p>Offli­neosaur</p></figcaption></div></section></div></div><div><div><p>We can even spec­i­fy an&nbsp;<span></span>​<span>“</span>offline” image to swap in (instead of an ugly bro­ken image link) for the case where a&nbsp;page is cached, but the image on it is not (per­haps it was&nbsp;<a href=\"https://nystudio107.com/blog/creating-optimized-images-in-craft-cms\">lazi­ly loaded</a>). As web­pages become more and more webapp-ish, it’s nat­ur­al that we’d want to be able to emu­late the offline usabil­i­ty of native apps,&nbsp;too.</p></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/service-workers-and-offline-browsing#route-map-plugin\"><i></i><span>LINK</span></a></span>ROUTE MAP PLUGIN</h3><p>I’ve cre­at­ed a&nbsp;plu­g­in for Craft&nbsp;<span>CMS</span>&nbsp;called&nbsp;<a href=\"https://github.com/nystudio107/routemap\" target=\"_blank\" rel=\"noreferrer noopener\">Route Map</a>&nbsp;that makes work­ing with Ser­vice­Work­ers even easier.</p><p>Let’s say for this web­site we want to pre-cache the lat­est&nbsp;<span>9</span>&nbsp;blog posts, so that if some­one loads any page on the web­site, and then goes offline or los­es their cel­lu­lar con­nec­tion, they can still read our articles.</p><p>Using the Route Map plu­g­in, we can just do&nbsp;this:</p></div></div><div><div><section><div><pre><code><span>{</span><span>%</span> <span>set</span> blogEntries <span>=</span> craft<span>.</span>routeMap<span>.</span><span>getSectionUrls</span><span>(</span><span>'blog'</span><span>,</span> <span>{</span><span>'limit'</span><span>:</span> <span>9</span><span>}</span><span>)</span> <span>%</span><span>}</span>\n\n<span>(</span><span>function</span><span>(</span><span>)</span><span>{</span>\n<span>'use strict'</span><span>;</span>\n\n<span>// Constants for the cache size</span>\n<span>const</span> maxPagesCache <span>=</span> <span>30</span><span>;</span>\n<span>const</span> maxStaticAssetsCache <span>=</span> <span>100</span><span>;</span>\n\n<span>// borrowing heavily from adactio's sw patterns here... Thanks JK!</span>\n\n<span>const</span> version <span>=</span> <span>'nys1.1::'</span><span>;</span>\n<span>const</span> staticCacheName <span>=</span> version <span>+</span> <span>'static'</span><span>;</span>\n<span>const</span> pagesCacheName <span>=</span> version <span>+</span> <span>'pages'</span><span>;</span>\n<span>const</span> imagesCacheName <span>=</span> version <span>+</span> <span>'images'</span><span>;</span>\n<span>const</span> offlinePages <span>=</span> <span>[</span>\n  <span>'/blog/index'</span><span>,</span>\n<span>{</span><span>%</span> <span>for</span> blogEntry <span>in</span> blogEntries <span>%</span><span>}</span>\n    <span>'{{ blogEntry }}'</span><span>,</span>\n<span>{</span><span>%</span> endfor <span>%</span><span>}</span>\n  <span>'/offline'</span><span>,</span>\n  <span>'/'</span>\n<span>]</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;Service Worker partials</h5></aside></div></section></div></div><div><div><p>The&nbsp;<kbd>{% set blogEntries = craft.routeMap.getSectionUrls('blog', {'limit': 9}) %}</kbd>&nbsp;fetch­es the URLs to the last&nbsp;<span>9</span>&nbsp;blog entries in a&nbsp;per­for­mant, cached man­ner, and then we add them to our offline pages&nbsp;via:</p></div></div><div><div><section><div><pre><code><span>{</span><span>%</span> <span>for</span> blogEntry <span>in</span> blogEntries <span>%</span><span>}</span>\n    <span>'{{ blogEntry }}'</span><span>,</span>\n<span>{</span><span>%</span> endfor <span>%</span><span>}</span></code></pre><aside><h5><i></i>&nbsp;Pre-caching Blog Entries</h5></aside></div></section></div></div><div><div><p>Well, so what? You could do that already just using&nbsp;<kbd>craft.entries.section('blog').limit(9)</kbd>&nbsp;right? Well, we can also use Route Map to extract the Assets uses on those pages, whether in Assets fields or embed­ded in Matrix/​Neo blocks.</p><p>That way we could also pre-cache any images need­ed for those pages with&nbsp;<kbd>craft.routeMap.getUrlAssetUrls</kbd>, too:</p></div></div><div><div><section><div><pre><code><span>const</span> staticAssets <span>=</span> <span>[</span>\n<span>{</span><span>%</span> <span>for</span> blogEntry <span>in</span> blogEntries <span>%</span><span>}</span>\n        <span>{</span><span>%</span><span>-</span> <span>set</span> assetUrls <span>=</span> craft<span>.</span>routeMap<span>.</span><span>getUrlAssetUrls</span><span>(</span>blogEntry<span>)</span> <span>-</span><span>%</span><span>}</span>\n        <span>{</span><span>%</span><span>-</span> <span>for</span> assetUrl <span>in</span> assetUrls <span>-</span><span>%</span><span>}</span>\n            <span>'{{ assetUrl }}'</span><span>,</span>\n        <span>{</span><span>%</span> endfor <span>-</span><span>%</span><span>}</span>\n<span>{</span><span>%</span> endfor <span>%</span><span>}</span>\n  <span>'{{ baseUrl }}js/lazysizes.min{{staticAssetsVersion}}.js'</span><span>,</span>\n  <span>'{{ baseUrl }}js/prism.min{{staticAssetsVersion}}.js'</span><span>,</span>\n  <span>'{{ baseUrl }}js/vue.min{{staticAssetsVersion}}.js'</span><span>,</span>\n  <span>'{{ baseUrl }}js/vue-resource.min{{staticAssetsVersion}}.js'</span><span>,</span>\n\n  <span>'{{ baseUrl }}css/site.combined.min{{staticAssetsVersion}}.css'</span><span>,</span>\n\n  <span>'{{ baseUrl }}fonts/esfera-webfont.woff2'</span><span>,</span>\n  <span>'{{ baseUrl }}fonts/brandon-regular-webfont.woff2'</span><span>,</span>\n  <span>'{{ baseUrl }}fonts/brandon-bold-webfont.woff2'</span><span>,</span>\n  <span>'{{ baseUrl }}fonts/brandon-regular-italic-webfont.woff2'</span><span>,</span>\n  <span>'{{ baseUrl }}fonts/fontello.woff2'</span><span>,</span>\n  <span>'{{ baseUrl }}fonts/OperatorMonoSSm-Book.woff2'</span><span>,</span>\n  <span>'{{ baseUrl }}fonts/OperatorMonoSSm-BookItalic.woff2'</span><span>,</span>\n\n  <span>'/api/blog.json'</span><span>,</span>\n<span>]</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;Pre-caching Blog Entry Assets (images)</h5></aside></div></section></div></div><div><div><p>This make for some pow­er­ful offline brows­ing capabilities.</p><p>This exam­ple uses Twig to obtain the Entry URLs via the Route Map plu­g­in, but you could just as eas­i­ly&nbsp;<a href=\"https://github.com/nystudio107/routemap#using-route-map-via-xhr\" target=\"_blank\" rel=\"noreferrer noopener\">grab them via&nbsp;<span>XHR</span></a>.</p></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/service-workers-and-offline-browsing#wrapping-up\"><i></i><span>LINK</span></a></span>WRAPPING UP</h3><p>This is some seri­ous­ly cool stuff.&nbsp;And it bare­ly scratch­es the sur­face of what Ser­vice­Work­ers can do. I&nbsp;can’t wait to see what you do with&nbsp;them.</p><p>Want to know more about Ser­vice­Work­ers? The&nbsp;<a href=\"https://github.com/w3c/ServiceWorker/blob/master/explainer.md\" target=\"_blank\" rel=\"noreferrer noopener\">Ser­vice work­ers explained</a>&nbsp;and&nbsp;<a href=\"https://blog.dexecure.com/beyond-offline-other-interesting-use-cases-for-service-workers-2/\" target=\"_blank\" rel=\"noreferrer noopener\">Beyond Offline: Oth­er Inter­est­ing Use Cas­es with Ser­vice Work­ers</a>&nbsp;arti­cles&nbsp;are&nbsp;good places to&nbsp;start.</p><p>A real­ly good place to get start­ed with Ser­vice­Work­ers is also&nbsp;<a href=\"https://workboxjs.org/\" target=\"_blank\" rel=\"noreferrer noopener\">Work­box</a>&nbsp;from Google. It’s sort of a&nbsp;Ser­vice­Work­er con­struc­tion set, with cool things like caching, pre-caching, back­ground sync, and offline ana­lyt­ics. Pick the fea­tures you want, build, and&nbsp;go!</p><p><em>Tan­gent:</em>&nbsp;Astute read­ers will notice that we’re using Twig syn­tax in our&nbsp;<kbd>sw.js</kbd>&nbsp;script. I&nbsp;did this because I&nbsp;use a&nbsp;Con­tent Deliv­ery Net­work (<span>CDN</span>) for pro­duc­tion, but not for devel­op­ment, and I&nbsp;want­ed to make the Ser­vice­Work­er work in all envi­ron­ments. So I&nbsp;set up a&nbsp;route in&nbsp;Nginx:</p></div></div><div><div><section><div><pre><code># Pass our ServiceWorker through Craft so it can work as a template\n    location ^~ /sw.js {\n        try_files $uri $uri/ /index.php?$query_string;\n    }</code></pre></div></section></div></div><div><div><p>This caus­es requests for&nbsp;<kbd>/sw.js</kbd>&nbsp;to go through Craft, and placed the&nbsp;<kbd>sw.js</kbd>&nbsp;script in the&nbsp;<kbd>templates</kbd>&nbsp;direc­to­ry, so Craft will parse it as&nbsp;Twig.</p></div></div><aside><div><div><h3>FURTHER READING</h3><ul><li><a href=\"https://nystudio107.com/blog/multi-environment-config-for-craft-cms\">Multi-Environment Config for Craft CMS</a></li><li><a href=\"https://nystudio107.com/blog/tags-gone-wild\">Tags Gone Wild! Managing Tag Managers</a></li><li><a href=\"https://nystudio107.com/blog/local-development-with-vagrant-homestead\">Local Development with Vagrant / Homestead</a></li></ul></div></div></aside>","filePath":"pages/JavaScript/.md","_id":"nmhuUYYbRXYmfkpL"}
{"title":"12 Good JavaScript Shorthand Techniques","sourceUrl":"https://hackernoon.com/12-amazing-javascript-shorthand-techniques-fef16cdbc7fe","path":"JavaScript/JavaScript/","category":"JavaScript","tags":["JavaScript"," Shorthand Techniques"," Tips & Tricks"],"author":"Yuri Ramos","excerpt":"","dateCreated":1540823861825,"coverImage":"","type":"Post","frontmatter":"---\npath: 'JavaScript/'\ndate: 'undefined'\ntitle: '12 Good JavaScript Shorthand Techniques'\ntags: ['JavaScript','Shorthand Techniques','Tips and Tricks']\ncategory: 'JavaScript'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://hackernoon.com/12-amazing-javascript-shorthand-techniques-fef16cdbc7fe'\ntype: 'Post'\n---\n    ","htmlCode":"<div>\n    <div>\n        <div>\n            <p><span>Update 1: Due to a lot of polarizing comments (like loved or hated the article) I just\n                    want to be clear that shorthand are useful sometimes and sometimes not</span><span data-creator-ids=\"bf3027a42741\"><span>,</span></span><span>&nbsp;depends on which context, don’t\n                    take shorthand code as the best of any situation!</span></p>\n            <p>I’ve made this post as a vital source of reference for learning shorthand JavaScript coding\n                techniques that I have picked up over the years. To help you understand what it going on I have\n                included the longhand versions to give some coding perspective on the shorts.</p>\n            <h3>1. Null, Undefined, Empty Checks Shorthand</h3>\n            <p>When creating new variables sometimes you want to check if the variable you’re referencing\n                for it’s value isn’t null or undefined. I would say this is a very common check for JavaScript coders.</p>\n            <p><em>Longhand</em></p>\n            <p><code>if (variable1&nbsp;!== null || variable1&nbsp;!== undefined || variable1&nbsp;!== '') { let variable2 = variable1; }</code></p>\n            <p><em>Shorthand</em></p>\n            <pre><code><span>let</span> variable2 = variable1  || <span>''</span>;</code></pre>\n            <p>Don’t believe me? Test it yourself (paste into Chrome Dev Tools and click run):</p>\n            <pre><code>//null value example<br>let variable1 = null;<br><span>let</span> variable2 = variable1  || <span>''</span>;<br>console.log(variable2);<br>//output: <span>''</span> (an empty string)<br><br>//undefined value example<br>let variable1 = undefined;<br><span>let</span> variable2 = variable1  || <span>''</span>;<br>console.log(variable2);<br>//output: <span>''</span> (an empty string)<br><br>//normal value example<br>let variable1 = <span>'hi there'</span>;<br><span>let</span> variable2 = variable1  || <span>''</span>;<br>console.log(variable2);<br>//output: <span>'hi there'</span></code></pre>\n            <h3>2. Object Array Notation Shorthand</h3>\n            <p><em>Longhand</em></p>\n            <p><code>let a = new Array(); a[0] = \"myString1\"; a[1] = \"myString2\"; a[2] = \"myString3\";</code></p>\n            <p><em>Shorthand</em></p>\n            <p><code>let a = [\"myString1\", \"myString2\", \"myString3\"];</code></p>\n            <h3>3. If true&nbsp;… else Shorthand</h3>\n            <p>This is a great code saver for when you want to do something if the test is true, else do\n                something else by using the ternary operator.</p>\n            <p><em>Longhand:</em></p>\n            <pre><code><span>let</span> big;<br><span>if</span> (x &gt; <span>10</span>) {<br>    <span>big</span> = <span>true</span>;<br>}<br><span>else</span> {<br>    <span>big</span> = <span>false</span>;<br>}</code></pre>\n            <p><em>Shorthand:</em></p>\n            <pre><code><span>let</span> big = x &gt; <span>10</span> ? <span>true</span> : <span>false</span>;</code></pre>\n            <p>If you rely on some of the weak typing characteristics of JavaScript, this can also achieve\n                more concise code. For example, you could reduce the preceding code fragment to this:</p>\n            <pre><code><span>let</span> big = (x &gt; <span>10</span>);</code></pre>\n            <pre><code>//further nested examples<br>let x = 3,<br>big = (x &gt; 10) ? <span>\"greater 10\"</span> : (x &lt; 5) ? <span>\"less 5\"</span> : <span>\"between 5 and 10\"</span>;<br>console.log(big); //<span>\"less 5\"</span></code></pre>\n            <pre><code><span>let</span> x = 20,<br>big = {<span>true</span>: x&gt;10, <span>false</span> : x&lt; =10};<br>console.log(big); //<span>\"Object {true=true, false=false}\"</span></code></pre>\n            <h3>4. Declaring variables Shorthand</h3>\n            <p>I think this one is the most used abroad the community, even though we know that javascript\n                uses<a href=\"https://www.w3schools.com/js/js_hoisting.asp\" data-href=\"https://www.w3schools.com/js/js_hoisting.asp\" rel=\"noopener\" target=\"_blank\">&nbsp;hoist</a>&nbsp;to your variable declaration. It’s a nice\n                pattern declare all the variables at the top and inline.</p>\n            <p><em>Longhand:</em></p>\n            <pre><code><span>let</span> x;<br><span>let</span> y;<br><span>let</span> z = <span>3</span>;</code></pre>\n            <p><em>Shorthand:</em></p>\n            <pre><code><span>let</span> x, y, z=<span>3</span>;</code></pre>\n            <h3>5. Assignment Operators Shorthand</h3>\n            <p>Assignment operators are used to assign values to JavaScript variables and no doubt you use\n                arithmetic everyday without thinking (no matter what programming language you use Java, PHP, C++ it’s\n                essentially the same principle).</p>\n            <p><em>Longhand:</em></p>\n            <pre><code><span>x</span>=x+<span>1</span>;<br>minusCount = minusCount - <span>1</span>;<br>y=y*<span>10</span>;</code></pre>\n            <p><em>Shorthand:</em></p>\n            <pre><code>x++;<br>minusCount <span>--;</span><br><span>y*=10;</span></code></pre>\n            <p>Other shorthand operators, given that x=10 and y=5, the table below explains the assignment\n                operators:</p>\n            <pre><code>x += y /<span>/result x=15</span><br><span>x -= y /</span><span>/result x=5</span><br><span>x *= y /</span><span>/result x=50</span><br><span>x /</span>= y /<span>/result x=2</span><br><span>x %= y /</span><span>/result x=0</span></code></pre>\n            <h3>6. RegExp Object Shorthand</h3>\n            <p>Example to avoid using the RegExp object.</p>\n            <p><em>Longhand:</em></p>\n            <pre><code><span>var</span> re = <span>new</span> <span>RegExp</span>(<span>\"\\d+(.)+\\d+\"</span>,<span>\"igm\"</span>),<br>result = re.exec(<span>\"padding 01234 text text 56789 padding\"</span>);<br><span>console</span>.log(result); <span>//\"01234 text text 56789\"</span></code></pre>\n            <p><em>Shorthand:</em></p>\n            <pre><code><span>var</span> result = <span>/d+(.)+d+/igm</span>.exec(<span>\"padding 01234 text text 56789 padding\"</span>);<br><span>console</span>.log(result); <span>//\"01234 text text 56789\"</span></code></pre>\n            <h3>8. If Presence Shorthand</h3>\n            <p>This might be trivial, but worth a mention. When doing “if checks” assignment operators can\n                sometimes be ommited.</p>\n            <p>Longhand:</p>\n            <pre><code><span>if</span> (likeJavaScript === <span>true</span>)</code></pre>\n            <p>Shorthand:</p>\n            <pre><code><span>if</span> (likeJavaScript)</code></pre>\n            <p>Here is another example. If “c” is NOT equal to true, then do something.</p>\n            <p>Longhand:</p>\n            <pre><code><span>let</span> c;<br><span>if</span> ( c!= <span>true</span> ) {<br><span>// do something...</span><br><span>}</span></code></pre>\n            <p>Shorthand:</p>\n            <pre><code><span>let</span> c;<br><span>if</span> ( !c ) {<br><span>// do something...</span><br><span>}</span></code></pre>\n            <h3>9. Function Variable Arguments Shorthand</h3>\n            <p>Object literal shorthand can take a little getting used to, but seasoned developers usually\n                prefer it over a series of nested functions and variables. You can argue which technique is shorter,\n                but I enjoy using object literal notation as a clean substitute to functions as constructors.</p>\n            <p><em>Longhand:</em></p>\n            <pre><code><span><span>function</span> <span>myFunction</span>(<span> myString, myNumber, myObject, myArray, myBoolean </span>) </span>{<br>    <span>// do something...</span><br><span>}</span><br><span>myFunction( \"String\", 1, [], {}, true );</span></code></pre>\n            <p><em>Shorthand (looks long but only because I have console.log’s in there!):</em></p>\n            <pre><code><span><span>function</span> <span>myFunction</span>(<span></span>) </span>{<br>    <span>console</span>.log( <span>arguments</span>.length ); <span>// Returns 5</span><br><span>    for ( i = 0; i &lt; arguments.length; i++ ) {</span><br><span>        console.log( typeof arguments[i] ); // Returns string, number, object, object, boolean</span><br><span>    }</span><br><span>}</span><br><span>myFunction( \"String\", 1, [], {}, true );</span></code></pre>\n            <h3>10. charAt() Shorthand</h3>\n            <p>You can use the eval() function to do this but this bracket notation shorthand technique is\n                much cleaner than an evaluation, and you will win the praise of colleagues who once scoffed at your\n                amateur coding abilities!</p>\n            <p><em>Longhand:</em></p>\n            <pre><code><span>\"myString\"</span>.charAt(<span>0</span>);</code></pre>\n            <p><em>Shorthand:</em></p>\n            <pre><code><span>\"myString\"</span>[<span>0</span>]; <span>//</span> Returns <span>'m'</span></code></pre>\n            <h3>11. Short function&nbsp;calling</h3>\n            <p>Just like #1 you can use ternary operators to make function calling shorthand based on a\n                conditional.</p>\n            <p><em>Longhand:</em></p>\n            <pre><code><span><span>function</span> <span>x</span>(<span></span>) </span>{<span>console</span>.log(<span>'x'</span>)};<span><span>function</span> <span>y</span>(<span></span>) </span>{<span>console</span>.log(<span>'y'</span>)};<br><span>let</span> z = <span>3</span>;<br><span>if</span> (z == <span>3</span>) <br>{<br>    x();<br>} <span>else</span> <br>{<br>    y();<br>}</code></pre>\n            <p><em>Shorthand:</em></p>\n            <pre><span data-creator-ids=\"anon\"><code><span><span>function</span> <span>x</span>(<span></span>) </span>{<span>console</span>.log(<span>'x'</span>)};<span><span>function</span> <span>y</span>(<span></span>) </span>{<span>console</span>.log(<span>'y'</span>)};<span>let</span> z = <span>3</span>;<br>(z==<span>3</span>?x:y)(); <span>// Short version!</span></code></span></pre>\n            <h3>12. Decimal base exponents</h3>\n            <p>You may have seen this one around it’s essentially a fancy way to write without the zeros.\n                1e7 essentially means 1 followed by 7 zeros — it represents a decimal base (JS interprets as a float\n                type) equal to 10,000,000.</p>\n            <p><em>Longhand:</em></p>\n            <pre><code><span>for</span> (<span>let</span> i = <span>0</span>; i &lt; <span>10000</span>; i++) {</code></pre>\n            <p><em>Shorthand:</em></p>\n            <pre><code><span>for</span> (<span>let</span> i = <span>0</span>; i &lt; <span>1e4</span>; i++) {</code></pre>\n        </div>\n        <div data-paragraph-count=\"3\">\n            <figure data-scroll=\"native\">\n                <div></div>\n            </figure>\n        </div>\n    </div>\n</div>","filePath":"pages/JavaScript/.md","_id":"sbK2FgN5Uo8OOn4G","date":{"$$date":1542040871238},"dateUpdated":1542040871238}
{"date":{"$$date":1542212485654},"title":"How To Use the Switch Statement in JavaScript","sourceUrl":"https://www.digitalocean.com/community/tutorials/how-to-use-the-switch-statement-in-javascript","path":"JavaScript/JavaScript/JavaScript/","category":"JavaScript","tags":["JavaScript"," Switch"],"author":"Tania Rascia","excerpt":"","dateCreated":1542210289131,"coverImage":"","type":"Post","frontmatter":"---\npath: 'JavaScript/'\ndate: 'Wed Nov 14 2018 21:48:34 GMT+0530 (India Standard Time)'\ntitle: 'How To Use the Switch Statement in JavaScript'\ntags: ['JavaScript','Switch']\ncategory: 'JavaScript'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://www.digitalocean.com/community/tutorials/how-to-use-the-switch-statement-in-javascript'\ntype: 'Post'\n---\n    ","htmlCode":"<h3>Introduction</h3><p>Conditional statements are among the most useful and common features of all programming languages. \"<a href=\"https://www.digitalocean.com/community/tutorials/how-to-write-conditional-statements-in-javascript\">How To Write Conditional Statements in JavaScript</a>\" describes how to use the&nbsp;<code>if</code>,&nbsp;<code>else</code>, and&nbsp;<code>else if</code>keywords to control the flow of a program based on different conditions, which in JavaScript are often the result of user input.</p><p>In addition to&nbsp;<code>if...else</code>, JavaScript has a feature known as a&nbsp;<code>switch</code>&nbsp;statement.&nbsp;<code>switch</code>&nbsp;is a type of conditional statement that will evaluate an expression against multiple possible cases and execute one or more blocks of code based on matching cases. The&nbsp;<code>switch</code>&nbsp;statement is closely related to a conditional statement containing many&nbsp;<code>else if</code>&nbsp;blocks, and they can often be used interchangeably.</p><p>In this tutorial, we will learn how to use the&nbsp;<code>switch</code>&nbsp;statement, as well as how to use the related keywords&nbsp;<code>case</code>,&nbsp;<code>break</code>, and&nbsp;<code>default</code>. Finally, we'll go through how to use multiple cases in a&nbsp;<code>switch</code>&nbsp;statement.</p><div data-unique=\"switch\"></div><h2>Switch</h2><p>The&nbsp;<code>switch</code>&nbsp;statement evaluates an expression and executes code as a result of a matching case. At first it can look a bit intimidating, but the basic syntax is similar to that of an&nbsp;<code>if</code>&nbsp;statement. It will always be written with&nbsp;<code>switch () {}</code>, with parentheses containing the expression to test, and curly brackets containing the potential code to execute.</p><p>Below is an example of a&nbsp;<code>switch</code>&nbsp;statement with two&nbsp;<code>case</code>&nbsp;statements, and a fallback known as&nbsp;<code>default</code>.</p><pre><code><span>switch</span> (expression) {\n    <span>case</span> x:\n        <span>// execute case x code block</span>\n        <span>break</span>;\n    <span>case</span> y:\n        <span>// execute case y code block</span>\n        <span>break</span>;\n    <span>default</span>:\n        <span>// execute default code block</span>\n}\n</code></pre><p>Following the logic of the code block above, this is the sequence of events that will take place.</p><ul><li>The expression is evaluated</li><li>The first&nbsp;<code>case</code>,&nbsp;<code>x</code>, will be tested against the expression. If it matches, the code will execute, and the&nbsp;<code>break</code>&nbsp;keyword will end the&nbsp;<code>switch</code>&nbsp;block.</li><li>If it does not match,&nbsp;<code>x</code>&nbsp;will be skipped and the&nbsp;<code>y</code>&nbsp;case will be tested against the expression. If&nbsp;<code>y</code>matches the expression, the code will execute and exit out of the&nbsp;<code>switch</code>&nbsp;block.</li><li>If none of the cases match, the&nbsp;<code>default</code>&nbsp;code block will run.</li></ul><p>Let's make a working example of a&nbsp;<code>switch</code>&nbsp;statement following the syntax above. In this code block, we will find the current day of the week with the&nbsp;<code>new Date()</code>&nbsp;method, and&nbsp;<code>getDay()</code>&nbsp;to print a number corresponding to the current day.&nbsp;<code>1</code>&nbsp;stands for Monday, all the way through&nbsp;<code>7</code>&nbsp;which stands for Sunday. We'll start by setting up our variable.</p><pre><code><span>const</span> day = <span>new</span> <span>Date</span>().getDay();\n</code></pre><p>Using&nbsp;<code>switch</code>, we will send a message to the console each day of the week. The program will run in order from top to bottom looking for a match, and once one is found, the&nbsp;<code>break</code>&nbsp;command will halt the&nbsp;<code>switch</code>block from continuing to evaluate statements.</p><div title=\"week.js\">week.js</div><pre><code><span>// Set the current day of the week to a variable, with 1 being Monday and 7 being Sunday</span>\n<span>const</span> day = <span>new</span> <span>Date</span>().getDay();\n\n<span>switch</span> (day) {\n    <span>case</span> <span>1</span>:\n        console.log(<span>\"Happy Monday!\"</span>);\n        <span>break</span>;\n    <span>case</span> <span>2</span>:\n        console.log(<span>\"It's Tuesday. You got this!\"</span>);\n        <span>break</span>;\n    <span>case</span> <span>3</span>:\n        console.log(<span>\"Hump day already!\"</span>);\n        <span>break</span>;\n    <span>case</span> <span>4</span>:\n        console.log(<span>\"Just one more day 'til the weekend!\"</span>);\n        <span>break</span>;\n    <span>case</span> <span>5</span>:\n        console.log(<span>\"Happy Friday!\"</span>);\n        <span>break</span>;\n    <span>case</span> <span>6</span>:\n        console.log(<span>\"Have a wonderful Saturday!\"</span>);\n        <span>break</span>;\n    <span>case</span> <span>7</span>:\n        console.log(<span>\"It's Sunday, time to relax!\"</span>);\n        <span>break</span>;\n    <span>default</span>:\n        console.log(<span>\"Something went horribly wrong...\"</span>);\n}\n</code></pre><pre><code langs=\"\"><div title=\"Output\">Output</div>'Just one more day 'til the weekend!'\n</code></pre><p>This code was tested on a Thursday, which corresponds to&nbsp;<code>4</code>, therefore the console output was&nbsp;<code>Just one more day 'til the weekend!</code>. Depending on what day of the week you are testing the code, your output will be different. We have included a&nbsp;<code>default</code>&nbsp;block at the end to run in case of an error, which in this case should not happen as there are only 7 days of the week. We also could have, for example, only printed results for Monday to Friday, and the&nbsp;<code>default</code>&nbsp;block could have had the same message for the weekend.</p><p>If we had omitted the&nbsp;<code>break</code>&nbsp;keyword in each statement, none of the other&nbsp;<code>case</code>&nbsp;statements would have evaluated to true, but the program would have continued to check until it reached the end. In order to make our programs faster and more efficient, we include the&nbsp;<code>break</code>.</p><div data-unique=\"switch-ranges\"></div><h2>Switch Ranges</h2><p>There might be an occasion in which you will need to evaluate a range of values in a&nbsp;<code>switch</code>&nbsp;block, as opposed to a single value as in our example above. We can do this by setting our expression to&nbsp;<code>true</code>&nbsp;and doing an operation within each&nbsp;<code>case</code>&nbsp;statement.</p><p>To make this easier to understand, we will use a familiar example. In the&nbsp;<a href=\"https://www.digitalocean.com/community/tutorials/how-to-write-conditional-statements-in-javascript\">conditional statements</a>&nbsp;tutorial, we made a simple grading app which would take a number score and convert it to a letter grade, with the following requirements.</p><ul><li>Grade of 90 and above is an&nbsp;<span>A</span></li><li>Grade of 80 to 89 is a&nbsp;<span>B</span></li><li>Grade of 70 to 79 is a&nbsp;<span>C</span></li><li>Grade of 60 to 69 is a&nbsp;<span>D</span></li><li>Grade of 59 or below is an&nbsp;<span>F</span></li></ul><p>Now we can write that as a&nbsp;<code>switch</code>&nbsp;statement. Since we're checking a range, we will perform the operation in each&nbsp;<code>case</code>&nbsp;to check if each expression is evaluating to&nbsp;<code>true</code>&nbsp;then break out of the statement once the requirements for&nbsp;<code>true</code>&nbsp;have been satisfied.</p><div title=\"grades.js\">grades.js</div><pre><code><span>// Set the student's grade</span>\n<span>const</span> grade = <span>87</span>;\n\n<span>switch</span> (<span>true</span>) {\n    <span>// If score is 90 or greater</span>\n    <span>case</span> grade &gt;= <span>90</span>:\n        console.log(<span>\"A\"</span>);\n        <span>break</span>;\n    <span>// If score is 80 or greater</span>\n    <span>case</span> grade &gt;= <span>80</span>:\n        console.log(<span>\"B\"</span>);\n        <span>break</span>;\n    <span>// If score is 70 or greater</span>\n    <span>case</span> grade &gt;= <span>70</span>:\n        console.log(<span>\"C\"</span>);\n        <span>break</span>;\n    <span>// If score is 60 or greater</span>\n    <span>case</span> grade &gt;= <span>60</span>:\n        console.log(<span>\"D\"</span>);\n        <span>break</span>;\n    <span>// Anything 59 or below is failing</span>\n    <span>default</span>:\n        console.log(<span>\"F\"</span>);\n}\n</code></pre><pre><code langs=\"\"><div title=\"Output\">Output</div>'B'\n</code></pre><p>The expression in parentheses to be evaluated is&nbsp;<code>true</code>&nbsp;in this example. This means that any&nbsp;<code>case</code>&nbsp;that evaluates to&nbsp;<code>true</code>&nbsp;will be a match.</p><p>Just like with&nbsp;<code>else if</code>,&nbsp;<code>switch</code>&nbsp;is evaluated from top to bottom, and the first true match will be accepted. Therefore, even though our&nbsp;<code>grade</code>&nbsp;variable is&nbsp;<code>87</code>&nbsp;and therefore evaluates to&nbsp;<code>true</code>&nbsp;for C and D as well, the first match is B, which will be the output.</p><div data-unique=\"multiple-cases\"></div><h2>Multiple Cases</h2><p>You may encounter code in which multiple&nbsp;<code>case</code>s should have the same output. In order to accomplish this, you can use more than one&nbsp;<code>case</code>&nbsp;for each block of code.</p><p>In order to test this, we are going to make a small application matching the current month to the appropriate season. First, we will use the&nbsp;<code>new Date()</code>&nbsp;method to find a number corresponding to the current month, and apply that to the&nbsp;<code>month</code>&nbsp;variable.</p><pre><code><span>const</span> month = <span>new</span> <span>Date</span>().getMonth();\n</code></pre><p>The&nbsp;<code>new Date().getMonth()</code>&nbsp;method will output a number from&nbsp;<code>0</code>&nbsp;to&nbsp;<code>11</code>, with&nbsp;<code>0</code>&nbsp;being January and&nbsp;<code>11</code>being December. At the time of this publication, the month is September, which will correspond to&nbsp;<code>8</code>.</p><p>Our application will output the four seasons with the following specifications for simplicity:</p><ul><li><span>Winter</span>: January, February, and March</li><li><span>Spring</span>: April, May, and June</li><li><span>Summer</span>: July, August, and September</li><li><span>Autumn</span>: October, November, and December</li></ul><p>Below is our code.</p><div title=\"seasons.js\">seasons.js</div><pre><code>\n<span>// Get number corresponding to the current month, with 0 being January and 11 being December</span>\n<span>const</span> month = <span>new</span> <span>Date</span>().getMonth();\n\n<span>switch</span> (month) {\n    <span>// January, February, March</span>\n    <span>case</span> <span>0</span>:\n    <span>case</span> <span>1</span>:\n    <span>case</span> <span>2</span>:\n        console.log(<span>\"Winter\"</span>);\n        <span>break</span>;\n    <span>// April, May, June</span>\n    <span>case</span> <span>3</span>:\n    <span>case</span> <span>4</span>:\n    <span>case</span> <span>5</span>:\n        console.log(<span>\"Spring\"</span>);\n        <span>break</span>;\n    <span>// July, August, September</span>\n    <span>case</span> <span>6</span>:\n    <span>case</span> <span>7</span>:\n    <span>case</span> <span>8</span>:\n        console.log(<span>\"Summer\"</span>);\n        <span>break</span>;\n    <span>// October, November, December</span>\n    <span>case</span> <span>9</span>:\n    <span>case</span> <span>10</span>:\n    <span>case</span> <span>11</span>:\n        console.log(<span>\"Autumn\"</span>);\n        <span>break</span>;\n    <span>default</span>:\n        console.log(<span>\"Something went wrong.\"</span>);\n}\n</code></pre><p>When we run the code, we'll receive output identifying the current season based on the specifications above.</p><pre><code langs=\"\"><div title=\"Output\">Output</div>Summer\n</code></pre><p>The current month at the time of publication was&nbsp;<code>8</code>, which corresponded to one of the&nbsp;<code>case</code>&nbsp;statements with the&nbsp;<code>\"Summer\"</code>&nbsp;season output.</p><div data-unique=\"conclusion\"></div><h2>Conclusion</h2><p>In this article, we reviewed the&nbsp;<code>switch</code>&nbsp;statement, a type of&nbsp;<a href=\"https://www.digitalocean.com/community/tutorials/how-to-write-conditional-statements-in-javascript\">conditonal statement</a>&nbsp;which evaluates an expression and outputs different values based on matching results. We reviewed&nbsp;<code>switch</code>&nbsp;statements using a range and multiple&nbsp;<code>case</code>&nbsp;statements.</p><p>To learn more about&nbsp;<code>switch</code>, you can review it on the&nbsp;<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/switch\">Mozilla Developer Network</a>.</p>","filePath":"pages/JavaScript/.md","_id":"wRI5zxoVwCxguoeM","dateUpdated":1542212485654}
{"date":{"$$date":1542041456114},"title":"Creating Flexible Layouts with Flexbox","sourceUrl":"https://www.sitepoint.com/creating-flexible-layouts-with-flexbox/","path":"CSS/CSS/","category":"CSS","tags":["Flexbox"],"author":"Tiffany Brown","excerpt":"","dateCreated":1542041208942,"coverImage":"","type":"Post","frontmatter":"---\npath: 'CSS/'\ndate: 'Mon Nov 12 2018 22:19:24 GMT+0530 (India Standard Time)'\ntitle: 'Creating Flexible Layouts with Flexbox'\ntags: ['Flexbox']\ncategory: 'CSS'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://www.sitepoint.com/creating-flexible-layouts-with-flexbox/'\ntype: 'Post'\n---\n    ","htmlCode":"<p><em>The following introduction to Flexbox is an extract from Tiffany’s new book, <a href=\"https://www.sitepoint.com/premium/l/css-master2\">CSS Master, 2nd Edition</a>.</em></p>\n<p><strong>Before <a href=\"https://www.sitepoint.com/creating-css-grid-layouts/\">CSS Grid</a> came along, there was Flexbox (which is officially known as the <a href=\"https://www.w3.org/TR/css-flexbox-1/\">CSS Flexible Box Layout Module</a>). Flexbox was designed to manage layout in one direction—a row (<code>flex-direction: row</code> or <code>row-reverse</code>) <em>or</em> a column (<code>flex-direction: column</code> or <code>column-reverse</code>). That’s in contrast to Grid, which accounts for rows <em>and</em> columns.</strong></p>\n<p>A basic flexible box layout is simple to create: add <code>display: flex</code> or <code>display: inline-flex</code> to the containing element. These values for <code>display</code> will trigger a <em>flex formatting context</em> for that containing element’s children. As with Grid, both <code>flex</code> and <code>inline-flex</code> are inside display modes. We set these values on the container, which behaves like a block-level or inline-level box, respectively. The children of that container are then arranged according to the rules of flex layout.</p>\n<div><div><em>Note: Older versions of Blink-based browsers such as Chrome (≤ 28), and WebKit-based browsers like Safari (≤ 8), require a vendor prefix. If your project still supports those browsers, you’ll need to use <code>display: -webkit-flex</code> or <code>display: -webkit-inline-flex</code>. Older versions of Firefox (≤ 21) also require a prefix. Use <code>-moz-flex</code> and <code>-moz-inline-flex</code> to support those browsers.</em><br></div></div>\n<p>By adding <code>display: flex</code> or <code>display: inline-flex</code> to a containing element, its immediate children become flex items, as shown in the image below. Flex items may be element children or non-empty text nodes. For instance, the markup below generates three flex item boxes that each behave according to the rules of flex layout:</p>\n<pre><code><span>&lt;<span>div</span> <span>style</span>=<span>\"display: flex\"</span>&gt;</span>\n    <span>&lt;<span>span</span>&gt;</span>This text is contained by a SPAN element.<span>&lt;/<span>span</span>&gt;</span>\n    <span>&lt;<span>b</span>&gt;</span>This text is contained by a B element.<span>&lt;/<span>b</span>&gt;</span>\n    This text node is still a flex item.\n<span>&lt;/<span>div</span>&gt;</span>\n</code></pre>\n<p>If no other properties are set, each flex item will have the same height as its tallest element (as determined by content). It will also stack horizontally (or vertically when the document has a vertical writing mode) without wrapping, and with no space between the edges of each box. Flex items may overflow the container.</p>\n<div>\n<img src=\"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2018/09/1538106102LayoutFlexStack-1024x605.png\" alt=\"A list with display: flex applied to the ul containing element\" width=\"1024\" height=\"605\"><span>A list with <code>display: flex</code> applied to the <code>ul</code> containing element</span>\n</div>\n<p>This may not seem like such a big deal, but it simplifies the code necessary for a range of user interface patterns. Let’s look at a couple of examples.</p>\n<h2>A New Media Object Component</h2>\n<p>Take the following media object code:</p>\n<pre><code>&lt;div <span><span>class</span></span>=<span>\"media__object\"</span>&gt;\n    <span><span>&lt;<span>img</span> <span>src</span>=<span>\"video-thumb1.jpg\"</span>&gt;</span>\n    <span>&lt;<span>div</span> <span>class</span>=<span>\"media__object__text\"</span>&gt;</span>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.<span>&lt;/<span>div</span>&gt;</span>\n<span>&lt;/<span>div</span>&gt;</span></span>\n</code></pre>\n<p>Before Flexbox, we might have paired the preceding markup with the following CSS:</p>\n<pre><code><span>.media__object</span> <span>img</span> {\n    <span>float</span>: left;\n    <span>height</span>: auto;\n    <span>width</span>: <span>150px</span>;\n}\n<span>.media__object__text</span> {\n    <span>padding-left</span>: <span>170px</span>;\n}\n<span>/* Let's use the clearfix hack! */</span>\n<span>.media__object</span><span>::after</span>{\n    <span>content</span>: <span>' '</span>;\n    <span>display</span>: block;\n    <span>clear</span>: both;\n}\n</code></pre>\n<p>This layout works, but it has one major drawback: it requires us to constrain the width of our images so that we know how much padding to use. That limits our ability to use this same component in multiple contexts. You may want an image 150px wide when this component is used for a “Related Stories” widget, and one that’s only 75px wide for comments.</p>\n<p>Let’s try this using Flexbox. Here’s our updated CSS:</p>\n<pre><code><span>.media__object</span> {\n    <span>display</span>: flex;\n}\n<span>.media_object</span> <span>img</span> {\n    <span>margin-right</span>: <span>20px</span>;\n}\n</code></pre>\n<p>That’s a lot less CSS. An added bonus is that we don’t have to worry about how wide or tall our image is. Nor do we have to concern ourselves with clearing floats. Whether the image is 200px wide or 20px wide, <code>.media__object__text</code> will abut the margin box of our <code>img</code> element.</p>\n<h2>Creating Flexible Form Components with <code>flex</code></h2>\n<p>Another use case for Flexbox is creating flexible, vertically aligned form components. Consider the interface pattern shown in the image below.</p>\n<div>\n<img src=\"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2018/09/1538106494FieldAndButton-1024x398.png\" alt=\"A form field with an adjacent button\" width=\"1024\" height=\"398\"><span>A form field with an adjacent button</span>\n</div>\n<p>Here, we have a form input control and an adjacent button. Both are vertically aligned, and our button is 150px wide.</p>\n<p>What if we want our <code>input</code> element to expand to fill the available space in its container? Without Flexbox, we’d need some JavaScript and hand-waving to update the width of <code>input</code> in response to changes in the width of its parent. With Flexbox, however, we can just use <code>flex</code>.</p>\n<p>The <code>flex</code> property is actually shorthand for three other properties.</p>\n<ul><li><code>flex-grow</code> indicates that an element should grow if necessary and must be a positive integer. Its initial value is <code>0</code>.</li>\n<li><code>flex-shrink</code> indicates that an element should shrink if necessary and must be a positive integer. Its initial value is <code>1</code>.</li>\n<li><code>flex-basis:</code> indicates the initial or minimum width (when the flex axis is horizontal) or the height of an element (when it’s vertical). It may be a length or percentage, or <code>auto</code>, and its initial value is <code>auto</code>.</li>\n</ul><p>Though it’s possible to set each of these individually, the specification strongly recommends using the <code>flex</code> shorthand. Here’s an example:</p>\n<pre><code><span>div</span> {\n    <span>display</span>: flex;\n}\n<span>input</span><span>[type=\"text\"]</span>, <span>button</span> {\n    <span>border</span>: <span>0</span>;\n    <span>font</span>: inherit;\n}\n<span>input</span><span>[type=\"text\"]</span> {\n    <span>flex</span>: <span>1</span> <span>0</span> auto;   \n}\n<span>button</span> {\n    <span>background</span>: <span>#003</span>;\n    <span>color</span>: whitesmoke;\n    <span>display</span>: block;\n    <span>text-align</span>: center;\n    <span>flex</span>: <span>0</span> <span>0</span> <span>150px</span>;\n}\n</code></pre>\n<p>Here, we’ve used <code>flex: 1 0 auto</code> for our <code>input</code> element. Since its <code>flex-grow</code> value is <code>1</code>, it will grow to fill the available space of its parent. For the <code>button</code> element, however, we’ve used <code>flex: 0 0 150px</code>. The <code>0</code> values for <code>flex-grow</code> and <code>flex-shrink</code> prevent the width of the button from increasing or decreasing, while the <code>flex-basis</code> value of <code>150px</code> sets its width.</p>\n<p>As you can see in the image below, our button remains the same size, but the width of <code>input</code> expands to fill the remaining space.</p>\n<div>\n<img src=\"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2018/09/1538106585FieldAndButton2-1024x398.png\" alt=\"The effect of flex: 0 0 150px\" width=\"1024\" height=\"398\"><span>The effect of <code>flex: 0 0 150px</code></span>\n</div>\n<p>The tricky bit about <code>flex-grow</code> and <code>flex-shrink</code> values is that they’re proportional. Yes, <code>flex: 1 0 auto</code> means our <code>input</code> element will be wider than our button. But changing the value of our button’s <code>flex</code> property to <code>flex: 1 0 auto</code> doesn’t necessarily mean that both elements will have the same size, as shown in the following image.</p>\n<div>\n<img src=\"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2018/09/1538106670FlexNoEqual-1024x398.png\" alt=\"Both items have the same flex value but are still different sizes\" width=\"1024\" height=\"398\"><span>Both items have the same flex value but are still different sizes</span>\n</div>\n<p>Instead, flex items will be resized to fill the container, taking their used <code>min-width</code> and <code>max-width</code> values into account (which may be their initial values).</p>\n<p>Unfortunately, we can’t use <code>fr</code> units with the <code>flex</code> or <code>flex-basis</code> properties. Use length or percentage values instead.</p>\n<h2>Vertical Centering with Flexbox</h2>\n<p>Finally, let’s take a look at how to vertically center content with Flexbox. Vertically centering elements is one of the more difficult tasks to achieve with CSS, particularly if the height of your content is unknown. But with Flexbox, we require just one additional line of CSS—<code>align-items: center</code>:</p>\n<pre><code><span>.flex-container</span> {\n    <span>display</span>: flex;\n    <span>align-items</span>: center;\n}\n</code></pre>\n<p>Now our flex items and their contents are vertically centered within the flex container, as shown in the image below.</p>\n<div>\n<img src=\"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2018/09/1538106745LayoutFlexVerticalCentering-1024x605.png\" alt=\"Distributing flex items with align-items: center\" width=\"1024\" height=\"605\"><span>Distributing flex items with <code>align-items: center</code></span>\n</div>\n<h2>Creating Grid-like Layouts with Flexbox</h2>\n<p>In most cases, you’ll want to use Grid to create grid-like layouts. However, you may find yourself wanting boxes that align when there’s an even number of items, but expand to fill the available space when there’s an odd number.</p>\n<div>\n<img src=\"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2018/09/1538106815LayoutFlexBoxGrid-1024x674.png\" alt=\"A grid-like layout with expanding cells\" width=\"1024\" height=\"674\"><span>A grid-like layout with expanding cells</span>\n</div>\n<p>Here’s the markup we’ll use:</p>\n<pre><code><span>&lt;<span>ul</span> <span>class</span>=<span>\"flex-aligned\"</span>&gt;</span>\n    <span>&lt;<span>li</span>&gt;</span>A<span>&lt;/<span>li</span>&gt;</span>\n    <span>&lt;<span>li</span>&gt;</span>B<span>&lt;/<span>li</span>&gt;</span>\n    <span>&lt;<span>li</span>&gt;</span>C<span>&lt;/<span>li</span>&gt;</span>\n    <span>&lt;<span>li</span>&gt;</span>D<span>&lt;/<span>li</span>&gt;</span>\n    <span>&lt;<span>li</span>&gt;</span>E<span>&lt;/<span>li</span>&gt;</span>\n    <span>&lt;<span>li</span>&gt;</span>F<span>&lt;/<span>li</span>&gt;</span>\n    <span>&lt;<span>li</span>&gt;</span>G<span>&lt;/<span>li</span>&gt;</span>\n<span>&lt;/<span>li</span>&gt;</span>\n</code></pre>\n<p>By default, flex items don’t wrap. To achieve the layout above, we’ll need to make them wrap using the <code>flex-wrap</code> property. It accepts three values: <code>nowrap</code> (the inital value), <code>wrap</code>, and <code>wrap-reverse</code>. We’ll use <code>wrap</code> here:</p>\n<pre><code><span>.flex-aligned</span> {\n    <span>display</span>: flex;\n    <span>flex-wrap</span>: wrap;\n}\n</code></pre>\n<p>Now we just need to indicate how our flex items should behave, and what their maximum width should be. Since we want a maximum of four columns, we’ll set our <code>flex-basis</code> value to <code>25%</code>. And since we want our flex items to expand to fill the available space, we’ll set <code>flex-grow</code> to 1. We’ll keep <code>flex-shrink</code> at 0 so that our boxes never occupy less than 25% of their container:</p>\n<pre><code><span>.flex-aligned</span> <span>li</span> {\n    <span>flex</span>: <span>1</span> <span>0</span> <span>25%</span>;\n}\n</code></pre>\n<h2>Learning More about Flexbox</h2>\n<p>There’s a lot more to Flexbox than what we’ve covered here. CSS-Tricks’ “<a href=\"https://css-tricks.com/snippets/css/a-guide-to-flexbox/\">A Complete Guide to Flexbox</a>” digs into all the properties and values. You can also check out Philip Walton’s “<a href=\"http://philipwalton.github.io/solved-by-flexbox/\">Solved by Flexbox</a>”, which showcases UI patterns that are made easier with Flexbox.</p>\n<h2>Choosing <code>flex</code> or <code>grid</code></h2>\n<p>As you develop page or component layouts, you may find yourself wondering when it’s better to use Flexbox and when to use Grid.</p>\n<ul><li>Use Grid when you want to arrange elements into rows <em>and</em> columns that align both horizontally and vertically.</li>\n<li>Use Flexbox when you want to arrange items in a row <em>or</em> a column, when you wish to align items vertically or horizontally, but not both.</li>\n</ul><p>Jen Simmons’ video “<a href=\"https://www.youtube.com/watch?v=hs3piaN4b5I\">Flexbox vs. CSS Grid — Which is Better?</a>” walks you through some things to consider when choosing between Grid and Flexbox. Rachel Andrew’s “<a href=\"https://www.rachelandrew.co.uk/archives/2016/03/30/should-i-use-grid-or-flexbox/\">Should I use Grid or Flexbox?</a>” is another great resource for understanding both.</p>\n<p>In practice, your projects will probably mix both of these techniques, as well as floats. For instance, you may use Grid to define the overall page layout, while using Flexbox for your navigation menu or search box, and floats to place tables or images.</p>","filePath":"pages/CSS/.md","_id":"y0HOK6TwyZIPO7Nz","dateUpdated":1542041456114}
{"$$indexCreated":{"fieldName":"name","unique":false,"sparse":false}}
